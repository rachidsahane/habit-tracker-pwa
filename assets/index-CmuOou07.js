(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function j0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Cp={exports:{}},Kl={},Pp={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function HS(){if(d_)return Ce;d_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function T(F){return F===null||typeof F!="object"?null:(F=w&&F[w]||F["@@iterator"],typeof F=="function"?F:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,M={};function L(F,Y,ve){this.props=F,this.context=Y,this.refs=M,this.updater=ve||S}L.prototype.isReactComponent={},L.prototype.setState=function(F,Y){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Y,"setState")},L.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function Q(){}Q.prototype=L.prototype;function J(F,Y,ve){this.props=F,this.context=Y,this.refs=M,this.updater=ve||S}var W=J.prototype=new Q;W.constructor=J,V(W,L.prototype),W.isPureReactComponent=!0;var oe=Array.isArray,ce=Object.prototype.hasOwnProperty,X={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function k(F,Y,ve){var be,Re={},Ve=null,Fe=null;if(Y!=null)for(be in Y.ref!==void 0&&(Fe=Y.ref),Y.key!==void 0&&(Ve=""+Y.key),Y)ce.call(Y,be)&&!C.hasOwnProperty(be)&&(Re[be]=Y[be]);var Ue=arguments.length-2;if(Ue===1)Re.children=ve;else if(1<Ue){for(var Ge=Array(Ue),kt=0;kt<Ue;kt++)Ge[kt]=arguments[kt+2];Re.children=Ge}if(F&&F.defaultProps)for(be in Ue=F.defaultProps,Ue)Re[be]===void 0&&(Re[be]=Ue[be]);return{$$typeof:n,type:F,key:Ve,ref:Fe,props:Re,_owner:X.current}}function A(F,Y){return{$$typeof:n,type:F.type,key:Y,ref:F.ref,props:F.props,_owner:F._owner}}function N(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function D(F){var Y={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ve){return Y[ve]})}var j=/\/+/g;function R(F,Y){return typeof F=="object"&&F!==null&&F.key!=null?D(""+F.key):Y.toString(36)}function ct(F,Y,ve,be,Re){var Ve=typeof F;(Ve==="undefined"||Ve==="boolean")&&(F=null);var Fe=!1;if(F===null)Fe=!0;else switch(Ve){case"string":case"number":Fe=!0;break;case"object":switch(F.$$typeof){case n:case e:Fe=!0}}if(Fe)return Fe=F,Re=Re(Fe),F=be===""?"."+R(Fe,0):be,oe(Re)?(ve="",F!=null&&(ve=F.replace(j,"$&/")+"/"),ct(Re,Y,ve,"",function(kt){return kt})):Re!=null&&(N(Re)&&(Re=A(Re,ve+(!Re.key||Fe&&Fe.key===Re.key?"":(""+Re.key).replace(j,"$&/")+"/")+F)),Y.push(Re)),1;if(Fe=0,be=be===""?".":be+":",oe(F))for(var Ue=0;Ue<F.length;Ue++){Ve=F[Ue];var Ge=be+R(Ve,Ue);Fe+=ct(Ve,Y,ve,Ge,Re)}else if(Ge=T(F),typeof Ge=="function")for(F=Ge.call(F),Ue=0;!(Ve=F.next()).done;)Ve=Ve.value,Ge=be+R(Ve,Ue++),Fe+=ct(Ve,Y,ve,Ge,Re);else if(Ve==="object")throw Y=String(F),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Fe}function Ft(F,Y,ve){if(F==null)return F;var be=[],Re=0;return ct(F,be,"","",function(Ve){return Y.call(ve,Ve,Re++)}),be}function Ut(F){if(F._status===-1){var Y=F._result;Y=Y(),Y.then(function(ve){(F._status===0||F._status===-1)&&(F._status=1,F._result=ve)},function(ve){(F._status===0||F._status===-1)&&(F._status=2,F._result=ve)}),F._status===-1&&(F._status=0,F._result=Y)}if(F._status===1)return F._result.default;throw F._result}var We={current:null},ae={transition:null},we={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:ae,ReactCurrentOwner:X};function he(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:Ft,forEach:function(F,Y,ve){Ft(F,function(){Y.apply(this,arguments)},ve)},count:function(F){var Y=0;return Ft(F,function(){Y++}),Y},toArray:function(F){return Ft(F,function(Y){return Y})||[]},only:function(F){if(!N(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Ce.Component=L,Ce.Fragment=t,Ce.Profiler=s,Ce.PureComponent=J,Ce.StrictMode=r,Ce.Suspense=f,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=we,Ce.act=he,Ce.cloneElement=function(F,Y,ve){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var be=V({},F.props),Re=F.key,Ve=F.ref,Fe=F._owner;if(Y!=null){if(Y.ref!==void 0&&(Ve=Y.ref,Fe=X.current),Y.key!==void 0&&(Re=""+Y.key),F.type&&F.type.defaultProps)var Ue=F.type.defaultProps;for(Ge in Y)ce.call(Y,Ge)&&!C.hasOwnProperty(Ge)&&(be[Ge]=Y[Ge]===void 0&&Ue!==void 0?Ue[Ge]:Y[Ge])}var Ge=arguments.length-2;if(Ge===1)be.children=ve;else if(1<Ge){Ue=Array(Ge);for(var kt=0;kt<Ge;kt++)Ue[kt]=arguments[kt+2];be.children=Ue}return{$$typeof:n,type:F.type,key:Re,ref:Ve,props:be,_owner:Fe}},Ce.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:a,_context:F},F.Consumer=F},Ce.createElement=k,Ce.createFactory=function(F){var Y=k.bind(null,F);return Y.type=F,Y},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(F){return{$$typeof:h,render:F}},Ce.isValidElement=N,Ce.lazy=function(F){return{$$typeof:v,_payload:{_status:-1,_result:F},_init:Ut}},Ce.memo=function(F,Y){return{$$typeof:m,type:F,compare:Y===void 0?null:Y}},Ce.startTransition=function(F){var Y=ae.transition;ae.transition={};try{F()}finally{ae.transition=Y}},Ce.unstable_act=he,Ce.useCallback=function(F,Y){return We.current.useCallback(F,Y)},Ce.useContext=function(F){return We.current.useContext(F)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(F){return We.current.useDeferredValue(F)},Ce.useEffect=function(F,Y){return We.current.useEffect(F,Y)},Ce.useId=function(){return We.current.useId()},Ce.useImperativeHandle=function(F,Y,ve){return We.current.useImperativeHandle(F,Y,ve)},Ce.useInsertionEffect=function(F,Y){return We.current.useInsertionEffect(F,Y)},Ce.useLayoutEffect=function(F,Y){return We.current.useLayoutEffect(F,Y)},Ce.useMemo=function(F,Y){return We.current.useMemo(F,Y)},Ce.useReducer=function(F,Y,ve){return We.current.useReducer(F,Y,ve)},Ce.useRef=function(F){return We.current.useRef(F)},Ce.useState=function(F){return We.current.useState(F)},Ce.useSyncExternalStore=function(F,Y,ve){return We.current.useSyncExternalStore(F,Y,ve)},Ce.useTransition=function(){return We.current.useTransition()},Ce.version="18.3.1",Ce}var f_;function Om(){return f_||(f_=1,Pp.exports=HS()),Pp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function WS(){if(p_)return Kl;p_=1;var n=Om(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,m){var v,w={},T=null,S=null;m!==void 0&&(T=""+m),f.key!==void 0&&(T=""+f.key),f.ref!==void 0&&(S=f.ref);for(v in f)r.call(f,v)&&!a.hasOwnProperty(v)&&(w[v]=f[v]);if(h&&h.defaultProps)for(v in f=h.defaultProps,f)w[v]===void 0&&(w[v]=f[v]);return{$$typeof:e,type:h,key:T,ref:S,props:w,_owner:s.current}}return Kl.Fragment=t,Kl.jsx=u,Kl.jsxs=u,Kl}var m_;function KS(){return m_||(m_=1,Cp.exports=WS()),Cp.exports}var E=KS(),q=Om();const eu=j0(q);var ph={},Np={exports:{}},hn={},Dp={exports:{}},Vp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_;function GS(){return g_||(g_=1,(function(n){function e(ae,we){var he=ae.length;ae.push(we);e:for(;0<he;){var F=he-1>>>1,Y=ae[F];if(0<s(Y,we))ae[F]=we,ae[he]=Y,he=F;else break e}}function t(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var we=ae[0],he=ae.pop();if(he!==we){ae[0]=he;e:for(var F=0,Y=ae.length,ve=Y>>>1;F<ve;){var be=2*(F+1)-1,Re=ae[be],Ve=be+1,Fe=ae[Ve];if(0>s(Re,he))Ve<Y&&0>s(Fe,Re)?(ae[F]=Fe,ae[Ve]=he,F=Ve):(ae[F]=Re,ae[be]=he,F=be);else if(Ve<Y&&0>s(Fe,he))ae[F]=Fe,ae[Ve]=he,F=Ve;else break e}}return we}function s(ae,we){var he=ae.sortIndex-we.sortIndex;return he!==0?he:ae.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var f=[],m=[],v=1,w=null,T=3,S=!1,V=!1,M=!1,L=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(ae){for(var we=t(m);we!==null;){if(we.callback===null)r(m);else if(we.startTime<=ae)r(m),we.sortIndex=we.expirationTime,e(f,we);else break;we=t(m)}}function oe(ae){if(M=!1,W(ae),!V)if(t(f)!==null)V=!0,Ut(ce);else{var we=t(m);we!==null&&We(oe,we.startTime-ae)}}function ce(ae,we){V=!1,M&&(M=!1,Q(k),k=-1),S=!0;var he=T;try{for(W(we),w=t(f);w!==null&&(!(w.expirationTime>we)||ae&&!D());){var F=w.callback;if(typeof F=="function"){w.callback=null,T=w.priorityLevel;var Y=F(w.expirationTime<=we);we=n.unstable_now(),typeof Y=="function"?w.callback=Y:w===t(f)&&r(f),W(we)}else r(f);w=t(f)}if(w!==null)var ve=!0;else{var be=t(m);be!==null&&We(oe,be.startTime-we),ve=!1}return ve}finally{w=null,T=he,S=!1}}var X=!1,C=null,k=-1,A=5,N=-1;function D(){return!(n.unstable_now()-N<A)}function j(){if(C!==null){var ae=n.unstable_now();N=ae;var we=!0;try{we=C(!0,ae)}finally{we?R():(X=!1,C=null)}}else X=!1}var R;if(typeof J=="function")R=function(){J(j)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,Ft=ct.port2;ct.port1.onmessage=j,R=function(){Ft.postMessage(null)}}else R=function(){L(j,0)};function Ut(ae){C=ae,X||(X=!0,R())}function We(ae,we){k=L(function(){ae(n.unstable_now())},we)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ae){ae.callback=null},n.unstable_continueExecution=function(){V||S||(V=!0,Ut(ce))},n.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ae?Math.floor(1e3/ae):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ae){switch(T){case 1:case 2:case 3:var we=3;break;default:we=T}var he=T;T=we;try{return ae()}finally{T=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ae,we){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var he=T;T=ae;try{return we()}finally{T=he}},n.unstable_scheduleCallback=function(ae,we,he){var F=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?F+he:F):he=F,ae){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=he+Y,ae={id:v++,callback:we,priorityLevel:ae,startTime:he,expirationTime:Y,sortIndex:-1},he>F?(ae.sortIndex=he,e(m,ae),t(f)===null&&ae===t(m)&&(M?(Q(k),k=-1):M=!0,We(oe,he-F))):(ae.sortIndex=Y,e(f,ae),V||S||(V=!0,Ut(ce))),ae},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(ae){var we=T;return function(){var he=T;T=we;try{return ae.apply(this,arguments)}finally{T=he}}}})(Vp)),Vp}var y_;function QS(){return y_||(y_=1,Dp.exports=GS()),Dp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_;function XS(){if(v_)return hn;v_=1;var n=Om(),e=QS();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function T(i){return f.call(w,i)?!0:f.call(v,i)?!1:m.test(i)?w[i]=!0:(v[i]=!0,!1)}function S(i,o,l,d){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function V(i,o,l,d){if(o===null||typeof o>"u"||S(i,o,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function M(i,o,l,d,p,y,I){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=I}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){L[i]=new M(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];L[o]=new M(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){L[i]=new M(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){L[i]=new M(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){L[i]=new M(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){L[i]=new M(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){L[i]=new M(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){L[i]=new M(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){L[i]=new M(i,5,!1,i.toLowerCase(),null,!1,!1)});var Q=/[\-:]([a-z])/g;function J(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(Q,J);L[o]=new M(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(Q,J);L[o]=new M(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(Q,J);L[o]=new M(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){L[i]=new M(i,1,!1,i.toLowerCase(),null,!1,!1)}),L.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){L[i]=new M(i,1,!1,i.toLowerCase(),null,!0,!0)});function W(i,o,l,d){var p=L.hasOwnProperty(o)?L[o]:null;(p!==null?p.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(V(o,l,p,d)&&(l=null),d||p===null?T(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,d=p.attributeNamespace,l===null?i.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,d?i.setAttributeNS(d,o,l):i.setAttribute(o,l))))}var oe=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ce=Symbol.for("react.element"),X=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),D=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),ct=Symbol.for("react.suspense_list"),Ft=Symbol.for("react.memo"),Ut=Symbol.for("react.lazy"),We=Symbol.for("react.offscreen"),ae=Symbol.iterator;function we(i){return i===null||typeof i!="object"?null:(i=ae&&i[ae]||i["@@iterator"],typeof i=="function"?i:null)}var he=Object.assign,F;function Y(i){if(F===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);F=o&&o[1]||""}return`
`+F+i}var ve=!1;function be(i,o){if(!i||ve)return"";ve=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(H){var d=H}Reflect.construct(i,[],o)}else{try{o.call()}catch(H){d=H}i.call(o.prototype)}else{try{throw Error()}catch(H){d=H}i()}}catch(H){if(H&&d&&typeof H.stack=="string"){for(var p=H.stack.split(`
`),y=d.stack.split(`
`),I=p.length-1,b=y.length-1;1<=I&&0<=b&&p[I]!==y[b];)b--;for(;1<=I&&0<=b;I--,b--)if(p[I]!==y[b]){if(I!==1||b!==1)do if(I--,b--,0>b||p[I]!==y[b]){var P=`
`+p[I].replace(" at new "," at ");return i.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",i.displayName)),P}while(1<=I&&0<=b);break}}}finally{ve=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?Y(i):""}function Re(i){switch(i.tag){case 5:return Y(i.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return i=be(i.type,!1),i;case 11:return i=be(i.type.render,!1),i;case 1:return i=be(i.type,!0),i;default:return""}}function Ve(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case C:return"Fragment";case X:return"Portal";case A:return"Profiler";case k:return"StrictMode";case R:return"Suspense";case ct:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case D:return(i.displayName||"Context")+".Consumer";case N:return(i._context.displayName||"Context")+".Provider";case j:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ft:return o=i.displayName||null,o!==null?o:Ve(i.type)||"Memo";case Ut:o=i._payload,i=i._init;try{return Ve(i(o))}catch{}}return null}function Fe(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(o);case 8:return o===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ue(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ge(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function kt(i){var o=Ge(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(I){d=""+I,y.call(this,I)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(I){d=""+I},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Or(i){i._valueTracker||(i._valueTracker=kt(i))}function _o(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),d="";return i&&(d=Ge(i)?i.checked?"true":"false":i.value),i=d,i!==l?(o.setValue(i),!0):!1}function fi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function us(i,o){var l=o.checked;return he({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function wo(i,o){var l=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;l=Ue(o.value!=null?o.value:l),i._wrapperState={initialChecked:d,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Za(i,o){o=o.checked,o!=null&&W(i,"checked",o,!1)}function el(i,o){Za(i,o);var l=Ue(o.value),d=o.type;if(l!=null)d==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Eo(i,o.type,l):o.hasOwnProperty("defaultValue")&&Eo(i,o.type,Ue(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Zu(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function Eo(i,o,l){(o!=="number"||fi(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var Lr=Array.isArray;function Mr(i,o,l,d){if(i=i.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=o.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&d&&(i[l].defaultSelected=!0)}else{for(l=""+Ue(l),o=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,d&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function tl(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return he({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Io(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(Lr(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:Ue(l)}}function To(i,o){var l=Ue(o.value),d=Ue(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),d!=null&&(i.defaultValue=""+d)}function nl(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function _t(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wt(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?_t(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var jr,rl=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,d,p){MSApp.execUnsafeLocalFunction(function(){return i(o,l,d,p)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(jr=jr||document.createElement("div"),jr.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=jr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function pi(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var cs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hs=["Webkit","ms","Moz","O"];Object.keys(cs).forEach(function(i){hs.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),cs[o]=cs[i]})});function il(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||cs.hasOwnProperty(i)&&cs[i]?(""+o).trim():o+"px"}function sl(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var d=l.indexOf("--")===0,p=il(l,o[l],d);l==="float"&&(l="cssFloat"),d?i.setProperty(l,p):i[l]=p}}var ol=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function al(i,o){if(o){if(ol[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function ll(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ds=null;function xo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var So=null,kn=null,hr=null;function ko(i){if(i=Nl(i)){if(typeof So!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Rc(o),So(i.stateNode,i.type,o))}}function dr(i){kn?hr?hr.push(i):hr=[i]:kn=i}function ul(){if(kn){var i=kn,o=hr;if(hr=kn=null,ko(i),o)for(i=0;i<o.length;i++)ko(o[i])}}function fs(i,o){return i(o)}function cl(){}var Fr=!1;function hl(i,o,l){if(Fr)return i(o,l);Fr=!0;try{return fs(i,o,l)}finally{Fr=!1,(kn!==null||hr!==null)&&(cl(),ul())}}function ht(i,o){var l=i.stateNode;if(l===null)return null;var d=Rc(l);if(d===null)return null;l=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var bo=!1;if(h)try{var zn={};Object.defineProperty(zn,"passive",{get:function(){bo=!0}}),window.addEventListener("test",zn,zn),window.removeEventListener("test",zn,zn)}catch{bo=!1}function ps(i,o,l,d,p,y,I,b,P){var H=Array.prototype.slice.call(arguments,3);try{o.apply(l,H)}catch(ee){this.onError(ee)}}var ms=!1,Ao=null,$n=!1,dl=null,rf={onError:function(i){ms=!0,Ao=i}};function Ro(i,o,l,d,p,y,I,b,P){ms=!1,Ao=null,ps.apply(rf,arguments)}function ec(i,o,l,d,p,y,I,b,P){if(Ro.apply(this,arguments),ms){if(ms){var H=Ao;ms=!1,Ao=null}else throw Error(t(198));$n||($n=!0,dl=H)}}function qn(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function gs(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Hn(i){if(qn(i)!==i)throw Error(t(188))}function tc(i){var o=i.alternate;if(!o){if(o=qn(i),o===null)throw Error(t(188));return o!==i?null:i}for(var l=i,d=o;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return Hn(p),i;if(y===d)return Hn(p),o;y=y.sibling}throw Error(t(188))}if(l.return!==d.return)l=p,d=y;else{for(var I=!1,b=p.child;b;){if(b===l){I=!0,l=p,d=y;break}if(b===d){I=!0,d=p,l=y;break}b=b.sibling}if(!I){for(b=y.child;b;){if(b===l){I=!0,l=y,d=p;break}if(b===d){I=!0,d=y,l=p;break}b=b.sibling}if(!I)throw Error(t(189))}}if(l.alternate!==d)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:o}function fl(i){return i=tc(i),i!==null?Co(i):null}function Co(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Co(i);if(o!==null)return o;i=i.sibling}return null}var Po=e.unstable_scheduleCallback,pl=e.unstable_cancelCallback,nc=e.unstable_shouldYield,sf=e.unstable_requestPaint,Qe=e.unstable_now,rc=e.unstable_getCurrentPriorityLevel,ys=e.unstable_ImmediatePriority,mi=e.unstable_UserBlockingPriority,bn=e.unstable_NormalPriority,ml=e.unstable_LowPriority,ic=e.unstable_IdlePriority,vs=null,mn=null;function sc(i){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(vs,i,void 0,(i.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:ac,gl=Math.log,oc=Math.LN2;function ac(i){return i>>>=0,i===0?32:31-(gl(i)/oc|0)|0}var No=64,Do=4194304;function gi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function _s(i,o){var l=i.pendingLanes;if(l===0)return 0;var d=0,p=i.suspendedLanes,y=i.pingedLanes,I=l&268435455;if(I!==0){var b=I&~p;b!==0?d=gi(b):(y&=I,y!==0&&(d=gi(y)))}else I=l&~p,I!==0?d=gi(I):y!==0&&(d=gi(y));if(d===0)return 0;if(o!==0&&o!==d&&(o&p)===0&&(p=d&-d,y=o&-o,p>=y||p===16&&(y&4194240)!==0))return o;if((d&4)!==0&&(d|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=d;0<o;)l=31-Xt(o),p=1<<l,d|=i[l],o&=~p;return d}function of(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ur(i,o){for(var l=i.suspendedLanes,d=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes;0<y;){var I=31-Xt(y),b=1<<I,P=p[I];P===-1?((b&l)===0||(b&d)!==0)&&(p[I]=of(b,o)):P<=o&&(i.expiredLanes|=b),y&=~b}}function gn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function ws(){var i=No;return No<<=1,(No&4194240)===0&&(No=64),i}function yi(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function vi(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Xt(o),i[o]=l}function Ke(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-Xt(l),y=1<<p;o[p]=0,d[p]=-1,i[p]=-1,l&=~y}}function _i(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var d=31-Xt(l),p=1<<d;p&o|i[d]&o&&(i[d]|=o),l&=~p}}var De=0;function wi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var lc,Vo,uc,cc,hc,yl=!1,fr=[],Dt=null,Wn=null,Kn=null,Ei=new Map,An=new Map,pr=[],af="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dc(i,o){switch(i){case"focusin":case"focusout":Dt=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":Ei.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":An.delete(o.pointerId)}}function rn(i,o,l,d,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:l,eventSystemFlags:d,nativeEvent:y,targetContainers:[p]},o!==null&&(o=Nl(o),o!==null&&Vo(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function lf(i,o,l,d,p){switch(o){case"focusin":return Dt=rn(Dt,i,o,l,d,p),!0;case"dragenter":return Wn=rn(Wn,i,o,l,d,p),!0;case"mouseover":return Kn=rn(Kn,i,o,l,d,p),!0;case"pointerover":var y=p.pointerId;return Ei.set(y,rn(Ei.get(y)||null,i,o,l,d,p)),!0;case"gotpointercapture":return y=p.pointerId,An.set(y,rn(An.get(y)||null,i,o,l,d,p)),!0}return!1}function fc(i){var o=Ss(i.target);if(o!==null){var l=qn(o);if(l!==null){if(o=l.tag,o===13){if(o=gs(l),o!==null){i.blockedOn=o,hc(i.priority,function(){uc(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Br(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=Oo(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);ds=d,l.target.dispatchEvent(d),ds=null}else return o=Nl(l),o!==null&&Vo(o),i.blockedOn=l,!1;o.shift()}return!0}function Es(i,o,l){Br(i)&&l.delete(o)}function pc(){yl=!1,Dt!==null&&Br(Dt)&&(Dt=null),Wn!==null&&Br(Wn)&&(Wn=null),Kn!==null&&Br(Kn)&&(Kn=null),Ei.forEach(Es),An.forEach(Es)}function Gn(i,o){i.blockedOn===o&&(i.blockedOn=null,yl||(yl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,pc)))}function Qn(i){function o(p){return Gn(p,i)}if(0<fr.length){Gn(fr[0],i);for(var l=1;l<fr.length;l++){var d=fr[l];d.blockedOn===i&&(d.blockedOn=null)}}for(Dt!==null&&Gn(Dt,i),Wn!==null&&Gn(Wn,i),Kn!==null&&Gn(Kn,i),Ei.forEach(o),An.forEach(o),l=0;l<pr.length;l++)d=pr[l],d.blockedOn===i&&(d.blockedOn=null);for(;0<pr.length&&(l=pr[0],l.blockedOn===null);)fc(l),l.blockedOn===null&&pr.shift()}var zr=oe.ReactCurrentBatchConfig,Ii=!0;function Ze(i,o,l,d){var p=De,y=zr.transition;zr.transition=null;try{De=1,vl(i,o,l,d)}finally{De=p,zr.transition=y}}function uf(i,o,l,d){var p=De,y=zr.transition;zr.transition=null;try{De=4,vl(i,o,l,d)}finally{De=p,zr.transition=y}}function vl(i,o,l,d){if(Ii){var p=Oo(i,o,l,d);if(p===null)wf(i,o,d,Is,l),dc(i,d);else if(lf(p,i,o,l,d))d.stopPropagation();else if(dc(i,d),o&4&&-1<af.indexOf(i)){for(;p!==null;){var y=Nl(p);if(y!==null&&lc(y),y=Oo(i,o,l,d),y===null&&wf(i,o,d,Is,l),y===p)break;p=y}p!==null&&d.stopPropagation()}else wf(i,o,d,null,l)}}var Is=null;function Oo(i,o,l,d){if(Is=null,i=xo(d),i=Ss(i),i!==null)if(o=qn(i),o===null)i=null;else if(l=o.tag,l===13){if(i=gs(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Is=i,null}function _l(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rc()){case ys:return 1;case mi:return 4;case bn:case ml:return 16;case ic:return 536870912;default:return 16}default:return 16}}var yn=null,Lo=null,sn=null;function wl(){if(sn)return sn;var i,o=Lo,l=o.length,d,p="value"in yn?yn.value:yn.textContent,y=p.length;for(i=0;i<l&&o[i]===p[i];i++);var I=l-i;for(d=1;d<=I&&o[l-d]===p[y-d];d++);return sn=p.slice(i,1<d?1-d:void 0)}function Mo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function mr(){return!0}function El(){return!1}function Vt(i){function o(l,d,p,y,I){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=y,this.target=I,this.currentTarget=null;for(var b in i)i.hasOwnProperty(b)&&(l=i[b],this[b]=l?l(y):y[b]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?mr:El,this.isPropagationStopped=El,this}return he(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=mr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=mr)},persist:function(){},isPersistent:mr}),o}var Xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jo=Vt(Xn),gr=he({},Xn,{view:0,detail:0}),cf=Vt(gr),Fo,$r,Ti,Ts=he({},gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ti&&(Ti&&i.type==="mousemove"?(Fo=i.screenX-Ti.screenX,$r=i.screenY-Ti.screenY):$r=Fo=0,Ti=i),Fo)},movementY:function(i){return"movementY"in i?i.movementY:$r}}),Uo=Vt(Ts),Il=he({},Ts,{dataTransfer:0}),mc=Vt(Il),Bo=he({},gr,{relatedTarget:0}),zo=Vt(Bo),gc=he({},Xn,{animationName:0,elapsedTime:0,pseudoElement:0}),qr=Vt(gc),yc=he({},Xn,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),vc=Vt(yc),_c=he({},Xn,{data:0}),Tl=Vt(_c),$o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ec(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=wc[i])?!!o[i]:!1}function yr(){return Ec}var c=he({},gr,{key:function(i){if(i.key){var o=$o[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Mo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Yt[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yr,charCode:function(i){return i.type==="keypress"?Mo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Mo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=Vt(c),_=he({},Ts,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x=Vt(_),U=he({},gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yr}),K=Vt(U),se=he({},Xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ze=Vt(se),Et=he({},Ts,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Oe=Vt(Et),bt=[9,13,27,32],ft=h&&"CompositionEvent"in window,Rn=null;h&&"documentMode"in document&&(Rn=document.documentMode);var vn=h&&"TextEvent"in window&&!Rn,xs=h&&(!ft||Rn&&8<Rn&&11>=Rn),qo=" ",oy=!1;function ay(i,o){switch(i){case"keyup":return bt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ly(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ho=!1;function zx(i,o){switch(i){case"compositionend":return ly(o);case"keypress":return o.which!==32?null:(oy=!0,qo);case"textInput":return i=o.data,i===qo&&oy?null:i;default:return null}}function $x(i,o){if(Ho)return i==="compositionend"||!ft&&ay(i,o)?(i=wl(),sn=Lo=yn=null,Ho=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return xs&&o.locale!=="ko"?null:o.data;default:return null}}var qx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uy(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!qx[i.type]:o==="textarea"}function cy(i,o,l,d){dr(d),o=kc(o,"onChange"),0<o.length&&(l=new jo("onChange","change",null,l,d),i.push({event:l,listeners:o}))}var xl=null,Sl=null;function Hx(i){Ay(i,0)}function Ic(i){var o=Xo(i);if(_o(o))return i}function Wx(i,o){if(i==="change")return o}var hy=!1;if(h){var hf;if(h){var df="oninput"in document;if(!df){var dy=document.createElement("div");dy.setAttribute("oninput","return;"),df=typeof dy.oninput=="function"}hf=df}else hf=!1;hy=hf&&(!document.documentMode||9<document.documentMode)}function fy(){xl&&(xl.detachEvent("onpropertychange",py),Sl=xl=null)}function py(i){if(i.propertyName==="value"&&Ic(Sl)){var o=[];cy(o,Sl,i,xo(i)),hl(Hx,o)}}function Kx(i,o,l){i==="focusin"?(fy(),xl=o,Sl=l,xl.attachEvent("onpropertychange",py)):i==="focusout"&&fy()}function Gx(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ic(Sl)}function Qx(i,o){if(i==="click")return Ic(o)}function Xx(i,o){if(i==="input"||i==="change")return Ic(o)}function Yx(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Yn=typeof Object.is=="function"?Object.is:Yx;function kl(i,o){if(Yn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),d=Object.keys(o);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!f.call(o,p)||!Yn(i[p],o[p]))return!1}return!0}function my(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function gy(i,o){var l=my(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=o&&d>=o)return{node:l,offset:o-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=my(l)}}function yy(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?yy(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function vy(){for(var i=window,o=fi();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=fi(i.document)}return o}function ff(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function Jx(i){var o=vy(),l=i.focusedElem,d=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&yy(l.ownerDocument.documentElement,l)){if(d!==null&&ff(l)){if(o=d.start,i=d.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,y=Math.min(d.start,p);d=d.end===void 0?y:Math.min(d.end,p),!i.extend&&y>d&&(p=d,d=y,y=p),p=gy(l,y);var I=gy(l,d);p&&I&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==I.node||i.focusOffset!==I.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),y>d?(i.addRange(o),i.extend(I.node,I.offset)):(o.setEnd(I.node,I.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Zx=h&&"documentMode"in document&&11>=document.documentMode,Wo=null,pf=null,bl=null,mf=!1;function _y(i,o,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;mf||Wo==null||Wo!==fi(d)||(d=Wo,"selectionStart"in d&&ff(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),bl&&kl(bl,d)||(bl=d,d=kc(pf,"onSelect"),0<d.length&&(o=new jo("onSelect","select",null,o,l),i.push({event:o,listeners:d}),o.target=Wo)))}function Tc(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var Ko={animationend:Tc("Animation","AnimationEnd"),animationiteration:Tc("Animation","AnimationIteration"),animationstart:Tc("Animation","AnimationStart"),transitionend:Tc("Transition","TransitionEnd")},gf={},wy={};h&&(wy=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function xc(i){if(gf[i])return gf[i];if(!Ko[i])return i;var o=Ko[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in wy)return gf[i]=o[l];return i}var Ey=xc("animationend"),Iy=xc("animationiteration"),Ty=xc("animationstart"),xy=xc("transitionend"),Sy=new Map,ky="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xi(i,o){Sy.set(i,o),a(o,[i])}for(var yf=0;yf<ky.length;yf++){var vf=ky[yf],eS=vf.toLowerCase(),tS=vf[0].toUpperCase()+vf.slice(1);xi(eS,"on"+tS)}xi(Ey,"onAnimationEnd"),xi(Iy,"onAnimationIteration"),xi(Ty,"onAnimationStart"),xi("dblclick","onDoubleClick"),xi("focusin","onFocus"),xi("focusout","onBlur"),xi(xy,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Al));function by(i,o,l){var d=i.type||"unknown-event";i.currentTarget=l,ec(d,o,void 0,i),i.currentTarget=null}function Ay(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],p=d.event;d=d.listeners;e:{var y=void 0;if(o)for(var I=d.length-1;0<=I;I--){var b=d[I],P=b.instance,H=b.currentTarget;if(b=b.listener,P!==y&&p.isPropagationStopped())break e;by(p,b,H),y=P}else for(I=0;I<d.length;I++){if(b=d[I],P=b.instance,H=b.currentTarget,b=b.listener,P!==y&&p.isPropagationStopped())break e;by(p,b,H),y=P}}}if($n)throw i=dl,$n=!1,dl=null,i}function Ye(i,o){var l=o[kf];l===void 0&&(l=o[kf]=new Set);var d=i+"__bubble";l.has(d)||(Ry(o,i,2,!1),l.add(d))}function _f(i,o,l){var d=0;o&&(d|=4),Ry(l,i,d,o)}var Sc="_reactListening"+Math.random().toString(36).slice(2);function Rl(i){if(!i[Sc]){i[Sc]=!0,r.forEach(function(l){l!=="selectionchange"&&(nS.has(l)||_f(l,!1,i),_f(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Sc]||(o[Sc]=!0,_f("selectionchange",!1,o))}}function Ry(i,o,l,d){switch(_l(o)){case 1:var p=Ze;break;case 4:p=uf;break;default:p=vl}l=p.bind(null,o,l,i),p=void 0,!bo||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),d?p!==void 0?i.addEventListener(o,l,{capture:!0,passive:p}):i.addEventListener(o,l,!0):p!==void 0?i.addEventListener(o,l,{passive:p}):i.addEventListener(o,l,!1)}function wf(i,o,l,d,p){var y=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var I=d.tag;if(I===3||I===4){var b=d.stateNode.containerInfo;if(b===p||b.nodeType===8&&b.parentNode===p)break;if(I===4)for(I=d.return;I!==null;){var P=I.tag;if((P===3||P===4)&&(P=I.stateNode.containerInfo,P===p||P.nodeType===8&&P.parentNode===p))return;I=I.return}for(;b!==null;){if(I=Ss(b),I===null)return;if(P=I.tag,P===5||P===6){d=y=I;continue e}b=b.parentNode}}d=d.return}hl(function(){var H=y,ee=xo(l),te=[];e:{var Z=Sy.get(i);if(Z!==void 0){var ue=jo,fe=i;switch(i){case"keypress":if(Mo(l)===0)break e;case"keydown":case"keyup":ue=g;break;case"focusin":fe="focus",ue=zo;break;case"focusout":fe="blur",ue=zo;break;case"beforeblur":case"afterblur":ue=zo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Uo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=mc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=K;break;case Ey:case Iy:case Ty:ue=qr;break;case xy:ue=ze;break;case"scroll":ue=cf;break;case"wheel":ue=Oe;break;case"copy":case"cut":case"paste":ue=vc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=x}var me=(o&4)!==0,dt=!me&&i==="scroll",z=me?Z!==null?Z+"Capture":null:Z;me=[];for(var O=H,$;O!==null;){$=O;var re=$.stateNode;if($.tag===5&&re!==null&&($=re,z!==null&&(re=ht(O,z),re!=null&&me.push(Cl(O,re,$)))),dt)break;O=O.return}0<me.length&&(Z=new ue(Z,fe,null,l,ee),te.push({event:Z,listeners:me}))}}if((o&7)===0){e:{if(Z=i==="mouseover"||i==="pointerover",ue=i==="mouseout"||i==="pointerout",Z&&l!==ds&&(fe=l.relatedTarget||l.fromElement)&&(Ss(fe)||fe[Hr]))break e;if((ue||Z)&&(Z=ee.window===ee?ee:(Z=ee.ownerDocument)?Z.defaultView||Z.parentWindow:window,ue?(fe=l.relatedTarget||l.toElement,ue=H,fe=fe?Ss(fe):null,fe!==null&&(dt=qn(fe),fe!==dt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ue=null,fe=H),ue!==fe)){if(me=Uo,re="onMouseLeave",z="onMouseEnter",O="mouse",(i==="pointerout"||i==="pointerover")&&(me=x,re="onPointerLeave",z="onPointerEnter",O="pointer"),dt=ue==null?Z:Xo(ue),$=fe==null?Z:Xo(fe),Z=new me(re,O+"leave",ue,l,ee),Z.target=dt,Z.relatedTarget=$,re=null,Ss(ee)===H&&(me=new me(z,O+"enter",fe,l,ee),me.target=$,me.relatedTarget=dt,re=me),dt=re,ue&&fe)t:{for(me=ue,z=fe,O=0,$=me;$;$=Go($))O++;for($=0,re=z;re;re=Go(re))$++;for(;0<O-$;)me=Go(me),O--;for(;0<$-O;)z=Go(z),$--;for(;O--;){if(me===z||z!==null&&me===z.alternate)break t;me=Go(me),z=Go(z)}me=null}else me=null;ue!==null&&Cy(te,Z,ue,me,!1),fe!==null&&dt!==null&&Cy(te,dt,fe,me,!0)}}e:{if(Z=H?Xo(H):window,ue=Z.nodeName&&Z.nodeName.toLowerCase(),ue==="select"||ue==="input"&&Z.type==="file")var ge=Wx;else if(uy(Z))if(hy)ge=Xx;else{ge=Gx;var Ee=Kx}else(ue=Z.nodeName)&&ue.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(ge=Qx);if(ge&&(ge=ge(i,H))){cy(te,ge,l,ee);break e}Ee&&Ee(i,Z,H),i==="focusout"&&(Ee=Z._wrapperState)&&Ee.controlled&&Z.type==="number"&&Eo(Z,"number",Z.value)}switch(Ee=H?Xo(H):window,i){case"focusin":(uy(Ee)||Ee.contentEditable==="true")&&(Wo=Ee,pf=H,bl=null);break;case"focusout":bl=pf=Wo=null;break;case"mousedown":mf=!0;break;case"contextmenu":case"mouseup":case"dragend":mf=!1,_y(te,l,ee);break;case"selectionchange":if(Zx)break;case"keydown":case"keyup":_y(te,l,ee)}var Ie;if(ft)e:{switch(i){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Ho?ay(i,l)&&(xe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(xe="onCompositionStart");xe&&(xs&&l.locale!=="ko"&&(Ho||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Ho&&(Ie=wl()):(yn=ee,Lo="value"in yn?yn.value:yn.textContent,Ho=!0)),Ee=kc(H,xe),0<Ee.length&&(xe=new Tl(xe,i,null,l,ee),te.push({event:xe,listeners:Ee}),Ie?xe.data=Ie:(Ie=ly(l),Ie!==null&&(xe.data=Ie)))),(Ie=vn?zx(i,l):$x(i,l))&&(H=kc(H,"onBeforeInput"),0<H.length&&(ee=new Tl("onBeforeInput","beforeinput",null,l,ee),te.push({event:ee,listeners:H}),ee.data=Ie))}Ay(te,o)})}function Cl(i,o,l){return{instance:i,listener:o,currentTarget:l}}function kc(i,o){for(var l=o+"Capture",d=[];i!==null;){var p=i,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=ht(i,l),y!=null&&d.unshift(Cl(i,y,p)),y=ht(i,o),y!=null&&d.push(Cl(i,y,p))),i=i.return}return d}function Go(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Cy(i,o,l,d,p){for(var y=o._reactName,I=[];l!==null&&l!==d;){var b=l,P=b.alternate,H=b.stateNode;if(P!==null&&P===d)break;b.tag===5&&H!==null&&(b=H,p?(P=ht(l,y),P!=null&&I.unshift(Cl(l,P,b))):p||(P=ht(l,y),P!=null&&I.push(Cl(l,P,b)))),l=l.return}I.length!==0&&i.push({event:o,listeners:I})}var rS=/\r\n?/g,iS=/\u0000|\uFFFD/g;function Py(i){return(typeof i=="string"?i:""+i).replace(rS,`
`).replace(iS,"")}function bc(i,o,l){if(o=Py(o),Py(i)!==o&&l)throw Error(t(425))}function Ac(){}var Ef=null,If=null;function Tf(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var xf=typeof setTimeout=="function"?setTimeout:void 0,sS=typeof clearTimeout=="function"?clearTimeout:void 0,Ny=typeof Promise=="function"?Promise:void 0,oS=typeof queueMicrotask=="function"?queueMicrotask:typeof Ny<"u"?function(i){return Ny.resolve(null).then(i).catch(aS)}:xf;function aS(i){setTimeout(function(){throw i})}function Sf(i,o){var l=o,d=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(d===0){i.removeChild(p),Qn(o);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=p}while(l);Qn(o)}function Si(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Dy(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var Qo=Math.random().toString(36).slice(2),vr="__reactFiber$"+Qo,Pl="__reactProps$"+Qo,Hr="__reactContainer$"+Qo,kf="__reactEvents$"+Qo,lS="__reactListeners$"+Qo,uS="__reactHandles$"+Qo;function Ss(i){var o=i[vr];if(o)return o;for(var l=i.parentNode;l;){if(o=l[Hr]||l[vr]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=Dy(i);i!==null;){if(l=i[vr])return l;i=Dy(i)}return o}i=l,l=i.parentNode}return null}function Nl(i){return i=i[vr]||i[Hr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Xo(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Rc(i){return i[Pl]||null}var bf=[],Yo=-1;function ki(i){return{current:i}}function Je(i){0>Yo||(i.current=bf[Yo],bf[Yo]=null,Yo--)}function Xe(i,o){Yo++,bf[Yo]=i.current,i.current=o}var bi={},Bt=ki(bi),on=ki(!1),ks=bi;function Jo(i,o){var l=i.type.contextTypes;if(!l)return bi;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=o[y];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function an(i){return i=i.childContextTypes,i!=null}function Cc(){Je(on),Je(Bt)}function Vy(i,o,l){if(Bt.current!==bi)throw Error(t(168));Xe(Bt,o),Xe(on,l)}function Oy(i,o,l){var d=i.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var p in d)if(!(p in o))throw Error(t(108,Fe(i)||"Unknown",p));return he({},l,d)}function Pc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||bi,ks=Bt.current,Xe(Bt,i),Xe(on,on.current),!0}function Ly(i,o,l){var d=i.stateNode;if(!d)throw Error(t(169));l?(i=Oy(i,o,ks),d.__reactInternalMemoizedMergedChildContext=i,Je(on),Je(Bt),Xe(Bt,i)):Je(on),Xe(on,l)}var Wr=null,Nc=!1,Af=!1;function My(i){Wr===null?Wr=[i]:Wr.push(i)}function cS(i){Nc=!0,My(i)}function Ai(){if(!Af&&Wr!==null){Af=!0;var i=0,o=De;try{var l=Wr;for(De=1;i<l.length;i++){var d=l[i];do d=d(!0);while(d!==null)}Wr=null,Nc=!1}catch(p){throw Wr!==null&&(Wr=Wr.slice(i+1)),Po(ys,Ai),p}finally{De=o,Af=!1}}return null}var Zo=[],ea=0,Dc=null,Vc=0,Cn=[],Pn=0,bs=null,Kr=1,Gr="";function As(i,o){Zo[ea++]=Vc,Zo[ea++]=Dc,Dc=i,Vc=o}function jy(i,o,l){Cn[Pn++]=Kr,Cn[Pn++]=Gr,Cn[Pn++]=bs,bs=i;var d=Kr;i=Gr;var p=32-Xt(d)-1;d&=~(1<<p),l+=1;var y=32-Xt(o)+p;if(30<y){var I=p-p%5;y=(d&(1<<I)-1).toString(32),d>>=I,p-=I,Kr=1<<32-Xt(o)+p|l<<p|d,Gr=y+i}else Kr=1<<y|l<<p|d,Gr=i}function Rf(i){i.return!==null&&(As(i,1),jy(i,1,0))}function Cf(i){for(;i===Dc;)Dc=Zo[--ea],Zo[ea]=null,Vc=Zo[--ea],Zo[ea]=null;for(;i===bs;)bs=Cn[--Pn],Cn[Pn]=null,Gr=Cn[--Pn],Cn[Pn]=null,Kr=Cn[--Pn],Cn[Pn]=null}var _n=null,wn=null,et=!1,Jn=null;function Fy(i,o){var l=On(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function Uy(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,_n=i,wn=Si(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,_n=i,wn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=bs!==null?{id:Kr,overflow:Gr}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=On(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,_n=i,wn=null,!0):!1;default:return!1}}function Pf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Nf(i){if(et){var o=wn;if(o){var l=o;if(!Uy(i,o)){if(Pf(i))throw Error(t(418));o=Si(l.nextSibling);var d=_n;o&&Uy(i,o)?Fy(d,l):(i.flags=i.flags&-4097|2,et=!1,_n=i)}}else{if(Pf(i))throw Error(t(418));i.flags=i.flags&-4097|2,et=!1,_n=i}}}function By(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;_n=i}function Oc(i){if(i!==_n)return!1;if(!et)return By(i),et=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Tf(i.type,i.memoizedProps)),o&&(o=wn)){if(Pf(i))throw zy(),Error(t(418));for(;o;)Fy(i,o),o=Si(o.nextSibling)}if(By(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){wn=Si(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}wn=null}}else wn=_n?Si(i.stateNode.nextSibling):null;return!0}function zy(){for(var i=wn;i;)i=Si(i.nextSibling)}function ta(){wn=_n=null,et=!1}function Df(i){Jn===null?Jn=[i]:Jn.push(i)}var hS=oe.ReactCurrentBatchConfig;function Dl(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var d=l.stateNode}if(!d)throw Error(t(147,i));var p=d,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(I){var b=p.refs;I===null?delete b[y]:b[y]=I},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function Lc(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function $y(i){var o=i._init;return o(i._payload)}function qy(i){function o(z,O){if(i){var $=z.deletions;$===null?(z.deletions=[O],z.flags|=16):$.push(O)}}function l(z,O){if(!i)return null;for(;O!==null;)o(z,O),O=O.sibling;return null}function d(z,O){for(z=new Map;O!==null;)O.key!==null?z.set(O.key,O):z.set(O.index,O),O=O.sibling;return z}function p(z,O){return z=Li(z,O),z.index=0,z.sibling=null,z}function y(z,O,$){return z.index=$,i?($=z.alternate,$!==null?($=$.index,$<O?(z.flags|=2,O):$):(z.flags|=2,O)):(z.flags|=1048576,O)}function I(z){return i&&z.alternate===null&&(z.flags|=2),z}function b(z,O,$,re){return O===null||O.tag!==6?(O=xp($,z.mode,re),O.return=z,O):(O=p(O,$),O.return=z,O)}function P(z,O,$,re){var ge=$.type;return ge===C?ee(z,O,$.props.children,re,$.key):O!==null&&(O.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Ut&&$y(ge)===O.type)?(re=p(O,$.props),re.ref=Dl(z,O,$),re.return=z,re):(re=oh($.type,$.key,$.props,null,z.mode,re),re.ref=Dl(z,O,$),re.return=z,re)}function H(z,O,$,re){return O===null||O.tag!==4||O.stateNode.containerInfo!==$.containerInfo||O.stateNode.implementation!==$.implementation?(O=Sp($,z.mode,re),O.return=z,O):(O=p(O,$.children||[]),O.return=z,O)}function ee(z,O,$,re,ge){return O===null||O.tag!==7?(O=Ls($,z.mode,re,ge),O.return=z,O):(O=p(O,$),O.return=z,O)}function te(z,O,$){if(typeof O=="string"&&O!==""||typeof O=="number")return O=xp(""+O,z.mode,$),O.return=z,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case ce:return $=oh(O.type,O.key,O.props,null,z.mode,$),$.ref=Dl(z,null,O),$.return=z,$;case X:return O=Sp(O,z.mode,$),O.return=z,O;case Ut:var re=O._init;return te(z,re(O._payload),$)}if(Lr(O)||we(O))return O=Ls(O,z.mode,$,null),O.return=z,O;Lc(z,O)}return null}function Z(z,O,$,re){var ge=O!==null?O.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return ge!==null?null:b(z,O,""+$,re);if(typeof $=="object"&&$!==null){switch($.$$typeof){case ce:return $.key===ge?P(z,O,$,re):null;case X:return $.key===ge?H(z,O,$,re):null;case Ut:return ge=$._init,Z(z,O,ge($._payload),re)}if(Lr($)||we($))return ge!==null?null:ee(z,O,$,re,null);Lc(z,$)}return null}function ue(z,O,$,re,ge){if(typeof re=="string"&&re!==""||typeof re=="number")return z=z.get($)||null,b(O,z,""+re,ge);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case ce:return z=z.get(re.key===null?$:re.key)||null,P(O,z,re,ge);case X:return z=z.get(re.key===null?$:re.key)||null,H(O,z,re,ge);case Ut:var Ee=re._init;return ue(z,O,$,Ee(re._payload),ge)}if(Lr(re)||we(re))return z=z.get($)||null,ee(O,z,re,ge,null);Lc(O,re)}return null}function fe(z,O,$,re){for(var ge=null,Ee=null,Ie=O,xe=O=0,Ct=null;Ie!==null&&xe<$.length;xe++){Ie.index>xe?(Ct=Ie,Ie=null):Ct=Ie.sibling;var je=Z(z,Ie,$[xe],re);if(je===null){Ie===null&&(Ie=Ct);break}i&&Ie&&je.alternate===null&&o(z,Ie),O=y(je,O,xe),Ee===null?ge=je:Ee.sibling=je,Ee=je,Ie=Ct}if(xe===$.length)return l(z,Ie),et&&As(z,xe),ge;if(Ie===null){for(;xe<$.length;xe++)Ie=te(z,$[xe],re),Ie!==null&&(O=y(Ie,O,xe),Ee===null?ge=Ie:Ee.sibling=Ie,Ee=Ie);return et&&As(z,xe),ge}for(Ie=d(z,Ie);xe<$.length;xe++)Ct=ue(Ie,z,xe,$[xe],re),Ct!==null&&(i&&Ct.alternate!==null&&Ie.delete(Ct.key===null?xe:Ct.key),O=y(Ct,O,xe),Ee===null?ge=Ct:Ee.sibling=Ct,Ee=Ct);return i&&Ie.forEach(function(Mi){return o(z,Mi)}),et&&As(z,xe),ge}function me(z,O,$,re){var ge=we($);if(typeof ge!="function")throw Error(t(150));if($=ge.call($),$==null)throw Error(t(151));for(var Ee=ge=null,Ie=O,xe=O=0,Ct=null,je=$.next();Ie!==null&&!je.done;xe++,je=$.next()){Ie.index>xe?(Ct=Ie,Ie=null):Ct=Ie.sibling;var Mi=Z(z,Ie,je.value,re);if(Mi===null){Ie===null&&(Ie=Ct);break}i&&Ie&&Mi.alternate===null&&o(z,Ie),O=y(Mi,O,xe),Ee===null?ge=Mi:Ee.sibling=Mi,Ee=Mi,Ie=Ct}if(je.done)return l(z,Ie),et&&As(z,xe),ge;if(Ie===null){for(;!je.done;xe++,je=$.next())je=te(z,je.value,re),je!==null&&(O=y(je,O,xe),Ee===null?ge=je:Ee.sibling=je,Ee=je);return et&&As(z,xe),ge}for(Ie=d(z,Ie);!je.done;xe++,je=$.next())je=ue(Ie,z,xe,je.value,re),je!==null&&(i&&je.alternate!==null&&Ie.delete(je.key===null?xe:je.key),O=y(je,O,xe),Ee===null?ge=je:Ee.sibling=je,Ee=je);return i&&Ie.forEach(function(qS){return o(z,qS)}),et&&As(z,xe),ge}function dt(z,O,$,re){if(typeof $=="object"&&$!==null&&$.type===C&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case ce:e:{for(var ge=$.key,Ee=O;Ee!==null;){if(Ee.key===ge){if(ge=$.type,ge===C){if(Ee.tag===7){l(z,Ee.sibling),O=p(Ee,$.props.children),O.return=z,z=O;break e}}else if(Ee.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Ut&&$y(ge)===Ee.type){l(z,Ee.sibling),O=p(Ee,$.props),O.ref=Dl(z,Ee,$),O.return=z,z=O;break e}l(z,Ee);break}else o(z,Ee);Ee=Ee.sibling}$.type===C?(O=Ls($.props.children,z.mode,re,$.key),O.return=z,z=O):(re=oh($.type,$.key,$.props,null,z.mode,re),re.ref=Dl(z,O,$),re.return=z,z=re)}return I(z);case X:e:{for(Ee=$.key;O!==null;){if(O.key===Ee)if(O.tag===4&&O.stateNode.containerInfo===$.containerInfo&&O.stateNode.implementation===$.implementation){l(z,O.sibling),O=p(O,$.children||[]),O.return=z,z=O;break e}else{l(z,O);break}else o(z,O);O=O.sibling}O=Sp($,z.mode,re),O.return=z,z=O}return I(z);case Ut:return Ee=$._init,dt(z,O,Ee($._payload),re)}if(Lr($))return fe(z,O,$,re);if(we($))return me(z,O,$,re);Lc(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,O!==null&&O.tag===6?(l(z,O.sibling),O=p(O,$),O.return=z,z=O):(l(z,O),O=xp($,z.mode,re),O.return=z,z=O),I(z)):l(z,O)}return dt}var na=qy(!0),Hy=qy(!1),Mc=ki(null),jc=null,ra=null,Vf=null;function Of(){Vf=ra=jc=null}function Lf(i){var o=Mc.current;Je(Mc),i._currentValue=o}function Mf(i,o,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===l)break;i=i.return}}function ia(i,o){jc=i,Vf=ra=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(ln=!0),i.firstContext=null)}function Nn(i){var o=i._currentValue;if(Vf!==i)if(i={context:i,memoizedValue:o,next:null},ra===null){if(jc===null)throw Error(t(308));ra=i,jc.dependencies={lanes:0,firstContext:i}}else ra=ra.next=i;return o}var Rs=null;function jf(i){Rs===null?Rs=[i]:Rs.push(i)}function Wy(i,o,l,d){var p=o.interleaved;return p===null?(l.next=l,jf(o)):(l.next=p.next,p.next=l),o.interleaved=l,Qr(i,d)}function Qr(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var Ri=!1;function Ff(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ky(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Xr(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Ci(i,o,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Me&2)!==0){var p=d.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),d.pending=o,Qr(i,l)}return p=d.interleaved,p===null?(o.next=o,jf(d)):(o.next=p.next,p.next=o),d.interleaved=o,Qr(i,l)}function Fc(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,_i(i,l)}}function Gy(i,o){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var I={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=I:y=y.next=I,l=l.next}while(l!==null);y===null?p=y=o:y=y.next=o}else p=y=o;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:d.shared,effects:d.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function Uc(i,o,l,d){var p=i.updateQueue;Ri=!1;var y=p.firstBaseUpdate,I=p.lastBaseUpdate,b=p.shared.pending;if(b!==null){p.shared.pending=null;var P=b,H=P.next;P.next=null,I===null?y=H:I.next=H,I=P;var ee=i.alternate;ee!==null&&(ee=ee.updateQueue,b=ee.lastBaseUpdate,b!==I&&(b===null?ee.firstBaseUpdate=H:b.next=H,ee.lastBaseUpdate=P))}if(y!==null){var te=p.baseState;I=0,ee=H=P=null,b=y;do{var Z=b.lane,ue=b.eventTime;if((d&Z)===Z){ee!==null&&(ee=ee.next={eventTime:ue,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var fe=i,me=b;switch(Z=o,ue=l,me.tag){case 1:if(fe=me.payload,typeof fe=="function"){te=fe.call(ue,te,Z);break e}te=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=me.payload,Z=typeof fe=="function"?fe.call(ue,te,Z):fe,Z==null)break e;te=he({},te,Z);break e;case 2:Ri=!0}}b.callback!==null&&b.lane!==0&&(i.flags|=64,Z=p.effects,Z===null?p.effects=[b]:Z.push(b))}else ue={eventTime:ue,lane:Z,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ee===null?(H=ee=ue,P=te):ee=ee.next=ue,I|=Z;if(b=b.next,b===null){if(b=p.shared.pending,b===null)break;Z=b,b=Z.next,Z.next=null,p.lastBaseUpdate=Z,p.shared.pending=null}}while(!0);if(ee===null&&(P=te),p.baseState=P,p.firstBaseUpdate=H,p.lastBaseUpdate=ee,o=p.shared.interleaved,o!==null){p=o;do I|=p.lane,p=p.next;while(p!==o)}else y===null&&(p.shared.lanes=0);Ns|=I,i.lanes=I,i.memoizedState=te}}function Qy(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var d=i[o],p=d.callback;if(p!==null){if(d.callback=null,d=l,typeof p!="function")throw Error(t(191,p));p.call(d)}}}var Vl={},_r=ki(Vl),Ol=ki(Vl),Ll=ki(Vl);function Cs(i){if(i===Vl)throw Error(t(174));return i}function Uf(i,o){switch(Xe(Ll,o),Xe(Ol,i),Xe(_r,Vl),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:wt(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=wt(o,i)}Je(_r),Xe(_r,o)}function sa(){Je(_r),Je(Ol),Je(Ll)}function Xy(i){Cs(Ll.current);var o=Cs(_r.current),l=wt(o,i.type);o!==l&&(Xe(Ol,i),Xe(_r,l))}function Bf(i){Ol.current===i&&(Je(_r),Je(Ol))}var it=ki(0);function Bc(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var zf=[];function $f(){for(var i=0;i<zf.length;i++)zf[i]._workInProgressVersionPrimary=null;zf.length=0}var zc=oe.ReactCurrentDispatcher,qf=oe.ReactCurrentBatchConfig,Ps=0,st=null,It=null,At=null,$c=!1,Ml=!1,jl=0,dS=0;function zt(){throw Error(t(321))}function Hf(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!Yn(i[l],o[l]))return!1;return!0}function Wf(i,o,l,d,p,y){if(Ps=y,st=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,zc.current=i===null||i.memoizedState===null?gS:yS,i=l(d,p),Ml){y=0;do{if(Ml=!1,jl=0,25<=y)throw Error(t(301));y+=1,At=It=null,o.updateQueue=null,zc.current=vS,i=l(d,p)}while(Ml)}if(zc.current=Wc,o=It!==null&&It.next!==null,Ps=0,At=It=st=null,$c=!1,o)throw Error(t(300));return i}function Kf(){var i=jl!==0;return jl=0,i}function wr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?st.memoizedState=At=i:At=At.next=i,At}function Dn(){if(It===null){var i=st.alternate;i=i!==null?i.memoizedState:null}else i=It.next;var o=At===null?st.memoizedState:At.next;if(o!==null)At=o,It=i;else{if(i===null)throw Error(t(310));It=i,i={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},At===null?st.memoizedState=At=i:At=At.next=i}return At}function Fl(i,o){return typeof o=="function"?o(i):o}function Gf(i){var o=Dn(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var d=It,p=d.baseQueue,y=l.pending;if(y!==null){if(p!==null){var I=p.next;p.next=y.next,y.next=I}d.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,d=d.baseState;var b=I=null,P=null,H=y;do{var ee=H.lane;if((Ps&ee)===ee)P!==null&&(P=P.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),d=H.hasEagerState?H.eagerState:i(d,H.action);else{var te={lane:ee,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};P===null?(b=P=te,I=d):P=P.next=te,st.lanes|=ee,Ns|=ee}H=H.next}while(H!==null&&H!==y);P===null?I=d:P.next=b,Yn(d,o.memoizedState)||(ln=!0),o.memoizedState=d,o.baseState=I,o.baseQueue=P,l.lastRenderedState=d}if(i=l.interleaved,i!==null){p=i;do y=p.lane,st.lanes|=y,Ns|=y,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function Qf(i){var o=Dn(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var d=l.dispatch,p=l.pending,y=o.memoizedState;if(p!==null){l.pending=null;var I=p=p.next;do y=i(y,I.action),I=I.next;while(I!==p);Yn(y,o.memoizedState)||(ln=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),l.lastRenderedState=y}return[y,d]}function Yy(){}function Jy(i,o){var l=st,d=Dn(),p=o(),y=!Yn(d.memoizedState,p);if(y&&(d.memoizedState=p,ln=!0),d=d.queue,Xf(tv.bind(null,l,d,i),[i]),d.getSnapshot!==o||y||At!==null&&At.memoizedState.tag&1){if(l.flags|=2048,Ul(9,ev.bind(null,l,d,p,o),void 0,null),Rt===null)throw Error(t(349));(Ps&30)!==0||Zy(l,o,p)}return p}function Zy(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=st.updateQueue,o===null?(o={lastEffect:null,stores:null},st.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function ev(i,o,l,d){o.value=l,o.getSnapshot=d,nv(o)&&rv(i)}function tv(i,o,l){return l(function(){nv(o)&&rv(i)})}function nv(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!Yn(i,l)}catch{return!0}}function rv(i){var o=Qr(i,1);o!==null&&nr(o,i,1,-1)}function iv(i){var o=wr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fl,lastRenderedState:i},o.queue=i,i=i.dispatch=mS.bind(null,st,i),[o.memoizedState,i]}function Ul(i,o,l,d){return i={tag:i,create:o,destroy:l,deps:d,next:null},o=st.updateQueue,o===null?(o={lastEffect:null,stores:null},st.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,o.lastEffect=i)),i}function sv(){return Dn().memoizedState}function qc(i,o,l,d){var p=wr();st.flags|=i,p.memoizedState=Ul(1|o,l,void 0,d===void 0?null:d)}function Hc(i,o,l,d){var p=Dn();d=d===void 0?null:d;var y=void 0;if(It!==null){var I=It.memoizedState;if(y=I.destroy,d!==null&&Hf(d,I.deps)){p.memoizedState=Ul(o,l,y,d);return}}st.flags|=i,p.memoizedState=Ul(1|o,l,y,d)}function ov(i,o){return qc(8390656,8,i,o)}function Xf(i,o){return Hc(2048,8,i,o)}function av(i,o){return Hc(4,2,i,o)}function lv(i,o){return Hc(4,4,i,o)}function uv(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function cv(i,o,l){return l=l!=null?l.concat([i]):null,Hc(4,4,uv.bind(null,o,i),l)}function Yf(){}function hv(i,o){var l=Dn();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&Hf(o,d[1])?d[0]:(l.memoizedState=[i,o],i)}function dv(i,o){var l=Dn();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&Hf(o,d[1])?d[0]:(i=i(),l.memoizedState=[i,o],i)}function fv(i,o,l){return(Ps&21)===0?(i.baseState&&(i.baseState=!1,ln=!0),i.memoizedState=l):(Yn(l,o)||(l=ws(),st.lanes|=l,Ns|=l,i.baseState=!0),o)}function fS(i,o){var l=De;De=l!==0&&4>l?l:4,i(!0);var d=qf.transition;qf.transition={};try{i(!1),o()}finally{De=l,qf.transition=d}}function pv(){return Dn().memoizedState}function pS(i,o,l){var d=Vi(i);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},mv(i))gv(o,l);else if(l=Wy(i,o,l,d),l!==null){var p=Zt();nr(l,i,d,p),yv(l,o,d)}}function mS(i,o,l){var d=Vi(i),p={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(mv(i))gv(o,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var I=o.lastRenderedState,b=y(I,l);if(p.hasEagerState=!0,p.eagerState=b,Yn(b,I)){var P=o.interleaved;P===null?(p.next=p,jf(o)):(p.next=P.next,P.next=p),o.interleaved=p;return}}catch{}finally{}l=Wy(i,o,p,d),l!==null&&(p=Zt(),nr(l,i,d,p),yv(l,o,d))}}function mv(i){var o=i.alternate;return i===st||o!==null&&o===st}function gv(i,o){Ml=$c=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function yv(i,o,l){if((l&4194240)!==0){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,_i(i,l)}}var Wc={readContext:Nn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},gS={readContext:Nn,useCallback:function(i,o){return wr().memoizedState=[i,o===void 0?null:o],i},useContext:Nn,useEffect:ov,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,qc(4194308,4,uv.bind(null,o,i),l)},useLayoutEffect:function(i,o){return qc(4194308,4,i,o)},useInsertionEffect:function(i,o){return qc(4,2,i,o)},useMemo:function(i,o){var l=wr();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var d=wr();return o=l!==void 0?l(o):o,d.memoizedState=d.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},d.queue=i,i=i.dispatch=pS.bind(null,st,i),[d.memoizedState,i]},useRef:function(i){var o=wr();return i={current:i},o.memoizedState=i},useState:iv,useDebugValue:Yf,useDeferredValue:function(i){return wr().memoizedState=i},useTransition:function(){var i=iv(!1),o=i[0];return i=fS.bind(null,i[1]),wr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var d=st,p=wr();if(et){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),Rt===null)throw Error(t(349));(Ps&30)!==0||Zy(d,o,l)}p.memoizedState=l;var y={value:l,getSnapshot:o};return p.queue=y,ov(tv.bind(null,d,y,i),[i]),d.flags|=2048,Ul(9,ev.bind(null,d,y,l,o),void 0,null),l},useId:function(){var i=wr(),o=Rt.identifierPrefix;if(et){var l=Gr,d=Kr;l=(d&~(1<<32-Xt(d)-1)).toString(32)+l,o=":"+o+"R"+l,l=jl++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=dS++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},yS={readContext:Nn,useCallback:hv,useContext:Nn,useEffect:Xf,useImperativeHandle:cv,useInsertionEffect:av,useLayoutEffect:lv,useMemo:dv,useReducer:Gf,useRef:sv,useState:function(){return Gf(Fl)},useDebugValue:Yf,useDeferredValue:function(i){var o=Dn();return fv(o,It.memoizedState,i)},useTransition:function(){var i=Gf(Fl)[0],o=Dn().memoizedState;return[i,o]},useMutableSource:Yy,useSyncExternalStore:Jy,useId:pv,unstable_isNewReconciler:!1},vS={readContext:Nn,useCallback:hv,useContext:Nn,useEffect:Xf,useImperativeHandle:cv,useInsertionEffect:av,useLayoutEffect:lv,useMemo:dv,useReducer:Qf,useRef:sv,useState:function(){return Qf(Fl)},useDebugValue:Yf,useDeferredValue:function(i){var o=Dn();return It===null?o.memoizedState=i:fv(o,It.memoizedState,i)},useTransition:function(){var i=Qf(Fl)[0],o=Dn().memoizedState;return[i,o]},useMutableSource:Yy,useSyncExternalStore:Jy,useId:pv,unstable_isNewReconciler:!1};function Zn(i,o){if(i&&i.defaultProps){o=he({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function Jf(i,o,l,d){o=i.memoizedState,l=l(d,o),l=l==null?o:he({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Kc={isMounted:function(i){return(i=i._reactInternals)?qn(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var d=Zt(),p=Vi(i),y=Xr(d,p);y.payload=o,l!=null&&(y.callback=l),o=Ci(i,y,p),o!==null&&(nr(o,i,p,d),Fc(o,i,p))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var d=Zt(),p=Vi(i),y=Xr(d,p);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=Ci(i,y,p),o!==null&&(nr(o,i,p,d),Fc(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=Zt(),d=Vi(i),p=Xr(l,d);p.tag=2,o!=null&&(p.callback=o),o=Ci(i,p,d),o!==null&&(nr(o,i,d,l),Fc(o,i,d))}};function vv(i,o,l,d,p,y,I){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,y,I):o.prototype&&o.prototype.isPureReactComponent?!kl(l,d)||!kl(p,y):!0}function _v(i,o,l){var d=!1,p=bi,y=o.contextType;return typeof y=="object"&&y!==null?y=Nn(y):(p=an(o)?ks:Bt.current,d=o.contextTypes,y=(d=d!=null)?Jo(i,p):bi),o=new o(l,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Kc,i.stateNode=o,o._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=y),o}function wv(i,o,l,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,d),o.state!==i&&Kc.enqueueReplaceState(o,o.state,null)}function Zf(i,o,l,d){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},Ff(i);var y=o.contextType;typeof y=="object"&&y!==null?p.context=Nn(y):(y=an(o)?ks:Bt.current,p.context=Jo(i,y)),p.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(Jf(i,o,y,l),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&Kc.enqueueReplaceState(p,p.state,null),Uc(i,l,p,d),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function oa(i,o){try{var l="",d=o;do l+=Re(d),d=d.return;while(d);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:p,digest:null}}function ep(i,o,l){return{value:i,source:null,stack:l??null,digest:o??null}}function tp(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var _S=typeof WeakMap=="function"?WeakMap:Map;function Ev(i,o,l){l=Xr(-1,l),l.tag=3,l.payload={element:null};var d=o.value;return l.callback=function(){eh||(eh=!0,gp=d),tp(i,o)},l}function Iv(i,o,l){l=Xr(-1,l),l.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var p=o.value;l.payload=function(){return d(p)},l.callback=function(){tp(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){tp(i,o),typeof d!="function"&&(Ni===null?Ni=new Set([this]):Ni.add(this));var I=o.stack;this.componentDidCatch(o.value,{componentStack:I!==null?I:""})}),l}function Tv(i,o,l){var d=i.pingCache;if(d===null){d=i.pingCache=new _S;var p=new Set;d.set(o,p)}else p=d.get(o),p===void 0&&(p=new Set,d.set(o,p));p.has(l)||(p.add(l),i=DS.bind(null,i,o,l),o.then(i,i))}function xv(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Sv(i,o,l,d,p){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=Xr(-1,1),o.tag=2,Ci(l,o,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=p,i)}var wS=oe.ReactCurrentOwner,ln=!1;function Jt(i,o,l,d){o.child=i===null?Hy(o,null,l,d):na(o,i.child,l,d)}function kv(i,o,l,d,p){l=l.render;var y=o.ref;return ia(o,p),d=Wf(i,o,l,d,y,p),l=Kf(),i!==null&&!ln?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Yr(i,o,p)):(et&&l&&Rf(o),o.flags|=1,Jt(i,o,d,p),o.child)}function bv(i,o,l,d,p){if(i===null){var y=l.type;return typeof y=="function"&&!Tp(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=y,Av(i,o,y,d,p)):(i=oh(l.type,null,d,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&p)===0){var I=y.memoizedProps;if(l=l.compare,l=l!==null?l:kl,l(I,d)&&i.ref===o.ref)return Yr(i,o,p)}return o.flags|=1,i=Li(y,d),i.ref=o.ref,i.return=o,o.child=i}function Av(i,o,l,d,p){if(i!==null){var y=i.memoizedProps;if(kl(y,d)&&i.ref===o.ref)if(ln=!1,o.pendingProps=d=y,(i.lanes&p)!==0)(i.flags&131072)!==0&&(ln=!0);else return o.lanes=i.lanes,Yr(i,o,p)}return np(i,o,l,d,p)}function Rv(i,o,l){var d=o.pendingProps,p=d.children,y=i!==null?i.memoizedState:null;if(d.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(la,En),En|=l;else{if((l&1073741824)===0)return i=y!==null?y.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Xe(la,En),En|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:l,Xe(la,En),En|=d}else y!==null?(d=y.baseLanes|l,o.memoizedState=null):d=l,Xe(la,En),En|=d;return Jt(i,o,p,l),o.child}function Cv(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function np(i,o,l,d,p){var y=an(l)?ks:Bt.current;return y=Jo(o,y),ia(o,p),l=Wf(i,o,l,d,y,p),d=Kf(),i!==null&&!ln?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Yr(i,o,p)):(et&&d&&Rf(o),o.flags|=1,Jt(i,o,l,p),o.child)}function Pv(i,o,l,d,p){if(an(l)){var y=!0;Pc(o)}else y=!1;if(ia(o,p),o.stateNode===null)Qc(i,o),_v(o,l,d),Zf(o,l,d,p),d=!0;else if(i===null){var I=o.stateNode,b=o.memoizedProps;I.props=b;var P=I.context,H=l.contextType;typeof H=="object"&&H!==null?H=Nn(H):(H=an(l)?ks:Bt.current,H=Jo(o,H));var ee=l.getDerivedStateFromProps,te=typeof ee=="function"||typeof I.getSnapshotBeforeUpdate=="function";te||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(b!==d||P!==H)&&wv(o,I,d,H),Ri=!1;var Z=o.memoizedState;I.state=Z,Uc(o,d,I,p),P=o.memoizedState,b!==d||Z!==P||on.current||Ri?(typeof ee=="function"&&(Jf(o,l,ee,d),P=o.memoizedState),(b=Ri||vv(o,l,b,d,Z,P,H))?(te||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(o.flags|=4194308)):(typeof I.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=P),I.props=d,I.state=P,I.context=H,d=b):(typeof I.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{I=o.stateNode,Ky(i,o),b=o.memoizedProps,H=o.type===o.elementType?b:Zn(o.type,b),I.props=H,te=o.pendingProps,Z=I.context,P=l.contextType,typeof P=="object"&&P!==null?P=Nn(P):(P=an(l)?ks:Bt.current,P=Jo(o,P));var ue=l.getDerivedStateFromProps;(ee=typeof ue=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(b!==te||Z!==P)&&wv(o,I,d,P),Ri=!1,Z=o.memoizedState,I.state=Z,Uc(o,d,I,p);var fe=o.memoizedState;b!==te||Z!==fe||on.current||Ri?(typeof ue=="function"&&(Jf(o,l,ue,d),fe=o.memoizedState),(H=Ri||vv(o,l,H,d,Z,fe,P)||!1)?(ee||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(d,fe,P),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(d,fe,P)),typeof I.componentDidUpdate=="function"&&(o.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof I.componentDidUpdate!="function"||b===i.memoizedProps&&Z===i.memoizedState||(o.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&Z===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=fe),I.props=d,I.state=fe,I.context=P,d=H):(typeof I.componentDidUpdate!="function"||b===i.memoizedProps&&Z===i.memoizedState||(o.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&Z===i.memoizedState||(o.flags|=1024),d=!1)}return rp(i,o,l,d,y,p)}function rp(i,o,l,d,p,y){Cv(i,o);var I=(o.flags&128)!==0;if(!d&&!I)return p&&Ly(o,l,!1),Yr(i,o,y);d=o.stateNode,wS.current=o;var b=I&&typeof l.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,i!==null&&I?(o.child=na(o,i.child,null,y),o.child=na(o,null,b,y)):Jt(i,o,b,y),o.memoizedState=d.state,p&&Ly(o,l,!0),o.child}function Nv(i){var o=i.stateNode;o.pendingContext?Vy(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Vy(i,o.context,!1),Uf(i,o.containerInfo)}function Dv(i,o,l,d,p){return ta(),Df(p),o.flags|=256,Jt(i,o,l,d),o.child}var ip={dehydrated:null,treeContext:null,retryLane:0};function sp(i){return{baseLanes:i,cachePool:null,transitions:null}}function Vv(i,o,l){var d=o.pendingProps,p=it.current,y=!1,I=(o.flags&128)!==0,b;if((b=I)||(b=i!==null&&i.memoizedState===null?!1:(p&2)!==0),b?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),Xe(it,p&1),i===null)return Nf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(I=d.children,i=d.fallback,y?(d=o.mode,y=o.child,I={mode:"hidden",children:I},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=I):y=ah(I,d,0,null),i=Ls(i,d,l,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=sp(l),o.memoizedState=ip,i):op(o,I));if(p=i.memoizedState,p!==null&&(b=p.dehydrated,b!==null))return ES(i,o,I,d,b,p,l);if(y){y=d.fallback,I=o.mode,p=i.child,b=p.sibling;var P={mode:"hidden",children:d.children};return(I&1)===0&&o.child!==p?(d=o.child,d.childLanes=0,d.pendingProps=P,o.deletions=null):(d=Li(p,P),d.subtreeFlags=p.subtreeFlags&14680064),b!==null?y=Li(b,y):(y=Ls(y,I,l,null),y.flags|=2),y.return=o,d.return=o,d.sibling=y,o.child=d,d=y,y=o.child,I=i.child.memoizedState,I=I===null?sp(l):{baseLanes:I.baseLanes|l,cachePool:null,transitions:I.transitions},y.memoizedState=I,y.childLanes=i.childLanes&~l,o.memoizedState=ip,d}return y=i.child,i=y.sibling,d=Li(y,{mode:"visible",children:d.children}),(o.mode&1)===0&&(d.lanes=l),d.return=o,d.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=d,o.memoizedState=null,d}function op(i,o){return o=ah({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Gc(i,o,l,d){return d!==null&&Df(d),na(o,i.child,null,l),i=op(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function ES(i,o,l,d,p,y,I){if(l)return o.flags&256?(o.flags&=-257,d=ep(Error(t(422))),Gc(i,o,I,d)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=d.fallback,p=o.mode,d=ah({mode:"visible",children:d.children},p,0,null),y=Ls(y,p,I,null),y.flags|=2,d.return=o,y.return=o,d.sibling=y,o.child=d,(o.mode&1)!==0&&na(o,i.child,null,I),o.child.memoizedState=sp(I),o.memoizedState=ip,y);if((o.mode&1)===0)return Gc(i,o,I,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var b=d.dgst;return d=b,y=Error(t(419)),d=ep(y,d,void 0),Gc(i,o,I,d)}if(b=(I&i.childLanes)!==0,ln||b){if(d=Rt,d!==null){switch(I&-I){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|I))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Qr(i,p),nr(d,i,p,-1))}return Ip(),d=ep(Error(t(421))),Gc(i,o,I,d)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=VS.bind(null,i),p._reactRetry=o,null):(i=y.treeContext,wn=Si(p.nextSibling),_n=o,et=!0,Jn=null,i!==null&&(Cn[Pn++]=Kr,Cn[Pn++]=Gr,Cn[Pn++]=bs,Kr=i.id,Gr=i.overflow,bs=o),o=op(o,d.children),o.flags|=4096,o)}function Ov(i,o,l){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),Mf(i.return,o,l)}function ap(i,o,l,d,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=l,y.tailMode=p)}function Lv(i,o,l){var d=o.pendingProps,p=d.revealOrder,y=d.tail;if(Jt(i,o,d.children,l),d=it.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ov(i,l,o);else if(i.tag===19)Ov(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(Xe(it,d),(o.mode&1)===0)o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)i=l.alternate,i!==null&&Bc(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),ap(o,!1,p,l,y);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&Bc(i)===null){o.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}ap(o,!0,l,null,y);break;case"together":ap(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Qc(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Yr(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),Ns|=o.lanes,(l&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,l=Li(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=Li(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function IS(i,o,l){switch(o.tag){case 3:Nv(o),ta();break;case 5:Xy(o);break;case 1:an(o.type)&&Pc(o);break;case 4:Uf(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,p=o.memoizedProps.value;Xe(Mc,d._currentValue),d._currentValue=p;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(Xe(it,it.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?Vv(i,o,l):(Xe(it,it.current&1),i=Yr(i,o,l),i!==null?i.sibling:null);Xe(it,it.current&1);break;case 19:if(d=(l&o.childLanes)!==0,(i.flags&128)!==0){if(d)return Lv(i,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Xe(it,it.current),d)break;return null;case 22:case 23:return o.lanes=0,Rv(i,o,l)}return Yr(i,o,l)}var Mv,lp,jv,Fv;Mv=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},lp=function(){},jv=function(i,o,l,d){var p=i.memoizedProps;if(p!==d){i=o.stateNode,Cs(_r.current);var y=null;switch(l){case"input":p=us(i,p),d=us(i,d),y=[];break;case"select":p=he({},p,{value:void 0}),d=he({},d,{value:void 0}),y=[];break;case"textarea":p=tl(i,p),d=tl(i,d),y=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=Ac)}al(l,d);var I;l=null;for(H in p)if(!d.hasOwnProperty(H)&&p.hasOwnProperty(H)&&p[H]!=null)if(H==="style"){var b=p[H];for(I in b)b.hasOwnProperty(I)&&(l||(l={}),l[I]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(s.hasOwnProperty(H)?y||(y=[]):(y=y||[]).push(H,null));for(H in d){var P=d[H];if(b=p!=null?p[H]:void 0,d.hasOwnProperty(H)&&P!==b&&(P!=null||b!=null))if(H==="style")if(b){for(I in b)!b.hasOwnProperty(I)||P&&P.hasOwnProperty(I)||(l||(l={}),l[I]="");for(I in P)P.hasOwnProperty(I)&&b[I]!==P[I]&&(l||(l={}),l[I]=P[I])}else l||(y||(y=[]),y.push(H,l)),l=P;else H==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,b=b?b.__html:void 0,P!=null&&b!==P&&(y=y||[]).push(H,P)):H==="children"?typeof P!="string"&&typeof P!="number"||(y=y||[]).push(H,""+P):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(s.hasOwnProperty(H)?(P!=null&&H==="onScroll"&&Ye("scroll",i),y||b===P||(y=[])):(y=y||[]).push(H,P))}l&&(y=y||[]).push("style",l);var H=y;(o.updateQueue=H)&&(o.flags|=4)}},Fv=function(i,o,l,d){l!==d&&(o.flags|=4)};function Bl(i,o){if(!et)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function $t(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(o)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=d,i.childLanes=l,o}function TS(i,o,l){var d=o.pendingProps;switch(Cf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(o),null;case 1:return an(o.type)&&Cc(),$t(o),null;case 3:return d=o.stateNode,sa(),Je(on),Je(Bt),$f(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(Oc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Jn!==null&&(_p(Jn),Jn=null))),lp(i,o),$t(o),null;case 5:Bf(o);var p=Cs(Ll.current);if(l=o.type,i!==null&&o.stateNode!=null)jv(i,o,l,d,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(t(166));return $t(o),null}if(i=Cs(_r.current),Oc(o)){d=o.stateNode,l=o.type;var y=o.memoizedProps;switch(d[vr]=o,d[Pl]=y,i=(o.mode&1)!==0,l){case"dialog":Ye("cancel",d),Ye("close",d);break;case"iframe":case"object":case"embed":Ye("load",d);break;case"video":case"audio":for(p=0;p<Al.length;p++)Ye(Al[p],d);break;case"source":Ye("error",d);break;case"img":case"image":case"link":Ye("error",d),Ye("load",d);break;case"details":Ye("toggle",d);break;case"input":wo(d,y),Ye("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},Ye("invalid",d);break;case"textarea":Io(d,y),Ye("invalid",d)}al(l,y),p=null;for(var I in y)if(y.hasOwnProperty(I)){var b=y[I];I==="children"?typeof b=="string"?d.textContent!==b&&(y.suppressHydrationWarning!==!0&&bc(d.textContent,b,i),p=["children",b]):typeof b=="number"&&d.textContent!==""+b&&(y.suppressHydrationWarning!==!0&&bc(d.textContent,b,i),p=["children",""+b]):s.hasOwnProperty(I)&&b!=null&&I==="onScroll"&&Ye("scroll",d)}switch(l){case"input":Or(d),Zu(d,y,!0);break;case"textarea":Or(d),nl(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=Ac)}d=p,o.updateQueue=d,d!==null&&(o.flags|=4)}else{I=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=_t(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=I.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=I.createElement(l,{is:d.is}):(i=I.createElement(l),l==="select"&&(I=i,d.multiple?I.multiple=!0:d.size&&(I.size=d.size))):i=I.createElementNS(i,l),i[vr]=o,i[Pl]=d,Mv(i,o,!1,!1),o.stateNode=i;e:{switch(I=ll(l,d),l){case"dialog":Ye("cancel",i),Ye("close",i),p=d;break;case"iframe":case"object":case"embed":Ye("load",i),p=d;break;case"video":case"audio":for(p=0;p<Al.length;p++)Ye(Al[p],i);p=d;break;case"source":Ye("error",i),p=d;break;case"img":case"image":case"link":Ye("error",i),Ye("load",i),p=d;break;case"details":Ye("toggle",i),p=d;break;case"input":wo(i,d),p=us(i,d),Ye("invalid",i);break;case"option":p=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},p=he({},d,{value:void 0}),Ye("invalid",i);break;case"textarea":Io(i,d),p=tl(i,d),Ye("invalid",i);break;default:p=d}al(l,p),b=p;for(y in b)if(b.hasOwnProperty(y)){var P=b[y];y==="style"?sl(i,P):y==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&rl(i,P)):y==="children"?typeof P=="string"?(l!=="textarea"||P!=="")&&pi(i,P):typeof P=="number"&&pi(i,""+P):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?P!=null&&y==="onScroll"&&Ye("scroll",i):P!=null&&W(i,y,P,I))}switch(l){case"input":Or(i),Zu(i,d,!1);break;case"textarea":Or(i),nl(i);break;case"option":d.value!=null&&i.setAttribute("value",""+Ue(d.value));break;case"select":i.multiple=!!d.multiple,y=d.value,y!=null?Mr(i,!!d.multiple,y,!1):d.defaultValue!=null&&Mr(i,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=Ac)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return $t(o),null;case 6:if(i&&o.stateNode!=null)Fv(i,o,i.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(t(166));if(l=Cs(Ll.current),Cs(_r.current),Oc(o)){if(d=o.stateNode,l=o.memoizedProps,d[vr]=o,(y=d.nodeValue!==l)&&(i=_n,i!==null))switch(i.tag){case 3:bc(d.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&bc(d.nodeValue,l,(i.mode&1)!==0)}y&&(o.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[vr]=o,o.stateNode=d}return $t(o),null;case 13:if(Je(it),d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(et&&wn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)zy(),ta(),o.flags|=98560,y=!1;else if(y=Oc(o),d!==null&&d.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[vr]=o}else ta(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;$t(o),y=!1}else Jn!==null&&(_p(Jn),Jn=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(it.current&1)!==0?Tt===0&&(Tt=3):Ip())),o.updateQueue!==null&&(o.flags|=4),$t(o),null);case 4:return sa(),lp(i,o),i===null&&Rl(o.stateNode.containerInfo),$t(o),null;case 10:return Lf(o.type._context),$t(o),null;case 17:return an(o.type)&&Cc(),$t(o),null;case 19:if(Je(it),y=o.memoizedState,y===null)return $t(o),null;if(d=(o.flags&128)!==0,I=y.rendering,I===null)if(d)Bl(y,!1);else{if(Tt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(I=Bc(i),I!==null){for(o.flags|=128,Bl(y,!1),d=I.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=l,l=o.child;l!==null;)y=l,i=d,y.flags&=14680066,I=y.alternate,I===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=I.childLanes,y.lanes=I.lanes,y.child=I.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=I.memoizedProps,y.memoizedState=I.memoizedState,y.updateQueue=I.updateQueue,y.type=I.type,i=I.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return Xe(it,it.current&1|2),o.child}i=i.sibling}y.tail!==null&&Qe()>ua&&(o.flags|=128,d=!0,Bl(y,!1),o.lanes=4194304)}else{if(!d)if(i=Bc(I),i!==null){if(o.flags|=128,d=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),Bl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!I.alternate&&!et)return $t(o),null}else 2*Qe()-y.renderingStartTime>ua&&l!==1073741824&&(o.flags|=128,d=!0,Bl(y,!1),o.lanes=4194304);y.isBackwards?(I.sibling=o.child,o.child=I):(l=y.last,l!==null?l.sibling=I:o.child=I,y.last=I)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=Qe(),o.sibling=null,l=it.current,Xe(it,d?l&1|2:l&1),o):($t(o),null);case 22:case 23:return Ep(),d=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(o.flags|=8192),d&&(o.mode&1)!==0?(En&1073741824)!==0&&($t(o),o.subtreeFlags&6&&(o.flags|=8192)):$t(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function xS(i,o){switch(Cf(o),o.tag){case 1:return an(o.type)&&Cc(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return sa(),Je(on),Je(Bt),$f(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Bf(o),null;case 13:if(Je(it),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ta()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Je(it),null;case 4:return sa(),null;case 10:return Lf(o.type._context),null;case 22:case 23:return Ep(),null;case 24:return null;default:return null}}var Xc=!1,qt=!1,SS=typeof WeakSet=="function"?WeakSet:Set,de=null;function aa(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){at(i,o,d)}else l.current=null}function up(i,o,l){try{l()}catch(d){at(i,o,d)}}var Uv=!1;function kS(i,o){if(Ef=Ii,i=vy(),ff(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var I=0,b=-1,P=-1,H=0,ee=0,te=i,Z=null;t:for(;;){for(var ue;te!==l||p!==0&&te.nodeType!==3||(b=I+p),te!==y||d!==0&&te.nodeType!==3||(P=I+d),te.nodeType===3&&(I+=te.nodeValue.length),(ue=te.firstChild)!==null;)Z=te,te=ue;for(;;){if(te===i)break t;if(Z===l&&++H===p&&(b=I),Z===y&&++ee===d&&(P=I),(ue=te.nextSibling)!==null)break;te=Z,Z=te.parentNode}te=ue}l=b===-1||P===-1?null:{start:b,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for(If={focusedElem:i,selectionRange:l},Ii=!1,de=o;de!==null;)if(o=de,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,de=i;else for(;de!==null;){o=de;try{var fe=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var me=fe.memoizedProps,dt=fe.memoizedState,z=o.stateNode,O=z.getSnapshotBeforeUpdate(o.elementType===o.type?me:Zn(o.type,me),dt);z.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var $=o.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){at(o,o.return,re)}if(i=o.sibling,i!==null){i.return=o.return,de=i;break}de=o.return}return fe=Uv,Uv=!1,fe}function zl(i,o,l){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&i)===i){var y=p.destroy;p.destroy=void 0,y!==void 0&&up(o,l,y)}p=p.next}while(p!==d)}}function Yc(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var d=l.create;l.destroy=d()}l=l.next}while(l!==o)}}function cp(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function Bv(i){var o=i.alternate;o!==null&&(i.alternate=null,Bv(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[vr],delete o[Pl],delete o[kf],delete o[lS],delete o[uS])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function zv(i){return i.tag===5||i.tag===3||i.tag===4}function $v(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||zv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function hp(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Ac));else if(d!==4&&(i=i.child,i!==null))for(hp(i,o,l),i=i.sibling;i!==null;)hp(i,o,l),i=i.sibling}function dp(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(dp(i,o,l),i=i.sibling;i!==null;)dp(i,o,l),i=i.sibling}var Ot=null,er=!1;function Pi(i,o,l){for(l=l.child;l!==null;)qv(i,o,l),l=l.sibling}function qv(i,o,l){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(vs,l)}catch{}switch(l.tag){case 5:qt||aa(l,o);case 6:var d=Ot,p=er;Ot=null,Pi(i,o,l),Ot=d,er=p,Ot!==null&&(er?(i=Ot,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):Ot.removeChild(l.stateNode));break;case 18:Ot!==null&&(er?(i=Ot,l=l.stateNode,i.nodeType===8?Sf(i.parentNode,l):i.nodeType===1&&Sf(i,l),Qn(i)):Sf(Ot,l.stateNode));break;case 4:d=Ot,p=er,Ot=l.stateNode.containerInfo,er=!0,Pi(i,o,l),Ot=d,er=p;break;case 0:case 11:case 14:case 15:if(!qt&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var y=p,I=y.destroy;y=y.tag,I!==void 0&&((y&2)!==0||(y&4)!==0)&&up(l,o,I),p=p.next}while(p!==d)}Pi(i,o,l);break;case 1:if(!qt&&(aa(l,o),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(b){at(l,o,b)}Pi(i,o,l);break;case 21:Pi(i,o,l);break;case 22:l.mode&1?(qt=(d=qt)||l.memoizedState!==null,Pi(i,o,l),qt=d):Pi(i,o,l);break;default:Pi(i,o,l)}}function Hv(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new SS),o.forEach(function(d){var p=OS.bind(null,i,d);l.has(d)||(l.add(d),d.then(p,p))})}}function tr(i,o){var l=o.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];try{var y=i,I=o,b=I;e:for(;b!==null;){switch(b.tag){case 5:Ot=b.stateNode,er=!1;break e;case 3:Ot=b.stateNode.containerInfo,er=!0;break e;case 4:Ot=b.stateNode.containerInfo,er=!0;break e}b=b.return}if(Ot===null)throw Error(t(160));qv(y,I,p),Ot=null,er=!1;var P=p.alternate;P!==null&&(P.return=null),p.return=null}catch(H){at(p,o,H)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Wv(o,i),o=o.sibling}function Wv(i,o){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(tr(o,i),Er(i),d&4){try{zl(3,i,i.return),Yc(3,i)}catch(me){at(i,i.return,me)}try{zl(5,i,i.return)}catch(me){at(i,i.return,me)}}break;case 1:tr(o,i),Er(i),d&512&&l!==null&&aa(l,l.return);break;case 5:if(tr(o,i),Er(i),d&512&&l!==null&&aa(l,l.return),i.flags&32){var p=i.stateNode;try{pi(p,"")}catch(me){at(i,i.return,me)}}if(d&4&&(p=i.stateNode,p!=null)){var y=i.memoizedProps,I=l!==null?l.memoizedProps:y,b=i.type,P=i.updateQueue;if(i.updateQueue=null,P!==null)try{b==="input"&&y.type==="radio"&&y.name!=null&&Za(p,y),ll(b,I);var H=ll(b,y);for(I=0;I<P.length;I+=2){var ee=P[I],te=P[I+1];ee==="style"?sl(p,te):ee==="dangerouslySetInnerHTML"?rl(p,te):ee==="children"?pi(p,te):W(p,ee,te,H)}switch(b){case"input":el(p,y);break;case"textarea":To(p,y);break;case"select":var Z=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var ue=y.value;ue!=null?Mr(p,!!y.multiple,ue,!1):Z!==!!y.multiple&&(y.defaultValue!=null?Mr(p,!!y.multiple,y.defaultValue,!0):Mr(p,!!y.multiple,y.multiple?[]:"",!1))}p[Pl]=y}catch(me){at(i,i.return,me)}}break;case 6:if(tr(o,i),Er(i),d&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,y=i.memoizedProps;try{p.nodeValue=y}catch(me){at(i,i.return,me)}}break;case 3:if(tr(o,i),Er(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Qn(o.containerInfo)}catch(me){at(i,i.return,me)}break;case 4:tr(o,i),Er(i);break;case 13:tr(o,i),Er(i),p=i.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(mp=Qe())),d&4&&Hv(i);break;case 22:if(ee=l!==null&&l.memoizedState!==null,i.mode&1?(qt=(H=qt)||ee,tr(o,i),qt=H):tr(o,i),Er(i),d&8192){if(H=i.memoizedState!==null,(i.stateNode.isHidden=H)&&!ee&&(i.mode&1)!==0)for(de=i,ee=i.child;ee!==null;){for(te=de=ee;de!==null;){switch(Z=de,ue=Z.child,Z.tag){case 0:case 11:case 14:case 15:zl(4,Z,Z.return);break;case 1:aa(Z,Z.return);var fe=Z.stateNode;if(typeof fe.componentWillUnmount=="function"){d=Z,l=Z.return;try{o=d,fe.props=o.memoizedProps,fe.state=o.memoizedState,fe.componentWillUnmount()}catch(me){at(d,l,me)}}break;case 5:aa(Z,Z.return);break;case 22:if(Z.memoizedState!==null){Qv(te);continue}}ue!==null?(ue.return=Z,de=ue):Qv(te)}ee=ee.sibling}e:for(ee=null,te=i;;){if(te.tag===5){if(ee===null){ee=te;try{p=te.stateNode,H?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(b=te.stateNode,P=te.memoizedProps.style,I=P!=null&&P.hasOwnProperty("display")?P.display:null,b.style.display=il("display",I))}catch(me){at(i,i.return,me)}}}else if(te.tag===6){if(ee===null)try{te.stateNode.nodeValue=H?"":te.memoizedProps}catch(me){at(i,i.return,me)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===i)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===i)break e;for(;te.sibling===null;){if(te.return===null||te.return===i)break e;ee===te&&(ee=null),te=te.return}ee===te&&(ee=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:tr(o,i),Er(i),d&4&&Hv(i);break;case 21:break;default:tr(o,i),Er(i)}}function Er(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(zv(l)){var d=l;break e}l=l.return}throw Error(t(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(pi(p,""),d.flags&=-33);var y=$v(i);dp(i,y,p);break;case 3:case 4:var I=d.stateNode.containerInfo,b=$v(i);hp(i,b,I);break;default:throw Error(t(161))}}catch(P){at(i,i.return,P)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function bS(i,o,l){de=i,Kv(i)}function Kv(i,o,l){for(var d=(i.mode&1)!==0;de!==null;){var p=de,y=p.child;if(p.tag===22&&d){var I=p.memoizedState!==null||Xc;if(!I){var b=p.alternate,P=b!==null&&b.memoizedState!==null||qt;b=Xc;var H=qt;if(Xc=I,(qt=P)&&!H)for(de=p;de!==null;)I=de,P=I.child,I.tag===22&&I.memoizedState!==null?Xv(p):P!==null?(P.return=I,de=P):Xv(p);for(;y!==null;)de=y,Kv(y),y=y.sibling;de=p,Xc=b,qt=H}Gv(i)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,de=y):Gv(i)}}function Gv(i){for(;de!==null;){var o=de;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:qt||Yc(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!qt)if(l===null)d.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:Zn(o.type,l.memoizedProps);d.componentDidUpdate(p,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&Qy(o,y,d);break;case 3:var I=o.updateQueue;if(I!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}Qy(o,I,l)}break;case 5:var b=o.stateNode;if(l===null&&o.flags&4){l=b;var P=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&l.focus();break;case"img":P.src&&(l.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var H=o.alternate;if(H!==null){var ee=H.memoizedState;if(ee!==null){var te=ee.dehydrated;te!==null&&Qn(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}qt||o.flags&512&&cp(o)}catch(Z){at(o,o.return,Z)}}if(o===i){de=null;break}if(l=o.sibling,l!==null){l.return=o.return,de=l;break}de=o.return}}function Qv(i){for(;de!==null;){var o=de;if(o===i){de=null;break}var l=o.sibling;if(l!==null){l.return=o.return,de=l;break}de=o.return}}function Xv(i){for(;de!==null;){var o=de;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{Yc(4,o)}catch(P){at(o,l,P)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var p=o.return;try{d.componentDidMount()}catch(P){at(o,p,P)}}var y=o.return;try{cp(o)}catch(P){at(o,y,P)}break;case 5:var I=o.return;try{cp(o)}catch(P){at(o,I,P)}}}catch(P){at(o,o.return,P)}if(o===i){de=null;break}var b=o.sibling;if(b!==null){b.return=o.return,de=b;break}de=o.return}}var AS=Math.ceil,Jc=oe.ReactCurrentDispatcher,fp=oe.ReactCurrentOwner,Vn=oe.ReactCurrentBatchConfig,Me=0,Rt=null,pt=null,Lt=0,En=0,la=ki(0),Tt=0,$l=null,Ns=0,Zc=0,pp=0,ql=null,un=null,mp=0,ua=1/0,Jr=null,eh=!1,gp=null,Ni=null,th=!1,Di=null,nh=0,Hl=0,yp=null,rh=-1,ih=0;function Zt(){return(Me&6)!==0?Qe():rh!==-1?rh:rh=Qe()}function Vi(i){return(i.mode&1)===0?1:(Me&2)!==0&&Lt!==0?Lt&-Lt:hS.transition!==null?(ih===0&&(ih=ws()),ih):(i=De,i!==0||(i=window.event,i=i===void 0?16:_l(i.type)),i)}function nr(i,o,l,d){if(50<Hl)throw Hl=0,yp=null,Error(t(185));vi(i,l,d),((Me&2)===0||i!==Rt)&&(i===Rt&&((Me&2)===0&&(Zc|=l),Tt===4&&Oi(i,Lt)),cn(i,d),l===1&&Me===0&&(o.mode&1)===0&&(ua=Qe()+500,Nc&&Ai()))}function cn(i,o){var l=i.callbackNode;Ur(i,o);var d=_s(i,i===Rt?Lt:0);if(d===0)l!==null&&pl(l),i.callbackNode=null,i.callbackPriority=0;else if(o=d&-d,i.callbackPriority!==o){if(l!=null&&pl(l),o===1)i.tag===0?cS(Jv.bind(null,i)):My(Jv.bind(null,i)),oS(function(){(Me&6)===0&&Ai()}),l=null;else{switch(wi(d)){case 1:l=ys;break;case 4:l=mi;break;case 16:l=bn;break;case 536870912:l=ic;break;default:l=bn}l=o_(l,Yv.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function Yv(i,o){if(rh=-1,ih=0,(Me&6)!==0)throw Error(t(327));var l=i.callbackNode;if(ca()&&i.callbackNode!==l)return null;var d=_s(i,i===Rt?Lt:0);if(d===0)return null;if((d&30)!==0||(d&i.expiredLanes)!==0||o)o=sh(i,d);else{o=d;var p=Me;Me|=2;var y=e_();(Rt!==i||Lt!==o)&&(Jr=null,ua=Qe()+500,Vs(i,o));do try{PS();break}catch(b){Zv(i,b)}while(!0);Of(),Jc.current=y,Me=p,pt!==null?o=0:(Rt=null,Lt=0,o=Tt)}if(o!==0){if(o===2&&(p=gn(i),p!==0&&(d=p,o=vp(i,p))),o===1)throw l=$l,Vs(i,0),Oi(i,d),cn(i,Qe()),l;if(o===6)Oi(i,d);else{if(p=i.current.alternate,(d&30)===0&&!RS(p)&&(o=sh(i,d),o===2&&(y=gn(i),y!==0&&(d=y,o=vp(i,y))),o===1))throw l=$l,Vs(i,0),Oi(i,d),cn(i,Qe()),l;switch(i.finishedWork=p,i.finishedLanes=d,o){case 0:case 1:throw Error(t(345));case 2:Os(i,un,Jr);break;case 3:if(Oi(i,d),(d&130023424)===d&&(o=mp+500-Qe(),10<o)){if(_s(i,0)!==0)break;if(p=i.suspendedLanes,(p&d)!==d){Zt(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=xf(Os.bind(null,i,un,Jr),o);break}Os(i,un,Jr);break;case 4:if(Oi(i,d),(d&4194240)===d)break;for(o=i.eventTimes,p=-1;0<d;){var I=31-Xt(d);y=1<<I,I=o[I],I>p&&(p=I),d&=~y}if(d=p,d=Qe()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*AS(d/1960))-d,10<d){i.timeoutHandle=xf(Os.bind(null,i,un,Jr),d);break}Os(i,un,Jr);break;case 5:Os(i,un,Jr);break;default:throw Error(t(329))}}}return cn(i,Qe()),i.callbackNode===l?Yv.bind(null,i):null}function vp(i,o){var l=ql;return i.current.memoizedState.isDehydrated&&(Vs(i,o).flags|=256),i=sh(i,o),i!==2&&(o=un,un=l,o!==null&&_p(o)),i}function _p(i){un===null?un=i:un.push.apply(un,i)}function RS(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var p=l[d],y=p.getSnapshot;p=p.value;try{if(!Yn(y(),p))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Oi(i,o){for(o&=~pp,o&=~Zc,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-Xt(o),d=1<<l;i[l]=-1,o&=~d}}function Jv(i){if((Me&6)!==0)throw Error(t(327));ca();var o=_s(i,0);if((o&1)===0)return cn(i,Qe()),null;var l=sh(i,o);if(i.tag!==0&&l===2){var d=gn(i);d!==0&&(o=d,l=vp(i,d))}if(l===1)throw l=$l,Vs(i,0),Oi(i,o),cn(i,Qe()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Os(i,un,Jr),cn(i,Qe()),null}function wp(i,o){var l=Me;Me|=1;try{return i(o)}finally{Me=l,Me===0&&(ua=Qe()+500,Nc&&Ai())}}function Ds(i){Di!==null&&Di.tag===0&&(Me&6)===0&&ca();var o=Me;Me|=1;var l=Vn.transition,d=De;try{if(Vn.transition=null,De=1,i)return i()}finally{De=d,Vn.transition=l,Me=o,(Me&6)===0&&Ai()}}function Ep(){En=la.current,Je(la)}function Vs(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,sS(l)),pt!==null)for(l=pt.return;l!==null;){var d=l;switch(Cf(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Cc();break;case 3:sa(),Je(on),Je(Bt),$f();break;case 5:Bf(d);break;case 4:sa();break;case 13:Je(it);break;case 19:Je(it);break;case 10:Lf(d.type._context);break;case 22:case 23:Ep()}l=l.return}if(Rt=i,pt=i=Li(i.current,null),Lt=En=o,Tt=0,$l=null,pp=Zc=Ns=0,un=ql=null,Rs!==null){for(o=0;o<Rs.length;o++)if(l=Rs[o],d=l.interleaved,d!==null){l.interleaved=null;var p=d.next,y=l.pending;if(y!==null){var I=y.next;y.next=p,d.next=I}l.pending=d}Rs=null}return i}function Zv(i,o){do{var l=pt;try{if(Of(),zc.current=Wc,$c){for(var d=st.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}$c=!1}if(Ps=0,At=It=st=null,Ml=!1,jl=0,fp.current=null,l===null||l.return===null){Tt=1,$l=o,pt=null;break}e:{var y=i,I=l.return,b=l,P=o;if(o=Lt,b.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var H=P,ee=b,te=ee.tag;if((ee.mode&1)===0&&(te===0||te===11||te===15)){var Z=ee.alternate;Z?(ee.updateQueue=Z.updateQueue,ee.memoizedState=Z.memoizedState,ee.lanes=Z.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var ue=xv(I);if(ue!==null){ue.flags&=-257,Sv(ue,I,b,y,o),ue.mode&1&&Tv(y,H,o),o=ue,P=H;var fe=o.updateQueue;if(fe===null){var me=new Set;me.add(P),o.updateQueue=me}else fe.add(P);break e}else{if((o&1)===0){Tv(y,H,o),Ip();break e}P=Error(t(426))}}else if(et&&b.mode&1){var dt=xv(I);if(dt!==null){(dt.flags&65536)===0&&(dt.flags|=256),Sv(dt,I,b,y,o),Df(oa(P,b));break e}}y=P=oa(P,b),Tt!==4&&(Tt=2),ql===null?ql=[y]:ql.push(y),y=I;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var z=Ev(y,P,o);Gy(y,z);break e;case 1:b=P;var O=y.type,$=y.stateNode;if((y.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Ni===null||!Ni.has($)))){y.flags|=65536,o&=-o,y.lanes|=o;var re=Iv(y,b,o);Gy(y,re);break e}}y=y.return}while(y!==null)}n_(l)}catch(ge){o=ge,pt===l&&l!==null&&(pt=l=l.return);continue}break}while(!0)}function e_(){var i=Jc.current;return Jc.current=Wc,i===null?Wc:i}function Ip(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Rt===null||(Ns&268435455)===0&&(Zc&268435455)===0||Oi(Rt,Lt)}function sh(i,o){var l=Me;Me|=2;var d=e_();(Rt!==i||Lt!==o)&&(Jr=null,Vs(i,o));do try{CS();break}catch(p){Zv(i,p)}while(!0);if(Of(),Me=l,Jc.current=d,pt!==null)throw Error(t(261));return Rt=null,Lt=0,Tt}function CS(){for(;pt!==null;)t_(pt)}function PS(){for(;pt!==null&&!nc();)t_(pt)}function t_(i){var o=s_(i.alternate,i,En);i.memoizedProps=i.pendingProps,o===null?n_(i):pt=o,fp.current=null}function n_(i){var o=i;do{var l=o.alternate;if(i=o.return,(o.flags&32768)===0){if(l=TS(l,o,En),l!==null){pt=l;return}}else{if(l=xS(l,o),l!==null){l.flags&=32767,pt=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Tt=6,pt=null;return}}if(o=o.sibling,o!==null){pt=o;return}pt=o=i}while(o!==null);Tt===0&&(Tt=5)}function Os(i,o,l){var d=De,p=Vn.transition;try{Vn.transition=null,De=1,NS(i,o,l,d)}finally{Vn.transition=p,De=d}return null}function NS(i,o,l,d){do ca();while(Di!==null);if((Me&6)!==0)throw Error(t(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=l.lanes|l.childLanes;if(Ke(i,y),i===Rt&&(pt=Rt=null,Lt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||th||(th=!0,o_(bn,function(){return ca(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=Vn.transition,Vn.transition=null;var I=De;De=1;var b=Me;Me|=4,fp.current=null,kS(i,l),Wv(l,i),Jx(If),Ii=!!Ef,If=Ef=null,i.current=l,bS(l),sf(),Me=b,De=I,Vn.transition=y}else i.current=l;if(th&&(th=!1,Di=i,nh=p),y=i.pendingLanes,y===0&&(Ni=null),sc(l.stateNode),cn(i,Qe()),o!==null)for(d=i.onRecoverableError,l=0;l<o.length;l++)p=o[l],d(p.value,{componentStack:p.stack,digest:p.digest});if(eh)throw eh=!1,i=gp,gp=null,i;return(nh&1)!==0&&i.tag!==0&&ca(),y=i.pendingLanes,(y&1)!==0?i===yp?Hl++:(Hl=0,yp=i):Hl=0,Ai(),null}function ca(){if(Di!==null){var i=wi(nh),o=Vn.transition,l=De;try{if(Vn.transition=null,De=16>i?16:i,Di===null)var d=!1;else{if(i=Di,Di=null,nh=0,(Me&6)!==0)throw Error(t(331));var p=Me;for(Me|=4,de=i.current;de!==null;){var y=de,I=y.child;if((de.flags&16)!==0){var b=y.deletions;if(b!==null){for(var P=0;P<b.length;P++){var H=b[P];for(de=H;de!==null;){var ee=de;switch(ee.tag){case 0:case 11:case 15:zl(8,ee,y)}var te=ee.child;if(te!==null)te.return=ee,de=te;else for(;de!==null;){ee=de;var Z=ee.sibling,ue=ee.return;if(Bv(ee),ee===H){de=null;break}if(Z!==null){Z.return=ue,de=Z;break}de=ue}}}var fe=y.alternate;if(fe!==null){var me=fe.child;if(me!==null){fe.child=null;do{var dt=me.sibling;me.sibling=null,me=dt}while(me!==null)}}de=y}}if((y.subtreeFlags&2064)!==0&&I!==null)I.return=y,de=I;else e:for(;de!==null;){if(y=de,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:zl(9,y,y.return)}var z=y.sibling;if(z!==null){z.return=y.return,de=z;break e}de=y.return}}var O=i.current;for(de=O;de!==null;){I=de;var $=I.child;if((I.subtreeFlags&2064)!==0&&$!==null)$.return=I,de=$;else e:for(I=O;de!==null;){if(b=de,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:Yc(9,b)}}catch(ge){at(b,b.return,ge)}if(b===I){de=null;break e}var re=b.sibling;if(re!==null){re.return=b.return,de=re;break e}de=b.return}}if(Me=p,Ai(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(vs,i)}catch{}d=!0}return d}finally{De=l,Vn.transition=o}}return!1}function r_(i,o,l){o=oa(l,o),o=Ev(i,o,1),i=Ci(i,o,1),o=Zt(),i!==null&&(vi(i,1,o),cn(i,o))}function at(i,o,l){if(i.tag===3)r_(i,i,l);else for(;o!==null;){if(o.tag===3){r_(o,i,l);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ni===null||!Ni.has(d))){i=oa(l,i),i=Iv(o,i,1),o=Ci(o,i,1),i=Zt(),o!==null&&(vi(o,1,i),cn(o,i));break}}o=o.return}}function DS(i,o,l){var d=i.pingCache;d!==null&&d.delete(o),o=Zt(),i.pingedLanes|=i.suspendedLanes&l,Rt===i&&(Lt&l)===l&&(Tt===4||Tt===3&&(Lt&130023424)===Lt&&500>Qe()-mp?Vs(i,0):pp|=l),cn(i,o)}function i_(i,o){o===0&&((i.mode&1)===0?o=1:(o=Do,Do<<=1,(Do&130023424)===0&&(Do=4194304)));var l=Zt();i=Qr(i,o),i!==null&&(vi(i,o,l),cn(i,l))}function VS(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),i_(i,l)}function OS(i,o){var l=0;switch(i.tag){case 13:var d=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(o),i_(i,l)}var s_;s_=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||on.current)ln=!0;else{if((i.lanes&l)===0&&(o.flags&128)===0)return ln=!1,IS(i,o,l);ln=(i.flags&131072)!==0}else ln=!1,et&&(o.flags&1048576)!==0&&jy(o,Vc,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;Qc(i,o),i=o.pendingProps;var p=Jo(o,Bt.current);ia(o,l),p=Wf(null,o,d,i,p,l);var y=Kf();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,an(d)?(y=!0,Pc(o)):y=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Ff(o),p.updater=Kc,o.stateNode=p,p._reactInternals=o,Zf(o,d,i,l),o=rp(null,o,d,!0,y,l)):(o.tag=0,et&&y&&Rf(o),Jt(null,o,p,l),o=o.child),o;case 16:d=o.elementType;e:{switch(Qc(i,o),i=o.pendingProps,p=d._init,d=p(d._payload),o.type=d,p=o.tag=MS(d),i=Zn(d,i),p){case 0:o=np(null,o,d,i,l);break e;case 1:o=Pv(null,o,d,i,l);break e;case 11:o=kv(null,o,d,i,l);break e;case 14:o=bv(null,o,d,Zn(d.type,i),l);break e}throw Error(t(306,d,""))}return o;case 0:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Zn(d,p),np(i,o,d,p,l);case 1:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Zn(d,p),Pv(i,o,d,p,l);case 3:e:{if(Nv(o),i===null)throw Error(t(387));d=o.pendingProps,y=o.memoizedState,p=y.element,Ky(i,o),Uc(o,d,null,l);var I=o.memoizedState;if(d=I.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){p=oa(Error(t(423)),o),o=Dv(i,o,d,l,p);break e}else if(d!==p){p=oa(Error(t(424)),o),o=Dv(i,o,d,l,p);break e}else for(wn=Si(o.stateNode.containerInfo.firstChild),_n=o,et=!0,Jn=null,l=Hy(o,null,d,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ta(),d===p){o=Yr(i,o,l);break e}Jt(i,o,d,l)}o=o.child}return o;case 5:return Xy(o),i===null&&Nf(o),d=o.type,p=o.pendingProps,y=i!==null?i.memoizedProps:null,I=p.children,Tf(d,p)?I=null:y!==null&&Tf(d,y)&&(o.flags|=32),Cv(i,o),Jt(i,o,I,l),o.child;case 6:return i===null&&Nf(o),null;case 13:return Vv(i,o,l);case 4:return Uf(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=na(o,null,d,l):Jt(i,o,d,l),o.child;case 11:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Zn(d,p),kv(i,o,d,p,l);case 7:return Jt(i,o,o.pendingProps,l),o.child;case 8:return Jt(i,o,o.pendingProps.children,l),o.child;case 12:return Jt(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(d=o.type._context,p=o.pendingProps,y=o.memoizedProps,I=p.value,Xe(Mc,d._currentValue),d._currentValue=I,y!==null)if(Yn(y.value,I)){if(y.children===p.children&&!on.current){o=Yr(i,o,l);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var b=y.dependencies;if(b!==null){I=y.child;for(var P=b.firstContext;P!==null;){if(P.context===d){if(y.tag===1){P=Xr(-1,l&-l),P.tag=2;var H=y.updateQueue;if(H!==null){H=H.shared;var ee=H.pending;ee===null?P.next=P:(P.next=ee.next,ee.next=P),H.pending=P}}y.lanes|=l,P=y.alternate,P!==null&&(P.lanes|=l),Mf(y.return,l,o),b.lanes|=l;break}P=P.next}}else if(y.tag===10)I=y.type===o.type?null:y.child;else if(y.tag===18){if(I=y.return,I===null)throw Error(t(341));I.lanes|=l,b=I.alternate,b!==null&&(b.lanes|=l),Mf(I,l,o),I=y.sibling}else I=y.child;if(I!==null)I.return=y;else for(I=y;I!==null;){if(I===o){I=null;break}if(y=I.sibling,y!==null){y.return=I.return,I=y;break}I=I.return}y=I}Jt(i,o,p.children,l),o=o.child}return o;case 9:return p=o.type,d=o.pendingProps.children,ia(o,l),p=Nn(p),d=d(p),o.flags|=1,Jt(i,o,d,l),o.child;case 14:return d=o.type,p=Zn(d,o.pendingProps),p=Zn(d.type,p),bv(i,o,d,p,l);case 15:return Av(i,o,o.type,o.pendingProps,l);case 17:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Zn(d,p),Qc(i,o),o.tag=1,an(d)?(i=!0,Pc(o)):i=!1,ia(o,l),_v(o,d,p),Zf(o,d,p,l),rp(null,o,d,!0,i,l);case 19:return Lv(i,o,l);case 22:return Rv(i,o,l)}throw Error(t(156,o.tag))};function o_(i,o){return Po(i,o)}function LS(i,o,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(i,o,l,d){return new LS(i,o,l,d)}function Tp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function MS(i){if(typeof i=="function")return Tp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===j)return 11;if(i===Ft)return 14}return 2}function Li(i,o){var l=i.alternate;return l===null?(l=On(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function oh(i,o,l,d,p,y){var I=2;if(d=i,typeof i=="function")Tp(i)&&(I=1);else if(typeof i=="string")I=5;else e:switch(i){case C:return Ls(l.children,p,y,o);case k:I=8,p|=8;break;case A:return i=On(12,l,o,p|2),i.elementType=A,i.lanes=y,i;case R:return i=On(13,l,o,p),i.elementType=R,i.lanes=y,i;case ct:return i=On(19,l,o,p),i.elementType=ct,i.lanes=y,i;case We:return ah(l,p,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case N:I=10;break e;case D:I=9;break e;case j:I=11;break e;case Ft:I=14;break e;case Ut:I=16,d=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=On(I,l,o,p),o.elementType=i,o.type=d,o.lanes=y,o}function Ls(i,o,l,d){return i=On(7,i,d,o),i.lanes=l,i}function ah(i,o,l,d){return i=On(22,i,d,o),i.elementType=We,i.lanes=l,i.stateNode={isHidden:!1},i}function xp(i,o,l){return i=On(6,i,null,o),i.lanes=l,i}function Sp(i,o,l){return o=On(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function jS(i,o,l,d,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yi(0),this.expirationTimes=yi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yi(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function kp(i,o,l,d,p,y,I,b,P){return i=new jS(i,o,l,b,P),o===1?(o=1,y===!0&&(o|=8)):o=0,y=On(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ff(y),i}function FS(i,o,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:d==null?null:""+d,children:i,containerInfo:o,implementation:l}}function a_(i){if(!i)return bi;i=i._reactInternals;e:{if(qn(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(an(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(an(l))return Oy(i,l,o)}return o}function l_(i,o,l,d,p,y,I,b,P){return i=kp(l,d,!0,i,p,y,I,b,P),i.context=a_(null),l=i.current,d=Zt(),p=Vi(l),y=Xr(d,p),y.callback=o??null,Ci(l,y,p),i.current.lanes=p,vi(i,p,d),cn(i,d),i}function lh(i,o,l,d){var p=o.current,y=Zt(),I=Vi(p);return l=a_(l),o.context===null?o.context=l:o.pendingContext=l,o=Xr(y,I),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=Ci(p,o,I),i!==null&&(nr(i,p,I,y),Fc(i,p,I)),I}function uh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function u_(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function bp(i,o){u_(i,o),(i=i.alternate)&&u_(i,o)}function US(){return null}var c_=typeof reportError=="function"?reportError:function(i){console.error(i)};function Ap(i){this._internalRoot=i}ch.prototype.render=Ap.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));lh(i,o,null,null)},ch.prototype.unmount=Ap.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Ds(function(){lh(null,i,null,null)}),o[Hr]=null}};function ch(i){this._internalRoot=i}ch.prototype.unstable_scheduleHydration=function(i){if(i){var o=cc();i={blockedOn:null,target:i,priority:o};for(var l=0;l<pr.length&&o!==0&&o<pr[l].priority;l++);pr.splice(l,0,i),l===0&&fc(i)}};function Rp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function hh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function h_(){}function BS(i,o,l,d,p){if(p){if(typeof d=="function"){var y=d;d=function(){var H=uh(I);y.call(H)}}var I=l_(o,d,i,0,null,!1,!1,"",h_);return i._reactRootContainer=I,i[Hr]=I.current,Rl(i.nodeType===8?i.parentNode:i),Ds(),I}for(;p=i.lastChild;)i.removeChild(p);if(typeof d=="function"){var b=d;d=function(){var H=uh(P);b.call(H)}}var P=kp(i,0,!1,null,null,!1,!1,"",h_);return i._reactRootContainer=P,i[Hr]=P.current,Rl(i.nodeType===8?i.parentNode:i),Ds(function(){lh(o,P,l,d)}),P}function dh(i,o,l,d,p){var y=l._reactRootContainer;if(y){var I=y;if(typeof p=="function"){var b=p;p=function(){var P=uh(I);b.call(P)}}lh(o,I,i,p)}else I=BS(l,o,i,p,d);return uh(I)}lc=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=gi(o.pendingLanes);l!==0&&(_i(o,l|1),cn(o,Qe()),(Me&6)===0&&(ua=Qe()+500,Ai()))}break;case 13:Ds(function(){var d=Qr(i,1);if(d!==null){var p=Zt();nr(d,i,1,p)}}),bp(i,1)}},Vo=function(i){if(i.tag===13){var o=Qr(i,134217728);if(o!==null){var l=Zt();nr(o,i,134217728,l)}bp(i,134217728)}},uc=function(i){if(i.tag===13){var o=Vi(i),l=Qr(i,o);if(l!==null){var d=Zt();nr(l,i,o,d)}bp(i,o)}},cc=function(){return De},hc=function(i,o){var l=De;try{return De=i,o()}finally{De=l}},So=function(i,o,l){switch(o){case"input":if(el(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var d=l[o];if(d!==i&&d.form===i.form){var p=Rc(d);if(!p)throw Error(t(90));_o(d),el(d,p)}}}break;case"textarea":To(i,l);break;case"select":o=l.value,o!=null&&Mr(i,!!l.multiple,o,!1)}},fs=wp,cl=Ds;var zS={usingClientEntryPoint:!1,Events:[Nl,Xo,Rc,dr,ul,wp]},Wl={findFiberByHostInstance:Ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$S={bundleType:Wl.bundleType,version:Wl.version,rendererPackageName:Wl.rendererPackageName,rendererConfig:Wl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=fl(i),i===null?null:i.stateNode},findFiberByHostInstance:Wl.findFiberByHostInstance||US,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fh.isDisabled&&fh.supportsFiber)try{vs=fh.inject($S),mn=fh}catch{}}return hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zS,hn.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rp(o))throw Error(t(200));return FS(i,o,null,l)},hn.createRoot=function(i,o){if(!Rp(i))throw Error(t(299));var l=!1,d="",p=c_;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=kp(i,1,!1,null,null,l,!1,d,p),i[Hr]=o.current,Rl(i.nodeType===8?i.parentNode:i),new Ap(o)},hn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=fl(o),i=i===null?null:i.stateNode,i},hn.flushSync=function(i){return Ds(i)},hn.hydrate=function(i,o,l){if(!hh(o))throw Error(t(200));return dh(null,i,o,!0,l)},hn.hydrateRoot=function(i,o,l){if(!Rp(i))throw Error(t(405));var d=l!=null&&l.hydratedSources||null,p=!1,y="",I=c_;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(I=l.onRecoverableError)),o=l_(o,null,i,1,l??null,p,!1,y,I),i[Hr]=o.current,Rl(i),d)for(i=0;i<d.length;i++)l=d[i],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new ch(o)},hn.render=function(i,o,l){if(!hh(o))throw Error(t(200));return dh(null,i,o,!1,l)},hn.unmountComponentAtNode=function(i){if(!hh(i))throw Error(t(40));return i._reactRootContainer?(Ds(function(){dh(null,null,i,!1,function(){i._reactRootContainer=null,i[Hr]=null})}),!0):!1},hn.unstable_batchedUpdates=wp,hn.unstable_renderSubtreeIntoContainer=function(i,o,l,d){if(!hh(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return dh(i,o,l,!1,d)},hn.version="18.3.1-next-f1338f8080-20240426",hn}var __;function YS(){if(__)return Np.exports;__=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Np.exports=XS(),Np.exports}var w_;function JS(){if(w_)return ph;w_=1;var n=YS();return ph.createRoot=n.createRoot,ph.hydrateRoot=n.hydrateRoot,ph}var ZS=JS();const ek=j0(ZS);/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var E_="popstate";function tk(n={}){function e(r,s){let{pathname:a,search:u,hash:h}=r.location;return Zp("",{pathname:a,search:u,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:yu(s)}return rk(e,t,null,n)}function nt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Un(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nk(){return Math.random().toString(36).substring(2,10)}function I_(n,e){return{usr:n.state,key:n.key,idx:e}}function Zp(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ba(e):e,state:t,key:e&&e.key||r||nk()}}function yu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ba(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function rk(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,u=s.history,h="POP",f=null,m=v();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function v(){return(u.state||{idx:null}).idx}function w(){h="POP";let L=v(),Q=L==null?null:L-m;m=L,f&&f({action:h,location:M.location,delta:Q})}function T(L,Q){h="PUSH";let J=Zp(M.location,L,Q);m=v()+1;let W=I_(J,m),oe=M.createHref(J);try{u.pushState(W,"",oe)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;s.location.assign(oe)}a&&f&&f({action:h,location:M.location,delta:1})}function S(L,Q){h="REPLACE";let J=Zp(M.location,L,Q);m=v();let W=I_(J,m),oe=M.createHref(J);u.replaceState(W,"",oe),a&&f&&f({action:h,location:M.location,delta:0})}function V(L){return ik(L)}let M={get action(){return h},get location(){return n(s,u)},listen(L){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(E_,w),f=L,()=>{s.removeEventListener(E_,w),f=null}},createHref(L){return e(s,L)},createURL:V,encodeLocation(L){let Q=V(L);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:T,replace:S,go(L){return u.go(L)}};return M}function ik(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),nt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:yu(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function F0(n,e,t="/"){return sk(n,e,t,!1)}function sk(n,e,t,r){let s=typeof e=="string"?Ba(e):e,a=si(s.pathname||"/",t);if(a==null)return null;let u=U0(n);ok(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let m=yk(a);h=mk(u[f],m,r)}return h}function U0(n,e=[],t=[],r="",s=!1){let a=(u,h,f=s,m)=>{let v={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(r)&&f)return;nt(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length)}let w=ii([r,v.relativePath]),T=t.concat(v);u.children&&u.children.length>0&&(nt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),U0(u.children,e,T,w,f)),!(u.path==null&&!u.index)&&e.push({path:w,score:fk(w,u.index),routesMeta:T})};return n.forEach((u,h)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))a(u,h);else for(let m of B0(u.path))a(u,h,!0,m)}),e}function B0(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let u=B0(r.join("/")),h=[];return h.push(...u.map(f=>f===""?a:[a,f].join("/"))),s&&h.push(...u),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function ok(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:pk(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var ak=/^:[\w-]+$/,lk=3,uk=2,ck=1,hk=10,dk=-2,T_=n=>n==="*";function fk(n,e){let t=n.split("/"),r=t.length;return t.some(T_)&&(r+=dk),e&&(r+=uk),t.filter(s=>!T_(s)).reduce((s,a)=>s+(ak.test(a)?lk:a===""?ck:hk),r)}function pk(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function mk(n,e,t=!1){let{routesMeta:r}=n,s={},a="/",u=[];for(let h=0;h<r.length;++h){let f=r[h],m=h===r.length-1,v=a==="/"?e:e.slice(a.length)||"/",w=zh({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},v),T=f.route;if(!w&&m&&t&&!r[r.length-1].route.index&&(w=zh({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!w)return null;Object.assign(s,w.params),u.push({params:s,pathname:ii([a,w.pathname]),pathnameBase:Ik(ii([a,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(a=ii([a,w.pathnameBase]))}return u}function zh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=gk(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((m,{paramName:v,isOptional:w},T)=>{if(v==="*"){let V=h[T]||"";u=a.slice(0,a.length-V.length).replace(/(.)\/+$/,"$1")}const S=h[T];return w&&!S?m[v]=void 0:m[v]=(S||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function gk(n,e=!1,t=!0){Un(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function yk(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Un(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function si(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var vk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_k=n=>vk.test(n);function wk(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Ba(n):n,a;if(t)if(_k(t))a=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),Un(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${t}`)}t.startsWith("/")?a=x_(t.substring(1),"/"):a=x_(t,e)}else a=e;return{pathname:a,search:Tk(r),hash:xk(s)}}function x_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Op(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ek(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Lm(n){let e=Ek(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Mm(n,e,t,r=!1){let s;typeof n=="string"?s=Ba(n):(s={...n},nt(!s.pathname||!s.pathname.includes("?"),Op("?","pathname","search",s)),nt(!s.pathname||!s.pathname.includes("#"),Op("#","pathname","hash",s)),nt(!s.search||!s.search.includes("#"),Op("#","search","hash",s)));let a=n===""||s.pathname==="",u=a?"/":s.pathname,h;if(u==null)h=t;else{let w=e.length-1;if(!r&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),w-=1;s.pathname=T.join("/")}h=w>=0?e[w]:"/"}let f=wk(s,h),m=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||v)&&(f.pathname+="/"),f}var ii=n=>n.join("/").replace(/\/\/+/g,"/"),Ik=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Tk=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,xk=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Sk(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function kk(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var z0=["POST","PUT","PATCH","DELETE"];new Set(z0);var bk=["GET",...z0];new Set(bk);var za=q.createContext(null);za.displayName="DataRouter";var vd=q.createContext(null);vd.displayName="DataRouterState";q.createContext(!1);var $0=q.createContext({isTransitioning:!1});$0.displayName="ViewTransition";var Ak=q.createContext(new Map);Ak.displayName="Fetchers";var Rk=q.createContext(null);Rk.displayName="Await";var Bn=q.createContext(null);Bn.displayName="Navigation";var Vu=q.createContext(null);Vu.displayName="Location";var lr=q.createContext({outlet:null,matches:[],isDataRoute:!1});lr.displayName="Route";var jm=q.createContext(null);jm.displayName="RouteError";function Ck(n,{relative:e}={}){nt($a(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=q.useContext(Bn),{hash:s,pathname:a,search:u}=Ou(n,{relative:e}),h=a;return t!=="/"&&(h=a==="/"?t:ii([t,a])),r.createHref({pathname:h,search:u,hash:s})}function $a(){return q.useContext(Vu)!=null}function ss(){return nt($a(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(Vu).location}var q0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function H0(n){q.useContext(Bn).static||q.useLayoutEffect(n)}function ur(){let{isDataRoute:n}=q.useContext(lr);return n?$k():Pk()}function Pk(){nt($a(),"useNavigate() may be used only in the context of a <Router> component.");let n=q.useContext(za),{basename:e,navigator:t}=q.useContext(Bn),{matches:r}=q.useContext(lr),{pathname:s}=ss(),a=JSON.stringify(Lm(r)),u=q.useRef(!1);return H0(()=>{u.current=!0}),q.useCallback((f,m={})=>{if(Un(u.current,q0),!u.current)return;if(typeof f=="number"){t.go(f);return}let v=Mm(f,JSON.parse(a),s,m.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:ii([e,v.pathname])),(m.replace?t.replace:t.push)(v,m.state,m)},[e,t,a,s,n])}q.createContext(null);function W0(){let{matches:n}=q.useContext(lr),e=n[n.length-1];return e?e.params:{}}function Ou(n,{relative:e}={}){let{matches:t}=q.useContext(lr),{pathname:r}=ss(),s=JSON.stringify(Lm(t));return q.useMemo(()=>Mm(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function Nk(n,e){return K0(n,e)}function K0(n,e,t,r,s){var J;nt($a(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=q.useContext(Bn),{matches:u}=q.useContext(lr),h=u[u.length-1],f=h?h.params:{},m=h?h.pathname:"/",v=h?h.pathnameBase:"/",w=h&&h.route;{let W=w&&w.path||"";G0(m,!w||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let T=ss(),S;if(e){let W=typeof e=="string"?Ba(e):e;nt(v==="/"||((J=W.pathname)==null?void 0:J.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${W.pathname}" was given in the \`location\` prop.`),S=W}else S=T;let V=S.pathname||"/",M=V;if(v!=="/"){let W=v.replace(/^\//,"").split("/");M="/"+V.replace(/^\//,"").split("/").slice(W.length).join("/")}let L=F0(n,{pathname:M});Un(w||L!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Un(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=Mk(L&&L.map(W=>Object.assign({},W,{params:Object.assign({},f,W.params),pathname:ii([v,a.encodeLocation?a.encodeLocation(W.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?v:ii([v,a.encodeLocation?a.encodeLocation(W.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathnameBase])})),u,t,r,s);return e&&Q?q.createElement(Vu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},Q):Q}function Dk(){let n=zk(),e=Sk(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:a},"ErrorBoundary")," or"," ",q.createElement("code",{style:a},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:s},t):null,u)}var Vk=q.createElement(Dk,null),Ok=class extends q.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?q.createElement(lr.Provider,{value:this.props.routeContext},q.createElement(jm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Lk({routeContext:n,match:e,children:t}){let r=q.useContext(za);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(lr.Provider,{value:n},t)}function Mk(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,u=t==null?void 0:t.errors;if(u!=null){let v=a.findIndex(w=>w.route.id&&(u==null?void 0:u[w.route.id])!==void 0);nt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,v+1))}let h=!1,f=-1;if(t)for(let v=0;v<a.length;v++){let w=a[v];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(f=v),w.route.id){let{loaderData:T,errors:S}=t,V=w.route.loader&&!T.hasOwnProperty(w.route.id)&&(!S||S[w.route.id]===void 0);if(w.route.lazy||V){h=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}let m=t&&r?(v,w)=>{var T,S;r(v,{location:t.location,params:((S=(T=t.matches)==null?void 0:T[0])==null?void 0:S.params)??{},unstable_pattern:kk(t.matches),errorInfo:w})}:void 0;return a.reduceRight((v,w,T)=>{let S,V=!1,M=null,L=null;t&&(S=u&&w.route.id?u[w.route.id]:void 0,M=w.route.errorElement||Vk,h&&(f<0&&T===0?(G0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),V=!0,L=null):f===T&&(V=!0,L=w.route.hydrateFallbackElement||null)));let Q=e.concat(a.slice(0,T+1)),J=()=>{let W;return S?W=M:V?W=L:w.route.Component?W=q.createElement(w.route.Component,null):w.route.element?W=w.route.element:W=v,q.createElement(Lk,{match:w,routeContext:{outlet:v,matches:Q,isDataRoute:t!=null},children:W})};return t&&(w.route.ErrorBoundary||w.route.errorElement||T===0)?q.createElement(Ok,{location:t.location,revalidation:t.revalidation,component:M,error:S,children:J(),routeContext:{outlet:null,matches:Q,isDataRoute:!0},onError:m}):J()},null)}function Fm(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jk(n){let e=q.useContext(za);return nt(e,Fm(n)),e}function Fk(n){let e=q.useContext(vd);return nt(e,Fm(n)),e}function Uk(n){let e=q.useContext(lr);return nt(e,Fm(n)),e}function Um(n){let e=Uk(n),t=e.matches[e.matches.length-1];return nt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Bk(){return Um("useRouteId")}function zk(){var r;let n=q.useContext(jm),e=Fk("useRouteError"),t=Um("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function $k(){let{router:n}=jk("useNavigate"),e=Um("useNavigate"),t=q.useRef(!1);return H0(()=>{t.current=!0}),q.useCallback(async(s,a={})=>{Un(t.current,q0),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var S_={};function G0(n,e,t){!e&&!S_[n]&&(S_[n]=!0,Un(!1,t))}q.memo(qk);function qk({routes:n,future:e,state:t,unstable_onError:r}){return K0(n,void 0,t,r,e)}function Hk({to:n,replace:e,state:t,relative:r}){nt($a(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=q.useContext(Bn);Un(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=q.useContext(lr),{pathname:u}=ss(),h=ur(),f=Mm(n,Lm(a),u,r==="path"),m=JSON.stringify(f);return q.useEffect(()=>{h(JSON.parse(m),{replace:e,state:t,relative:r})},[h,m,r,e,t]),null}function Zr(n){nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Wk({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:a=!1,unstable_useTransitions:u}){nt(!$a(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=n.replace(/^\/*/,"/"),f=q.useMemo(()=>({basename:h,navigator:s,static:a,unstable_useTransitions:u,future:{}}),[h,s,a,u]);typeof t=="string"&&(t=Ba(t));let{pathname:m="/",search:v="",hash:w="",state:T=null,key:S="default"}=t,V=q.useMemo(()=>{let M=si(m,h);return M==null?null:{location:{pathname:M,search:v,hash:w,state:T,key:S},navigationType:r}},[h,m,v,w,T,S,r]);return Un(V!=null,`<Router basename="${h}"> is not able to match the URL "${m}${v}${w}" because it does not start with the basename, so the <Router> won't render anything.`),V==null?null:q.createElement(Bn.Provider,{value:f},q.createElement(Vu.Provider,{children:e,value:V}))}function Kk({children:n,location:e}){return Nk(em(n),e)}function em(n,e=[]){let t=[];return q.Children.forEach(n,(r,s)=>{if(!q.isValidElement(r))return;let a=[...e,s];if(r.type===q.Fragment){t.push.apply(t,em(r.props.children,a));return}nt(r.type===Zr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),nt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=em(r.props.children,a)),t.push(u)}),t}var xh="get",Sh="application/x-www-form-urlencoded";function _d(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function Gk(n){return _d(n)&&n.tagName.toLowerCase()==="button"}function Qk(n){return _d(n)&&n.tagName.toLowerCase()==="form"}function Xk(n){return _d(n)&&n.tagName.toLowerCase()==="input"}function Yk(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Jk(n,e){return n.button===0&&(!e||e==="_self")&&!Yk(n)}var mh=null;function Zk(){if(mh===null)try{new FormData(document.createElement("form"),0),mh=!1}catch{mh=!0}return mh}var e1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lp(n){return n!=null&&!e1.has(n)?(Un(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Sh}"`),null):n}function t1(n,e){let t,r,s,a,u;if(Qk(n)){let h=n.getAttribute("action");r=h?si(h,e):null,t=n.getAttribute("method")||xh,s=Lp(n.getAttribute("enctype"))||Sh,a=new FormData(n)}else if(Gk(n)||Xk(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||h.getAttribute("action");if(r=f?si(f,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||xh,s=Lp(n.getAttribute("formenctype"))||Lp(h.getAttribute("enctype"))||Sh,a=new FormData(h,n),!Zk()){let{name:m,type:v,value:w}=n;if(v==="image"){let T=m?`${m}.`:"";a.append(`${T}x`,"0"),a.append(`${T}y`,"0")}else m&&a.append(m,w)}}else{if(_d(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=xh,r=null,s=Sh,u=n}return a&&s==="text/plain"&&(u=a,a=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:a,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Bm(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function n1(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&si(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function r1(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function i1(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function s1(n,e,t){let r=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let u=await r1(a,t);return u.links?u.links():[]}return[]}));return u1(r.flat(1).filter(i1).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function k_(n,e,t,r,s,a){let u=(f,m)=>t[m]?f.route.id!==t[m].route.id:!0,h=(f,m)=>{var v;return t[m].pathname!==f.pathname||((v=t[m].route.path)==null?void 0:v.endsWith("*"))&&t[m].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,m)=>u(f,m)||h(f,m)):a==="data"?e.filter((f,m)=>{var w;let v=r.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(u(f,m)||h(f,m))return!0;if(f.route.shouldRevalidate){let T=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((w=t[0])==null?void 0:w.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function o1(n,e,{includeHydrateFallback:t}={}){return a1(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function a1(n){return[...new Set(n)]}function l1(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function u1(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let a=JSON.stringify(l1(s));return t.has(a)||(t.add(a),r.push({key:a,link:s})),r},[])}function Q0(){let n=q.useContext(za);return Bm(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function c1(){let n=q.useContext(vd);return Bm(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var zm=q.createContext(void 0);zm.displayName="FrameworkContext";function X0(){let n=q.useContext(zm);return Bm(n,"You must render this element inside a <HydratedRouter> element"),n}function h1(n,e){let t=q.useContext(zm),[r,s]=q.useState(!1),[a,u]=q.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:m,onMouseLeave:v,onTouchStart:w}=e,T=q.useRef(null);q.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let M=Q=>{Q.forEach(J=>{u(J.isIntersecting)})},L=new IntersectionObserver(M,{threshold:.5});return T.current&&L.observe(T.current),()=>{L.disconnect()}}},[n]),q.useEffect(()=>{if(r){let M=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(M)}}},[r]);let S=()=>{s(!0)},V=()=>{s(!1),u(!1)};return t?n!=="intent"?[a,T,{}]:[a,T,{onFocus:Gl(h,S),onBlur:Gl(f,V),onMouseEnter:Gl(m,S),onMouseLeave:Gl(v,V),onTouchStart:Gl(w,S)}]:[!1,T,{}]}function Gl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function d1({page:n,...e}){let{router:t}=Q0(),r=q.useMemo(()=>F0(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?q.createElement(p1,{page:n,matches:r,...e}):null}function f1(n){let{manifest:e,routeModules:t}=X0(),[r,s]=q.useState([]);return q.useEffect(()=>{let a=!1;return s1(n,e,t).then(u=>{a||s(u)}),()=>{a=!0}},[n,e,t]),r}function p1({page:n,matches:e,...t}){let r=ss(),{manifest:s,routeModules:a}=X0(),{basename:u}=Q0(),{loaderData:h,matches:f}=c1(),m=q.useMemo(()=>k_(n,e,f,s,r,"data"),[n,e,f,s,r]),v=q.useMemo(()=>k_(n,e,f,s,r,"assets"),[n,e,f,s,r]),w=q.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let V=new Set,M=!1;if(e.forEach(Q=>{var W;let J=s.routes[Q.route.id];!J||!J.hasLoader||(!m.some(oe=>oe.route.id===Q.route.id)&&Q.route.id in h&&((W=a[Q.route.id])!=null&&W.shouldRevalidate)||J.hasClientLoader?M=!0:V.add(Q.route.id))}),V.size===0)return[];let L=n1(n,u,"data");return M&&V.size>0&&L.searchParams.set("_routes",e.filter(Q=>V.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[L.pathname+L.search]},[u,h,r,s,m,e,n,a]),T=q.useMemo(()=>o1(v,s),[v,s]),S=f1(v);return q.createElement(q.Fragment,null,w.map(V=>q.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...t})),T.map(V=>q.createElement("link",{key:V,rel:"modulepreload",href:V,...t})),S.map(({key:V,link:M})=>q.createElement("link",{key:V,nonce:t.nonce,...M})))}function m1(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Y0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Y0&&(window.__reactRouterVersion="7.10.1")}catch{}function g1({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=q.useRef();s.current==null&&(s.current=tk({window:r,v5Compat:!0}));let a=s.current,[u,h]=q.useState({action:a.action,location:a.location}),f=q.useCallback(m=>{t===!1?h(m):q.startTransition(()=>h(m))},[t]);return q.useLayoutEffect(()=>a.listen(f),[a,f]),q.createElement(Wk,{basename:n,children:e,location:u.location,navigationType:u.action,navigator:a,unstable_useTransitions:t===!0})}var J0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Z0=q.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:a,replace:u,state:h,target:f,to:m,preventScrollReset:v,viewTransition:w,...T},S){let{basename:V,unstable_useTransitions:M}=q.useContext(Bn),L=typeof m=="string"&&J0.test(m),Q,J=!1;if(typeof m=="string"&&L&&(Q=m,Y0))try{let N=new URL(window.location.href),D=m.startsWith("//")?new URL(N.protocol+m):new URL(m),j=si(D.pathname,V);D.origin===N.origin&&j!=null?m=j+D.search+D.hash:J=!0}catch{Un(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=Ck(m,{relative:s}),[oe,ce,X]=h1(r,T),C=_1(m,{replace:u,state:h,target:f,preventScrollReset:v,relative:s,viewTransition:w,unstable_useTransitions:M});function k(N){e&&e(N),N.defaultPrevented||C(N)}let A=q.createElement("a",{...T,...X,href:Q||W,onClick:J||a?e:k,ref:m1(S,ce),target:f,"data-discover":!L&&t==="render"?"true":void 0});return oe&&!L?q.createElement(q.Fragment,null,A,q.createElement(d1,{page:W})):A});Z0.displayName="Link";var eE=q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:a,to:u,viewTransition:h,children:f,...m},v){let w=Ou(u,{relative:m.relative}),T=ss(),S=q.useContext(vd),{navigator:V,basename:M}=q.useContext(Bn),L=S!=null&&x1(w)&&h===!0,Q=V.encodeLocation?V.encodeLocation(w).pathname:w.pathname,J=T.pathname,W=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(J=J.toLowerCase(),W=W?W.toLowerCase():null,Q=Q.toLowerCase()),W&&M&&(W=si(W,M)||W);const oe=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let ce=J===Q||!s&&J.startsWith(Q)&&J.charAt(oe)==="/",X=W!=null&&(W===Q||!s&&W.startsWith(Q)&&W.charAt(Q.length)==="/"),C={isActive:ce,isPending:X,isTransitioning:L},k=ce?e:void 0,A;typeof r=="function"?A=r(C):A=[r,ce?"active":null,X?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(C):a;return q.createElement(Z0,{...m,"aria-current":k,className:A,ref:v,style:N,to:u,viewTransition:h},typeof f=="function"?f(C):f)});eE.displayName="NavLink";var y1=q.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:a,method:u=xh,action:h,onSubmit:f,relative:m,preventScrollReset:v,viewTransition:w,...T},S)=>{let{unstable_useTransitions:V}=q.useContext(Bn),M=I1(),L=T1(h,{relative:m}),Q=u.toLowerCase()==="get"?"get":"post",J=typeof h=="string"&&J0.test(h),W=oe=>{if(f&&f(oe),oe.defaultPrevented)return;oe.preventDefault();let ce=oe.nativeEvent.submitter,X=(ce==null?void 0:ce.getAttribute("formmethod"))||u,C=()=>M(ce||oe.currentTarget,{fetcherKey:e,method:X,navigate:t,replace:s,state:a,relative:m,preventScrollReset:v,viewTransition:w});V&&t!==!1?q.startTransition(()=>C()):C()};return q.createElement("form",{ref:S,method:Q,action:L,onSubmit:r?f:W,...T,"data-discover":!J&&n==="render"?"true":void 0})});y1.displayName="Form";function v1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tE(n){let e=q.useContext(za);return nt(e,v1(n)),e}function _1(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:u,unstable_useTransitions:h}={}){let f=ur(),m=ss(),v=Ou(n,{relative:a});return q.useCallback(w=>{if(Jk(w,e)){w.preventDefault();let T=t!==void 0?t:yu(m)===yu(v),S=()=>f(n,{replace:T,state:r,preventScrollReset:s,relative:a,viewTransition:u});h?q.startTransition(()=>S()):S()}},[m,f,v,t,r,e,n,s,a,u,h])}var w1=0,E1=()=>`__${String(++w1)}__`;function I1(){let{router:n}=tE("useSubmit"),{basename:e}=q.useContext(Bn),t=Bk(),r=n.fetch,s=n.navigate;return q.useCallback(async(a,u={})=>{let{action:h,method:f,encType:m,formData:v,body:w}=t1(a,e);if(u.navigate===!1){let T=u.fetcherKey||E1();await r(T,t,u.action||h,{preventScrollReset:u.preventScrollReset,formData:v,body:w,formMethod:u.method||f,formEncType:u.encType||m,flushSync:u.flushSync})}else await s(u.action||h,{preventScrollReset:u.preventScrollReset,formData:v,body:w,formMethod:u.method||f,formEncType:u.encType||m,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[r,s,e,t])}function T1(n,{relative:e}={}){let{basename:t}=q.useContext(Bn),r=q.useContext(lr);nt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...Ou(n||".",{relative:e})},u=ss();if(n==null){a.search=u.search;let h=new URLSearchParams(a.search),f=h.getAll("index");if(f.some(v=>v==="")){h.delete("index"),f.filter(w=>w).forEach(w=>h.append("index",w));let v=h.toString();a.search=v?`?${v}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:ii([t,a.pathname])),yu(a)}function x1(n,{relative:e}={}){let t=q.useContext($0);nt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=tE("useViewTransitionState"),s=Ou(n,{relative:e});if(!t.isTransitioning)return!1;let a=si(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=si(t.nextLocation.pathname,r)||t.nextLocation.pathname;return zh(s.pathname,u)!=null||zh(s.pathname,a)!=null}const b_=n=>{let e;const t=new Set,r=(m,v)=>{const w=typeof m=="function"?m(e):m;if(!Object.is(w,e)){const T=e;e=v??(typeof w!="object"||w===null)?w:Object.assign({},e,w),t.forEach(S=>S(e,T))}},s=()=>e,h={setState:r,getState:s,getInitialState:()=>f,subscribe:m=>(t.add(m),()=>t.delete(m))},f=e=n(r,s,h);return h},S1=(n=>n?b_(n):b_),k1=n=>n;function b1(n,e=k1){const t=eu.useSyncExternalStore(n.subscribe,eu.useCallback(()=>e(n.getState()),[n,e]),eu.useCallback(()=>e(n.getInitialState()),[n,e]));return eu.useDebugValue(t),t}const A_=n=>{const e=S1(n),t=r=>b1(e,r);return Object.assign(t,e),t},nE=(n=>n?A_(n):A_),po=nE(n=>({user:null,isLoading:!0,isAuthenticated:!1,setUser:e=>n({user:e,isAuthenticated:!!e}),setLoading:e=>n({isLoading:e}),clearUser:()=>n({user:null,isAuthenticated:!1})})),A1=()=>{};var R_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},R1=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],h=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},iE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,h=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,v=a>>2,w=(a&3)<<4|h>>4;let T=(h&15)<<2|m>>6,S=m&63;f||(S=64,u||(T=64)),r.push(t[v],t[w],t[T],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(rE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):R1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const w=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||h==null||m==null||w==null)throw new C1;const T=a<<2|h>>4;if(r.push(T),m!==64){const S=h<<4&240|m>>2;if(r.push(S),w!==64){const V=m<<6&192|w;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class C1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const P1=function(n){const e=rE(n);return iE.encodeByteArray(e,!0)},$h=function(n){return P1(n).replace(/\./g,"")},sE=function(n){try{return iE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=()=>oE().__FIREBASE_DEFAULTS__,D1=()=>{if(typeof process>"u"||typeof R_>"u")return;const n=R_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},V1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&sE(n[1]);return e&&JSON.parse(e)},wd=()=>{try{return A1()||N1()||D1()||V1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},aE=n=>{var e,t;return(t=(e=wd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},O1=n=>{const e=aE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},lE=()=>{var n;return(n=wd())===null||n===void 0?void 0:n.config},uE=n=>{var e;return(e=wd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[$h(JSON.stringify(t)),$h(JSON.stringify(u)),""].join(".")}const ou={};function j1(){const n={prod:[],emulator:[]};for(const e of Object.keys(ou))ou[e]?n.emulator.push(e):n.prod.push(e);return n}function F1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let C_=!1;function hE(n,e){if(typeof window>"u"||typeof document>"u"||!qa(window.location.host)||ou[n]===e||ou[n]||C_)return;ou[n]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",a=j1().prod.length>0;function u(){const T=document.getElementById(r);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,S){T.setAttribute("width","24"),T.setAttribute("id",S),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{C_=!0,u()},T}function v(T,S){T.setAttribute("id",S),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=F1(r),S=t("text"),V=document.getElementById(S)||document.createElement("span"),M=t("learnmore"),L=document.getElementById(M)||document.createElement("a"),Q=t("preprendIcon"),J=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const W=T.element;h(W),v(L,M);const oe=m();f(J,Q),W.append(J,V,L,oe),document.body.appendChild(W)}a?(V.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function U1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function dE(){var n;const e=(n=wd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function B1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $m(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function z1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $1(){const n=xt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function fE(){return!dE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pE(){return!dE()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Ed(){try{return typeof indexedDB=="object"}catch{return!1}}function qm(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function mE(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="FirebaseError";class cr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=q1,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mo.prototype.create)}}class mo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?H1(a,r):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new cr(s,h,r)}}function H1(n,e){return n.replace(W1,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const W1=/\{\$([^}]+)}/g;function K1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Zi(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],u=e[s];if(P_(a)&&P_(u)){if(!Zi(a,u))return!1}else if(a!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function P_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function G1(n,e){const t=new Q1(n,e);return t.subscribe.bind(t)}class Q1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");X1(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Mp),s.error===void 0&&(s.error=Mp),s.complete===void 0&&(s.complete=Mp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function X1(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Mp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=1e3,J1=2,Z1=14400*1e3,eb=.5;function N_(n,e=Y1,t=J1){const r=e*Math.pow(t,n),s=Math.round(eb*r*(Math.random()-.5)*2);return Math.min(Z1,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(n){return n&&n._delegate?n._delegate:n}class ar{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new L1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rb(e))try{this.getOrInitializeService({instanceIdentifier:Fs})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fs){return this.instances.has(e)}getOptions(e=Fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nb(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fs){return this.component?this.component.multipleInstances?e:Fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nb(n){return n===Fs?void 0:n}function rb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Pe||(Pe={}));const sb={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},ob=Pe.INFO,ab={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},lb=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=ab[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Id{constructor(e){this.name=e,this._logLevel=ob,this._logHandler=lb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const ub=(n,e)=>e.some(t=>n instanceof t);let D_,V_;function cb(){return D_||(D_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hb(){return V_||(V_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gE=new WeakMap,tm=new WeakMap,yE=new WeakMap,jp=new WeakMap,Hm=new WeakMap;function db(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Ki(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&gE.set(t,n)}).catch(()=>{}),Hm.set(e,n),e}function fb(n){if(tm.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});tm.set(n,e)}let nm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return tm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||yE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ki(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function pb(n){nm=n(nm)}function mb(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Fp(this),e,...t);return yE.set(r,e.sort?e.sort():[e]),Ki(r)}:hb().includes(n)?function(...e){return n.apply(Fp(this),e),Ki(gE.get(this))}:function(...e){return Ki(n.apply(Fp(this),e))}}function gb(n){return typeof n=="function"?mb(n):(n instanceof IDBTransaction&&fb(n),ub(n,cb())?new Proxy(n,nm):n)}function Ki(n){if(n instanceof IDBRequest)return db(n);if(jp.has(n))return jp.get(n);const e=gb(n);return e!==n&&(jp.set(n,e),Hm.set(e,n)),e}const Fp=n=>Hm.get(n);function vE(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const u=indexedDB.open(n,e),h=Ki(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Ki(u.result),f.oldVersion,f.newVersion,Ki(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const yb=["get","getKey","getAll","getAllKeys","count"],vb=["put","add","delete","clear"],Up=new Map;function O_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Up.get(e))return Up.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=vb.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||yb.includes(t)))return;const a=async function(u,...h){const f=this.transaction(u,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),s&&f.done]))[0]};return Up.set(e,a),a}pb(n=>({...n,get:(e,t,r)=>O_(e,t)||n.get(e,t,r),has:(e,t)=>!!O_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(wb(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function wb(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rm="@firebase/app",L_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi=new Id("@firebase/app"),Eb="@firebase/app-compat",Ib="@firebase/analytics-compat",Tb="@firebase/analytics",xb="@firebase/app-check-compat",Sb="@firebase/app-check",kb="@firebase/auth",bb="@firebase/auth-compat",Ab="@firebase/database",Rb="@firebase/data-connect",Cb="@firebase/database-compat",Pb="@firebase/functions",Nb="@firebase/functions-compat",Db="@firebase/installations",Vb="@firebase/installations-compat",Ob="@firebase/messaging",Lb="@firebase/messaging-compat",Mb="@firebase/performance",jb="@firebase/performance-compat",Fb="@firebase/remote-config",Ub="@firebase/remote-config-compat",Bb="@firebase/storage",zb="@firebase/storage-compat",$b="@firebase/firestore",qb="@firebase/ai",Hb="@firebase/firestore-compat",Wb="firebase",Kb="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="[DEFAULT]",Gb={[rm]:"fire-core",[Eb]:"fire-core-compat",[Tb]:"fire-analytics",[Ib]:"fire-analytics-compat",[Sb]:"fire-app-check",[xb]:"fire-app-check-compat",[kb]:"fire-auth",[bb]:"fire-auth-compat",[Ab]:"fire-rtdb",[Rb]:"fire-data-connect",[Cb]:"fire-rtdb-compat",[Pb]:"fire-fn",[Nb]:"fire-fn-compat",[Db]:"fire-iid",[Vb]:"fire-iid-compat",[Ob]:"fire-fcm",[Lb]:"fire-fcm-compat",[Mb]:"fire-perf",[jb]:"fire-perf-compat",[Fb]:"fire-rc",[Ub]:"fire-rc-compat",[Bb]:"fire-gcs",[zb]:"fire-gcs-compat",[$b]:"fire-fst",[Hb]:"fire-fst-compat",[qb]:"fire-vertex","fire-js":"fire-js",[Wb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new Map,Qb=new Map,sm=new Map;function M_(n,e){try{n.container.addComponent(e)}catch(t){oi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Rr(n){const e=n.name;if(sm.has(e))return oi.debug(`There were multiple attempts to register component ${e}.`),!1;sm.set(e,n);for(const t of qh.values())M_(t,n);for(const t of Qb.values())M_(t,n);return!0}function go(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ir(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gi=new mo("app","Firebase",Xb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha=Kb;function _E(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:im,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Gi.create("bad-app-name",{appName:String(s)});if(t||(t=lE()),!t)throw Gi.create("no-options");const a=qh.get(s);if(a){if(Zi(t,a.options)&&Zi(r,a.config))return a;throw Gi.create("duplicate-app",{appName:s})}const u=new ib(s);for(const f of sm.values())u.addComponent(f);const h=new Yb(t,r,u);return qh.set(s,h),h}function Wm(n=im){const e=qh.get(n);if(!e&&n===im&&lE())return _E();if(!e)throw Gi.create("no-app",{appName:n});return e}function jn(n,e,t){var r;let s=(r=Gb[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const h=[`Unable to register library "${s}" with version "${e}":`];a&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),oi.warn(h.join(" "));return}Rr(new ar(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="firebase-heartbeat-database",Zb=1,vu="firebase-heartbeat-store";let Bp=null;function wE(){return Bp||(Bp=vE(Jb,Zb,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(vu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Gi.create("idb-open",{originalErrorMessage:n.message})})),Bp}async function eA(n){try{const t=(await wE()).transaction(vu),r=await t.objectStore(vu).get(EE(n));return await t.done,r}catch(e){if(e instanceof cr)oi.warn(e.message);else{const t=Gi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});oi.warn(t.message)}}}async function j_(n,e){try{const r=(await wE()).transaction(vu,"readwrite");await r.objectStore(vu).put(e,EE(n)),await r.done}catch(t){if(t instanceof cr)oi.warn(t.message);else{const r=Gi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});oi.warn(r.message)}}}function EE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=1024,nA=30;class rA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sA(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=F_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>nA){const u=oA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){oi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=F_(),{heartbeatsToSend:r,unsentEntries:s}=iA(this._heartbeatsCache.heartbeats),a=$h(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return oi.warn(t),""}}}function F_(){return new Date().toISOString().substring(0,10)}function iA(n,e=tA){const t=[];let r=n.slice();for(const s of n){const a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),U_(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),U_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class sA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ed()?qm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await eA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return j_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return j_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function U_(n){return $h(JSON.stringify({version:2,heartbeats:n})).length}function oA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(n){Rr(new ar("platform-logger",e=>new _b(e),"PRIVATE")),Rr(new ar("heartbeat",e=>new rA(e),"PRIVATE")),jn(rm,L_,n),jn(rm,L_,"esm2017"),jn("fire-js","")}aA("");var B_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qi,IE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,k){function A(){}A.prototype=k.prototype,C.D=k.prototype,C.prototype=new A,C.prototype.constructor=C,C.C=function(N,D,j){for(var R=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)R[ct-2]=arguments[ct];return k.prototype[D].apply(N,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,k,A){A||(A=0);var N=Array(16);if(typeof k=="string")for(var D=0;16>D;++D)N[D]=k.charCodeAt(A++)|k.charCodeAt(A++)<<8|k.charCodeAt(A++)<<16|k.charCodeAt(A++)<<24;else for(D=0;16>D;++D)N[D]=k[A++]|k[A++]<<8|k[A++]<<16|k[A++]<<24;k=C.g[0],A=C.g[1],D=C.g[2];var j=C.g[3],R=k+(j^A&(D^j))+N[0]+3614090360&4294967295;k=A+(R<<7&4294967295|R>>>25),R=j+(D^k&(A^D))+N[1]+3905402710&4294967295,j=k+(R<<12&4294967295|R>>>20),R=D+(A^j&(k^A))+N[2]+606105819&4294967295,D=j+(R<<17&4294967295|R>>>15),R=A+(k^D&(j^k))+N[3]+3250441966&4294967295,A=D+(R<<22&4294967295|R>>>10),R=k+(j^A&(D^j))+N[4]+4118548399&4294967295,k=A+(R<<7&4294967295|R>>>25),R=j+(D^k&(A^D))+N[5]+1200080426&4294967295,j=k+(R<<12&4294967295|R>>>20),R=D+(A^j&(k^A))+N[6]+2821735955&4294967295,D=j+(R<<17&4294967295|R>>>15),R=A+(k^D&(j^k))+N[7]+4249261313&4294967295,A=D+(R<<22&4294967295|R>>>10),R=k+(j^A&(D^j))+N[8]+1770035416&4294967295,k=A+(R<<7&4294967295|R>>>25),R=j+(D^k&(A^D))+N[9]+2336552879&4294967295,j=k+(R<<12&4294967295|R>>>20),R=D+(A^j&(k^A))+N[10]+4294925233&4294967295,D=j+(R<<17&4294967295|R>>>15),R=A+(k^D&(j^k))+N[11]+2304563134&4294967295,A=D+(R<<22&4294967295|R>>>10),R=k+(j^A&(D^j))+N[12]+1804603682&4294967295,k=A+(R<<7&4294967295|R>>>25),R=j+(D^k&(A^D))+N[13]+4254626195&4294967295,j=k+(R<<12&4294967295|R>>>20),R=D+(A^j&(k^A))+N[14]+2792965006&4294967295,D=j+(R<<17&4294967295|R>>>15),R=A+(k^D&(j^k))+N[15]+1236535329&4294967295,A=D+(R<<22&4294967295|R>>>10),R=k+(D^j&(A^D))+N[1]+4129170786&4294967295,k=A+(R<<5&4294967295|R>>>27),R=j+(A^D&(k^A))+N[6]+3225465664&4294967295,j=k+(R<<9&4294967295|R>>>23),R=D+(k^A&(j^k))+N[11]+643717713&4294967295,D=j+(R<<14&4294967295|R>>>18),R=A+(j^k&(D^j))+N[0]+3921069994&4294967295,A=D+(R<<20&4294967295|R>>>12),R=k+(D^j&(A^D))+N[5]+3593408605&4294967295,k=A+(R<<5&4294967295|R>>>27),R=j+(A^D&(k^A))+N[10]+38016083&4294967295,j=k+(R<<9&4294967295|R>>>23),R=D+(k^A&(j^k))+N[15]+3634488961&4294967295,D=j+(R<<14&4294967295|R>>>18),R=A+(j^k&(D^j))+N[4]+3889429448&4294967295,A=D+(R<<20&4294967295|R>>>12),R=k+(D^j&(A^D))+N[9]+568446438&4294967295,k=A+(R<<5&4294967295|R>>>27),R=j+(A^D&(k^A))+N[14]+3275163606&4294967295,j=k+(R<<9&4294967295|R>>>23),R=D+(k^A&(j^k))+N[3]+4107603335&4294967295,D=j+(R<<14&4294967295|R>>>18),R=A+(j^k&(D^j))+N[8]+1163531501&4294967295,A=D+(R<<20&4294967295|R>>>12),R=k+(D^j&(A^D))+N[13]+2850285829&4294967295,k=A+(R<<5&4294967295|R>>>27),R=j+(A^D&(k^A))+N[2]+4243563512&4294967295,j=k+(R<<9&4294967295|R>>>23),R=D+(k^A&(j^k))+N[7]+1735328473&4294967295,D=j+(R<<14&4294967295|R>>>18),R=A+(j^k&(D^j))+N[12]+2368359562&4294967295,A=D+(R<<20&4294967295|R>>>12),R=k+(A^D^j)+N[5]+4294588738&4294967295,k=A+(R<<4&4294967295|R>>>28),R=j+(k^A^D)+N[8]+2272392833&4294967295,j=k+(R<<11&4294967295|R>>>21),R=D+(j^k^A)+N[11]+1839030562&4294967295,D=j+(R<<16&4294967295|R>>>16),R=A+(D^j^k)+N[14]+4259657740&4294967295,A=D+(R<<23&4294967295|R>>>9),R=k+(A^D^j)+N[1]+2763975236&4294967295,k=A+(R<<4&4294967295|R>>>28),R=j+(k^A^D)+N[4]+1272893353&4294967295,j=k+(R<<11&4294967295|R>>>21),R=D+(j^k^A)+N[7]+4139469664&4294967295,D=j+(R<<16&4294967295|R>>>16),R=A+(D^j^k)+N[10]+3200236656&4294967295,A=D+(R<<23&4294967295|R>>>9),R=k+(A^D^j)+N[13]+681279174&4294967295,k=A+(R<<4&4294967295|R>>>28),R=j+(k^A^D)+N[0]+3936430074&4294967295,j=k+(R<<11&4294967295|R>>>21),R=D+(j^k^A)+N[3]+3572445317&4294967295,D=j+(R<<16&4294967295|R>>>16),R=A+(D^j^k)+N[6]+76029189&4294967295,A=D+(R<<23&4294967295|R>>>9),R=k+(A^D^j)+N[9]+3654602809&4294967295,k=A+(R<<4&4294967295|R>>>28),R=j+(k^A^D)+N[12]+3873151461&4294967295,j=k+(R<<11&4294967295|R>>>21),R=D+(j^k^A)+N[15]+530742520&4294967295,D=j+(R<<16&4294967295|R>>>16),R=A+(D^j^k)+N[2]+3299628645&4294967295,A=D+(R<<23&4294967295|R>>>9),R=k+(D^(A|~j))+N[0]+4096336452&4294967295,k=A+(R<<6&4294967295|R>>>26),R=j+(A^(k|~D))+N[7]+1126891415&4294967295,j=k+(R<<10&4294967295|R>>>22),R=D+(k^(j|~A))+N[14]+2878612391&4294967295,D=j+(R<<15&4294967295|R>>>17),R=A+(j^(D|~k))+N[5]+4237533241&4294967295,A=D+(R<<21&4294967295|R>>>11),R=k+(D^(A|~j))+N[12]+1700485571&4294967295,k=A+(R<<6&4294967295|R>>>26),R=j+(A^(k|~D))+N[3]+2399980690&4294967295,j=k+(R<<10&4294967295|R>>>22),R=D+(k^(j|~A))+N[10]+4293915773&4294967295,D=j+(R<<15&4294967295|R>>>17),R=A+(j^(D|~k))+N[1]+2240044497&4294967295,A=D+(R<<21&4294967295|R>>>11),R=k+(D^(A|~j))+N[8]+1873313359&4294967295,k=A+(R<<6&4294967295|R>>>26),R=j+(A^(k|~D))+N[15]+4264355552&4294967295,j=k+(R<<10&4294967295|R>>>22),R=D+(k^(j|~A))+N[6]+2734768916&4294967295,D=j+(R<<15&4294967295|R>>>17),R=A+(j^(D|~k))+N[13]+1309151649&4294967295,A=D+(R<<21&4294967295|R>>>11),R=k+(D^(A|~j))+N[4]+4149444226&4294967295,k=A+(R<<6&4294967295|R>>>26),R=j+(A^(k|~D))+N[11]+3174756917&4294967295,j=k+(R<<10&4294967295|R>>>22),R=D+(k^(j|~A))+N[2]+718787259&4294967295,D=j+(R<<15&4294967295|R>>>17),R=A+(j^(D|~k))+N[9]+3951481745&4294967295,C.g[0]=C.g[0]+k&4294967295,C.g[1]=C.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+j&4294967295}r.prototype.u=function(C,k){k===void 0&&(k=C.length);for(var A=k-this.blockSize,N=this.B,D=this.h,j=0;j<k;){if(D==0)for(;j<=A;)s(this,C,j),j+=this.blockSize;if(typeof C=="string"){for(;j<k;)if(N[D++]=C.charCodeAt(j++),D==this.blockSize){s(this,N),D=0;break}}else for(;j<k;)if(N[D++]=C[j++],D==this.blockSize){s(this,N),D=0;break}}this.h=D,this.o+=k},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var k=1;k<C.length-8;++k)C[k]=0;var A=8*this.o;for(k=C.length-8;k<C.length;++k)C[k]=A&255,A/=256;for(this.u(C),C=Array(16),k=A=0;4>k;++k)for(var N=0;32>N;N+=8)C[A++]=this.g[k]>>>N&255;return C};function a(C,k){var A=h;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=k(C)}function u(C,k){this.h=k;for(var A=[],N=!0,D=C.length-1;0<=D;D--){var j=C[D]|0;N&&j==k||(A[D]=j,N=!1)}this.g=A}var h={};function f(C){return-128<=C&&128>C?a(C,function(k){return new u([k|0],0>k?-1:0)}):new u([C|0],0>C?-1:0)}function m(C){if(isNaN(C)||!isFinite(C))return w;if(0>C)return L(m(-C));for(var k=[],A=1,N=0;C>=A;N++)k[N]=C/A|0,A*=4294967296;return new u(k,0)}function v(C,k){if(C.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(C.charAt(0)=="-")return L(v(C.substring(1),k));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=m(Math.pow(k,8)),N=w,D=0;D<C.length;D+=8){var j=Math.min(8,C.length-D),R=parseInt(C.substring(D,D+j),k);8>j?(j=m(Math.pow(k,j)),N=N.j(j).add(m(R))):(N=N.j(A),N=N.add(m(R)))}return N}var w=f(0),T=f(1),S=f(16777216);n=u.prototype,n.m=function(){if(M(this))return-L(this).m();for(var C=0,k=1,A=0;A<this.g.length;A++){var N=this.i(A);C+=(0<=N?N:4294967296+N)*k,k*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(V(this))return"0";if(M(this))return"-"+L(this).toString(C);for(var k=m(Math.pow(C,6)),A=this,N="";;){var D=oe(A,k).g;A=Q(A,D.j(k));var j=((0<A.g.length?A.g[0]:A.h)>>>0).toString(C);if(A=D,V(A))return j+N;for(;6>j.length;)j="0"+j;N=j+N}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function V(C){if(C.h!=0)return!1;for(var k=0;k<C.g.length;k++)if(C.g[k]!=0)return!1;return!0}function M(C){return C.h==-1}n.l=function(C){return C=Q(this,C),M(C)?-1:V(C)?0:1};function L(C){for(var k=C.g.length,A=[],N=0;N<k;N++)A[N]=~C.g[N];return new u(A,~C.h).add(T)}n.abs=function(){return M(this)?L(this):this},n.add=function(C){for(var k=Math.max(this.g.length,C.g.length),A=[],N=0,D=0;D<=k;D++){var j=N+(this.i(D)&65535)+(C.i(D)&65535),R=(j>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);N=R>>>16,j&=65535,R&=65535,A[D]=R<<16|j}return new u(A,A[A.length-1]&-2147483648?-1:0)};function Q(C,k){return C.add(L(k))}n.j=function(C){if(V(this)||V(C))return w;if(M(this))return M(C)?L(this).j(L(C)):L(L(this).j(C));if(M(C))return L(this.j(L(C)));if(0>this.l(S)&&0>C.l(S))return m(this.m()*C.m());for(var k=this.g.length+C.g.length,A=[],N=0;N<2*k;N++)A[N]=0;for(N=0;N<this.g.length;N++)for(var D=0;D<C.g.length;D++){var j=this.i(N)>>>16,R=this.i(N)&65535,ct=C.i(D)>>>16,Ft=C.i(D)&65535;A[2*N+2*D]+=R*Ft,J(A,2*N+2*D),A[2*N+2*D+1]+=j*Ft,J(A,2*N+2*D+1),A[2*N+2*D+1]+=R*ct,J(A,2*N+2*D+1),A[2*N+2*D+2]+=j*ct,J(A,2*N+2*D+2)}for(N=0;N<k;N++)A[N]=A[2*N+1]<<16|A[2*N];for(N=k;N<2*k;N++)A[N]=0;return new u(A,0)};function J(C,k){for(;(C[k]&65535)!=C[k];)C[k+1]+=C[k]>>>16,C[k]&=65535,k++}function W(C,k){this.g=C,this.h=k}function oe(C,k){if(V(k))throw Error("division by zero");if(V(C))return new W(w,w);if(M(C))return k=oe(L(C),k),new W(L(k.g),L(k.h));if(M(k))return k=oe(C,L(k)),new W(L(k.g),k.h);if(30<C.g.length){if(M(C)||M(k))throw Error("slowDivide_ only works with positive integers.");for(var A=T,N=k;0>=N.l(C);)A=ce(A),N=ce(N);var D=X(A,1),j=X(N,1);for(N=X(N,2),A=X(A,2);!V(N);){var R=j.add(N);0>=R.l(C)&&(D=D.add(A),j=R),N=X(N,1),A=X(A,1)}return k=Q(C,D.j(k)),new W(D,k)}for(D=w;0<=C.l(k);){for(A=Math.max(1,Math.floor(C.m()/k.m())),N=Math.ceil(Math.log(A)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),j=m(A),R=j.j(k);M(R)||0<R.l(C);)A-=N,j=m(A),R=j.j(k);V(j)&&(j=T),D=D.add(j),C=Q(C,R)}return new W(D,C)}n.A=function(C){return oe(this,C).h},n.and=function(C){for(var k=Math.max(this.g.length,C.g.length),A=[],N=0;N<k;N++)A[N]=this.i(N)&C.i(N);return new u(A,this.h&C.h)},n.or=function(C){for(var k=Math.max(this.g.length,C.g.length),A=[],N=0;N<k;N++)A[N]=this.i(N)|C.i(N);return new u(A,this.h|C.h)},n.xor=function(C){for(var k=Math.max(this.g.length,C.g.length),A=[],N=0;N<k;N++)A[N]=this.i(N)^C.i(N);return new u(A,this.h^C.h)};function ce(C){for(var k=C.g.length+1,A=[],N=0;N<k;N++)A[N]=C.i(N)<<1|C.i(N-1)>>>31;return new u(A,C.h)}function X(C,k){var A=k>>5;k%=32;for(var N=C.g.length-A,D=[],j=0;j<N;j++)D[j]=0<k?C.i(j+A)>>>k|C.i(j+A+1)<<32-k:C.i(j+A);return new u(D,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,IE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,Qi=u}).apply(typeof B_<"u"?B_:typeof self<"u"?self:typeof window<"u"?window:{});var gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TE,tu,xE,kh,om,SE,kE,bE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof gh=="object"&&gh];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function s(c,g){if(g)e:{var _=r;c=c.split(".");for(var x=0;x<c.length-1;x++){var U=c[x];if(!(U in _))break e;_=_[U]}c=c[c.length-1],x=_[c],g=g(x),g!=x&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var _=0,x=!1,U={next:function(){if(!x&&_<c.length){var K=_++;return{value:g(K,c[K]),done:!1}}return x=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}s("Array.prototype.values",function(c){return c||function(){return a(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function v(c,g,_){return c.call.apply(c.bind,arguments)}function w(c,g,_){if(!c)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,x),c.apply(g,U)}}return function(){return c.apply(g,arguments)}}function T(c,g,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,T.apply(null,arguments)}function S(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var x=_.slice();return x.push.apply(x,arguments),c.apply(this,x)}}function V(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(x,U,K){for(var se=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)se[ze-2]=arguments[ze];return g.prototype[U].apply(x,se)}}function M(c){const g=c.length;if(0<g){const _=Array(g);for(let x=0;x<g;x++)_[x]=c[x];return _}return[]}function L(c,g){for(let _=1;_<arguments.length;_++){const x=arguments[_];if(f(x)){const U=c.length||0,K=x.length||0;c.length=U+K;for(let se=0;se<K;se++)c[U+se]=x[se]}else c.push(x)}}class Q{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function J(c){return/^[\s\xa0]*$/.test(c)}function W(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function oe(c){return oe[" "](c),c}oe[" "]=function(){};var ce=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function X(c,g,_){for(const x in c)g.call(_,c[x],x,c)}function C(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function k(c){const g={};for(const _ in c)g[_]=c[_];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(c,g){let _,x;for(let U=1;U<arguments.length;U++){x=arguments[U];for(_ in x)c[_]=x[_];for(let K=0;K<A.length;K++)_=A[K],Object.prototype.hasOwnProperty.call(x,_)&&(c[_]=x[_])}}function D(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function j(c){h.setTimeout(()=>{throw c},0)}function R(){var c=we;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class ct{constructor(){this.h=this.g=null}add(g,_){const x=Ft.get();x.set(g,_),this.h?this.h.next=x:this.g=x,this.h=x}}var Ft=new Q(()=>new Ut,c=>c.reset());class Ut{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let We,ae=!1,we=new ct,he=()=>{const c=h.Promise.resolve(void 0);We=()=>{c.then(F)}};var F=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(_){j(_)}var g=Ft;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}ae=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var be=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};h.addEventListener("test",_,g),h.removeEventListener("test",_,g)}catch{}return c})();function Re(c,g){if(ve.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,x=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(ce){e:{try{oe(g.nodeName);var U=!0;break e}catch{}U=!1}U||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ve[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Re.aa.h.call(this)}}V(Re,ve);var Ve={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function Ge(c,g,_,x,U){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!x,this.ha=U,this.key=++Ue,this.da=this.fa=!1}function kt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Or(c){this.src=c,this.g={},this.h=0}Or.prototype.add=function(c,g,_,x,U){var K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);var se=fi(c,g,x,U);return-1<se?(g=c[se],_||(g.fa=!1)):(g=new Ge(g,this.src,K,!!x,U),g.fa=_,c.push(g)),g};function _o(c,g){var _=g.type;if(_ in c.g){var x=c.g[_],U=Array.prototype.indexOf.call(x,g,void 0),K;(K=0<=U)&&Array.prototype.splice.call(x,U,1),K&&(kt(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function fi(c,g,_,x){for(var U=0;U<c.length;++U){var K=c[U];if(!K.da&&K.listener==g&&K.capture==!!_&&K.ha==x)return U}return-1}var us="closure_lm_"+(1e6*Math.random()|0),wo={};function Za(c,g,_,x,U){if(Array.isArray(g)){for(var K=0;K<g.length;K++)Za(c,g[K],_,x,U);return null}return _=nl(_),c&&c[Fe]?c.K(g,_,m(x)?!!x.capture:!1,U):el(c,g,_,!1,x,U)}function el(c,g,_,x,U,K){if(!g)throw Error("Invalid event type");var se=m(U)?!!U.capture:!!U,ze=Io(c);if(ze||(c[us]=ze=new Or(c)),_=ze.add(g,_,x,se,K),_.proxy)return _;if(x=Zu(),_.proxy=x,x.src=c,x.listener=_,c.addEventListener)be||(U=se),U===void 0&&(U=!1),c.addEventListener(g.toString(),x,U);else if(c.attachEvent)c.attachEvent(Mr(g.toString()),x);else if(c.addListener&&c.removeListener)c.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Zu(){function c(_){return g.call(c.src,c.listener,_)}const g=tl;return c}function Eo(c,g,_,x,U){if(Array.isArray(g))for(var K=0;K<g.length;K++)Eo(c,g[K],_,x,U);else x=m(x)?!!x.capture:!!x,_=nl(_),c&&c[Fe]?(c=c.i,g=String(g).toString(),g in c.g&&(K=c.g[g],_=fi(K,_,x,U),-1<_&&(kt(K[_]),Array.prototype.splice.call(K,_,1),K.length==0&&(delete c.g[g],c.h--)))):c&&(c=Io(c))&&(g=c.g[g.toString()],c=-1,g&&(c=fi(g,_,x,U)),(_=-1<c?g[c]:null)&&Lr(_))}function Lr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Fe])_o(g.i,c);else{var _=c.type,x=c.proxy;g.removeEventListener?g.removeEventListener(_,x,c.capture):g.detachEvent?g.detachEvent(Mr(_),x):g.addListener&&g.removeListener&&g.removeListener(x),(_=Io(g))?(_o(_,c),_.h==0&&(_.src=null,g[us]=null)):kt(c)}}}function Mr(c){return c in wo?wo[c]:wo[c]="on"+c}function tl(c,g){if(c.da)c=!0;else{g=new Re(g,this);var _=c.listener,x=c.ha||c.src;c.fa&&Lr(c),c=_.call(x,g)}return c}function Io(c){return c=c[us],c instanceof Or?c:null}var To="__closure_events_fn_"+(1e9*Math.random()>>>0);function nl(c){return typeof c=="function"?c:(c[To]||(c[To]=function(g){return c.handleEvent(g)}),c[To])}function _t(){Y.call(this),this.i=new Or(this),this.M=this,this.F=null}V(_t,Y),_t.prototype[Fe]=!0,_t.prototype.removeEventListener=function(c,g,_,x){Eo(this,c,g,_,x)};function wt(c,g){var _,x=c.F;if(x)for(_=[];x;x=x.F)_.push(x);if(c=c.M,x=g.type||g,typeof g=="string")g=new ve(g,c);else if(g instanceof ve)g.target=g.target||c;else{var U=g;g=new ve(x,c),N(g,U)}if(U=!0,_)for(var K=_.length-1;0<=K;K--){var se=g.g=_[K];U=jr(se,x,!0,g)&&U}if(se=g.g=c,U=jr(se,x,!0,g)&&U,U=jr(se,x,!1,g)&&U,_)for(K=0;K<_.length;K++)se=g.g=_[K],U=jr(se,x,!1,g)&&U}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],x=0;x<_.length;x++)kt(_[x]);delete c.g[g],c.h--}}this.F=null},_t.prototype.K=function(c,g,_,x){return this.i.add(String(c),g,!1,_,x)},_t.prototype.L=function(c,g,_,x){return this.i.add(String(c),g,!0,_,x)};function jr(c,g,_,x){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var U=!0,K=0;K<g.length;++K){var se=g[K];if(se&&!se.da&&se.capture==_){var ze=se.listener,Et=se.ha||se.src;se.fa&&_o(c.i,se),U=ze.call(Et,x)!==!1&&U}}return U&&!x.defaultPrevented}function rl(c,g,_){if(typeof c=="function")_&&(c=T(c,_));else if(c&&typeof c.handleEvent=="function")c=T(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:h.setTimeout(c,g||0)}function pi(c){c.g=rl(()=>{c.g=null,c.i&&(c.i=!1,pi(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class cs extends Y{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:pi(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hs(c){Y.call(this),this.h=c,this.g={}}V(hs,Y);var il=[];function sl(c){X(c.g,function(g,_){this.g.hasOwnProperty(_)&&Lr(g)},c),c.g={}}hs.prototype.N=function(){hs.aa.N.call(this),sl(this)},hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ol=h.JSON.stringify,al=h.JSON.parse,ll=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function ds(){}ds.prototype.h=null;function xo(c){return c.h||(c.h=c.i())}function So(){}var kn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hr(){ve.call(this,"d")}V(hr,ve);function ko(){ve.call(this,"c")}V(ko,ve);var dr={},ul=null;function fs(){return ul=ul||new _t}dr.La="serverreachability";function cl(c){ve.call(this,dr.La,c)}V(cl,ve);function Fr(c){const g=fs();wt(g,new cl(g))}dr.STAT_EVENT="statevent";function hl(c,g){ve.call(this,dr.STAT_EVENT,c),this.stat=g}V(hl,ve);function ht(c){const g=fs();wt(g,new hl(g,c))}dr.Ma="timingevent";function bo(c,g){ve.call(this,dr.Ma,c),this.size=g}V(bo,ve);function zn(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},g)}function ps(){this.g=!0}ps.prototype.xa=function(){this.g=!1};function ms(c,g,_,x,U,K){c.info(function(){if(c.g)if(K)for(var se="",ze=K.split("&"),Et=0;Et<ze.length;Et++){var Oe=ze[Et].split("=");if(1<Oe.length){var bt=Oe[0];Oe=Oe[1];var ft=bt.split("_");se=2<=ft.length&&ft[1]=="type"?se+(bt+"="+Oe+"&"):se+(bt+"=redacted&")}}else se=null;else se=K;return"XMLHTTP REQ ("+x+") [attempt "+U+"]: "+g+`
`+_+`
`+se})}function Ao(c,g,_,x,U,K,se){c.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+U+"]: "+g+`
`+_+`
`+K+" "+se})}function $n(c,g,_,x){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+rf(c,_)+(x?" "+x:"")})}function dl(c,g){c.info(function(){return"TIMEOUT: "+g})}ps.prototype.info=function(){};function rf(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var x=_[c];if(!(2>x.length)){var U=x[1];if(Array.isArray(U)&&!(1>U.length)){var K=U[0];if(K!="noop"&&K!="stop"&&K!="close")for(var se=1;se<U.length;se++)U[se]=""}}}}return ol(_)}catch{return g}}var Ro={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ec={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qn;function gs(){}V(gs,ds),gs.prototype.g=function(){return new XMLHttpRequest},gs.prototype.i=function(){return{}},qn=new gs;function Hn(c,g,_,x){this.j=c,this.i=g,this.l=_,this.R=x||1,this.U=new hs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tc}function tc(){this.i=null,this.g="",this.h=!1}var fl={},Co={};function Po(c,g,_){c.L=1,c.v=_i(gn(g)),c.m=_,c.P=!0,pl(c,null)}function pl(c,g){c.F=Date.now(),Qe(c),c.A=gn(c.v);var _=c.A,x=c.R;Array.isArray(x)||(x=[String(x)]),Ei(_.i,"t",x),c.C=0,_=c.j.J,c.h=new tc,c.g=_c(c.j,_?g:null,!c.m),0<c.O&&(c.M=new cs(T(c.Y,c,c.g),c.O)),g=c.U,_=c.g,x=c.ca;var U="readystatechange";Array.isArray(U)||(U&&(il[0]=U.toString()),U=il);for(var K=0;K<U.length;K++){var se=Za(_,U[K],x||g.handleEvent,!1,g.h||g);if(!se)break;g.g[se.key]=se}g=c.H?k(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Fr(),ms(c.i,c.u,c.A,c.l,c.R,c.m)}Hn.prototype.ca=function(c){c=c.target;const g=this.M;g&&sn(c)==3?g.j():this.Y(c)},Hn.prototype.Y=function(c){try{if(c==this.g)e:{const ft=sn(this.g);var g=this.g.Ba();const Rn=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||wl(this.g)))){this.J||ft!=4||g==7||(g==8||0>=Rn?Fr(3):Fr(2)),ys(this);var _=this.g.Z();this.X=_;t:if(nc(this)){var x=wl(this.g);c="";var U=x.length,K=sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bn(this),mi(this);var se="";break t}this.h.i=new h.TextDecoder}for(g=0;g<U;g++)this.h.h=!0,c+=this.h.i.decode(x[g],{stream:!(K&&g==U-1)});x.length=0,this.h.g+=c,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=_==200,Ao(this.i,this.u,this.A,this.l,this.R,ft,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,Et=this.g;if((ze=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(ze)){var Oe=ze;break t}}Oe=null}if(_=Oe)$n(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ml(this,_);else{this.o=!1,this.s=3,ht(12),bn(this),mi(this);break e}}if(this.P){_=!0;let vn;for(;!this.J&&this.C<se.length;)if(vn=sf(this,se),vn==Co){ft==4&&(this.s=4,ht(14),_=!1),$n(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==fl){this.s=4,ht(15),$n(this.i,this.l,se,"[Invalid Chunk]"),_=!1;break}else $n(this.i,this.l,vn,null),ml(this,vn);if(nc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||se.length!=0||this.h.h||(this.s=1,ht(16),_=!1),this.o=this.o&&_,!_)$n(this.i,this.l,se,"[Invalid Chunked Response]"),bn(this),mi(this);else if(0<se.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Il(bt),bt.M=!0,ht(11))}}else $n(this.i,this.l,se,null),ml(this,se);ft==4&&bn(this),this.o&&!this.J&&(ft==4?zo(this.j,this):(this.o=!1,Qe(this)))}else Mo(this.g),_==400&&0<se.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),bn(this),mi(this)}}}catch{}finally{}};function nc(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function sf(c,g){var _=c.C,x=g.indexOf(`
`,_);return x==-1?Co:(_=Number(g.substring(_,x)),isNaN(_)?fl:(x+=1,x+_>g.length?Co:(g=g.slice(x,x+_),c.C=x+_,g)))}Hn.prototype.cancel=function(){this.J=!0,bn(this)};function Qe(c){c.S=Date.now()+c.I,rc(c,c.I)}function rc(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=zn(T(c.ba,c),g)}function ys(c){c.B&&(h.clearTimeout(c.B),c.B=null)}Hn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(dl(this.i,this.A),this.L!=2&&(Fr(),ht(17)),bn(this),this.s=2,mi(this)):rc(this,this.S-c)};function mi(c){c.j.G==0||c.J||zo(c.j,c)}function bn(c){ys(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,sl(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function ml(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||Xt(_.h,c))){if(!c.K&&Xt(_.h,c)&&_.G==3){try{var x=_.Da.g.parse(g)}catch{x=null}if(Array.isArray(x)&&x.length==3){var U=x;if(U[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Bo(_),Xn(_);else break e;Uo(_),ht(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=zn(T(_.Za,_),6e3));if(1>=sc(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else qr(_,11)}else if((c.K||_.g==c)&&Bo(_),!J(g))for(U=_.Da.g.parse(g),g=0;g<U.length;g++){let Oe=U[g];if(_.T=Oe[0],Oe=Oe[1],_.G==2)if(Oe[0]=="c"){_.K=Oe[1],_.ia=Oe[2];const bt=Oe[3];bt!=null&&(_.la=bt,_.j.info("VER="+_.la));const ft=Oe[4];ft!=null&&(_.Aa=ft,_.j.info("SVER="+_.Aa));const Rn=Oe[5];Rn!=null&&typeof Rn=="number"&&0<Rn&&(x=1.5*Rn,_.L=x,_.j.info("backChannelRequestTimeoutMs_="+x)),x=_;const vn=c.g;if(vn){const xs=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xs){var K=x.h;K.g||xs.indexOf("spdy")==-1&&xs.indexOf("quic")==-1&&xs.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(gl(K,K.h),K.h=null))}if(x.D){const qo=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;qo&&(x.ya=qo,Ke(x.I,x.D,qo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),x=_;var se=c;if(x.qa=vc(x,x.J?x.ia:null,x.W),se.K){oc(x.h,se);var ze=se,Et=x.L;Et&&(ze.I=Et),ze.B&&(ys(ze),Qe(ze)),x.g=se}else Ts(x);0<_.i.length&&gr(_)}else Oe[0]!="stop"&&Oe[0]!="close"||qr(_,7);else _.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?qr(_,7):Vt(_):Oe[0]!="noop"&&_.l&&_.l.ta(Oe),_.v=0)}}Fr(4)}catch{}}var ic=class{constructor(c,g){this.g=c,this.map=g}};function vs(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function sc(c){return c.h?1:c.g?c.g.size:0}function Xt(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function gl(c,g){c.g?c.g.add(g):c.h=g}function oc(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}vs.prototype.cancel=function(){if(this.i=ac(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ac(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return M(c.i)}function No(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],_=c.length,x=0;x<_;x++)g.push(c[x]);return g}g=[],_=0;for(x in c)g[_++]=c[x];return g}function Do(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const x in c)g[_++]=x;return g}}}function gi(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=Do(c),x=No(c),U=x.length,K=0;K<U;K++)g.call(void 0,x[K],_&&_[K],c)}var _s=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function of(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var x=c[_].indexOf("="),U=null;if(0<=x){var K=c[_].substring(0,x);U=c[_].substring(x+1)}else K=c[_];g(K,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Ur(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ur){this.h=c.h,ws(this,c.j),this.o=c.o,this.g=c.g,yi(this,c.s),this.l=c.l;var g=c.i,_=new fr;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),vi(this,_),this.m=c.m}else c&&(g=String(c).match(_s))?(this.h=!1,ws(this,g[1]||"",!0),this.o=De(g[2]||""),this.g=De(g[3]||"",!0),yi(this,g[4]),this.l=De(g[5]||"",!0),vi(this,g[6]||"",!0),this.m=De(g[7]||"")):(this.h=!1,this.i=new fr(null,this.h))}Ur.prototype.toString=function(){var c=[],g=this.j;g&&c.push(wi(g,Vo,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(wi(g,Vo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(wi(_,_.charAt(0)=="/"?cc:uc,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",wi(_,yl)),c.join("")};function gn(c){return new Ur(c)}function ws(c,g,_){c.j=_?De(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function yi(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function vi(c,g,_){g instanceof fr?(c.i=g,pr(c.i,c.h)):(_||(g=wi(g,hc)),c.i=new fr(g,c.h))}function Ke(c,g,_){c.i.set(g,_)}function _i(c){return Ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function De(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function wi(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,lc),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function lc(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Vo=/[#\/\?@]/g,uc=/[#\?:]/g,cc=/[#\?]/g,hc=/[#\?@]/g,yl=/#/g;function fr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Dt(c){c.g||(c.g=new Map,c.h=0,c.i&&of(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=fr.prototype,n.add=function(c,g){Dt(this),this.i=null,c=An(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function Wn(c,g){Dt(c),g=An(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Kn(c,g){return Dt(c),g=An(c,g),c.g.has(g)}n.forEach=function(c,g){Dt(this),this.g.forEach(function(_,x){_.forEach(function(U){c.call(g,U,x,this)},this)},this)},n.na=function(){Dt(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let x=0;x<g.length;x++){const U=c[x];for(let K=0;K<U.length;K++)_.push(g[x])}return _},n.V=function(c){Dt(this);let g=[];if(typeof c=="string")Kn(this,c)&&(g=g.concat(this.g.get(An(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},n.set=function(c,g){return Dt(this),this.i=null,c=An(this,c),Kn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function Ei(c,g,_){Wn(c,g),0<_.length&&(c.i=null,c.g.set(An(c,g),M(_)),c.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var x=g[_];const K=encodeURIComponent(String(x)),se=this.V(x);for(x=0;x<se.length;x++){var U=K;se[x]!==""&&(U+="="+encodeURIComponent(String(se[x]))),c.push(U)}}return this.i=c.join("&")};function An(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function pr(c,g){g&&!c.j&&(Dt(c),c.i=null,c.g.forEach(function(_,x){var U=x.toLowerCase();x!=U&&(Wn(this,x),Ei(this,U,_))},c)),c.j=g}function af(c,g){const _=new ps;if(h.Image){const x=new Image;x.onload=S(rn,_,"TestLoadImage: loaded",!0,g,x),x.onerror=S(rn,_,"TestLoadImage: error",!1,g,x),x.onabort=S(rn,_,"TestLoadImage: abort",!1,g,x),x.ontimeout=S(rn,_,"TestLoadImage: timeout",!1,g,x),h.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=c}else g(!1)}function dc(c,g){const _=new ps,x=new AbortController,U=setTimeout(()=>{x.abort(),rn(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:x.signal}).then(K=>{clearTimeout(U),K.ok?rn(_,"TestPingServer: ok",!0,g):rn(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),rn(_,"TestPingServer: error",!1,g)})}function rn(c,g,_,x,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),x(_)}catch{}}function lf(){this.g=new ll}function fc(c,g,_){const x=_||"";try{gi(c,function(U,K){let se=U;m(U)&&(se=ol(U)),g.push(x+K+"="+encodeURIComponent(se))})}catch(U){throw g.push(x+"type="+encodeURIComponent("_badmap")),U}}function Br(c){this.l=c.Ub||null,this.j=c.eb||!1}V(Br,ds),Br.prototype.g=function(){return new Es(this.l,this.j)},Br.prototype.i=(function(c){return function(){return c}})({});function Es(c,g){_t.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Es,_t),n=Es.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Qn(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||h).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gn(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Qn(this)),this.g&&(this.readyState=3,Qn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function pc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Gn(this):Qn(this),this.readyState==3&&pc(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Gn(this))},n.Qa=function(c){this.g&&(this.response=c,Gn(this))},n.ga=function(){this.g&&Gn(this)};function Gn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Qn(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function Qn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Es.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function zr(c){let g="";return X(c,function(_,x){g+=x,g+=":",g+=_,g+=`\r
`}),g}function Ii(c,g,_){e:{for(x in _){var x=!1;break e}x=!0}x||(_=zr(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Ke(c,g,_))}function Ze(c){_t.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Ze,_t);var uf=/^https?$/i,vl=["POST","PUT"];n=Ze.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,_,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qn.g(),this.v=this.o?xo(this.o):xo(qn),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(K){Is(this,K);return}if(c=_||"",_=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var U in x)_.set(U,x[U]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const K of x.keys())_.set(K,x.get(K));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(_.keys()).find(K=>K.toLowerCase()=="content-type"),U=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(vl,g,void 0))||x||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,se]of _)this.g.setRequestHeader(K,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Lo(this),this.u=!0,this.g.send(c),this.u=!1}catch(K){Is(this,K)}};function Is(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Oo(c),yn(c)}function Oo(c){c.A||(c.A=!0,wt(c,"complete"),wt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,wt(this,"complete"),wt(this,"abort"),yn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yn(this,!0)),Ze.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?_l(this):this.bb())},n.bb=function(){_l(this)};function _l(c){if(c.h&&typeof u<"u"&&(!c.v[1]||sn(c)!=4||c.Z()!=2)){if(c.u&&sn(c)==4)rl(c.Ea,0,c);else if(wt(c,"readystatechange"),sn(c)==4){c.h=!1;try{const se=c.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var x;if(x=se===0){var U=String(c.D).match(_s)[1]||null;!U&&h.self&&h.self.location&&(U=h.self.location.protocol.slice(0,-1)),x=!uf.test(U?U.toLowerCase():"")}_=x}if(_)wt(c,"complete"),wt(c,"success");else{c.m=6;try{var K=2<sn(c)?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.Z()+"]",Oo(c)}}finally{yn(c)}}}}function yn(c,g){if(c.g){Lo(c);const _=c.g,x=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||wt(c,"ready");try{_.onreadystatechange=x}catch{}}}function Lo(c){c.I&&(h.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function sn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<sn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),al(g)}};function wl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Mo(c){const g={};c=(c.g&&2<=sn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<c.length;x++){if(J(c[x]))continue;var _=D(c[x]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const K=g[U]||[];g[U]=K,K.push(_)}C(g,function(x){return x.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mr(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function El(c){this.Aa=0,this.i=[],this.j=new ps,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mr("baseRetryDelayMs",5e3,c),this.cb=mr("retryDelaySeedMs",1e4,c),this.Wa=mr("forwardChannelMaxRetries",2,c),this.wa=mr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new vs(c&&c.concurrentRequestLimit),this.Da=new lf,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=El.prototype,n.la=8,n.G=1,n.connect=function(c,g,_,x){ht(0),this.W=c,this.H=g||{},_&&x!==void 0&&(this.H.OSID=_,this.H.OAID=x),this.F=this.X,this.I=vc(this,null,this.W),gr(this)};function Vt(c){if(jo(c),c.G==3){var g=c.U++,_=gn(c.I);if(Ke(_,"SID",c.K),Ke(_,"RID",g),Ke(_,"TYPE","terminate"),$r(c,_),g=new Hn(c,c.j,g),g.L=2,g.v=_i(gn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=g.v,_=!0),_||(g.g=_c(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Qe(g)}yc(c)}function Xn(c){c.g&&(Il(c),c.g.cancel(),c.g=null)}function jo(c){Xn(c),c.u&&(h.clearTimeout(c.u),c.u=null),Bo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function gr(c){if(!mn(c.h)&&!c.s){c.s=!0;var g=c.Ga;We||he(),ae||(We(),ae=!0),we.add(g,c),c.B=0}}function cf(c,g){return sc(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=zn(T(c.Ga,c,g),gc(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const U=new Hn(this,this.j,c);let K=this.o;if(this.S&&(K?(K=k(K),N(K,this.S)):K=this.S),this.m!==null||this.O||(U.H=K,K=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var x=this.i[_];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(g+=x,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Ti(this,U,g),_=gn(this.I),Ke(_,"RID",c),Ke(_,"CVER",22),this.D&&Ke(_,"X-HTTP-Session-Id",this.D),$r(this,_),K&&(this.O?g="headers="+encodeURIComponent(String(zr(K)))+"&"+g:this.m&&Ii(_,this.m,K)),gl(this.h,U),this.Ua&&Ke(_,"TYPE","init"),this.P?(Ke(_,"$req",g),Ke(_,"SID","null"),U.T=!0,Po(U,_,null)):Po(U,_,g),this.G=2}}else this.G==3&&(c?Fo(this,c):this.i.length==0||mn(this.h)||Fo(this))};function Fo(c,g){var _;g?_=g.l:_=c.U++;const x=gn(c.I);Ke(x,"SID",c.K),Ke(x,"RID",_),Ke(x,"AID",c.T),$r(c,x),c.m&&c.o&&Ii(x,c.m,c.o),_=new Hn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Ti(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),gl(c.h,_),Po(_,x,g)}function $r(c,g){c.H&&X(c.H,function(_,x){Ke(g,x,_)}),c.l&&gi({},function(_,x){Ke(g,x,_)})}function Ti(c,g,_){_=Math.min(c.i.length,_);var x=c.l?T(c.l.Na,c.l,c):null;e:{var U=c.i;let K=-1;for(;;){const se=["count="+_];K==-1?0<_?(K=U[0].g,se.push("ofs="+K)):K=0:se.push("ofs="+K);let ze=!0;for(let Et=0;Et<_;Et++){let Oe=U[Et].g;const bt=U[Et].map;if(Oe-=K,0>Oe)K=Math.max(0,U[Et].g-100),ze=!1;else try{fc(bt,se,"req"+Oe+"_")}catch{x&&x(bt)}}if(ze){x=se.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,x}function Ts(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;We||he(),ae||(We(),ae=!0),we.add(g,c),c.v=0}}function Uo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=zn(T(c.Fa,c),gc(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,mc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=zn(T(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),Xn(this),mc(this))};function Il(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function mc(c){c.g=new Hn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=gn(c.qa);Ke(g,"RID","rpc"),Ke(g,"SID",c.K),Ke(g,"AID",c.T),Ke(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ke(g,"TO",c.ja),Ke(g,"TYPE","xmlhttp"),$r(c,g),c.m&&c.o&&Ii(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=_i(gn(g)),_.m=null,_.P=!0,pl(_,c)}n.Za=function(){this.C!=null&&(this.C=null,Xn(this),Uo(this),ht(19))};function Bo(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function zo(c,g){var _=null;if(c.g==g){Bo(c),Il(c),c.g=null;var x=2}else if(Xt(c.h,g))_=g.D,oc(c.h,g),x=1;else return;if(c.G!=0){if(g.o)if(x==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var U=c.B;x=fs(),wt(x,new bo(x,_)),gr(c)}else Ts(c);else if(U=g.s,U==3||U==0&&0<g.X||!(x==1&&cf(c,g)||x==2&&Uo(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),U){case 1:qr(c,5);break;case 4:qr(c,10);break;case 3:qr(c,6);break;default:qr(c,2)}}}function gc(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function qr(c,g){if(c.j.info("Error code "+g),g==2){var _=T(c.fb,c),x=c.Xa;const U=!x;x=new Ur(x||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||ws(x,"https"),_i(x),U?af(x.toString(),_):dc(x.toString(),_)}else ht(2);c.G=0,c.l&&c.l.sa(g),yc(c),jo(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function yc(c){if(c.G=0,c.ka=[],c.l){const g=ac(c.h);(g.length!=0||c.i.length!=0)&&(L(c.ka,g),L(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function vc(c,g,_){var x=_ instanceof Ur?gn(_):new Ur(_);if(x.g!="")g&&(x.g=g+"."+x.g),yi(x,x.s);else{var U=h.location;x=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;var K=new Ur(null);x&&ws(K,x),g&&(K.g=g),U&&yi(K,U),_&&(K.l=_),x=K}return _=c.D,g=c.ya,_&&g&&Ke(x,_,g),Ke(x,"VER",c.la),$r(c,x),x}function _c(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Ze(new Br({eb:_})):new Ze(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tl(){}n=Tl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function $o(){}$o.prototype.g=function(c,g){return new Yt(c,g)};function Yt(c,g){_t.call(this),this.g=new El(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!J(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!J(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new yr(this)}V(Yt,_t),Yt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){Vt(this.g)},Yt.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=ol(c),c=_);g.i.push(new ic(g.Ya++,c)),g.G==3&&gr(g)},Yt.prototype.N=function(){this.g.l=null,delete this.j,Vt(this.g),delete this.g,Yt.aa.N.call(this)};function wc(c){hr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}V(wc,hr);function Ec(){ko.call(this),this.status=1}V(Ec,ko);function yr(c){this.g=c}V(yr,Tl),yr.prototype.ua=function(){wt(this.g,"a")},yr.prototype.ta=function(c){wt(this.g,new wc(c))},yr.prototype.sa=function(c){wt(this.g,new Ec)},yr.prototype.ra=function(){wt(this.g,"b")},$o.prototype.createWebChannel=$o.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,bE=function(){return new $o},kE=function(){return fs()},SE=dr,om={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ro.NO_ERROR=0,Ro.TIMEOUT=8,Ro.HTTP_ERROR=6,kh=Ro,ec.COMPLETE="complete",xE=ec,So.EventType=kn,kn.OPEN="a",kn.CLOSE="b",kn.ERROR="c",kn.MESSAGE="d",_t.prototype.listen=_t.prototype.K,tu=So,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,TE=Ze}).apply(typeof gh<"u"?gh:typeof self<"u"?self:typeof window<"u"?window:{});const z_="@firebase/firestore",$_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wa="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new Id("@firebase/firestore");function ya(){return no.logLevel}function ne(n,...e){if(no.logLevel<=Pe.DEBUG){const t=e.map(Km);no.debug(`Firestore (${Wa}): ${n}`,...t)}}function en(n,...e){if(no.logLevel<=Pe.ERROR){const t=e.map(Km);no.error(`Firestore (${Wa}): ${n}`,...t)}}function Cr(n,...e){if(no.logLevel<=Pe.WARN){const t=e.map(Km);no.warn(`Firestore (${Wa}): ${n}`,...t)}}function Km(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,AE(n,r,t)}function AE(n,e,t){let r=`FIRESTORE (${Wa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw en(r),new Error(r)}function ye(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||AE(e,s,r)}function ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends cr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Mt.UNAUTHENTICATED)))}shutdown(){}}class uA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class cA{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ye(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Sr,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},h=f=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Sr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new RE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new Mt(e)}}class hA{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class dA{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new hA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Mt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class q_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ir(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ye(this.o===void 0,3512);const r=a=>{a.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ne("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new q_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ye(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new q_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=pA(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function Te(n,e){return n<e?-1:n>e?1:0}function am(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return Te(r,s);{const a=CE(),u=mA(a.encode(H_(n,t)),a.encode(H_(e,t)));return u!==0?u:Te(r,s)}}t+=r>65535?2:1}return Te(n.length,e.length)}function H_(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function mA(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Te(n[t],e[t]);return Te(n.length,e.length)}function ka(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}function PE(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="__name__";class Ir{constructor(e,t,r){t===void 0?t=0:t>e.length&&pe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&pe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ir.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ir?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Ir.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Te(e.length,t.length)}static compareSegments(e,t){const r=Ir.isNumericId(e),s=Ir.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Ir.extractNumericId(e).compare(Ir.extractNumericId(t)):am(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qi.fromString(e.substring(4,e.length-2))}}class Be extends Ir{construct(e,t,r){return new Be(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new Be(t)}static emptyPath(){return new Be([])}}const gA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends Ir{construct(e,t,r){return new ot(e,t,r)}static isValidIdentifier(e){return gA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===W_}static keyField(){return new ot([W_])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new ie(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ie(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ie(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else h==="`"?(u=!u,s++):h!=="."||u?(r+=h,s++):(a(),s++)}if(a(),u)throw new ie(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(t)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(Be.fromString(e))}static fromName(e){return new le(Be.fromString(e).popFirst(5))}static empty(){return new le(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new Be(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(n,e,t){if(!t)throw new ie(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yA(n,e,t,r){if(e===!0&&r===!0)throw new ie(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function K_(n){if(!le.isDocumentKey(n))throw new ie(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function G_(n){if(le.isDocumentKey(n))throw new ie(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function DE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Td(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":pe(12329,{type:typeof n})}function tn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ie(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Td(n);throw new ie(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function vA(n,e){if(e<=0)throw new ie(G.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Mu(n,e){if(!DE(n))throw new ie(G.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(s&&typeof u!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new ie(G.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_=-62135596800,X_=1e6;class $e{static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*X_);return new $e(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ie(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ie(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Q_)throw new ie(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/X_}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Mu(e,$e._jsonSchema))return new $e(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Q_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$e._jsonSchemaVersion="firestore/timestamp/1.0",$e._jsonSchema={type:gt("string",$e._jsonSchemaVersion),seconds:gt("number"),nanoseconds:gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{static fromTimestamp(e){return new _e(e)}static min(){return new _e(new $e(0,0))}static max(){return new _e(new $e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=-1;class Hh{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function lm(n){return n.fields.find((e=>e.kind===2))}function Us(n){return n.fields.filter((e=>e.kind!==2))}Hh.UNKNOWN_ID=-1;class bh{constructor(e,t){this.fieldPath=e,this.kind=t}}class wu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new wu(0,Sn.min())}}function _A(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=_e.fromTimestamp(r===1e9?new $e(t+1,0):new $e(t,r));return new Sn(s,le.empty(),e)}function VE(n){return new Sn(n.readTime,n.key,_u)}class Sn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Sn(_e.min(),le.empty(),_u)}static max(){return new Sn(_e.max(),le.empty(),_u)}}function Qm(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=le.comparator(n.documentKey,e.documentKey),t!==0?t:Te(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(n){if(n.code!==G.FAILED_PRECONDITION||n.message!==OE)throw n;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new B(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof B?t:B.resolve(t)}catch(t){return B.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):B.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):B.reject(t)}static resolve(e){return new B(((t,r)=>{t(e)}))}static reject(e){return new B(((t,r)=>{r(e)}))}static waitFor(e){return new B(((t,r)=>{let s=0,a=0,u=!1;e.forEach((h=>{++s,h.next((()=>{++a,u&&a===s&&t()}),(f=>r(f)))})),u=!0,a===s&&t()}))}static or(e){let t=B.resolve(!1);for(const r of e)t=t.next((s=>s?B.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new B(((r,s)=>{const a=e.length,u=new Array(a);let h=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((v=>{u[m]=v,++h,h===a&&r(u)}),(v=>s(v)))}}))}static doWhile(e,t){return new B(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="SimpleDb";class xd{static open(e,t,r,s){try{return new xd(t,e.transaction(s,r))}catch(a){throw new au(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Sr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new au(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=Xm(r.target.error);this.S.reject(new au(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ne(In,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new EA(t)}}class Xi{static delete(e){return ne(In,"Removing database:",e),zs(oE().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Ed())return!1;if(Xi.F())return!0;const e=xt(),t=Xi.M(e),r=0<t&&t<10,s=ME(e),a=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,Xi.M(xt())===12.2&&en("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(ne(In,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=a=>{const u=a.target.result;t(u)},s.onblocked=()=>{r(new au(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const u=a.target.error;u.name==="VersionError"?r(new ie(G.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new ie(G.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new au(e,u))},s.onupgradeneeded=a=>{ne(In,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const u=a.target.result;if(this.L!==null&&this.L!==a.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${a.oldVersion}, event.newVersion=${a.newVersion}, db.version=${u.version}`);this.B.q(u,s.transaction,a.oldVersion,this.version).next((()=>{ne(In,"Database upgrade to version "+this.version+" complete")}))}})),this.db.addEventListener("close",(t=>{const r=t.target;this.L=r.version}),{passive:!0})),this.db.addEventListener("versionchange",(t=>{var r;t.newVersion===null&&(Cr('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))}),{passive:!0}),this.db}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}async runTransaction(e,t,r,s){const a=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.k(e);const h=xd.open(this.db,e,a?"readonly":"readwrite",r),f=s(h).next((m=>(h.v(),m))).catch((m=>(h.abort(m),B.reject(m)))).toPromise();return f.catch((()=>{})),await h.D,f}catch(h){const f=h,m=f.name!=="FirebaseError"&&u<3;if(ne(In,"Transaction failed with error:",f.message,"Retrying:",m),this.close(),!m)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ME(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class wA{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return zs(this.$.delete())}}class au extends ie{constructor(e,t){super(G.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function os(n){return n.name==="IndexedDbTransactionError"}class EA{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ne(In,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ne(In,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),zs(r)}add(e){return ne(In,"ADD",this.store.name,e,e),zs(this.store.add(e))}get(e){return zs(this.store.get(e)).next((t=>(t===void 0&&(t=null),ne(In,"GET",this.store.name,e,t),t)))}delete(e){return ne(In,"DELETE",this.store.name,e),zs(this.store.delete(e))}count(){return ne(In,"COUNT",this.store.name),zs(this.store.count())}j(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const a=s.getAll(r.range);return new B(((u,h)=>{a.onerror=f=>{h(f.target.error)},a.onsuccess=f=>{u(f.target.result)}}))}{const a=this.cursor(r),u=[];return this.J(a,((h,f)=>{u.push(f)})).next((()=>u))}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new B(((s,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{s(u.target.result)}}))}Y(e,t){ne(In,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const s=this.cursor(r);return this.J(s,((a,u,h)=>h.delete()))}X(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.J(s,t)}ee(e){const t=this.cursor({});return new B(((r,s)=>{t.onerror=a=>{const u=Xm(a.target.error);s(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next((h=>{h?u.continue():r()})):r()}}))}J(e,t){const r=[];return new B(((s,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void s();const f=new wA(h),m=t(h.primaryKey,h.value,f);if(m instanceof B){const v=m.catch((w=>(f.done(),B.reject(w))));r.push(v)}f.isDone?s():f.W===null?h.continue():h.continue(f.W)}})).next((()=>B.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function zs(n){return new B(((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=Xm(r.target.error);t(s)}}))}let Y_=!1;function Xm(n){const e=Xi.M(xt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Y_||(Y_=!0,setTimeout((()=>{throw r}),0)),r}}return n}const lu="IndexBackfiller";class IA{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){ne(lu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.te.re();ne(lu,`Documents written: ${t}`)}catch(t){os(t)?ne(lu,"Ignoring IndexedDB error during index backfill: ",t):await yo(t)}await this.ne(6e4)}))}}class TA{constructor(e,t){this.localStore=e,this.persistence=t}async re(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ie(t,e)))}ie(e,t){const r=new Set;let s=t,a=!0;return B.doWhile((()=>a===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!r.has(u))return ne(lu,`Processing collection: ${u}`),this.se(e,u,s).next((h=>{s-=h,r.add(u)}));a=!1})))).next((()=>t-s))}se(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next((a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this.oe(s,a))).next((h=>(ne(lu,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h)))).next((()=>u.size))}))))}oe(e,t){let r=e;return t.changes.forEach(((s,a)=>{const u=VE(a);Qm(u,r)>0&&(r=u)})),new Sn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Mn.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=-1;function Sd(n){return n==null}function Eu(n){return n===0&&1/n==-1/0}function xA(n){return typeof n=="number"&&Number.isInteger(n)&&!Eu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh="";function Qt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=J_(e)),e=SA(n.get(t),e);return J_(e)}function SA(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case Wh:t+="";break;default:t+=a}}return t}function J_(n){return n+Wh+""}function Tr(n){const e=n.length;if(ye(e>=2,64408,{path:n}),e===2)return ye(n.charAt(0)===Wh&&n.charAt(1)==="",56145,{path:n}),Be.emptyPath();const t=e-2,r=[];let s="";for(let a=0;a<e;){const u=n.indexOf(Wh,a);switch((u<0||u>t)&&pe(50515,{path:n}),n.charAt(u+1)){case"":const h=n.substring(a,u);let f;s.length===0?f=h:(s+=h,f=s,s=""),r.push(f);break;case"":s+=n.substring(a,u),s+="\0";break;case"":s+=n.substring(a,u+1);break;default:pe(61167,{path:n})}a=u+2}return new Be(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="remoteDocuments",ju="owner",ha="owner",Iu="mutationQueues",kA="userId",rr="mutations",Z_="batchId",Ks="userMutationsIndex",ew=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(n,e){return[n,Qt(e)]}function jE(n,e,t){return[n,Qt(e),t]}const bA={},ba="documentMutations",Kh="remoteDocumentsV14",AA=["prefixPath","collectionGroup","readTime","documentId"],Rh="documentKeyIndex",RA=["prefixPath","collectionGroup","documentId"],FE="collectionGroupIndex",CA=["collectionGroup","readTime","prefixPath","documentId"],Tu="remoteDocumentGlobal",um="remoteDocumentGlobalKey",Aa="targets",UE="queryTargetsIndex",PA=["canonicalId","targetId"],Ra="targetDocuments",NA=["targetId","path"],Ym="documentTargetsIndex",DA=["path","targetId"],Gh="targetGlobalKey",Ys="targetGlobal",xu="collectionParents",VA=["collectionId","parent"],Ca="clientMetadata",OA="clientId",kd="bundles",LA="bundleId",bd="namedQueries",MA="name",Jm="indexConfiguration",jA="indexId",cm="collectionGroupIndex",FA="collectionGroup",uu="indexState",UA=["indexId","uid"],BE="sequenceNumberIndex",BA=["uid","sequenceNumber"],cu="indexEntries",zA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],zE="documentKeyIndex",$A=["indexId","uid","orderedDocumentKey"],Ad="documentOverlays",qA=["userId","collectionPath","documentId"],hm="collectionPathOverlayIndex",HA=["userId","collectionPath","largestBatchId"],$E="collectionGroupOverlayIndex",WA=["userId","collectionGroup","largestBatchId"],Zm="globals",KA="name",qE=[Iu,rr,ba,Bs,Aa,ju,Ys,Ra,Ca,Tu,xu,kd,bd],GA=[...qE,Ad],HE=[Iu,rr,ba,Kh,Aa,ju,Ys,Ra,Ca,Tu,xu,kd,bd,Ad],WE=HE,eg=[...WE,Jm,uu,cu],QA=eg,KE=[...eg,Zm],XA=KE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm extends LE{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}}function St(n,e){const t=ke(n);return Xi.N(t.ce,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function as(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function GE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,t){this.comparator=e,this.root=t||jt.EMPTY}insert(e,t){return new rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yh(this.root,e,this.comparator,!1)}getReverseIterator(){return new yh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yh(this.root,e,this.comparator,!0)}}class yh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??jt.RED,this.left=s??jt.EMPTY,this.right=a??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new jt(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return jt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nw(this.data.getIterator())}getIteratorFrom(e){return new nw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof He)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new He(this.comparator);return t.data=e,t}}class nw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function da(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new dn([])}unionWith(e){let t=new He(ot.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new dn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ka(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new QE("Invalid base64 string: "+a):a}})(e);return new vt(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a})(e);return new vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const YA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ai(n){if(ye(!!n,39018),typeof n=="string"){let e=0;const t=YA.exec(n);if(ye(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(n.seconds),nanos:tt(n.nanos)}}function tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function li(n){return typeof n=="string"?vt.fromBase64String(n):vt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="server_timestamp",YE="__type__",JE="__previous_value__",ZE="__local_write_time__";function tg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[YE])===null||t===void 0?void 0:t.stringValue)===XE}function Rd(n){const e=n.mapValue.fields[JE];return tg(e)?Rd(e):e}function Su(n){const e=ai(n.mapValue.fields[ZE].timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,t,r,s,a,u,h,f,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=v}}const Qh="(default)";class ro{constructor(e,t){this.projectId=e,this.database=t||Qh}static empty(){return new ro("","")}get isDefaultDatabase(){return this.database===Qh}isEqual(e){return e instanceof ro&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="__type__",eI="__max__",Wi={mapValue:{fields:{__type__:{stringValue:eI}}}},rg="__vector__",Pa="value",Ch={nullValue:"NULL_VALUE"};function es(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tg(n)?4:tI(n)?9007199254740991:Cd(n)?10:11:pe(28295,{value:n})}function Pr(n,e){if(n===e)return!0;const t=es(n);if(t!==es(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Su(n).isEqual(Su(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=ai(s.timestampValue),h=ai(a.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return li(s.bytesValue).isEqual(li(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return tt(s.geoPointValue.latitude)===tt(a.geoPointValue.latitude)&&tt(s.geoPointValue.longitude)===tt(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return tt(s.integerValue)===tt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=tt(s.doubleValue),h=tt(a.doubleValue);return u===h?Eu(u)===Eu(h):isNaN(u)&&isNaN(h)}return!1})(n,e);case 9:return ka(n.arrayValue.values||[],e.arrayValue.values||[],Pr);case 10:case 11:return(function(s,a){const u=s.mapValue.fields||{},h=a.mapValue.fields||{};if(tw(u)!==tw(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!Pr(u[f],h[f])))return!1;return!0})(n,e);default:return pe(52216,{left:n})}}function ku(n,e){return(n.values||[]).find((t=>Pr(t,e)))!==void 0}function ts(n,e){if(n===e)return 0;const t=es(n),r=es(e);if(t!==r)return Te(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Te(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const h=tt(a.integerValue||a.doubleValue),f=tt(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(n,e);case 3:return rw(n.timestampValue,e.timestampValue);case 4:return rw(Su(n),Su(e));case 5:return am(n.stringValue,e.stringValue);case 6:return(function(a,u){const h=li(a),f=li(u);return h.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const h=a.split("/"),f=u.split("/");for(let m=0;m<h.length&&m<f.length;m++){const v=Te(h[m],f[m]);if(v!==0)return v}return Te(h.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const h=Te(tt(a.latitude),tt(u.latitude));return h!==0?h:Te(tt(a.longitude),tt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return iw(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var h,f,m,v;const w=a.fields||{},T=u.fields||{},S=(h=w[Pa])===null||h===void 0?void 0:h.arrayValue,V=(f=T[Pa])===null||f===void 0?void 0:f.arrayValue,M=Te(((m=S==null?void 0:S.values)===null||m===void 0?void 0:m.length)||0,((v=V==null?void 0:V.values)===null||v===void 0?void 0:v.length)||0);return M!==0?M:iw(S,V)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Wi.mapValue&&u===Wi.mapValue)return 0;if(a===Wi.mapValue)return 1;if(u===Wi.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),m=u.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let w=0;w<f.length&&w<v.length;++w){const T=am(f[w],v[w]);if(T!==0)return T;const S=ts(h[f[w]],m[v[w]]);if(S!==0)return S}return Te(f.length,v.length)})(n.mapValue,e.mapValue);default:throw pe(23264,{le:t})}}function rw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Te(n,e);const t=ai(n),r=ai(e),s=Te(t.seconds,r.seconds);return s!==0?s:Te(t.nanos,r.nanos)}function iw(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=ts(t[s],r[s]);if(a)return a}return Te(t.length,r.length)}function Na(n){return fm(n)}function fm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=ai(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return li(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return le.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=fm(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const u of r)a?a=!1:s+=",",s+=`${u}:${fm(t.fields[u])}`;return s+"}"})(n.mapValue):pe(61005,{value:n})}function Ph(n){switch(es(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rd(n);return e?16+Ph(e):16;case 5:return 2*n.stringValue.length;case 6:return li(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+Ph(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return as(r.fields,((a,u)=>{s+=a.length+Ph(u)})),s})(n.mapValue);default:throw pe(13486,{value:n})}}function bu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function pm(n){return!!n&&"integerValue"in n}function Au(n){return!!n&&"arrayValue"in n}function sw(n){return!!n&&"nullValue"in n}function ow(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Nh(n){return!!n&&"mapValue"in n}function Cd(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[ng])===null||t===void 0?void 0:t.stringValue)===rg}function hu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return as(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=hu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function tI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===eI}const nI={mapValue:{fields:{[ng]:{stringValue:rg},[Pa]:{arrayValue:{}}}}};function ZA(n){return"nullValue"in n?Ch:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?bu(ro.empty(),le.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Cd(n)?nI:{mapValue:{}}:pe(35942,{value:n})}function eR(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?bu(ro.empty(),le.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?nI:"mapValue"in n?Cd(n)?{mapValue:{}}:Wi:pe(61959,{value:n})}function aw(n,e){const t=ts(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function lw(n,e){const t=ts(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.value=e}static empty(){return new Kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Nh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hu(t)}setAll(e){let t=ot.emptyPath(),r={},s=[];e.forEach(((u,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=h.popLast()}u?r[h.lastSegment()]=hu(u):s.push(h.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());Nh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Nh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){as(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new Kt(hu(this.value))}}function rI(n){const e=[];return as(n.fields,((t,r)=>{const s=new ot([t]);if(Nh(r)){const a=rI(r.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)})),new dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,t,r,s,a,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=u,this.documentState=h}static newInvalidDocument(e){return new lt(e,0,_e.min(),_e.min(),_e.min(),Kt.empty(),0)}static newFoundDocument(e,t,r,s){return new lt(e,1,t,_e.min(),r,s,0)}static newNoDocument(e,t){return new lt(e,2,t,_e.min(),_e.min(),Kt.empty(),0)}static newUnknownDocument(e,t){return new lt(e,3,t,_e.min(),_e.min(),Kt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t){this.position=e,this.inclusive=t}}function uw(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],u=n.position[s];if(a.field.isKeyField()?r=le.comparator(le.fromName(u.referenceValue),t.key):r=ts(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function cw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,t="asc"){this.field=e,this.dir=t}}function tR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{}class Ne extends iI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new nR(e,t,r):t==="array-contains"?new sR(e,r):t==="in"?new cI(e,r):t==="not-in"?new oR(e,r):t==="array-contains-any"?new aR(e,r):new Ne(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new rR(e,r):new iR(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ts(t,this.value)):t!==null&&es(this.value)===es(t)&&this.matchesComparison(ts(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qe extends iI{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new qe(e,t)}matches(e){return Va(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Va(n){return n.op==="and"}function mm(n){return n.op==="or"}function ig(n){return sI(n)&&Va(n)}function sI(n){for(const e of n.filters)if(e instanceof qe)return!1;return!0}function gm(n){if(n instanceof Ne)return n.field.canonicalString()+n.op.toString()+Na(n.value);if(ig(n))return n.filters.map((e=>gm(e))).join(",");{const e=n.filters.map((t=>gm(t))).join(",");return`${n.op}(${e})`}}function oI(n,e){return n instanceof Ne?(function(r,s){return s instanceof Ne&&r.op===s.op&&r.field.isEqual(s.field)&&Pr(r.value,s.value)})(n,e):n instanceof qe?(function(r,s){return s instanceof qe&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,u,h)=>a&&oI(u,s.filters[h])),!0):!1})(n,e):void pe(19439)}function aI(n,e){const t=n.filters.concat(e);return qe.create(t,n.op)}function lI(n){return n instanceof Ne?(function(t){return`${t.field.canonicalString()} ${t.op} ${Na(t.value)}`})(n):n instanceof qe?(function(t){return t.op.toString()+" {"+t.getFilters().map(lI).join(" ,")+"}"})(n):"Filter"}class nR extends Ne{constructor(e,t,r){super(e,t,r),this.key=le.fromName(r.referenceValue)}matches(e){const t=le.comparator(e.key,this.key);return this.matchesComparison(t)}}class rR extends Ne{constructor(e,t){super(e,"in",t),this.keys=uI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class iR extends Ne{constructor(e,t){super(e,"not-in",t),this.keys=uI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function uI(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>le.fromName(r.referenceValue)))}class sR extends Ne{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Au(t)&&ku(t.arrayValue,this.value)}}class cI extends Ne{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ku(this.value.arrayValue,t)}}class oR extends Ne{constructor(e,t){super(e,"not-in",t)}matches(e){if(ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ku(this.value.arrayValue,t)}}class aR extends Ne{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Au(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ku(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,t=null,r=[],s=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=u,this.endAt=h,this.Pe=null}}function ym(n,e=null,t=[],r=[],s=null,a=null,u=null){return new lR(n,e,t,r,s,a,u)}function io(n){const e=ke(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>gm(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Sd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Na(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Na(r))).join(",")),e.Pe=t}return e.Pe}function Fu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!tR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!oI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!cw(n.startAt,e.startAt)&&cw(n.endAt,e.endAt)}function Xh(n){return le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Yh(n,e){return n.filters.filter((t=>t instanceof Ne&&t.field.isEqual(e)))}function hw(n,e,t){let r=Ch,s=!0;for(const a of Yh(n,e)){let u=Ch,h=!0;switch(a.op){case"<":case"<=":u=ZA(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,h=!1;break;case"!=":case"not-in":u=Ch}aw({value:r,inclusive:s},{value:u,inclusive:h})<0&&(r=u,s=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];aw({value:r,inclusive:s},{value:u,inclusive:t.inclusive})<0&&(r=u,s=t.inclusive);break}}return{value:r,inclusive:s}}function dw(n,e,t){let r=Wi,s=!0;for(const a of Yh(n,e)){let u=Wi,h=!0;switch(a.op){case">=":case">":u=eR(a.value),h=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,h=!1;break;case"!=":case"not-in":u=Wi}lw({value:r,inclusive:s},{value:u,inclusive:h})>0&&(r=u,s=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];lw({value:r,inclusive:s},{value:u,inclusive:t.inclusive})>0&&(r=u,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t=null,r=[],s=[],a=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function uR(n,e,t,r,s,a,u,h){return new Ka(n,e,t,r,s,a,u,h)}function Uu(n){return new Ka(n)}function fw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function hI(n){return n.collectionGroup!==null}function du(n){const e=ke(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new He(ot.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Ru(a,r))})),t.has(ot.keyField().canonicalString())||e.Te.push(new Ru(ot.keyField(),r))}return e.Te}function Fn(n){const e=ke(n);return e.Ie||(e.Ie=cR(e,du(n))),e.Ie}function cR(n,e){if(n.limitType==="F")return ym(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Ru(s.field,a)}));const t=n.endAt?new Da(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Da(n.startAt.position,n.startAt.inclusive):null;return ym(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function vm(n,e){const t=n.filters.concat([e]);return new Ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Jh(n,e,t){return new Ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Pd(n,e){return Fu(Fn(n),Fn(e))&&n.limitType===e.limitType}function dI(n){return`${io(Fn(n))}|lt:${n.limitType}`}function va(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>lI(s))).join(", ")}]`),Sd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Na(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Na(s))).join(",")),`Target(${r})`})(Fn(n))}; limitType=${n.limitType})`}function Bu(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):le.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of du(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(u,h,f){const m=uw(u,h,f);return u.inclusive?m<=0:m<0})(r.startAt,du(r),s)||r.endAt&&!(function(u,h,f){const m=uw(u,h,f);return u.inclusive?m>=0:m>0})(r.endAt,du(r),s))})(n,e)}function hR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fI(n){return(e,t)=>{let r=!1;for(const s of du(n)){const a=dR(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function dR(n,e,t){const r=n.field.isKeyField()?le.comparator(e.key,t.key):(function(a,u,h){const f=u.data.field(a),m=h.data.field(a);return f!==null&&m!==null?ts(f,m):pe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return pe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){as(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return GE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=new rt(le.comparator);function Tn(){return fR}const pI=new rt(le.comparator);function nu(...n){let e=pI;for(const t of n)e=e.insert(t.key,t);return e}function mI(n){let e=pI;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function xr(){return fu()}function gI(){return fu()}function fu(){return new ci((n=>n.toString()),((n,e)=>n.isEqual(e)))}const pR=new rt(le.comparator),mR=new He(le.comparator);function Ae(...n){let e=mR;for(const t of n)e=e.add(t);return e}const gR=new He(Te);function yR(){return gR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eu(e)?"-0":e}}function yI(n){return{integerValue:""+n}}function vR(n,e){return xA(e)?yI(e):sg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(){this._=void 0}}function _R(n,e,t){return n instanceof Oa?(function(s,a){const u={fields:{[YE]:{stringValue:XE},[ZE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&tg(a)&&(a=Rd(a)),a&&(u.fields[JE]=a),{mapValue:u}})(t,e):n instanceof La?_I(n,e):n instanceof Ma?wI(n,e):(function(s,a){const u=vI(s,a),h=pw(u)+pw(s.Ee);return pm(u)&&pm(s.Ee)?yI(h):sg(s.serializer,h)})(n,e)}function wR(n,e,t){return n instanceof La?_I(n,e):n instanceof Ma?wI(n,e):t}function vI(n,e){return n instanceof Cu?(function(r){return pm(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Oa extends Nd{}class La extends Nd{constructor(e){super(),this.elements=e}}function _I(n,e){const t=EI(e);for(const r of n.elements)t.some((s=>Pr(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Ma extends Nd{constructor(e){super(),this.elements=e}}function wI(n,e){let t=EI(e);for(const r of n.elements)t=t.filter((s=>!Pr(s,r)));return{arrayValue:{values:t}}}class Cu extends Nd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function pw(n){return tt(n.integerValue||n.doubleValue)}function EI(n){return Au(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,t){this.field=e,this.transform=t}}function ER(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof La&&s instanceof La||r instanceof Ma&&s instanceof Ma?ka(r.elements,s.elements,Pr):r instanceof Cu&&s instanceof Cu?Pr(r.Ee,s.Ee):r instanceof Oa&&s instanceof Oa})(n.transform,e.transform)}class IR{constructor(e,t){this.version=e,this.transformResults=t}}class Gt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gt}static exists(e){return new Gt(void 0,e)}static updateTime(e){return new Gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Dd{}function TI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Vd(n.key,Gt.none()):new Ga(n.key,n.data,Gt.none());{const t=n.data,r=Kt.empty();let s=new He(ot.comparator);for(let a of e.fields)if(!s.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),s=s.add(a)}return new hi(n.key,r,new dn(s.toArray()),Gt.none())}}function TR(n,e,t){n instanceof Ga?(function(s,a,u){const h=s.value.clone(),f=gw(s.fieldTransforms,a,u.transformResults);h.setAll(f),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):n instanceof hi?(function(s,a,u){if(!Dh(s.precondition,a))return void a.convertToUnknownDocument(u.version);const h=gw(s.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(xI(s)),f.setAll(h),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function pu(n,e,t,r){return n instanceof Ga?(function(a,u,h,f){if(!Dh(a.precondition,u))return h;const m=a.value.clone(),v=yw(a.fieldTransforms,f,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof hi?(function(a,u,h,f){if(!Dh(a.precondition,u))return h;const m=yw(a.fieldTransforms,f,u),v=u.data;return v.setAll(xI(a)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(n,e,t,r):(function(a,u,h){return Dh(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(n,e,t)}function xR(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=vI(r.transform,s||null);a!=null&&(t===null&&(t=Kt.empty()),t.set(r.field,a))}return t||null}function mw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ka(r,s,((a,u)=>ER(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ga extends Dd{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class hi extends Dd{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function xI(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function gw(n,e,t){const r=new Map;ye(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const a=n[s],u=a.transform,h=e.data.field(a.field);r.set(a.field,wR(u,h,t[s]))}return r}function yw(n,e,t){const r=new Map;for(const s of n){const a=s.transform,u=t.data.field(s.field);r.set(s.field,_R(a,u,e))}return r}class Vd extends Dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SI extends Dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&TR(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=gI();return this.mutations.forEach((s=>{const a=e.get(s.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=t.has(s.key)?null:h;const f=TI(u,h);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(_e.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ae())}isEqual(e){return this.batchId===e.batchId&&ka(this.mutations,e.mutations,((t,r)=>mw(t,r)))&&ka(this.baseMutations,e.baseMutations,((t,r)=>mw(t,r)))}}class ag{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ye(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=(function(){return pR})();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,r[u].version);return new ag(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Le;function kR(n){switch(n){case G.OK:return pe(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return pe(15467,{code:n})}}function kI(n){if(n===void 0)return en("GRPC error has no .code"),G.UNKNOWN;switch(n){case mt.OK:return G.OK;case mt.CANCELLED:return G.CANCELLED;case mt.UNKNOWN:return G.UNKNOWN;case mt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case mt.INTERNAL:return G.INTERNAL;case mt.UNAVAILABLE:return G.UNAVAILABLE;case mt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case mt.NOT_FOUND:return G.NOT_FOUND;case mt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case mt.ABORTED:return G.ABORTED;case mt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case mt.DATA_LOSS:return G.DATA_LOSS;default:return pe(39323,{code:n})}}(Le=mt||(mt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=new Qi([4294967295,4294967295],0);function vw(n){const e=CE().encode(n),t=new IE;return t.update(e),new Uint8Array(t.digest())}function _w(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Qi([t,r],0),new Qi([s,a],0)]}class ug{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ru(`Invalid padding: ${t}`);if(r<0)throw new ru(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ru(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ru(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Qi.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply(Qi.fromNumber(r)));return s.compare(bR)===1&&(s=new Qi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=vw(e),[r,s]=_w(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,s,a);if(!this.ye(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new ug(a,s,t);return r.forEach((h=>u.insert(h))),u}insert(e){if(this.fe===0)return;const t=vw(e),[r,s]=_w(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,s,a);this.we(u)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,zu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Od(_e.min(),s,new rt(Te),Tn(),Ae())}}class zu{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new zu(r,t,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class bI{constructor(e,t){this.targetId=e,this.De=t}}class AI{constructor(e,t,r=vt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class ww{constructor(){this.ve=0,this.Ce=Ew(),this.Fe=vt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ae(),t=Ae(),r=Ae();return this.Ce.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:pe(38017,{changeType:a})}})),new zu(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Ew()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ye(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class AR{constructor(e){this.We=e,this.Ge=new Map,this.ze=Tn(),this.je=vh(),this.Je=vh(),this.He=new rt(Te)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:pe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,s)=>{this.nt(s)&&t(s)}))}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const a=s.target;if(Xh(a))if(r===0){const u=new le(a.path);this.Xe(t,u,lt.newNoDocument(u,_e.min()))}else ye(r===1,20013,{expectedCount:r});else{const u=this.ot(t);if(u!==r){const h=this._t(e),f=h?this.ut(h,e,u):1;if(f!==0){this.rt(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let u,h;try{u=li(r).toUint8Array()}catch(f){if(f instanceof QE)return Cr("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new ug(u,s,a)}catch(f){return Cr(f instanceof ru?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.fe===0?null:h}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const u=this.We.lt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Xe(t,a,null),s++)})),s}Pt(e){const t=new Map;this.Ge.forEach(((a,u)=>{const h=this.st(u);if(h){if(a.current&&Xh(h.target)){const f=new le(h.target.path);this.Tt(f).has(u)||this.It(u,f)||this.Xe(u,f,lt.newNoDocument(f,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}}));let r=Ae();this.Je.forEach(((a,u)=>{let h=!0;u.forEachWhile((f=>{const m=this.st(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const s=new Od(e,t,this.He,this.ze,r);return this.ze=Tn(),this.je=vh(),this.Je=vh(),this.He=new rt(Te),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new ww,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new He(Te),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new He(Te),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ne("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new ww),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function vh(){return new rt(le.comparator)}function Ew(){return new rt(le.comparator)}const RR={asc:"ASCENDING",desc:"DESCENDING"},CR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PR={and:"AND",or:"OR"};class NR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _m(n,e){return n.useProto3Json||Sd(e)?e:{value:e}}function ja(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function DR(n,e){return ja(n,e.toTimestamp())}function nn(n){return ye(!!n,49232),_e.fromTimestamp((function(t){const r=ai(t);return new $e(r.seconds,r.nanos)})(n))}function cg(n,e){return wm(n,e).canonicalString()}function wm(n,e){const t=(function(s){return new Be(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function CI(n){const e=Be.fromString(n);return ye(FI(e),10190,{key:e.toString()}),e}function Zh(n,e){return cg(n.databaseId,e.path)}function Js(n,e){const t=CI(e);if(t.get(1)!==n.databaseId.projectId)throw new ie(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ie(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new le(DI(t))}function PI(n,e){return cg(n.databaseId,e)}function NI(n){const e=CI(n);return e.length===4?Be.emptyPath():DI(e)}function Em(n){return new Be(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function DI(n){return ye(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Iw(n,e,t){return{name:Zh(n,e),fields:t.value.mapValue.fields}}function VR(n,e,t){const r=Js(n,e.name),s=nn(e.updateTime),a=e.createTime?nn(e.createTime):_e.min(),u=new Kt({mapValue:{fields:e.fields}}),h=lt.newFoundDocument(r,s,a,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function OR(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:pe(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,v){return m.useProto3Json?(ye(v===void 0||typeof v=="string",58123),vt.fromBase64String(v||"")):(ye(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),vt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(m){const v=m.code===void 0?G.UNKNOWN:kI(m.code);return new ie(v,m.message||"")})(u);t=new AI(r,s,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Js(n,r.document.name),a=nn(r.document.updateTime),u=r.document.createTime?nn(r.document.createTime):_e.min(),h=new Kt({mapValue:{fields:r.document.fields}}),f=lt.newFoundDocument(s,a,u,h),m=r.targetIds||[],v=r.removedTargetIds||[];t=new Vh(m,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Js(n,r.document),a=r.readTime?nn(r.readTime):_e.min(),u=lt.newNoDocument(s,a),h=r.removedTargetIds||[];t=new Vh([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Js(n,r.document),a=r.removedTargetIds||[];t=new Vh([],a,s,null)}else{if(!("filter"in e))return pe(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,u=new SR(s,a),h=r.targetId;t=new bI(h,u)}}return t}function ed(n,e){let t;if(e instanceof Ga)t={update:Iw(n,e.key,e.value)};else if(e instanceof Vd)t={delete:Zh(n,e.key)};else if(e instanceof hi)t={update:Iw(n,e.key,e.data),updateMask:BR(e.fieldMask)};else{if(!(e instanceof SI))return pe(16599,{Rt:e.type});t={verify:Zh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,u){const h=u.transform;if(h instanceof Oa)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof La)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Ma)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Cu)return{fieldPath:u.field.canonicalString(),increment:h.Ee};throw pe(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:DR(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:pe(27497)})(n,e.precondition)),t}function Im(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?Gt.updateTime(nn(a.updateTime)):a.exists!==void 0?Gt.exists(a.exists):Gt.none()})(e.currentDocument):Gt.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(u,h){let f=null;if("setToServerValue"in h)ye(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),f=new Oa;else if("appendMissingElements"in h){const v=h.appendMissingElements.values||[];f=new La(v)}else if("removeAllFromArray"in h){const v=h.removeAllFromArray.values||[];f=new Ma(v)}else"increment"in h?f=new Cu(u,h.increment):pe(16584,{proto:h});const m=ot.fromServerFormat(h.fieldPath);return new II(m,f)})(n,s))):[];if(e.update){e.update.name;const s=Js(n,e.update.name),a=new Kt({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(f){const m=f.fieldPaths||[];return new dn(m.map((v=>ot.fromServerFormat(v))))})(e.updateMask);return new hi(s,a,u,t,r)}return new Ga(s,a,t,r)}if(e.delete){const s=Js(n,e.delete);return new Vd(s,t)}if(e.verify){const s=Js(n,e.verify);return new SI(s,t)}return pe(1463,{proto:e})}function LR(n,e){return n&&n.length>0?(ye(e!==void 0,14353),n.map((t=>(function(s,a){let u=s.updateTime?nn(s.updateTime):nn(a);return u.isEqual(_e.min())&&(u=nn(a)),new IR(u,s.transformResults||[])})(t,e)))):[]}function VI(n,e){return{documents:[PI(n,e.path)]}}function OI(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=PI(n,s);const a=(function(m){if(m.length!==0)return jI(qe.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((v=>(function(T){return{field:_a(T.field),direction:jR(T.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=_m(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:s}}function LI(n){let e=NI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ye(r===1,65062);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(w){const T=MI(w);return T instanceof qe&&ig(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(w){return w.map((T=>(function(V){return new Ru(wa(V.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(T)))})(t.orderBy));let h=null;t.limit&&(h=(function(w){let T;return T=typeof w=="object"?w.value:w,Sd(T)?null:T})(t.limit));let f=null;t.startAt&&(f=(function(w){const T=!!w.before,S=w.values||[];return new Da(S,T)})(t.startAt));let m=null;return t.endAt&&(m=(function(w){const T=!w.before,S=w.values||[];return new Da(S,T)})(t.endAt)),uR(e,s,u,a,h,"F",f,m)}function MR(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function MI(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=wa(t.unaryFilter.field);return Ne.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=wa(t.unaryFilter.field);return Ne.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=wa(t.unaryFilter.field);return Ne.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=wa(t.unaryFilter.field);return Ne.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ne.create(wa(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return qe.create(t.compositeFilter.filters.map((r=>MI(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return pe(1026)}})(t.compositeFilter.op))})(n):pe(30097,{filter:n})}function jR(n){return RR[n]}function FR(n){return CR[n]}function UR(n){return PR[n]}function _a(n){return{fieldPath:n.canonicalString()}}function wa(n){return ot.fromServerFormat(n.fieldPath)}function jI(n){return n instanceof Ne?(function(t){if(t.op==="=="){if(ow(t.value))return{unaryFilter:{field:_a(t.field),op:"IS_NAN"}};if(sw(t.value))return{unaryFilter:{field:_a(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ow(t.value))return{unaryFilter:{field:_a(t.field),op:"IS_NOT_NAN"}};if(sw(t.value))return{unaryFilter:{field:_a(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_a(t.field),op:FR(t.op),value:t.value}}})(n):n instanceof qe?(function(t){const r=t.getFilters().map((s=>jI(s)));return r.length===1?r[0]:{compositeFilter:{op:UR(t.op),filters:r}}})(n):pe(54877,{filter:n})}function BR(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function FI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,t,r,s,a=_e.min(),u=_e.min(),h=vt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.gt=e}}function zR(n,e){let t;if(e.document)t=VR(n.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=le.fromSegments(e.noDocument.path),s=oo(e.noDocument.readTime);t=lt.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pe(56709);{const r=le.fromSegments(e.unknownDocument.path),s=oo(e.unknownDocument.version);t=lt.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime((function(s){const a=new $e(s[0],s[1]);return _e.fromTimestamp(a)})(e.readTime)),t}function Tw(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:td(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,u){return{name:Zh(a,u.key),fields:u.data.value.mapValue.fields,updateTime:ja(a,u.version.toTimestamp()),createTime:ja(a,u.createTime.toTimestamp())}})(n.gt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:so(e.version)};else{if(!e.isUnknownDocument())return pe(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:so(e.version)}}return r}function td(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function so(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function oo(n){const e=new $e(n.seconds,n.nanoseconds);return _e.fromTimestamp(e)}function $s(n,e){const t=(e.baseMutations||[]).map((a=>Im(n.gt,a)));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const h=e.mutations[a+1];u.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>Im(n.gt,a))),s=$e.fromMillis(e.localWriteTimeMs);return new og(e.batchId,s,t,r)}function iu(n){const e=oo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?oo(n.lastLimboFreeSnapshotVersion):_e.min();let r;return r=(function(a){return a.documents!==void 0})(n.query)?(function(a){const u=a.documents.length;return ye(u===1,1966,{count:u}),Fn(Uu(NI(a.documents[0])))})(n.query):(function(a){return Fn(LI(a))})(n.query),new ti(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,vt.fromBase64String(n.resumeToken))}function BI(n,e){const t=so(e.snapshotVersion),r=so(e.lastLimboFreeSnapshotVersion);let s;s=Xh(e.target)?VI(n.gt,e.target):OI(n.gt,e.target).Vt;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:io(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function zI(n){const e=LI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Jh(e,e.limit,"L"):e}function zp(n,e){return new lg(e.largestBatchId,Im(n.gt,e.overlayMutation))}function xw(n,e){const t=e.path.lastSegment();return[n,Qt(e.path.popLast()),t]}function Sw(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:so(r.readTime),documentKey:Qt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{getBundleMetadata(e,t){return kw(e).get(t).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:oo(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,t){return kw(e).put((function(s){return{bundleId:s.id,createTime:so(nn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return bw(e).get(t).next((r=>{if(r)return(function(a){return{name:a.name,query:zI(a.bundledQuery),readTime:oo(a.readTime)}})(r)}))}saveNamedQuery(e,t){return bw(e).put((function(s){return{name:s.name,readTime:so(nn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function kw(n){return St(n,kd)}function bw(n){return St(n,bd)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){const r=t.uid||"";return new Ld(e,r)}getOverlay(e,t){return Ql(e).get(xw(this.userId,t)).next((r=>r?zp(this.serializer,r):null))}getOverlays(e,t){const r=xr();return B.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){const s=[];return r.forEach(((a,u)=>{const h=new lg(t,u);s.push(this.wt(e,h))})),B.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach((u=>s.add(Qt(u.getCollectionPath()))));const a=[];return s.forEach((u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(Ql(e).Y(hm,h))})),B.waitFor(a)}getOverlaysForCollection(e,t,r){const s=xr(),a=Qt(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ql(e).j(hm,u).next((h=>{for(const f of h){const m=zp(this.serializer,f);s.set(m.getKey(),m)}return s}))}getOverlaysForCollectionGroup(e,t,r,s){const a=xr();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ql(e).X({index:$E,range:h},((f,m,v)=>{const w=zp(this.serializer,m);a.size()<s||w.largestBatchId===u?(a.set(w.getKey(),w),u=w.largestBatchId):v.done()})).next((()=>a))}wt(e,t){return Ql(e).put((function(s,a,u){const[h,f,m]=xw(a,u.mutation.key);return{userId:a,collectionPath:f,documentId:m,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:ed(s.gt,u.mutation)}})(this.serializer,this.userId,t))}}function Ql(n){return St(n,Ad)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{St(e){return St(e,Zm)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?vt.fromUint8Array(r):vt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(tt(e.integerValue));else if("doubleValue"in e){const r=tt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Eu(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=ai(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(li(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?tI(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Cd(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):pe(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const r=e.fields||{};this.Ct(t,55);for(const s of Object.keys(r))this.xt(s,t),this.Dt(r[s],t)}Lt(e,t){var r,s;const a=e.fields||{};this.Ct(t,53);const u=Pa,h=((s=(r=a[u].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.Ct(t,15),t.Ft(tt(h)),this.xt(u,t),this.Dt(a[u],t)}qt(e,t){const r=e.values||[];this.Ct(t,50);for(const s of r)this.Dt(s,t)}Bt(e,t){this.Ct(t,37),le.fromName(e).path.forEach((r=>{this.Ct(t,60),this.$t(r,t)}))}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}qs.Ut=new qs;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=255;function HR(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function Aw(n){const e=64-(function(r){let s=0;for(let a=0;a<8;++a){const u=HR(255&r[a]);if(s+=u,u!==8)break}return s})(n);return Math.ceil(e/8)}class WR{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Wt(r.value),r=t.next();this.Gt()}zt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.jt(r.value),r=t.next();this.Jt()}Ht(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{const s=t.codePointAt(0);this.Wt(240|s>>>18),this.Wt(128|63&s>>>12),this.Wt(128|63&s>>>6),this.Wt(128|63&s)}}this.Gt()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{const s=t.codePointAt(0);this.jt(240|s>>>18),this.jt(128|63&s>>>12),this.jt(128|63&s>>>6),this.jt(128|63&s)}}this.Jt()}Zt(e){const t=this.Xt(e),r=Aw(t);this.en(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}tn(e){const t=this.Xt(e),r=Aw(t);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}nn(){this.rn(fa),this.rn(255)}sn(){this._n(fa),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){const t=(function(a){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,a,!1),new Uint8Array(u.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Wt(e){const t=255&e;t===0?(this.rn(0),this.rn(255)):t===fa?(this.rn(fa),this.rn(0)):this.rn(t)}jt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===fa?(this._n(fa),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class KR{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}}class GR{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}}class Xl{constructor(){this.un=new WR,this.cn=new KR(this.un),this.ln=new GR(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,t,r,s){this.Pn=e,this.Tn=t,this.In=r,this.dn=s}En(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new Hs(this.Pn,this.Tn,this.In,r)}An(e,t,r){return{indexId:this.Pn,uid:e,arrayValue:Oh(this.In),directionalValue:Oh(this.dn),orderedDocumentKey:Oh(t),documentKey:r.path.toArray()}}Rn(e,t,r){const s=this.An(e,t,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function ji(n,e){let t=n.Pn-e.Pn;return t!==0?t:(t=Rw(n.In,e.In),t!==0?t:(t=Rw(n.dn,e.dn),t!==0?t:le.comparator(n.Tn,e.Tn)))}function Rw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Oh(n){return pE()?(function(t){let r="";for(let s=0;s<t.length;s++)r+=String.fromCharCode(t[s]);return r})(n):n}function Cw(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(n)}class Pw{constructor(e){this.Vn=new He(((t,r)=>ot.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(ye(e.collectionGroup===this.collectionId,49279),this.gn)return!1;const t=lm(e);if(t!==void 0&&!this.yn(t))return!1;const r=Us(e);let s=new Set,a=0,u=0;for(;a<r.length&&this.yn(r[a]);++a)s=s.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.Vn.size>0){const h=this.Vn.getIterator().getNext();if(!s.has(h.field.canonicalString())){const f=r[a];if(!this.wn(h,f)||!this.Sn(this.mn[u++],f))return!1}++a}for(;a<r.length;++a){const h=r[a];if(u>=this.mn.length||!this.Sn(this.mn[u++],h))return!1}return!0}bn(){if(this.gn)return null;let e=new He(ot.comparator);const t=[];for(const r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new bh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new bh(r.field,0))}for(const r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new bh(r.field,r.dir==="asc"?0:1)));return new Hh(Hh.UNKNOWN_ID,this.collectionId,t,wu.empty())}yn(e){for(const t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(n){var e,t;if(ye(n instanceof Ne||n instanceof qe,20012),n instanceof Ne){if(n instanceof cI){const s=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((a=>Ne.create(n.field,"==",a))))||[];return qe.create(s,"or")}return n}const r=n.filters.map((s=>$I(s)));return qe.create(r,n.op)}function QR(n){if(n.getFilters().length===0)return[];const e=Sm($I(n));return ye(qI(e),7391),Tm(e)||xm(e)?[e]:e.getFilters()}function Tm(n){return n instanceof Ne}function xm(n){return n instanceof qe&&ig(n)}function qI(n){return Tm(n)||xm(n)||(function(t){if(t instanceof qe&&mm(t)){for(const r of t.getFilters())if(!Tm(r)&&!xm(r))return!1;return!0}return!1})(n)}function Sm(n){if(ye(n instanceof Ne||n instanceof qe,34018),n instanceof Ne)return n;if(n.filters.length===1)return Sm(n.filters[0]);const e=n.filters.map((r=>Sm(r)));let t=qe.create(e,n.op);return t=nd(t),qI(t)?t:(ye(t instanceof qe,64498),ye(Va(t),40251),ye(t.filters.length>1,57927),t.filters.reduce(((r,s)=>hg(r,s))))}function hg(n,e){let t;return ye(n instanceof Ne||n instanceof qe,38388),ye(e instanceof Ne||e instanceof qe,25473),t=n instanceof Ne?e instanceof Ne?(function(s,a){return qe.create([s,a],"and")})(n,e):Nw(n,e):e instanceof Ne?Nw(e,n):(function(s,a){if(ye(s.filters.length>0&&a.filters.length>0,48005),Va(s)&&Va(a))return aI(s,a.getFilters());const u=mm(s)?s:a,h=mm(s)?a:s,f=u.filters.map((m=>hg(m,h)));return qe.create(f,"or")})(n,e),nd(t)}function Nw(n,e){if(Va(e))return aI(e,n.getFilters());{const t=e.filters.map((r=>hg(n,r)));return qe.create(t,"or")}}function nd(n){if(ye(n instanceof Ne||n instanceof qe,11850),n instanceof Ne)return n;const e=n.getFilters();if(e.length===1)return nd(e[0]);if(sI(n))return n;const t=e.map((s=>nd(s))),r=[];return t.forEach((s=>{s instanceof Ne?r.push(s):s instanceof qe&&(s.op===n.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:qe.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(){this.Dn=new dg}addToCollectionParentIndex(e,t){return this.Dn.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(Sn.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(Sn.min())}updateCollectionGroup(e,t,r){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}}class dg{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new He(Be.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new He(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="IndexedDbIndexManager",_h=new Uint8Array(0);class YR{constructor(e,t){this.databaseId=t,this.vn=new dg,this.Cn=new ci((r=>io(r)),((r,s)=>Fu(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const a={collectionId:r,parent:Qt(s)};return Vw(e).put(a)}return B.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[PE(t),""],!1,!0);return Vw(e).j(s).next((a=>{for(const u of a){if(u.collectionId!==t)break;r.push(Tr(u.parent))}return r}))}addFieldIndex(e,t){const r=Yl(e),s=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete s.indexId;const a=r.add(s);if(t.indexState){const u=ma(e);return a.next((h=>{u.put(Sw(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const r=Yl(e),s=ma(e),a=pa(e);return r.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Yl(e),r=pa(e),s=ma(e);return t.Y().next((()=>r.Y())).next((()=>s.Y()))}createTargetIndexes(e,t){return B.forEach(this.Fn(t),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const a=new Pw(r).bn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const r=pa(e);let s=!0;const a=new Map;return B.forEach(this.Fn(t),(u=>this.Mn(e,u).next((h=>{s&&(s=!!h),a.set(u,h)})))).next((()=>{if(s){let u=Ae();const h=[];return B.forEach(a,((f,m)=>{ne(Dw,`Using index ${(function(W){return`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map((oe=>`${oe.fieldPath}:${oe.kind}`)).join(",")}`})(f)} to execute ${io(t)}`);const v=(function(W,oe){const ce=lm(oe);if(ce===void 0)return null;for(const X of Yh(W,ce.fieldPath))switch(X.op){case"array-contains-any":return X.value.arrayValue.values||[];case"array-contains":return[X.value]}return null})(m,f),w=(function(W,oe){const ce=new Map;for(const X of Us(oe))for(const C of Yh(W,X.fieldPath))switch(C.op){case"==":case"in":ce.set(X.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return ce.set(X.fieldPath.canonicalString(),C.value),Array.from(ce.values())}return null})(m,f),T=(function(W,oe){const ce=[];let X=!0;for(const C of Us(oe)){const k=C.kind===0?hw(W,C.fieldPath,W.startAt):dw(W,C.fieldPath,W.startAt);ce.push(k.value),X&&(X=k.inclusive)}return new Da(ce,X)})(m,f),S=(function(W,oe){const ce=[];let X=!0;for(const C of Us(oe)){const k=C.kind===0?dw(W,C.fieldPath,W.endAt):hw(W,C.fieldPath,W.endAt);ce.push(k.value),X&&(X=k.inclusive)}return new Da(ce,X)})(m,f),V=this.xn(f,m,T),M=this.xn(f,m,S),L=this.On(f,m,w),Q=this.Nn(f.indexId,v,V,T.inclusive,M,S.inclusive,L);return B.forEach(Q,(J=>r.H(J,t.limit).next((W=>{W.forEach((oe=>{const ce=le.fromSegments(oe.documentKey);u.has(ce)||(u=u.add(ce),h.push(ce))}))}))))})).next((()=>h))}return B.resolve(null)}))}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=QR(qe.create(e.filters,"and")).map((r=>ym(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}Nn(e,t,r,s,a,u,h){const f=(t!=null?t.length:1)*Math.max(r.length,a.length),m=f/(t!=null?t.length:1),v=[];for(let w=0;w<f;++w){const T=t?this.Bn(t[w/m]):_h,S=this.Ln(e,T,r[w%m],s),V=this.kn(e,T,a[w%m],u),M=h.map((L=>this.Ln(e,T,L,!0)));v.push(...this.createRange(S,V,M))}return v}Ln(e,t,r,s){const a=new Hs(e,le.empty(),t,r);return s?a:a.En()}kn(e,t,r,s){const a=new Hs(e,le.empty(),t,r);return s?a.En():a}Mn(e,t){const r=new Pw(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((a=>{let u=null;for(const h of a)r.pn(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u}))}getIndexType(e,t){let r=2;const s=this.Fn(t);return B.forEach(s,(a=>this.Mn(e,a).next((u=>{u?r!==0&&u.fields.length<(function(f){let m=new He(ot.comparator),v=!1;for(const w of f.filters)for(const T of w.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?v=!0:m=m.add(T.field));for(const w of f.orderBy)w.field.isKeyField()||(m=m.add(w.field));return m.size+(v?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(u){return u.limit!==null})(t)&&s.length>1&&r===2?1:r))}qn(e,t){const r=new Xl;for(const s of Us(e)){const a=t.data.field(s.fieldPath);if(a==null)return null;const u=r.hn(s.kind);qs.Ut.bt(a,u)}return r.an()}Bn(e){const t=new Xl;return qs.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){const r=new Xl;return qs.Ut.bt(bu(this.databaseId,t),r.hn((function(a){const u=Us(a);return u.length===0?0:u[u.length-1].kind})(e))),r.an()}On(e,t,r){if(r===null)return[];let s=[];s.push(new Xl);let a=0;for(const u of Us(e)){const h=r[a++];for(const f of s)if(this.$n(t,u.fieldPath)&&Au(h))s=this.Un(s,u,h);else{const m=f.hn(u.kind);qs.Ut.bt(h,m)}}return this.Kn(s)}xn(e,t,r){return this.On(e,t,r.position)}Kn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].an();return t}Un(e,t,r){const s=[...e],a=[];for(const u of r.arrayValue.values||[])for(const h of s){const f=new Xl;f.seed(h.an()),qs.Ut.bt(u,f.hn(t.kind)),a.push(f)}return a}$n(e,t){return!!e.filters.find((r=>r instanceof Ne&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Yl(e),s=ma(e);return(t?r.j(cm,IDBKeyRange.bound(t,t)):r.j()).next((a=>{const u=[];return B.forEach(a,(h=>s.get([h.indexId,this.uid]).next((f=>{u.push((function(v,w){const T=w?new wu(w.sequenceNumber,new Sn(oo(w.readTime),new le(Tr(w.documentKey)),w.largestBatchId)):wu.empty(),S=v.fields.map((([V,M])=>new bh(ot.fromServerFormat(V),M)));return new Hh(v.indexId,v.collectionGroup,S,T)})(h,f))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,s)=>{const a=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return a!==0?a:Te(r.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const s=Yl(e),a=ma(e);return this.Wn(e).next((u=>s.j(cm,IDBKeyRange.bound(t,t)).next((h=>B.forEach(h,(f=>a.put(Sw(f.indexId,this.uid,u,r))))))))}updateIndexEntries(e,t){const r=new Map;return B.forEach(t,((s,a)=>{const u=r.get(s.collectionGroup);return(u?B.resolve(u):this.getFieldIndexes(e,s.collectionGroup)).next((h=>(r.set(s.collectionGroup,h),B.forEach(h,(f=>this.Gn(e,s,f).next((m=>{const v=this.zn(a,f);return m.isEqual(v)?B.resolve():this.jn(e,a,f,m,v)})))))))}))}Jn(e,t,r,s){return pa(e).put(s.An(this.uid,this.Qn(r,t.key),t.key))}Hn(e,t,r,s){return pa(e).delete(s.Rn(this.uid,this.Qn(r,t.key),t.key))}Gn(e,t,r){const s=pa(e);let a=new He(ji);return s.X({index:zE,range:IDBKeyRange.only([r.indexId,this.uid,Oh(this.Qn(r,t))])},((u,h)=>{a=a.add(new Hs(r.indexId,t,Cw(h.arrayValue),Cw(h.directionalValue)))})).next((()=>a))}zn(e,t){let r=new He(ji);const s=this.qn(t,e);if(s==null)return r;const a=lm(t);if(a!=null){const u=e.data.field(a.fieldPath);if(Au(u))for(const h of u.arrayValue.values||[])r=r.add(new Hs(t.indexId,e.key,this.Bn(h),s))}else r=r.add(new Hs(t.indexId,e.key,_h,s));return r}jn(e,t,r,s,a){ne(Dw,"Updating index entries for document '%s'",t.key);const u=[];return(function(f,m,v,w,T){const S=f.getIterator(),V=m.getIterator();let M=da(S),L=da(V);for(;M||L;){let Q=!1,J=!1;if(M&&L){const W=v(M,L);W<0?J=!0:W>0&&(Q=!0)}else M!=null?J=!0:Q=!0;Q?(w(L),L=da(V)):J?(T(M),M=da(S)):(M=da(S),L=da(V))}})(s,a,ji,(h=>{u.push(this.Jn(e,t,r,h))}),(h=>{u.push(this.Hn(e,t,r,h))})),B.waitFor(u)}Wn(e){let t=1;return ma(e).X({index:BE,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,a)=>{a.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((u,h)=>ji(u,h))).filter(((u,h,f)=>!h||ji(u,f[h-1])!==0));const s=[];s.push(e);for(const u of r){const h=ji(u,e),f=ji(u,t);if(h===0)s[0]=e.En();else if(h>0&&f<0)s.push(u),s.push(u.En());else if(f>0)break}s.push(t);const a=[];for(let u=0;u<s.length;u+=2){if(this.Yn(s[u],s[u+1]))return[];const h=s[u].Rn(this.uid,_h,le.empty()),f=s[u+1].Rn(this.uid,_h,le.empty());a.push(IDBKeyRange.bound(h,f))}return a}Yn(e,t){return ji(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ow)}getMinOffset(e,t){return B.mapArray(this.Fn(t),(r=>this.Mn(e,r).next((s=>s||pe(44426))))).next(Ow)}}function Vw(n){return St(n,xu)}function pa(n){return St(n,cu)}function Yl(n){return St(n,Jm)}function ma(n){return St(n,uu)}function Ow(n){ye(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Qm(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Sn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HI=41943040;class Wt{static withCacheSize(e){return new Wt(e,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(n,e,t){const r=n.store(rr),s=n.store(ba),a=[],u=IDBKeyRange.only(t.batchId);let h=0;const f=r.X({range:u},((v,w,T)=>(h++,T.delete())));a.push(f.next((()=>{ye(h===1,47070,{batchId:t.batchId})})));const m=[];for(const v of t.mutations){const w=jE(e,v.key.path,t.batchId);a.push(s.delete(w)),m.push(v.key)}return B.waitFor(a).next((()=>m))}function rd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw pe(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wt.DEFAULT_COLLECTION_PERCENTILE=10,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wt.DEFAULT=new Wt(HI,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wt.DISABLED=new Wt(-1,0,0);class Md{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Zn={}}static yt(e,t,r,s){ye(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new Md(a,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fi(e).X({index:Ks,range:r},((s,a,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,r,s){const a=Ea(e),u=Fi(e);return u.add({}).next((h=>{ye(typeof h=="number",49019);const f=new og(h,t,r,s),m=(function(S,V,M){const L=M.baseMutations.map((J=>ed(S.gt,J))),Q=M.mutations.map((J=>ed(S.gt,J)));return{userId:V,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:L,mutations:Q}})(this.serializer,this.userId,f),v=[];let w=new He(((T,S)=>Te(T.canonicalString(),S.canonicalString())));for(const T of s){const S=jE(this.userId,T.key.path,h);w=w.add(T.key.path.popLast()),v.push(u.put(m)),v.push(a.put(S,bA))}return w.forEach((T=>{v.push(this.indexManager.addToCollectionParentIndex(e,T))})),e.addOnCommittedListener((()=>{this.Zn[h]=f.keys()})),B.waitFor(v).next((()=>f))}))}lookupMutationBatch(e,t){return Fi(e).get(t).next((r=>r?(ye(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),$s(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?B.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const s=r.keys();return this.Zn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Fi(e).X({index:Ks,range:s},((u,h,f)=>{h.userId===this.userId&&(ye(h.batchId>=r,47524,{er:r}),a=$s(this.serializer,h)),f.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Xs;return Fi(e).X({index:Ks,range:t,reverse:!0},((s,a,u)=>{r=a.batchId,u.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Xs],[this.userId,Number.POSITIVE_INFINITY]);return Fi(e).j(Ks,t).next((r=>r.map((s=>$s(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ah(this.userId,t.path),s=IDBKeyRange.lowerBound(r),a=[];return Ea(e).X({range:s},((u,h,f)=>{const[m,v,w]=u,T=Tr(v);if(m===this.userId&&t.path.isEqual(T))return Fi(e).get(w).next((S=>{if(!S)throw pe(61480,{tr:u,batchId:w});ye(S.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:S.userId,batchId:w}),a.push($s(this.serializer,S))}));f.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new He(Te);const s=[];return t.forEach((a=>{const u=Ah(this.userId,a.path),h=IDBKeyRange.lowerBound(u),f=Ea(e).X({range:h},((m,v,w)=>{const[T,S,V]=m,M=Tr(S);T===this.userId&&a.path.isEqual(M)?r=r.add(V):w.done()}));s.push(f)})),B.waitFor(s).next((()=>this.nr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,a=Ah(this.userId,r),u=IDBKeyRange.lowerBound(a);let h=new He(Te);return Ea(e).X({range:u},((f,m,v)=>{const[w,T,S]=f,V=Tr(T);w===this.userId&&r.isPrefixOf(V)?V.length===s&&(h=h.add(S)):v.done()})).next((()=>this.nr(e,h)))}nr(e,t){const r=[],s=[];return t.forEach((a=>{s.push(Fi(e).get(a).next((u=>{if(u===null)throw pe(35274,{batchId:a});ye(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:a}),r.push($s(this.serializer,u))})))})),B.waitFor(s).next((()=>r))}removeMutationBatch(e,t){return WI(e.ce,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.rr(t.batchId)})),B.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return B.resolve();const r=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),s=[];return Ea(e).X({range:r},((a,u,h)=>{if(a[0]===this.userId){const f=Tr(a[1]);s.push(f)}else h.done()})).next((()=>{ye(s.length===0,56720,{ir:s.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return KI(e,this.userId,t)}sr(e){return GI(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Xs,lastStreamToken:""}))}}function KI(n,e,t){const r=Ah(e,t.path),s=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return Ea(n).X({range:a,Z:!0},((h,f,m)=>{const[v,w,T]=h;v===e&&w===s&&(u=!0),m.done()})).next((()=>u))}function Fi(n){return St(n,rr)}function Ea(n){return St(n,ba)}function GI(n){return St(n,Iu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ao(0)}static ur(){return new ao(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next((t=>{const r=new ao(t.highestTargetId);return t.highestTargetId=r.next(),this.lr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.cr(e).next((t=>_e.fromTimestamp(new $e(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.cr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.cr(e).next((s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.lr(e,s))))}addTargetData(e,t){return this.hr(e,t).next((()=>this.cr(e).next((r=>(r.targetCount+=1,this.Pr(t,r),this.lr(e,r))))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>ga(e).delete(t.targetId))).next((()=>this.cr(e))).next((r=>(ye(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r))))}removeTargets(e,t,r){let s=0;const a=[];return ga(e).X(((u,h)=>{const f=iu(h);f.sequenceNumber<=t&&r.get(f.targetId)===null&&(s++,a.push(this.removeTargetData(e,f)))})).next((()=>B.waitFor(a))).next((()=>s))}forEachTarget(e,t){return ga(e).X(((r,s)=>{const a=iu(s);t(a)}))}cr(e){return Mw(e).get(Gh).next((t=>(ye(t!==null,2888),t)))}lr(e,t){return Mw(e).put(Gh,t)}hr(e,t){return ga(e).put(BI(this.serializer,t))}Pr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=io(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ga(e).X({range:s,index:UE},((u,h,f)=>{const m=iu(h);Fu(t,m.target)&&(a=m,f.done())})).next((()=>a))}addMatchingKeys(e,t,r){const s=[],a=zi(e);return t.forEach((u=>{const h=Qt(u.path);s.push(a.put({targetId:r,path:h})),s.push(this.referenceDelegate.addReference(e,r,u))})),B.waitFor(s)}removeMatchingKeys(e,t,r){const s=zi(e);return B.forEach(t,(a=>{const u=Qt(a.path);return B.waitFor([s.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,t){const r=zi(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=zi(e);let a=Ae();return s.X({range:r,Z:!0},((u,h,f)=>{const m=Tr(u[1]),v=new le(m);a=a.add(v)})).next((()=>a))}containsKey(e,t){const r=Qt(t.path),s=IDBKeyRange.bound([r],[PE(r)],!1,!0);let a=0;return zi(e).X({index:Ym,Z:!0,range:s},(([u,h],f,m)=>{u!==0&&(a++,m.done())})).next((()=>a>0))}Et(e,t){return ga(e).get(t).next((r=>r?iu(r):null))}}function ga(n){return St(n,Aa)}function Mw(n){return St(n,Ys)}function zi(n){return St(n,Ra)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="LruGarbageCollector",ZR=1048576;function Fw([n,e],[t,r]){const s=Te(n,t);return s===0?Te(e,r):s}class eC{constructor(e){this.Tr=e,this.buffer=new He(Fw),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Fw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class QI{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ne(jw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){os(t)?ne(jw,"Ignoring IndexedDB error during garbage collection: ",t):await yo(t)}await this.Rr(3e5)}))}}class tC{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return B.resolve(Mn.ue);const r=new eC(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(Lw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lw):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,a,u,h,f,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,u=Date.now(),this.nthSequenceNumber(e,s)))).next((w=>(r=w,h=Date.now(),this.removeTargets(e,r,t)))).next((w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(m=Date.now(),ya()<=Pe.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${s} in `+(h-u)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${w} documents in `+(m-f)+`ms
Total Duration: ${m-v}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:w}))))}}function XI(n,e){return new tC(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t){this.db=e,this.garbageCollector=XI(this,t)}mr(e){const t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,((r,s)=>t(s)))}addReference(e,t,r){return wh(e,r)}removeReference(e,t,r){return wh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return wh(e,t)}Sr(e,t){return(function(s,a){let u=!1;return GI(s).ee((h=>KI(s,h,a).next((f=>(f&&(u=!0),B.resolve(!f)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let a=0;return this.wr(e,((u,h)=>{if(h<=t){const f=this.Sr(e,u).next((m=>{if(!m)return a++,r.getEntry(e,u).next((()=>(r.removeEntry(u,_e.min()),zi(e).delete((function(w){return[0,Qt(w.path)]})(u)))))}));s.push(f)}})).next((()=>B.waitFor(s))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return wh(e,t)}wr(e,t){const r=zi(e);let s,a=Mn.ue;return r.X({index:Ym},(([u,h],{path:f,sequenceNumber:m})=>{u===0?(a!==Mn.ue&&t(new le(Tr(s)),a),a=m,s=f):a=Mn.ue})).next((()=>{a!==Mn.ue&&t(new le(Tr(s)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wh(n,e){return zi(n).put((function(r,s){return{targetId:0,path:Qt(r.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(){this.changes=new ci((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,lt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?B.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ms(e).put(r)}removeEntry(e,t,r){return Ms(e).delete((function(a,u){const h=a.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],td(u),h[h.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=lt.newInvalidDocument(t);return Ms(e).X({index:Rh,range:IDBKeyRange.only(Jl(t))},((s,a)=>{r=this.Dr(t,a)})).next((()=>r))}vr(e,t){let r={size:0,document:lt.newInvalidDocument(t)};return Ms(e).X({index:Rh,range:IDBKeyRange.only(Jl(t))},((s,a)=>{r={document:this.Dr(t,a),size:rd(a)}})).next((()=>r))}getEntries(e,t){let r=Tn();return this.Cr(e,t,((s,a)=>{const u=this.Dr(s,a);r=r.insert(s,u)})).next((()=>r))}Fr(e,t){let r=Tn(),s=new rt(le.comparator);return this.Cr(e,t,((a,u)=>{const h=this.Dr(a,u);r=r.insert(a,h),s=s.insert(a,rd(u))})).next((()=>({documents:r,Mr:s})))}Cr(e,t,r){if(t.isEmpty())return B.resolve();let s=new He(zw);t.forEach((f=>s=s.add(f)));const a=IDBKeyRange.bound(Jl(s.first()),Jl(s.last())),u=s.getIterator();let h=u.getNext();return Ms(e).X({index:Rh,range:a},((f,m,v)=>{const w=le.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;h&&zw(h,w)<0;)r(h,null),h=u.getNext();h&&h.isEqual(w)&&(r(h,m),h=u.hasNext()?u.getNext():null),h?v.G(Jl(h)):v.done()})).next((()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,r,s,a){const u=t.path,h=[u.popLast().toArray(),u.lastSegment(),td(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ms(e).j(IDBKeyRange.bound(h,f,!0)).next((m=>{a==null||a.incrementDocumentReadCount(m.length);let v=Tn();for(const w of m){const T=this.Dr(le.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);T.isFoundDocument()&&(Bu(t,T)||s.has(T.key))&&(v=v.insert(T.key,T))}return v}))}getAllFromCollectionGroup(e,t,r,s){let a=Tn();const u=Bw(t,r),h=Bw(t,Sn.max());return Ms(e).X({index:FE,range:IDBKeyRange.bound(u,h,!0)},((f,m,v)=>{const w=this.Dr(le.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);a=a.insert(w.key,w),a.size===s&&v.done()})).next((()=>a))}newChangeBuffer(e){return new iC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Uw(e).get(um).next((t=>(ye(!!t,20021),t)))}br(e,t){return Uw(e).put(um,t)}Dr(e,t){if(t){const r=zR(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(_e.min())))return r}return lt.newInvalidDocument(e)}}function JI(n){return new rC(n)}class iC extends YI{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new ci((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const t=[];let r=0,s=new He(((a,u)=>Te(a.canonicalString(),u.canonicalString())));return this.changes.forEach(((a,u)=>{const h=this.Nr.get(a);if(t.push(this.Or.removeEntry(e,a,h.readTime)),u.isValidDocument()){const f=Tw(this.Or.serializer,u);s=s.add(a.path.popLast());const m=rd(f);r+=m-h.size,t.push(this.Or.addEntry(e,a,f))}else if(r-=h.size,this.trackRemovals){const f=Tw(this.Or.serializer,u.convertToNoDocument(_e.min()));t.push(this.Or.addEntry(e,a,f))}})),s.forEach((a=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Or.updateMetadata(e,r)),B.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next((r=>(this.Nr.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Or.Fr(e,t).next((({documents:r,Mr:s})=>(s.forEach(((a,u)=>{this.Nr.set(a,{size:u,readTime:r.get(a).readTime})})),r)))}}function Uw(n){return St(n,Tu)}function Ms(n){return St(n,Kh)}function Jl(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Bw(n,e){const t=e.documentKey.path.toArray();return[n,td(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function zw(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(s=Te(t[a],r[a]),s)return s;return s=Te(t.length,r.length),s||(s=Te(t[t.length-2],r[r.length-2]),s||Te(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&pu(r.mutation,s,dn.empty(),$e.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ae()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ae()){const s=xr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let u=nu();return a.forEach(((h,f)=>{u=u.insert(h,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=xr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ae())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((u,h)=>{t.set(u,h)}))}))}computeViews(e,t,r,s){let a=Tn();const u=fu(),h=(function(){return fu()})();return t.forEach(((f,m)=>{const v=r.get(m.key);s.has(m.key)&&(v===void 0||v.mutation instanceof hi)?a=a.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),pu(v.mutation,m,v.mutation.getFieldMask(),$e.now())):u.set(m.key,dn.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,v)=>u.set(m,v))),t.forEach(((m,v)=>{var w;return h.set(m,new sC(v,(w=u.get(m))!==null&&w!==void 0?w:null))})),h)))}recalculateAndSaveOverlays(e,t){const r=fu();let s=new rt(((u,h)=>u-h)),a=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const h of u)h.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let v=r.get(f)||dn.empty();v=h.applyToLocalView(m,v),r.set(f,v);const w=(s.get(h.batchId)||Ae()).add(f);s=s.insert(h.batchId,w)}))})).next((()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,v=f.value,w=gI();v.forEach((T=>{if(!a.has(T)){const S=TI(t.get(T),r.get(T));S!==null&&w.set(T,S),a=a.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,w))}return B.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(u){return le.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):B.resolve(xr());let h=_u,f=a;return u.next((m=>B.forEach(m,((v,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),a.get(v)?B.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{f=f.insert(v,T)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,Ae()))).next((v=>({batchId:h,changes:mI(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new le(t)).next((r=>{let s=nu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let u=nu();return this.indexManager.getCollectionParents(e,a).next((h=>B.forEach(h,(f=>{const m=(function(w,T){return new Ka(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((v=>{v.forEach(((w,T)=>{u=u.insert(w,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((u=>{a.forEach(((f,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,lt.newInvalidDocument(v)))}));let h=nu();return u.forEach(((f,m)=>{const v=a.get(f);v!==void 0&&pu(v.mutation,m,dn.empty(),$e.now()),Bu(t,m)&&(h=h.insert(f,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return B.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:nn(s.createTime)}})(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(s){return{name:s.name,query:zI(s.bundledQuery),readTime:nn(s.readTime)}})(t)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.overlays=new rt(le.comparator),this.kr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){const r=xr();return B.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.wt(e,t,a)})),B.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(r)),B.resolve()}getOverlaysForCollection(e,t,r){const s=xr(),a=t.length+1,u=new le(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return B.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new rt(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let v=a.get(m.largestBatchId);v===null&&(v=xr(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=xr(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,v)=>h.set(m,v))),!(h.size()>=s)););return B.resolve(h)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new lg(t,r));let a=this.kr.get(t);a===void 0&&(a=Ae(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(){this.qr=new He(Pt.Qr),this.$r=new He(Pt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Pt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Pt(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new le(new Be([])),r=new Pt(t,e),s=new Pt(t,e+1),a=[];return this.$r.forEachInRange([r,s],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new le(new Be([])),r=new Pt(t,e),s=new Pt(t,e+1);let a=Ae();return this.$r.forEachInRange([r,s],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Pt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Pt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return le.comparator(e.key,t.key)||Te(e.Hr,t.Hr)}static Ur(e,t){return Te(e.Hr,t.Hr)||le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new He(Pt.Qr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new og(a,t,r,s);this.mutationQueue.push(u);for(const h of s)this.Yr=this.Yr.add(new Pt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return B.resolve(u)}lookupMutationBatch(e,t){return B.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return B.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Xs:this.er-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pt(t,0),s=new Pt(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,s],(u=>{const h=this.Zr(u.Hr);a.push(h)})),B.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new He(Te);return t.forEach((s=>{const a=new Pt(s,0),u=new Pt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(h=>{r=r.add(h.Hr)}))})),B.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;le.isDocumentKey(a)||(a=a.child(""));const u=new Pt(new le(a),0);let h=new He(Te);return this.Yr.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(h=h.add(f.Hr)),!0)}),u),B.resolve(this.ei(h))}ei(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){ye(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return B.forEach(t.mutations,(s=>{const a=new Pt(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new Pt(t,0),s=this.Yr.firstAfterOrEqual(r);return B.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.ni=e,this.docs=(function(){return new rt(le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,u=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return B.resolve(r?r.document.mutableCopy():lt.newInvalidDocument(t))}getEntries(e,t){let r=Tn();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():lt.newInvalidDocument(s))})),B.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Tn();const u=t.path,h=new le(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||Qm(VE(v),r)<=0||(s.has(v.key)||Bu(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return B.resolve(a)}getAllFromCollectionGroup(e,t,r,s){pe(9500)}ri(e,t){return B.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new hC(this)}getSize(e){return B.resolve(this.size)}}class hC extends YI{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)})),B.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.persistence=e,this.ii=new ci((t=>io(t)),Fu),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.si=0,this.oi=new fg,this.targetCount=0,this._i=ao.ar()}forEachTarget(e,t){return this.ii.forEach(((r,s)=>t(s))),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),B.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new ao(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.hr(t),B.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ii.forEach(((u,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),B.waitFor(a).next((()=>s))}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return B.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),B.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((u=>{a.push(s.markPotentiallyOrphaned(e,u))})),B.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),B.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return B.resolve(r)}containsKey(e,t){return B.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,t){this.ai={},this.overlays={},this.ui=new Mn(0),this.ci=!1,this.ci=!0,this.li=new lC,this.referenceDelegate=e(this),this.hi=new dC(this),this.indexManager=new XR,this.remoteDocumentCache=(function(s){return new cC(s)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new UI(t),this.Ti=new oC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new uC(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ne("MemoryPersistence","Starting transaction:",e);const s=new fC(this.ui.next());return this.referenceDelegate.Ii(),r(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return B.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class fC extends LE{constructor(e){super(),this.currentSequenceNumber=e}}class jd{constructor(e){this.persistence=e,this.Ai=new fg,this.Ri=null}static Vi(e){return new jd(e)}get mi(){if(this.Ri)return this.Ri;throw pe(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),B.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),B.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((s=>this.mi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.mi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.mi,(r=>{const s=le.fromPath(r);return this.fi(e,s).next((a=>{a||t.removeEntry(s,_e.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return B.or([()=>B.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class id{constructor(e,t){this.persistence=e,this.gi=new ci((r=>Qt(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=XI(this,t)}static Vi(e,t){return new id(e,t)}Ii(){}di(e){return B.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return B.forEach(this.gi,((r,s)=>this.Sr(e,r,s).next((a=>a?B.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,(u=>this.Sr(e,u,t).next((h=>{h||(r++,a.removeEntry(u,_e.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),B.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),B.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ph(e.data.value)),t}Sr(e,t,r){return B.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return B.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.serializer=e}q(e,t,r,s){const a=new xd("createOrUpgrade",t);r<1&&s>=1&&((function(f){f.createObjectStore(ju)})(e),(function(f){f.createObjectStore(Iu,{keyPath:kA}),f.createObjectStore(rr,{keyPath:Z_,autoIncrement:!0}).createIndex(Ks,ew,{unique:!0}),f.createObjectStore(ba)})(e),$w(e),(function(f){f.createObjectStore(Bs)})(e));let u=B.resolve();return r<3&&s>=3&&(r!==0&&((function(f){f.deleteObjectStore(Ra),f.deleteObjectStore(Aa),f.deleteObjectStore(Ys)})(e),$w(e)),u=u.next((()=>(function(f){const m=f.store(Ys),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_e.min().toTimestamp(),targetCount:0};return m.put(Gh,v)})(a)))),r<4&&s>=4&&(r!==0&&(u=u.next((()=>(function(f,m){return m.store(rr).j().next((w=>{f.deleteObjectStore(rr),f.createObjectStore(rr,{keyPath:Z_,autoIncrement:!0}).createIndex(Ks,ew,{unique:!0});const T=m.store(rr),S=w.map((V=>T.put(V)));return B.waitFor(S)}))})(e,a)))),u=u.next((()=>{(function(f){f.createObjectStore(Ca,{keyPath:OA})})(e)}))),r<5&&s>=5&&(u=u.next((()=>this.pi(a)))),r<6&&s>=6&&(u=u.next((()=>((function(f){f.createObjectStore(Tu)})(e),this.yi(a))))),r<7&&s>=7&&(u=u.next((()=>this.wi(a)))),r<8&&s>=8&&(u=u.next((()=>this.Si(e,a)))),r<9&&s>=9&&(u=u.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(u=u.next((()=>this.bi(a)))),r<11&&s>=11&&(u=u.next((()=>{(function(f){f.createObjectStore(kd,{keyPath:LA})})(e),(function(f){f.createObjectStore(bd,{keyPath:MA})})(e)}))),r<12&&s>=12&&(u=u.next((()=>{(function(f){const m=f.createObjectStore(Ad,{keyPath:qA});m.createIndex(hm,HA,{unique:!1}),m.createIndex($E,WA,{unique:!1})})(e)}))),r<13&&s>=13&&(u=u.next((()=>(function(f){const m=f.createObjectStore(Kh,{keyPath:AA});m.createIndex(Rh,RA),m.createIndex(FE,CA)})(e))).next((()=>this.Di(e,a))).next((()=>e.deleteObjectStore(Bs)))),r<14&&s>=14&&(u=u.next((()=>this.Ci(e,a)))),r<15&&s>=15&&(u=u.next((()=>(function(f){f.createObjectStore(Jm,{keyPath:jA,autoIncrement:!0}).createIndex(cm,FA,{unique:!1}),f.createObjectStore(uu,{keyPath:UA}).createIndex(BE,BA,{unique:!1}),f.createObjectStore(cu,{keyPath:zA}).createIndex(zE,$A,{unique:!1})})(e)))),r<16&&s>=16&&(u=u.next((()=>{t.objectStore(uu).clear()})).next((()=>{t.objectStore(cu).clear()}))),r<17&&s>=17&&(u=u.next((()=>{(function(f){f.createObjectStore(Zm,{keyPath:KA})})(e)}))),r<18&&s>=18&&pE()&&(u=u.next((()=>{t.objectStore(uu).clear()})).next((()=>{t.objectStore(cu).clear()}))),u}yi(e){let t=0;return e.store(Bs).X(((r,s)=>{t+=rd(s)})).next((()=>{const r={byteSize:t};return e.store(Tu).put(um,r)}))}pi(e){const t=e.store(Iu),r=e.store(rr);return t.j().next((s=>B.forEach(s,(a=>{const u=IDBKeyRange.bound([a.userId,Xs],[a.userId,a.lastAcknowledgedBatchId]);return r.j(Ks,u).next((h=>B.forEach(h,(f=>{ye(f.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const m=$s(this.serializer,f);return WI(e,a.userId,m).next((()=>{}))}))))}))))}wi(e){const t=e.store(Ra),r=e.store(Bs);return e.store(Ys).get(Gh).next((s=>{const a=[];return r.X(((u,h)=>{const f=new Be(u),m=(function(w){return[0,Qt(w)]})(f);a.push(t.get(m).next((v=>v?B.resolve():(w=>t.put({targetId:0,path:Qt(w),sequenceNumber:s.highestListenSequenceNumber}))(f))))})).next((()=>B.waitFor(a)))}))}Si(e,t){e.createObjectStore(xu,{keyPath:VA});const r=t.store(xu),s=new dg,a=u=>{if(s.add(u)){const h=u.lastSegment(),f=u.popLast();return r.put({collectionId:h,parent:Qt(f)})}};return t.store(Bs).X({Z:!0},((u,h)=>{const f=new Be(u);return a(f.popLast())})).next((()=>t.store(ba).X({Z:!0},(([u,h,f],m)=>{const v=Tr(h);return a(v.popLast())}))))}bi(e){const t=e.store(Aa);return t.X(((r,s)=>{const a=iu(s),u=BI(this.serializer,a);return t.put(u)}))}Di(e,t){const r=t.store(Bs),s=[];return r.X(((a,u)=>{const h=t.store(Kh),f=(function(w){return w.document?new le(Be.fromString(w.document.name).popFirst(5)):w.noDocument?le.fromSegments(w.noDocument.path):w.unknownDocument?le.fromSegments(w.unknownDocument.path):pe(36783)})(u).path.toArray(),m={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};s.push(h.put(m))})).next((()=>B.waitFor(s)))}Ci(e,t){const r=t.store(rr),s=JI(this.serializer),a=new pg(jd.Vi,this.serializer.gt);return r.j().next((u=>{const h=new Map;return u.forEach((f=>{var m;let v=(m=h.get(f.userId))!==null&&m!==void 0?m:Ae();$s(this.serializer,f).keys().forEach((w=>v=v.add(w))),h.set(f.userId,v)})),B.forEach(h,((f,m)=>{const v=new Mt(m),w=Ld.yt(this.serializer,v),T=a.getIndexManager(v),S=Md.yt(v,this.serializer,T,a.referenceDelegate);return new ZI(s,S,w,T).recalculateAndSaveOverlaysForDocumentKeys(new dm(t,Mn.ue),f).next()}))}))}}function $w(n){n.createObjectStore(Ra,{keyPath:NA}).createIndex(Ym,DA,{unique:!0}),n.createObjectStore(Aa,{keyPath:"targetId"}).createIndex(UE,PA,{unique:!0}),n.createObjectStore(Ys)}const Ui="IndexedDbPersistence",$p=18e5,qp=5e3,Hp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",mC="main";class mg{constructor(e,t,r,s,a,u,h,f,m,v,w=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fi=a,this.window=u,this.document=h,this.Mi=m,this.xi=v,this.Oi=w,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=T=>Promise.resolve(),!mg.C())throw new ie(G.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nC(this,s),this.Qi=t+mC,this.serializer=new UI(f),this.$i=new Xi(this.Qi,this.Oi,new pC(this.serializer)),this.li=new qR,this.hi=new JR(this.referenceDelegate,this.serializer),this.remoteDocumentCache=JI(this.serializer),this.Ti=new $R,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,v===!1&&en(Ui,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie(G.FAILED_PRECONDITION,Hp);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.hi.getHighestSequenceNumber(e)))})).then((e=>{this.ui=new Mn(e,this.Mi)})).then((()=>{this.ci=!0})).catch((e=>(this.$i&&this.$i.close(),Promise.reject(e))))}ji(e){return this.qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget((async()=>{this.started&&await this.Ki()})))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Eh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ji(e).next((t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable((()=>this.qi(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Yi(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(os(e))return ne(Ui,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ne(Ui,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable((()=>this.qi(e))),this.isPrimary=e}))}Ji(e){return Zl(e).get(ha).next((t=>B.resolve(this.Xi(t))))}es(e){return Eh(e).delete(this.clientId)}async ts(){if(this.isPrimary&&!this.ns(this.ki,$p)){this.ki=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=St(t,Ca);return r.j().next((s=>{const a=this.rs(s,$p),u=s.filter((h=>a.indexOf(h)===-1));return B.forEach(u,(h=>r.delete(h.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.ss(t.clientId))}}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ki().then((()=>this.ts())).then((()=>this.zi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?B.resolve(!0):Zl(e).get(ha).next((t=>{if(t!==null&&this.ns(t.leaseTimestampMs,qp)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new ie(G.FAILED_PRECONDITION,Hp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Eh(e).j().next((r=>this.rs(r,qp).find((s=>{if(this.clientId!==s.clientId){const a=!this.networkEnabled&&s.networkEnabled,u=!this.inForeground&&s.inForeground,h=this.networkEnabled===s.networkEnabled;if(a||u&&h)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ne(Ui,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),await this.$i.runTransaction("shutdown","readwrite",[ju,Ca],(e=>{const t=new dm(e,Mn.ue);return this.Yi(t).next((()=>this.es(t)))})),this.$i.close(),this.hs()}rs(e,t){return e.filter((r=>this.ns(r.updateTimeMs,t)&&!this._s(r.clientId)))}Ps(){return this.runTransaction("getActiveClients","readonly",(e=>Eh(e).j().next((t=>this.rs(t,$p).map((r=>r.clientId))))))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return Md.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new YR(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return Ld.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,r){ne(Ui,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",a=(function(f){return f===18?XA:f===17?KE:f===16?QA:f===15?eg:f===14?WE:f===13?HE:f===12?GA:f===11?qE:void pe(60245)})(this.Oi);let u;return this.$i.runTransaction(e,s,a,(h=>(u=new dm(h,this.ui?this.ui.next():Mn.ue),t==="readwrite-primary"?this.Ji(u).next((f=>!!f||this.Hi(u))).next((f=>{if(!f)throw en(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable((()=>this.qi(!1))),new ie(G.FAILED_PRECONDITION,OE);return r(u)})).next((f=>this.Zi(u).next((()=>f)))):this.Ts(u).next((()=>r(u)))))).then((h=>(u.raiseOnCommittedEvent(),h)))}Ts(e){return Zl(e).get(ha).next((t=>{if(t!==null&&this.ns(t.leaseTimestampMs,qp)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ie(G.FAILED_PRECONDITION,Hp)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zl(e).put(ha,t)}static C(){return Xi.C()}Yi(e){const t=Zl(e);return t.get(ha).next((r=>this.Xi(r)?(ne(Ui,"Releasing primary lease."),t.delete(ha)):B.resolve()))}ns(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(en(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki())))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();const t=/(?:Version|Mobile)\/1[456]/;fE()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{const r=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return ne(Ui,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return en(Ui,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){en("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zl(n){return St(n,ju)}function Eh(n){return St(n,Ca)}function gC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=Ae(),s=Ae();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new gg(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return fE()?8:ME(xt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.ps(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,t,s,r).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new yC;return this.ws(e,t,u).next((h=>{if(a.result=h,this.Rs)return this.Ss(e,t,u,h.size)}))})).next((()=>a.result))}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(ya()<=Pe.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",va(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(ya()<=Pe.DEBUG&&ne("QueryEngine","Query:",va(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(ya()<=Pe.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",va(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(t))):B.resolve())}ps(e,t){if(fw(t))return B.resolve(null);let r=Fn(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Jh(t,null,"F"),r=Fn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const u=Ae(...a);return this.gs.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.bs(t,h);return this.Ds(t,m,u,f.readTime)?this.ps(e,Jh(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ys(e,t,r,s){return fw(t)||s.isEqual(_e.min())?B.resolve(null):this.gs.getDocuments(e,r).next((a=>{const u=this.bs(t,a);return this.Ds(t,u,r,s)?B.resolve(null):(ya()<=Pe.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),va(t)),this.vs(e,u,t,_A(s,_u)).next((h=>h)))}))}bs(e,t){let r=new He(fI(e));return t.forEach(((s,a)=>{Bu(e,a)&&(r=r.add(a))})),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,t,r){return ya()<=Pe.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",va(t)),this.gs.getDocumentsMatchingQuery(e,t,Sn.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="LocalStore",vC=3e8;class _C{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new rt(Te),this.Ms=new ci((a=>io(a)),Fu),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZI(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function tT(n,e,t,r){return new _C(n,e,t,r)}async function nT(n,e){const t=ke(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const u=[],h=[];let f=Ae();for(const m of s){u.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of a){h.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(r,f).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:h})))}))}))}function wC(n,e){const t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(h,f,m,v){const w=m.batch,T=w.keys();let S=B.resolve();return T.forEach((V=>{S=S.next((()=>v.getEntry(f,V))).next((M=>{const L=m.docVersions.get(V);ye(L!==null,48541),M.version.compareTo(L)<0&&(w.applyToRemoteDocument(M,m),M.isValidDocument()&&(M.setReadTime(m.commitVersion),v.addEntry(M)))}))})),S.next((()=>h.mutationQueue.removeMutationBatch(f,w)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let f=Ae();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function rT(n){const e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function EC(n,e){const t=ke(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const h=[];e.targetChanges.forEach(((v,w)=>{const T=s.get(w);if(!T)return;h.push(t.hi.removeMatchingKeys(a,v.removedDocuments,w).next((()=>t.hi.addMatchingKeys(a,v.addedDocuments,w))));let S=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?S=S.withResumeToken(vt.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):v.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(v.resumeToken,r)),s=s.insert(w,S),(function(M,L,Q){return M.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=vC?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(T,S,v)&&h.push(t.hi.updateTargetData(a,S))}));let f=Tn(),m=Ae();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),h.push(IC(a,u,e.documentUpdates).next((v=>{f=v.Ls,m=v.ks}))),!r.isEqual(_e.min())){const v=t.hi.getLastRemoteSnapshotVersion(a).next((w=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r)));h.push(v)}return B.waitFor(h).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.Fs=s,a)))}function IC(n,e,t){let r=Ae(),s=Ae();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let u=Tn();return t.forEach(((h,f)=>{const m=a.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(_e.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):ne(yg,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)})),{Ls:u,ks:s}}))}function TC(n,e){const t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Xs),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function xC(n,e){const t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.hi.getTargetData(r,e).next((a=>a?(s=a,B.resolve(s)):t.hi.allocateTargetId(r).next((u=>(s=new ti(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function km(n,e,t){const r=ke(n),s=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!os(u))throw u;ne(yg,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function qw(n,e,t){const r=ke(n);let s=_e.min(),a=Ae();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,v){const w=ke(f),T=w.Ms.get(v);return T!==void 0?B.resolve(w.Fs.get(T)):w.hi.getTargetData(m,v)})(r,u,Fn(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(u,h.targetId).next((f=>{a=f}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?s:_e.min(),t?a:Ae()))).next((h=>(SC(r,hR(e),h),{documents:h,qs:a})))))}function SC(n,e,t){let r=n.xs.get(e)||_e.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.xs.set(e,r)}class Hw{constructor(){this.activeTargetIds=yR()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iT{constructor(){this.Fo=new Hw,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Hw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="ConnectivityMonitor";class Kw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ne(Ww,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ne(Ww,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ih=null;function bm(){return Ih===null?Ih=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ih++,"0x"+Ih.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="RestConnection",bC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class AC{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Qh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const u=bm(),h=this.Go(e,t.toUriEncodedString());ne(Wp,`Sending RPC '${e}' ${u}:`,h,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,s,a);const{host:m}=new URL(h),v=qa(m);return this.jo(e,h,f,r,v).then((w=>(ne(Wp,`Received RPC '${e}' ${u}: `,w),w)),(w=>{throw Cr(Wp,`RPC '${e}' ${u} failed with error: `,w,"url: ",h,"request:",r),w}))}Jo(e,t,r,s,a,u){return this.Wo(e,t,r,s,a)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}Go(e,t){const r=bC[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht="WebChannelConnection";class CC extends AC{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,a){const u=bm();return new Promise(((h,f)=>{const m=new TE;m.setWithCredentials(!0),m.listenOnce(xE.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case kh.NO_ERROR:const w=m.getResponseJson();ne(Ht,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),h(w);break;case kh.TIMEOUT:ne(Ht,`RPC '${e}' ${u} timed out`),f(new ie(G.DEADLINE_EXCEEDED,"Request time out"));break;case kh.HTTP_ERROR:const T=m.getStatus();if(ne(Ht,`RPC '${e}' ${u} failed with status:`,T,"response text:",m.getResponseText()),T>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const V=S==null?void 0:S.error;if(V&&V.status&&V.message){const M=(function(Q){const J=Q.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(J)>=0?J:G.UNKNOWN})(V.status);f(new ie(M,V.message))}else f(new ie(G.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new ie(G.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{ne(Ht,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(s);ne(Ht,`RPC '${e}' ${u} sending request:`,s),m.send(t,"POST",v,r,15)}))}P_(e,t,r){const s=bm(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=bE(),h=kE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const v=a.join("");ne(Ht,`Creating RPC '${e}' stream ${s}: ${v}`,f);const w=u.createWebChannel(v,f);this.T_(w);let T=!1,S=!1;const V=new RC({Ho:L=>{S?ne(Ht,`Not sending because RPC '${e}' stream ${s} is closed:`,L):(T||(ne(Ht,`Opening RPC '${e}' stream ${s} transport.`),w.open(),T=!0),ne(Ht,`RPC '${e}' stream ${s} sending:`,L),w.send(L))},Yo:()=>w.close()}),M=(L,Q,J)=>{L.listen(Q,(W=>{try{J(W)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return M(w,tu.EventType.OPEN,(()=>{S||(ne(Ht,`RPC '${e}' stream ${s} transport opened.`),V.s_())})),M(w,tu.EventType.CLOSE,(()=>{S||(S=!0,ne(Ht,`RPC '${e}' stream ${s} transport closed`),V.__(),this.I_(w))})),M(w,tu.EventType.ERROR,(L=>{S||(S=!0,Cr(Ht,`RPC '${e}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),V.__(new ie(G.UNAVAILABLE,"The operation could not be completed")))})),M(w,tu.EventType.MESSAGE,(L=>{var Q;if(!S){const J=L.data[0];ye(!!J,16349);const W=J,oe=(W==null?void 0:W.error)||((Q=W[0])===null||Q===void 0?void 0:Q.error);if(oe){ne(Ht,`RPC '${e}' stream ${s} received error:`,oe);const ce=oe.status;let X=(function(A){const N=mt[A];if(N!==void 0)return kI(N)})(ce),C=oe.message;X===void 0&&(X=G.INTERNAL,C="Unknown error status: "+ce+" with message "+oe.message),S=!0,V.__(new ie(X,C)),w.close()}else ne(Ht,`RPC '${e}' stream ${s} received:`,J),V.a_(J)}})),M(h,SE.STAT_EVENT,(L=>{L.stat===om.PROXY?ne(Ht,`RPC '${e}' stream ${s} detected buffering proxy`):L.stat===om.NOPROXY&&ne(Ht,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{V.o_()}),0),V}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(){return typeof window<"u"?window:null}function Lh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(n){return new NR(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="PersistentStream";class oT{constructor(e,t,r,s,a,u,h,f){this.Fi=e,this.w_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new sT(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(en(t.toString()),en("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.b_===t&&this.W_(r,s)}),(r=>{e((()=>{const s=new ie(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{r((()=>this.G_(s)))})),this.stream.onMessage((s=>{r((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ne(Gw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ne(Gw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class NC extends oT{constructor(e,t,r,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=OR(this.serializer,e),r=(function(a){if(!("targetChange"in a))return _e.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?_e.min():u.readTime?nn(u.readTime):_e.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=Em(this.serializer),t.addTarget=(function(a,u){let h;const f=u.target;if(h=Xh(f)?{documents:VI(a,f)}:{query:OI(a,f).Vt},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=RI(a,u.resumeToken);const m=_m(a,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(_e.min())>0){h.readTime=ja(a,u.snapshotVersion.toTimestamp());const m=_m(a,u.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=MR(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=Em(this.serializer),t.removeTarget=e,this.k_(t)}}class DC extends oT{constructor(e,t,r,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=LR(e.writeResults,e.commitTime),r=nn(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=Em(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>ed(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{}class OC extends VC{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new ie(G.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,wm(t,r),s,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ie(G.UNKNOWN,a.toString())}))}Jo(e,t,r,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Jo(e,wm(t,r),s,u,h,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ie(G.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class LC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(en(t),this._a=!1):ne("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="RemoteStore";class MC{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{r.enqueueAndForget((async()=>{vo(this)&&(ne(lo,"Restarting streams for network reachability change."),await(async function(f){const m=ke(f);m.Ia.add(4),await $u(m),m.Aa.set("Unknown"),m.Ia.delete(4),await Ud(m)})(this))}))})),this.Aa=new LC(r,s)}}async function Ud(n){if(vo(n))for(const e of n.da)await e(!0)}async function $u(n){for(const e of n.da)await e(!1)}function aT(n,e){const t=ke(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Eg(t)?wg(t):Qa(t).x_()&&_g(t,e))}function vg(n,e){const t=ke(n),r=Qa(t);t.Ta.delete(e),r.x_()&&lT(t,e),t.Ta.size===0&&(r.x_()?r.B_():vo(t)&&t.Aa.set("Unknown"))}function _g(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qa(n).H_(e)}function lT(n,e){n.Ra.$e(e),Qa(n).Y_(e)}function wg(n){n.Ra=new AR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Qa(n).start(),n.Aa.aa()}function Eg(n){return vo(n)&&!Qa(n).M_()&&n.Ta.size>0}function vo(n){return ke(n).Ia.size===0}function uT(n){n.Ra=void 0}async function jC(n){n.Aa.set("Online")}async function FC(n){n.Ta.forEach(((e,t)=>{_g(n,e)}))}async function UC(n,e){uT(n),Eg(n)?(n.Aa.la(e),wg(n)):n.Aa.set("Unknown")}async function BC(n,e,t){if(n.Aa.set("Online"),e instanceof AI&&e.state===2&&e.cause)try{await(async function(s,a){const u=a.cause;for(const h of a.targetIds)s.Ta.has(h)&&(await s.remoteSyncer.rejectListen(h,u),s.Ta.delete(h),s.Ra.removeTarget(h))})(n,e)}catch(r){ne(lo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await sd(n,r)}else if(e instanceof Vh?n.Ra.Ye(e):e instanceof bI?n.Ra.it(e):n.Ra.et(e),!t.isEqual(_e.min()))try{const r=await rT(n.localStore);t.compareTo(r)>=0&&await(function(a,u){const h=a.Ra.Pt(u);return h.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.Ta.get(m);v&&a.Ta.set(m,v.withResumeToken(f.resumeToken,u))}})),h.targetMismatches.forEach(((f,m)=>{const v=a.Ta.get(f);if(!v)return;a.Ta.set(f,v.withResumeToken(vt.EMPTY_BYTE_STRING,v.snapshotVersion)),lT(a,f);const w=new ti(v.target,f,m,v.sequenceNumber);_g(a,w)})),a.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){ne(lo,"Failed to raise snapshot:",r),await sd(n,r)}}async function sd(n,e,t){if(!os(e))throw e;n.Ia.add(1),await $u(n),n.Aa.set("Offline"),t||(t=()=>rT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ne(lo,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Ud(n)}))}function cT(n,e){return e().catch((t=>sd(n,t,e)))}async function qu(n){const e=ke(n),t=ns(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Xs;for(;zC(e);)try{const s=await TC(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,$C(e,s)}catch(s){await sd(e,s)}hT(e)&&dT(e)}function zC(n){return vo(n)&&n.Pa.length<10}function $C(n,e){n.Pa.push(e);const t=ns(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function hT(n){return vo(n)&&!ns(n).M_()&&n.Pa.length>0}function dT(n){ns(n).start()}async function qC(n){ns(n).na()}async function HC(n){const e=ns(n);for(const t of n.Pa)e.X_(t.mutations)}async function WC(n,e,t){const r=n.Pa.shift(),s=ag.from(r,e,t);await cT(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await qu(n)}async function KC(n,e){e&&ns(n).Z_&&await(async function(r,s){if((function(u){return kR(u)&&u!==G.ABORTED})(s.code)){const a=r.Pa.shift();ns(r).N_(),await cT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await qu(r)}})(n,e),hT(n)&&dT(n)}async function Qw(n,e){const t=ke(n);t.asyncQueue.verifyOperationInProgress(),ne(lo,"RemoteStore received new credentials");const r=vo(t);t.Ia.add(3),await $u(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Ud(t)}async function GC(n,e){const t=ke(n);e?(t.Ia.delete(2),await Ud(t)):e||(t.Ia.add(2),await $u(t),t.Aa.set("Unknown"))}function Qa(n){return n.Va||(n.Va=(function(t,r,s){const a=ke(t);return a.ia(),new NC(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:jC.bind(null,n),e_:FC.bind(null,n),n_:UC.bind(null,n),J_:BC.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Eg(n)?wg(n):n.Aa.set("Unknown")):(await n.Va.stop(),uT(n))}))),n.Va}function ns(n){return n.ma||(n.ma=(function(t,r,s){const a=ke(t);return a.ia(),new DC(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:qC.bind(null,n),n_:KC.bind(null,n),ea:HC.bind(null,n),ta:WC.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await qu(n)):(await n.ma.stop(),n.Pa.length>0&&(ne(lo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const u=Date.now()+r,h=new Ig(e,t,u,s,a);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tg(n,e){if(en("AsyncQueue",`${e}: ${n}`),os(n))return new ie(G.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{static emptySet(e){return new Ia(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||le.comparator(t.key,r.key):(t,r)=>le.comparator(t.key,r.key),this.keyedMap=nu(),this.sortedSet=new rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ia)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ia;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(){this.fa=new rt(le.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):pe(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Fa{constructor(e,t,r,s,a,u,h,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const u=[];return t.forEach((h=>{u.push({type:0,doc:h})})),new Fa(e,t,Ia.emptySet(t),u,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class XC{constructor(){this.queries=Yw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=ke(t),a=s.queries;s.queries=Yw(),a.forEach(((u,h)=>{for(const f of h.wa)f.onError(r)}))})(this,new ie(G.ABORTED,"Firestore shutting down"))}}function Yw(){return new ci((n=>dI(n)),Pd)}async function xg(n,e){const t=ke(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.ba()&&(r=2):(a=new QC,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(s,!0);break;case 1:a.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const h=Tg(u,`Initialization of query '${va(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&kg(t)}async function Sg(n,e){const t=ke(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function YC(n,e){const t=ke(n);let r=!1;for(const s of e){const a=s.query,u=t.queries.get(a);if(u){for(const h of u.wa)h.Ca(s)&&(r=!0);u.ya=s}}r&&kg(t)}function JC(n,e,t){const r=ke(n),s=r.queries.get(e);if(s)for(const a of s.wa)a.onError(t);r.queries.delete(e)}function kg(n){n.Da.forEach((e=>{e.next()}))}var Am,Jw;(Jw=Am||(Am={})).Fa="default",Jw.Cache="cache";class bg{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Fa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Am.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e){this.key=e}}class pT{constructor(e){this.key=e}}class ZC{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ae(),this.mutatedKeys=Ae(),this.Xa=fI(e),this.eu=new Ia(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new Xw,s=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=s,h=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,w)=>{const T=s.get(v),S=Bu(this.query,w)?w:null,V=!!T&&this.mutatedKeys.has(T.key),M=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let L=!1;T&&S?T.data.isEqual(S.data)?V!==M&&(r.track({type:3,doc:S}),L=!0):this.iu(T,S)||(r.track({type:2,doc:S}),L=!0,(f&&this.Xa(S,f)>0||m&&this.Xa(S,m)<0)&&(h=!0)):!T&&S?(r.track({type:0,doc:S}),L=!0):T&&!S&&(r.track({type:1,doc:T}),L=!0,(f||m)&&(h=!0)),L&&(S?(u=u.add(S),a=M?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{eu:u,ru:r,Ds:h,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((v,w)=>(function(S,V){const M=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{At:L})}};return M(S)-M(V)})(v.type,w.type)||this.Xa(v.doc,w.doc))),this.su(r),s=s!=null&&s;const h=t&&!s?this.ou():[],f=this.Za.size===0&&this.current&&!s?1:0,m=f!==this.Ya;return this.Ya=f,u.length!==0||m?{snapshot:new Fa(this.query,e.eu,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Xw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ae(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new pT(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new fT(r))})),t}uu(e){this.Ha=e.qs,this.Za=Ae();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Fa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Ag="SyncEngine";class eP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class tP{constructor(e){this.key=e,this.lu=!1}}class nP{constructor(e,t,r,s,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new ci((h=>dI(h)),Pd),this.Tu=new Map,this.Iu=new Set,this.du=new rt(le.comparator),this.Eu=new Map,this.Au=new fg,this.Ru={},this.Vu=new Map,this.mu=ao.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function rP(n,e,t=!0){const r=wT(n);let s;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await mT(r,e,t,!0),s}async function iP(n,e){const t=wT(n);await mT(t,e,!0,!1)}async function mT(n,e,t,r){const s=await xC(n.localStore,Fn(e)),a=s.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await sP(n,e,a,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&aT(n.remoteStore,s),h}async function sP(n,e,t,r,s){n.gu=(w,T,S)=>(async function(M,L,Q,J){let W=L.view.nu(Q);W.Ds&&(W=await qw(M.localStore,L.query,!1).then((({documents:C})=>L.view.nu(C,W))));const oe=J&&J.targetChanges.get(L.targetId),ce=J&&J.targetMismatches.get(L.targetId)!=null,X=L.view.applyChanges(W,M.isPrimaryClient,oe,ce);return e0(M,L.targetId,X._u),X.snapshot})(n,w,T,S);const a=await qw(n.localStore,e,!0),u=new ZC(e,a.qs),h=u.nu(a.documents),f=zu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=u.applyChanges(h,n.isPrimaryClient,f);e0(n,t,m._u);const v=new eP(e,t,u);return n.Pu.set(e,v),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function oP(n,e,t){const r=ke(n),s=r.Pu.get(e),a=r.Tu.get(s.targetId);if(a.length>1)return r.Tu.set(s.targetId,a.filter((u=>!Pd(u,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await km(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&vg(r.remoteStore,s.targetId),Rm(r,s.targetId)})).catch(yo)):(Rm(r,s.targetId),await km(r.localStore,s.targetId,!0))}async function aP(n,e){const t=ke(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),vg(t.remoteStore,r.targetId))}async function lP(n,e,t){const r=ET(n);try{const s=await(function(u,h){const f=ke(u),m=$e.now(),v=h.reduce(((S,V)=>S.add(V.key)),Ae());let w,T;return f.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let V=Tn(),M=Ae();return f.Os.getEntries(S,v).next((L=>{V=L,V.forEach(((Q,J)=>{J.isValidDocument()||(M=M.add(Q))}))})).next((()=>f.localDocuments.getOverlayedDocuments(S,V))).next((L=>{w=L;const Q=[];for(const J of h){const W=xR(J,w.get(J.key).overlayedDocument);W!=null&&Q.push(new hi(J.key,W,rI(W.value.mapValue),Gt.exists(!0)))}return f.mutationQueue.addMutationBatch(S,m,Q,h)})).next((L=>{T=L;const Q=L.applyToLocalDocumentSet(w,M);return f.documentOverlayCache.saveOverlays(S,L.batchId,Q)}))})).then((()=>({batchId:T.batchId,changes:mI(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(u,h,f){let m=u.Ru[u.currentUser.toKey()];m||(m=new rt(Te)),m=m.insert(h,f),u.Ru[u.currentUser.toKey()]=m})(r,s.batchId,t),await Hu(r,s.changes),await qu(r.remoteStore)}catch(s){const a=Tg(s,"Failed to persist write");t.reject(a)}}async function gT(n,e){const t=ke(n);try{const r=await EC(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const u=t.Eu.get(a);u&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.lu=!0:s.modifiedDocuments.size>0?ye(u.lu,14607):s.removedDocuments.size>0&&(ye(u.lu,42227),u.lu=!1))})),await Hu(t,r,e)}catch(r){await yo(r)}}function Zw(n,e,t){const r=ke(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach(((a,u)=>{const h=u.view.va(e);h.snapshot&&s.push(h.snapshot)})),(function(u,h){const f=ke(u);f.onlineState=h;let m=!1;f.queries.forEach(((v,w)=>{for(const T of w.wa)T.va(h)&&(m=!0)})),m&&kg(f)})(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uP(n,e,t){const r=ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),a=s&&s.key;if(a){let u=new rt(le.comparator);u=u.insert(a,lt.newNoDocument(a,_e.min()));const h=Ae().add(a),f=new Od(_e.min(),new Map,new rt(Te),u,h);await gT(r,f),r.du=r.du.remove(a),r.Eu.delete(e),Rg(r)}else await km(r.localStore,e,!1).then((()=>Rm(r,e,t))).catch(yo)}async function cP(n,e){const t=ke(n),r=e.batch.batchId;try{const s=await wC(t.localStore,e);vT(t,r,null),yT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Hu(t,s)}catch(s){await yo(s)}}async function hP(n,e,t){const r=ke(n);try{const s=await(function(u,h){const f=ke(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return f.mutationQueue.lookupMutationBatch(m,h).next((w=>(ye(w!==null,37113),v=w.keys(),f.mutationQueue.removeMutationBatch(m,w)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>f.localDocuments.getDocuments(m,v)))}))})(r.localStore,e);vT(r,e,t),yT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Hu(r,s)}catch(s){await yo(s)}}function yT(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function vT(n,e,t){const r=ke(n);let s=r.Ru[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function Rm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((r=>{n.Au.containsKey(r)||_T(n,r)}))}function _T(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(vg(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Rg(n))}function e0(n,e,t){for(const r of t)r instanceof fT?(n.Au.addReference(r.key,e),dP(n,r)):r instanceof pT?(ne(Ag,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||_T(n,r.key)):pe(19791,{yu:r})}function dP(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ne(Ag,"New document in limbo: "+t),n.Iu.add(r),Rg(n))}function Rg(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new le(Be.fromString(e)),r=n.mu.next();n.Eu.set(r,new tP(t)),n.du=n.du.insert(t,r),aT(n.remoteStore,new ti(Fn(Uu(t.path)),r,"TargetPurposeLimboResolution",Mn.ue))}}async function Hu(n,e,t){const r=ke(n),s=[],a=[],u=[];r.Pu.isEmpty()||(r.Pu.forEach(((h,f)=>{u.push(r.gu(f,e,t).then((m=>{var v;if((m||t)&&r.isPrimaryClient){const w=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(m){s.push(m);const w=gg.Es(f.targetId,m);a.push(w)}})))})),await Promise.all(u),r.hu.J_(s),await(async function(f,m){const v=ke(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>B.forEach(m,(T=>B.forEach(T.Is,(S=>v.persistence.referenceDelegate.addReference(w,T.targetId,S))).next((()=>B.forEach(T.ds,(S=>v.persistence.referenceDelegate.removeReference(w,T.targetId,S)))))))))}catch(w){if(!os(w))throw w;ne(yg,"Failed to update sequence numbers: "+w)}for(const w of m){const T=w.targetId;if(!w.fromCache){const S=v.Fs.get(T),V=S.snapshotVersion,M=S.withLastLimboFreeSnapshotVersion(V);v.Fs=v.Fs.insert(T,M)}}})(r.localStore,a))}async function fP(n,e){const t=ke(n);if(!t.currentUser.isEqual(e)){ne(Ag,"User change. New user:",e.toKey());const r=await nT(t.localStore,e);t.currentUser=e,(function(a,u){a.Vu.forEach((h=>{h.forEach((f=>{f.reject(new ie(G.CANCELLED,u))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hu(t,r.Bs)}}function pP(n,e){const t=ke(n),r=t.Eu.get(e);if(r&&r.lu)return Ae().add(r.key);{let s=Ae();const a=t.Tu.get(e);if(!a)return s;for(const u of a){const h=t.Pu.get(u);s=s.unionWith(h.view.tu)}return s}}function wT(n){const e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uP.bind(null,e),e.hu.J_=YC.bind(null,e.eventManager),e.hu.pu=JC.bind(null,e.eventManager),e}function ET(n){const e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hP.bind(null,e),e}class Pu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return tT(this.persistence,new eT,e.initialUser,this.serializer)}Du(e){return new pg(jd.Vi,this.serializer)}bu(e){return new iT}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pu.provider={build:()=>new Pu};class mP extends Pu{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ye(this.persistence.referenceDelegate instanceof id,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new QI(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new pg((r=>id.Vi(r,t)),this.serializer)}}class gP extends Pu{constructor(e,t,r){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Mu.initialize(this,e),await ET(this.Mu.syncEngine),await qu(this.Mu.remoteStore),await this.persistence.ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return tT(this.persistence,new eT,e.initialUser,this.serializer)}Cu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new QI(r,e.asyncQueue,t)}Fu(e,t){const r=new TA(t,this.persistence);return new IA(e.asyncQueue,r)}Du(e){const t=gC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new mg(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,PC(),Lh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new iT}}class od{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Zw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fP.bind(null,this.syncEngine),await GC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new XC})()}createDatastore(e){const t=Fd(e.databaseInfo.databaseId),r=(function(a){return new CC(a)})(e.databaseInfo);return(function(a,u,h,f){return new OC(a,u,h,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,u,h){return new MC(r,s,a,u,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>Zw(this.syncEngine,t,0)),(function(){return Kw.C()?new Kw:new kC})())}createSyncEngine(e,t){return(function(s,a,u,h,f,m,v){const w=new nP(s,a,u,h,f,m);return v&&(w.fu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=ke(s);ne(lo,"RemoteStore shutting down."),a.Ia.add(5),await $u(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}od.provider={build:()=>new od};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):en("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="FirestoreClient";class yP{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Mt.UNAUTHENTICATED,this.clientId=Gm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async u=>{ne(rs,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(ne(rs,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Tg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Kp(n,e){n.asyncQueue.verifyOperationInProgress(),ne(rs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await nT(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>{Cr("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{ne("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{Cr("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),n._offlineComponents=e}async function t0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await vP(n);ne(rs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Qw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Qw(e.remoteStore,s))),n._onlineComponents=e}async function vP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ne(rs,"Using user provided OfflineComponentProvider");try{await Kp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===G.FAILED_PRECONDITION||s.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Cr("Error using user provided cache. Falling back to memory cache: "+t),await Kp(n,new Pu)}}else ne(rs,"Using default OfflineComponentProvider"),await Kp(n,new mP(void 0));return n._offlineComponents}async function IT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ne(rs,"Using user provided OnlineComponentProvider"),await t0(n,n._uninitializedComponentsProvider._online)):(ne(rs,"Using default OnlineComponentProvider"),await t0(n,new od))),n._onlineComponents}function _P(n){return IT(n).then((e=>e.syncEngine))}async function ad(n){const e=await IT(n),t=e.eventManager;return t.onListen=rP.bind(null,e.syncEngine),t.onUnlisten=oP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=iP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=aP.bind(null,e.syncEngine),t}function wP(n,e,t={}){const r=new Sr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,h,f,m){const v=new Cg({next:T=>{v.Ou(),u.enqueueAndForget((()=>Sg(a,w)));const S=T.docs.has(h);!S&&T.fromCache?m.reject(new ie(G.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&T.fromCache&&f&&f.source==="server"?m.reject(new ie(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),w=new bg(Uu(h.path),v,{includeMetadataChanges:!0,ka:!0});return xg(a,w)})(await ad(n),n.asyncQueue,e,t,r))),r.promise}function EP(n,e,t={}){const r=new Sr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,h,f,m){const v=new Cg({next:T=>{v.Ou(),u.enqueueAndForget((()=>Sg(a,w))),T.fromCache&&f.source==="server"?m.reject(new ie(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),w=new bg(h,v,{includeMetadataChanges:!0,ka:!0});return xg(a,w)})(await ad(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="firestore.googleapis.com",r0=!0;class i0{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xT,this.ssl=r0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:r0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZR)throw new ie(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bd{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new lA;switch(r.type){case"firstParty":return new dA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=n0.get(t);r&&(ne("ComponentProvider","Removing Datastore"),n0.delete(t),r.terminate())})(this),Promise.resolve()}}function IP(n,e,t,r={}){var s;n=tn(n,Bd);const a=qa(e),u=n._getSettings(),h=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;a&&(cE(`https://${f}`),hE("Firestore",!0)),u.host!==xT&&u.host!==f&&Cr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:f,ssl:a,emulatorOptions:r});if(!Zi(m,h)&&(n._setSettings(m),r.mockUserToken)){let v,w;if(typeof r.mockUserToken=="string")v=r.mockUserToken,w=Mt.MOCK_USER;else{v=M1(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new ie(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Mt(T)}n._authCredentials=new uA(new RE(v,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new di(this.firestore,e,this._query)}}class ut{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ut(this.firestore,e,this._key)}toJSON(){return{type:ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Mu(t,ut._jsonSchema))return new ut(e,r||null,new le(Be.fromString(t.referencePath)))}}ut._jsonSchemaVersion="firestore/documentReference/1.0",ut._jsonSchema={type:gt("string",ut._jsonSchemaVersion),referencePath:gt("string")};class Yi extends di{constructor(e,t,r){super(e,t,Uu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new le(e))}withConverter(e){return new Yi(this.firestore,e,this._path)}}function Vr(n,e,...t){if(n=yt(n),NE("collection","path",e),n instanceof Bd){const r=Be.fromString(e,...t);return G_(r),new Yi(n,null,r)}{if(!(n instanceof ut||n instanceof Yi))throw new ie(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Be.fromString(e,...t));return G_(r),new Yi(n.firestore,null,r)}}function is(n,e,...t){if(n=yt(n),arguments.length===1&&(e=Gm.newId()),NE("doc","path",e),n instanceof Bd){const r=Be.fromString(e,...t);return K_(r),new ut(n,null,new le(r))}{if(!(n instanceof ut||n instanceof Yi))throw new ie(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Be.fromString(e,...t));return K_(r),new ut(n.firestore,n instanceof Yi?n.converter:null,new le(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="AsyncQueue";class o0{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new sT(this,"async_queue_retry"),this.oc=()=>{const r=Lh();r&&ne(s0,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Lh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Lh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Sr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!os(e))throw e;ne(s0,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,en("INTERNAL UNHANDLED ERROR: ",a0(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=Ig.createAndSchedule(this,e,t,r,(a=>this.lc(a)));return this.ec.push(s),s}ac(){this.tc&&pe(47125,{hc:a0(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function a0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1})(n,["next","error","complete"])}class Nr extends Bd{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new o0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new o0(e),this._firestoreClient=void 0,await e}}}function TP(n,e){const t=typeof n=="object"?n:Wm(),r=typeof n=="string"?n:Qh,s=go(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=O1("firestore");a&&IP(s,...a)}return s}function zd(n){if(n._terminated)throw new ie(G.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ST(n),n._firestoreClient}function ST(n){var e,t,r;const s=n._freezeSettings(),a=(function(h,f,m,v){return new JA(h,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,TT(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new yP(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}})(n._componentsProvider))}function xP(n,e){Cr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return SP(n,od.provider,{build:r=>new gP(r,t.cacheSizeBytes,void 0)}),Promise.resolve()}function SP(n,e,t){if((n=tn(n,Nr))._firestoreClient||n._terminated)throw new ie(G.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ie(G.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},ST(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ln(vt.fromBase64String(e))}catch(t){throw new ie(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ln(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Mu(e,Ln._jsonSchema))return Ln.fromBase64String(e.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:gt("string",Ln._jsonSchemaVersion),bytes:gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ie(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ie(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ie(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:kr._jsonSchemaVersion}}static fromJSON(e){if(Mu(e,kr._jsonSchema))return new kr(e.latitude,e.longitude)}}kr._jsonSchemaVersion="firestore/geoPoint/1.0",kr._jsonSchema={type:gt("string",kr._jsonSchemaVersion),latitude:gt("number"),longitude:gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:br._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Mu(e,br._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new br(e.vectorValues);throw new ie(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}br._jsonSchemaVersion="firestore/vectorValue/1.0",br._jsonSchema={type:gt("string",br._jsonSchemaVersion),vectorValues:gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP=/^__.*__$/;class bP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new hi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ga(e,this.data,t,this.fieldTransforms)}}class kT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new hi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ec:n})}}class Pg{constructor(e,t,r,s,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Pg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return ld(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(bT(this.Ec)&&kP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class AP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Fd(e)}Dc(e,t,r,s=!1){return new Pg({Ec:e,methodName:t,bc:r,path:ot.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hd(n){const e=n._freezeSettings(),t=Fd(n._databaseId);return new AP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function AT(n,e,t,r,s,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,e,t,s);Dg("Data must be an object, but it was:",u,r);const h=RT(r,u);let f,m;if(a.merge)f=new dn(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const w of a.mergeFields){const T=Cm(e,w,t);if(!u.contains(T))throw new ie(G.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);PT(v,T)||v.push(T)}f=new dn(v),m=u.fieldTransforms.filter((w=>f.covers(w.field)))}else f=null,m=u.fieldTransforms;return new bP(new Kt(h),f,m)}class Wd extends qd{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wd}}class Ng extends qd{_toFieldTransform(e){return new II(e.path,new Oa)}isEqual(e){return e instanceof Ng}}function RP(n,e,t,r){const s=n.Dc(1,e,t);Dg("Data must be an object, but it was:",s,r);const a=[],u=Kt.empty();as(r,((f,m)=>{const v=Vg(e,f,t);m=yt(m);const w=s.gc(v);if(m instanceof Wd)a.push(v);else{const T=Wu(m,w);T!=null&&(a.push(v),u.set(v,T))}}));const h=new dn(a);return new kT(u,h,s.fieldTransforms)}function CP(n,e,t,r,s,a){const u=n.Dc(1,e,t),h=[Cm(e,r,t)],f=[s];if(a.length%2!=0)throw new ie(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)h.push(Cm(e,a[T])),f.push(a[T+1]);const m=[],v=Kt.empty();for(let T=h.length-1;T>=0;--T)if(!PT(m,h[T])){const S=h[T];let V=f[T];V=yt(V);const M=u.gc(S);if(V instanceof Wd)m.push(S);else{const L=Wu(V,M);L!=null&&(m.push(S),v.set(S,L))}}const w=new dn(m);return new kT(v,w,u.fieldTransforms)}function PP(n,e,t,r=!1){return Wu(t,n.Dc(r?4:3,e))}function Wu(n,e){if(CT(n=yt(n)))return Dg("Unsupported field value:",e,n),RT(n,e);if(n instanceof qd)return(function(r,s){if(!bT(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,s){const a=[];let u=0;for(const h of r){let f=Wu(h,s.yc(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=$e.fromDate(r);return{timestampValue:ja(s.serializer,a)}}if(r instanceof $e){const a=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ja(s.serializer,a)}}if(r instanceof kr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ln)return{bytesValue:RI(s.serializer,r._byteString)};if(r instanceof ut){const a=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw s.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:cg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof br)return(function(u,h){return{mapValue:{fields:{[ng]:{stringValue:rg},[Pa]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw h.wc("VectorValues must only contain numeric values.");return sg(h.serializer,m)}))}}}}}})(r,s);throw s.wc(`Unsupported field value: ${Td(r)}`)})(n,e)}function RT(n,e){const t={};return GE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):as(n,((r,s)=>{const a=Wu(s,e.Vc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function CT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $e||n instanceof kr||n instanceof Ln||n instanceof ut||n instanceof qd||n instanceof br)}function Dg(n,e,t){if(!CT(t)||!DE(t)){const r=Td(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Cm(n,e,t){if((e=yt(e))instanceof $d)return e._internalPath;if(typeof e=="string")return Vg(n,e);throw ld("Field path arguments must be of type string or ",n,!1,void 0,t)}const NP=new RegExp("[~\\*/\\[\\]]");function Vg(n,e,t){if(e.search(NP)>=0)throw ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $d(...e.split("."))._internalPath}catch{throw ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ld(n,e,t,r,s){const a=r&&!r.isEmpty(),u=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new ie(G.INVALID_ARGUMENT,h+n+f)}function PT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Kd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class DP extends NT{data(){return super.data()}}function Kd(n,e){return typeof e=="string"?Vg(n,e):e instanceof $d?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ie(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Og{}class Lg extends Og{}function ls(n,e,...t){let r=[];e instanceof Og&&r.push(e),r=r.concat(t),(function(a){const u=a.filter((f=>f instanceof Mg)).length,h=a.filter((f=>f instanceof Gd)).length;if(u>1||u>0&&h>0)throw new ie(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Gd extends Lg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Gd(e,t,r)}_apply(e){const t=this._parse(e);return VT(e._query,t),new di(e.firestore,e.converter,vm(e._query,t))}_parse(e){const t=Hd(e.firestore);return(function(a,u,h,f,m,v,w){let T;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ie(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){c0(w,v);const V=[];for(const M of w)V.push(u0(f,a,M));T={arrayValue:{values:V}}}else T=u0(f,a,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||c0(w,v),T=PP(h,u,w,v==="in"||v==="not-in");return Ne.create(m,v,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function fn(n,e,t){const r=e,s=Kd("where",n);return Gd._create(s,r,t)}class Mg extends Og{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Mg(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:qe.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let u=s;const h=a.getFlattenedFilters();for(const f of h)VT(u,f),u=vm(u,f)})(e._query,t),new di(e.firestore,e.converter,vm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jg extends Lg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new jg(e,t)}_apply(e){const t=(function(s,a,u){if(s.startAt!==null)throw new ie(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ie(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ru(a,u)})(e._query,this._field,this._direction);return new di(e.firestore,e.converter,(function(s,a){const u=s.explicitOrderBy.concat([a]);return new Ka(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function Qd(n,e="asc"){const t=e,r=Kd("orderBy",n);return jg._create(r,t)}class Fg extends Lg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Fg(e,t,r)}_apply(e){return new di(e.firestore,e.converter,Jh(e._query,this._limit,this._limitType))}}function VP(n){return vA("limit",n),Fg._create("limit",n,"F")}function u0(n,e,t){if(typeof(t=yt(t))=="string"){if(t==="")throw new ie(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hI(e)&&t.indexOf("/")!==-1)throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Be.fromString(t));if(!le.isDocumentKey(r))throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bu(n,new le(r))}if(t instanceof ut)return bu(n,t._key);throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Td(t)}.`)}function c0(n,e){if(!Array.isArray(n)||n.length===0)throw new ie(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VT(n,e){const t=(function(s,a){for(const u of s)for(const h of u.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ie(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class OP{convertValue(e,t="none"){switch(es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return as(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Pa].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((u=>tt(u.doubleValue)));return new br(a)}convertGeoPoint(e){return new kr(tt(e.latitude),tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Rd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){const t=ai(e);return new $e(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Be.fromString(e);ye(FI(r),9688,{name:e});const s=new ro(r.get(1),r.get(3)),a=new le(r.popFirst(5));return s.isEqual(t)||en(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class su{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zs extends NT{constructor(e,t,r,s,a,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Kd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Zs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Zs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zs._jsonSchema={type:gt("string",Zs._jsonSchemaVersion),bundleSource:gt("string","DocumentSnapshot"),bundleName:gt("string"),bundle:gt("string")};class Mh extends Zs{data(e={}){return super.data(e)}}class eo{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new su(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Mh(this._firestore,this._userDataWriter,r.key,r,new su(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ie(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((h=>{const f=new Mh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new su(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const f=new Mh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new su(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,v=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),v=u.indexOf(h.doc.key)),{type:LP(h.type),doc:f,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function LP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(n){n=tn(n,ut);const e=tn(n.firestore,Nr);return wP(zd(e),n._key).then((t=>UT(e,n,t)))}eo._jsonSchemaVersion="firestore/querySnapshot/1.0",eo._jsonSchema={type:gt("string",eo._jsonSchemaVersion),bundleSource:gt("string","QuerySnapshot"),bundleName:gt("string"),bundle:gt("string")};class Ug extends OP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,t)}}function Xa(n){n=tn(n,di);const e=tn(n.firestore,Nr),t=zd(e),r=new Ug(e);return DT(n._query),EP(t,n._query).then((s=>new eo(e,r,n,s)))}function LT(n,e,t){n=tn(n,ut);const r=tn(n.firestore,Nr),s=OT(n.converter,e,t);return Xd(r,[AT(Hd(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Gt.none())])}function MP(n,e,t,...r){n=tn(n,ut);const s=tn(n.firestore,Nr),a=Hd(s);let u;return u=typeof(e=yt(e))=="string"||e instanceof $d?CP(a,"updateDoc",n._key,e,t,r):RP(a,"updateDoc",n._key,e),Xd(s,[u.toMutation(n._key,Gt.exists(!0))])}function MT(n){return Xd(tn(n.firestore,Nr),[new Vd(n._key,Gt.none())])}function jT(n,e){const t=tn(n.firestore,Nr),r=is(n),s=OT(n.converter,e);return Xd(t,[AT(Hd(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Gt.exists(!1))]).then((()=>r))}function FT(n,...e){var t,r,s;n=yt(n);let a={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||l0(e[u])||(a=e[u++]);const h={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(l0(e[u])){const w=e[u];e[u]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[u+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),e[u+2]=(s=w.complete)===null||s===void 0?void 0:s.bind(w)}let f,m,v;if(n instanceof ut)m=tn(n.firestore,Nr),v=Uu(n._key.path),f={next:w=>{e[u]&&e[u](UT(m,n,w))},error:e[u+1],complete:e[u+2]};else{const w=tn(n,di);m=tn(w.firestore,Nr),v=w._query;const T=new Ug(m);f={next:S=>{e[u]&&e[u](new eo(m,T,w,S))},error:e[u+1],complete:e[u+2]},DT(n._query)}return(function(T,S,V,M){const L=new Cg(M),Q=new bg(S,L,V);return T.asyncQueue.enqueueAndForget((async()=>xg(await ad(T),Q))),()=>{L.Ou(),T.asyncQueue.enqueueAndForget((async()=>Sg(await ad(T),Q)))}})(zd(m),v,h,f)}function Xd(n,e){return(function(r,s){const a=new Sr;return r.asyncQueue.enqueueAndForget((async()=>lP(await _P(r),s,a))),a.promise})(zd(n),e)}function UT(n,e,t){const r=t.docs.get(e._key),s=new Ug(n);return new Zs(n,s,e._key,r,new su(t.hasPendingWrites,t.fromCache),e.converter)}function Nu(){return new Ng("serverTimestamp")}(function(e,t=!0){(function(s){Wa=s})(Ha),Rr(new ar("firestore",((r,{instanceIdentifier:s,options:a})=>{const u=r.getProvider("app").getImmediate(),h=new Nr(new cA(r.getProvider("auth-internal")),new fA(u,r.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ie(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ro(m.options.projectId,v)})(u,s),u);return a=Object.assign({useFetchStreams:t},a),h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),jn(z_,$_,e),jn(z_,$_,"esm2017")})();var jP="firebase",FP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn(jP,FP,"app");function Bg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function BT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UP=BT,zT=new mo("auth","Firebase",BT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd=new Id("@firebase/auth");function BP(n,...e){cd.logLevel<=Pe.WARN&&cd.warn(`Auth (${Ha}): ${n}`,...e)}function jh(n,...e){cd.logLevel<=Pe.ERROR&&cd.error(`Auth (${Ha}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(n,...e){throw $g(n,...e)}function or(n,...e){return $g(n,...e)}function zg(n,e,t){const r=Object.assign(Object.assign({},UP()),{[e]:t});return new mo("auth","Firebase",r).create(e,{appName:n.name})}function to(n){return zg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zP(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Dr(n,"argument-error"),zg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $g(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return zT.create(n,...e)}function Se(n,e,...t){if(!n)throw $g(e,...t)}function ni(n){const e="INTERNAL ASSERTION FAILED: "+n;throw jh(e),new Error(e)}function ui(n,e){n||ni(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function $P(){return h0()==="http:"||h0()==="https:"}function h0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($P()||$m()||"connection"in navigator)?navigator.onLine:!0}function HP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,t){this.shortDelay=e,this.longDelay=t,ui(t>e,"Short delay should be less than long delay!"),this.isMobile=U1()||z1()}get(){return qP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(n,e){ui(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],GP=new Ku(3e4,6e4);function Hg(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ya(n,e,t,r,s={}){return qT(n,s,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const h=Lu(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return B1()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&qa(n.emulatorConfig.host)&&(m.credentials="include"),$T.fetch()(await HT(n,n.config.apiHost,t,h),m)})}async function qT(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},WP),e);try{const s=new XP(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Th(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const h=a.ok?u.errorMessage:u.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Th(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Th(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw Th(n,"user-disabled",u);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw zg(n,v,m);Dr(n,v)}}catch(s){if(s instanceof cr)throw s;Dr(n,"network-request-failed",{message:String(s)})}}async function QP(n,e,t,r,s={}){const a=await Ya(n,e,t,r,s);return"mfaPendingCredential"in a&&Dr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function HT(n,e,t,r){const s=`${e}${t}?${r}`,a=n,u=a.config.emulator?qg(n.config,s):`${n.config.apiScheme}://${s}`;return KP.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}class XP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(or(this.auth,"network-request-failed")),GP.get())})}}function Th(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=or(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YP(n,e){return Ya(n,"POST","/v1/accounts:delete",e)}async function hd(n,e){return Ya(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JP(n,e=!1){const t=yt(n),r=await t.getIdToken(e),s=Wg(r);Se(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:mu(Gp(s.auth_time)),issuedAtTime:mu(Gp(s.iat)),expirationTime:mu(Gp(s.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Gp(n){return Number(n)*1e3}function Wg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return jh("JWT malformed, contained fewer than 3 sections"),null;try{const s=sE(t);return s?JSON.parse(s):(jh("Failed to decode base64 JWT payload"),null)}catch(s){return jh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function d0(n){const e=Wg(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Du(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof cr&&ZP(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function ZP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mu(this.lastLoginAt),this.creationTime=mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dd(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Du(n,hd(t,{idToken:r}));Se(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?WT(a.providerUserInfo):[],h=nN(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(h!=null&&h.length),v=f?m:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new Nm(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,w)}async function tN(n){const e=yt(n);await dd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nN(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function WT(n){return n.map(e=>{var{providerId:t}=e,r=Bg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(n,e){const t=await qT(n,{},async()=>{const r=Lu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,u=await HT(n,s,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:r};return n.emulatorConfig&&qa(n.emulatorConfig.host)&&(f.credentials="include"),$T.fetch()(u,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function iN(n,e){return Ya(n,"POST","/v2/accounts:revokeToken",Hg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):d0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=d0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await rN(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,u=new Ta;return r&&(Se(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(Se(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(Se(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ta,this.toJSON())}_performRefresh(){return ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class sr{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=Bg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Nm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Du(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return JP(this,e)}reload(){return tN(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new sr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await dd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(to(this.auth));const e=await this.getIdToken();return await Du(this,YP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,u,h,f,m,v;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,T=(s=t.email)!==null&&s!==void 0?s:void 0,S=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,V=(u=t.photoURL)!==null&&u!==void 0?u:void 0,M=(h=t.tenantId)!==null&&h!==void 0?h:void 0,L=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,Q=(m=t.createdAt)!==null&&m!==void 0?m:void 0,J=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:W,emailVerified:oe,isAnonymous:ce,providerData:X,stsTokenManager:C}=t;Se(W&&C,e,"internal-error");const k=Ta.fromJSON(this.name,C);Se(typeof W=="string",e,"internal-error"),Bi(w,e.name),Bi(T,e.name),Se(typeof oe=="boolean",e,"internal-error"),Se(typeof ce=="boolean",e,"internal-error"),Bi(S,e.name),Bi(V,e.name),Bi(M,e.name),Bi(L,e.name),Bi(Q,e.name),Bi(J,e.name);const A=new sr({uid:W,auth:e,email:T,emailVerified:oe,displayName:w,isAnonymous:ce,photoURL:V,phoneNumber:S,tenantId:M,stsTokenManager:k,createdAt:Q,lastLoginAt:J});return X&&Array.isArray(X)&&(A.providerData=X.map(N=>Object.assign({},N))),L&&(A._redirectEventId=L),A}static async _fromIdTokenResponse(e,t,r=!1){const s=new Ta;s.updateFromServerResponse(t);const a=new sr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await dd(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Se(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?WT(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),h=new Ta;h.updateFromIdToken(r);const f=new sr({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Nm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new Map;function ri(n){ui(n instanceof Function,"Expected a class definition");let e=f0.get(n);return e?(ui(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,f0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}KT.type="NONE";const p0=KT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(n,e,t){return`firebase:${n}:${e}:${t}`}class xa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Fh(this.userKey,s.apiKey,a),this.fullPersistenceKey=Fh("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await hd(this.auth,{idToken:e}).catch(()=>{});return t?sr._fromGetAccountInfoResponse(this.auth,t,e):null}return sr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new xa(ri(p0),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||ri(p0);const u=Fh(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const v=await m._get(u);if(v){let w;if(typeof v=="string"){const T=await hd(e,{idToken:v}).catch(()=>{});if(!T)break;w=await sr._fromGetAccountInfoResponse(e,T,v)}else w=sr._fromJSON(e,v);m!==a&&(h=w),a=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new xa(a,e,r):(a=f[0],h&&await a._set(u,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new xa(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(GT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZT(e))return"Blackberry";if(ex(e))return"Webos";if(QT(e))return"Safari";if((e.includes("chrome/")||XT(e))&&!e.includes("edge/"))return"Chrome";if(JT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function GT(n=xt()){return/firefox\//i.test(n)}function QT(n=xt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XT(n=xt()){return/crios\//i.test(n)}function YT(n=xt()){return/iemobile/i.test(n)}function JT(n=xt()){return/android/i.test(n)}function ZT(n=xt()){return/blackberry/i.test(n)}function ex(n=xt()){return/webos/i.test(n)}function Kg(n=xt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function sN(n=xt()){var e;return Kg(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oN(){return $1()&&document.documentMode===10}function tx(n=xt()){return Kg(n)||JT(n)||ex(n)||ZT(n)||/windows phone/i.test(n)||YT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(n,e=[]){let t;switch(n){case"Browser":t=m0(xt());break;case"Worker":t=`${m0(xt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ha}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,h)=>{try{const f=e(a);u(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lN(n,e={}){return Ya(n,"GET","/v2/passwordPolicy",Hg(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=6;class cN{constructor(e){var t,r,s,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:uN,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,u,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new g0(this),this.idTokenSubscription=new g0(this),this.beforeStateQueue=new aN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ri(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await xa.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await hd(this,{idToken:e}),r=await sr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ir(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===h)&&(f!=null&&f.user)&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await dd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(to(this));const t=e?yt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(to(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(to(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lN(this),t=new cN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await iN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ri(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await xa.create(this,[ri(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(h,this,"internal-error"),h.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&BP(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Yd(n){return yt(n)}class g0{constructor(e){this.auth=e,this.observer=null,this.addObserver=G1(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dN(n){Gg=n}function fN(n){return Gg.loadJS(n)}function pN(){return Gg.gapiScript}function mN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(n,e){const t=go(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(Zi(a,e??{}))return s;Dr(s,"already-initialized")}return t.initialize({options:e})}function yN(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ri);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function vN(n,e,t){const r=Yd(n);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=rx(e),{host:u,port:h}=_N(e),f=h===null?"":`:${h}`,m={url:`${a}//${u}${f}/`},v=Object.freeze({host:u,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(Zi(m,r.config.emulator)&&Zi(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,qa(u)?(cE(`${a}//${u}${f}`),hE("Auth",!0)):wN()}function rx(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function _N(n){const e=rx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:y0(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:y0(u)}}}function y0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function wN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ni("not implemented")}_getIdTokenResponse(e){return ni("not implemented")}_linkToIdToken(e,t){return ni("not implemented")}_getReauthenticationResolver(e){return ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sa(n,e){return QP(n,"POST","/v1/accounts:signInWithIdp",Hg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="http://localhost";class uo extends ix{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=Bg(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new uo(r,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Sa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Sa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Sa(e,t)}buildRequest(){const e={requestUri:EN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Lu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends Qg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends Gu{constructor(){super("facebook.com")}static credential(e){return uo._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $i.credential(e.oauthAccessToken)}catch{return null}}}$i.FACEBOOK_SIGN_IN_METHOD="facebook.com";$i.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends Gu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return uo._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ei.credential(t,r)}catch{return null}}}ei.GOOGLE_SIGN_IN_METHOD="google.com";ei.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Gu{constructor(){super("github.com")}static credential(e){return uo._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.GITHUB_SIGN_IN_METHOD="github.com";qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Gu{constructor(){super("twitter.com")}static credential(e,t){return uo._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Hi.credential(t,r)}catch{return null}}}Hi.TWITTER_SIGN_IN_METHOD="twitter.com";Hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await sr._fromIdTokenResponse(e,r,s),u=v0(r);return new Ua({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=v0(r);return new Ua({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function v0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd extends cr{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,fd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new fd(e,t,r,s)}}function sx(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?fd._fromErrorAndOperation(n,a,e,r):a})}async function IN(n,e,t=!1){const r=await Du(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ua._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TN(n,e,t=!1){const{auth:r}=n;if(ir(r.app))return Promise.reject(to(r));const s="reauthenticate";try{const a=await Du(n,sx(r,s,e,n),t);Se(a.idToken,r,"internal-error");const u=Wg(a.idToken);Se(u,r,"internal-error");const{sub:h}=u;return Se(n.uid===h,r,"user-mismatch"),Ua._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Dr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(n,e,t=!1){if(ir(n.app))return Promise.reject(to(n));const r="signIn",s=await sx(n,r,e),a=await Ua._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}function SN(n,e,t,r){return yt(n).onIdTokenChanged(e,t,r)}function kN(n,e,t){return yt(n).beforeAuthStateChanged(e,t)}function bN(n,e,t,r){return yt(n).onAuthStateChanged(e,t,r)}function AN(n){return yt(n).signOut()}const pd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pd,"1"),this.storage.removeItem(pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=1e3,CN=10;class ax extends ox{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);oN()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,CN):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},RN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ax.type="LOCAL";const PN=ax;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx extends ox{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lx.type="SESSION";const ux=lx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Jd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(u).map(async m=>m(t.origin,a)),f=await NN(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((h,f)=>{const m=Xg("",20);s.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(w){const T=w;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(T.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(){return window}function VN(n){Ar().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}async function ON(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LN(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function MN(){return cx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="firebaseLocalStorageDb",jN=1,md="firebaseLocalStorage",dx="fbase_key";class Qu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Zd(n,e){return n.transaction([md],e?"readwrite":"readonly").objectStore(md)}function FN(){const n=indexedDB.deleteDatabase(hx);return new Qu(n).toPromise()}function Dm(){const n=indexedDB.open(hx,jN);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(md,{keyPath:dx})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(md)?e(r):(r.close(),await FN(),e(await Dm()))})})}async function _0(n,e,t){const r=Zd(n,!0).put({[dx]:e,value:t});return new Qu(r).toPromise()}async function UN(n,e){const t=Zd(n,!1).get(e),r=await new Qu(t).toPromise();return r===void 0?null:r.value}function w0(n,e){const t=Zd(n,!0).delete(e);return new Qu(t).toPromise()}const BN=800,zN=3;class fx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>zN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jd._getInstance(MN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ON(),!this.activeServiceWorker)return;this.sender=new DN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dm();return await _0(e,pd,"1"),await w0(e,pd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>_0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>UN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>w0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Zd(s,!1).getAll();return new Qu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fx.type="LOCAL";const $N=fx;new Ku(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(n,e){return e?ri(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg extends ix{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Sa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Sa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qN(n){return xN(n.auth,new Yg(n),n.bypassAuthState)}function HN(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),TN(t,new Yg(n),n.bypassAuthState)}async function WN(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),IN(t,new Yg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qN;case"linkViaPopup":case"linkViaRedirect":return WN;case"reauthViaPopup":case"reauthViaRedirect":return HN;default:Dr(this.auth,"internal-error")}}resolve(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=new Ku(2e3,1e4);async function GN(n,e,t){if(ir(n.app))return Promise.reject(or(n,"operation-not-supported-in-this-environment"));const r=Yd(n);zP(n,e,Qg);const s=px(r,t);return new Gs(r,"signInViaPopup",e,s).executeNotNull()}class Gs extends mx{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Gs.currentPopupAction&&Gs.currentPopupAction.cancel(),Gs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){ui(this.filter.length===1,"Popup operations only handle one event");const e=Xg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KN.get())};e()}}Gs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="pendingRedirect",Uh=new Map;class XN extends mx{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Uh.get(this.auth._key());if(!e){try{const r=await YN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Uh.set(this.auth._key(),e)}return this.bypassAuthState||Uh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YN(n,e){const t=eD(e),r=ZN(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function JN(n,e){Uh.set(n._key(),e)}function ZN(n){return ri(n._redirectPersistence)}function eD(n){return Fh(QN,n.config.apiKey,n.name)}async function tD(n,e,t=!1){if(ir(n.app))return Promise.reject(to(n));const r=Yd(n),s=px(r,e),u=await new XN(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=600*1e3;class rD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!gx(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(or(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nD&&this.cachedEventUids.clear(),this.cachedEventUids.has(E0(e))}saveEventToCache(e){this.cachedEventUids.add(E0(e)),this.lastProcessedEventTime=Date.now()}}function E0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function gx({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function iD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gx(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(n,e={}){return Ya(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aD=/^https?/;async function lD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await sD(n);for(const t of e)try{if(uD(t))return}catch{}Dr(n,"unauthorized-domain")}function uD(n){const e=Pm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!aD.test(t))return!1;if(oD.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=new Ku(3e4,6e4);function I0(){const n=Ar().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function hD(n){return new Promise((e,t)=>{var r,s,a;function u(){I0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{I0(),t(or(n,"network-request-failed"))},timeout:cD.get()})}if(!((s=(r=Ar().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Ar().gapi)===null||a===void 0)&&a.load)u();else{const h=mN("iframefcb");return Ar()[h]=()=>{gapi.load?u():t(or(n,"network-request-failed"))},fN(`${pN()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw Bh=null,e})}let Bh=null;function dD(n){return Bh=Bh||hD(n),Bh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=new Ku(5e3,15e3),pD="__/auth/iframe",mD="emulator/auth/iframe",gD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vD(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?qg(e,mD):`https://${n.config.authDomain}/${pD}`,r={apiKey:e.apiKey,appName:n.name,v:Ha},s=yD.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Lu(r).slice(1)}`}async function _D(n){const e=await dD(n),t=Ar().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:vD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gD,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const u=or(n,"network-request-failed"),h=Ar().setTimeout(()=>{a(u)},fD.get());function f(){Ar().clearTimeout(h),s(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ED=500,ID=600,TD="_blank",xD="http://localhost";class T0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SD(n,e,t,r=ED,s=ID){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},wD),{width:r.toString(),height:s.toString(),top:a,left:u}),m=xt().toLowerCase();t&&(h=XT(m)?TD:t),GT(m)&&(e=e||xD,f.scrollbars="yes");const v=Object.entries(f).reduce((T,[S,V])=>`${T}${S}=${V},`,"");if(sN(m)&&h!=="_self")return kD(e||"",h),new T0(null);const w=window.open(e||"",h,v);Se(w,n,"popup-blocked");try{w.focus()}catch{}return new T0(w)}function kD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD="__/auth/handler",AD="emulator/auth/handler",RD=encodeURIComponent("fac");async function x0(n,e,t,r,s,a){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ha,eventId:s};if(e instanceof Qg){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",K1(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))u[v]=w}if(e instanceof Gu){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const f=await n._getAppCheckToken(),m=f?`#${RD}=${encodeURIComponent(f)}`:"";return`${CD(n)}?${Lu(h).slice(1)}${m}`}function CD({config:n}){return n.emulator?qg(n,AD):`https://${n.authDomain}/${bD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="webStorageSupport";class PD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ux,this._completeRedirectFn=tD,this._overrideRedirectResult=JN}async _openPopup(e,t,r,s){var a;ui((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await x0(e,t,r,Pm(),s);return SD(e,u,Xg())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await x0(e,t,r,Pm(),s);return VN(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(ui(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await _D(e),r=new rD(e);return t.register("authEvent",s=>(Se(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qp,{type:Qp},s=>{var a;const u=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Qp];u!==void 0&&t(!!u),Dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return tx()||QT()||Kg()}}const ND=PD;var S0="@firebase/auth",k0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OD(n){Rr(new ar("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;Se(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nx(n)},m=new hN(r,s,a,f);return yN(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Rr(new ar("auth-internal",e=>{const t=Yd(e.getProvider("auth").getImmediate());return(r=>new DD(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),jn(S0,k0,VD(n)),jn(S0,k0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=300,MD=uE("authIdTokenMaxAge")||LD;let b0=null;const jD=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>MD)return;const s=t==null?void 0:t.token;b0!==s&&(b0=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function FD(n=Wm()){const e=go(n,"auth");if(e.isInitialized())return e.getImmediate();const t=gN(n,{popupRedirectResolver:ND,persistence:[$N,PN,ux]}),r=uE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=jD(a.toString());kN(t,u,()=>u(t.currentUser)),SN(t,h=>u(h))}}const s=aE("auth");return s&&vN(t,`http://${s}`),t}function UD(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}dN({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=or("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",UD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OD("Browser");const yx="@firebase/installations",Jg="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=1e4,_x=`w:${Jg}`,wx="FIS_v2",BD="https://firebaseinstallations.googleapis.com/v1",zD=3600*1e3,$D="installations",qD="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},co=new mo($D,qD,HD);function Ex(n){return n instanceof cr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix({projectId:n}){return`${BD}/projects/${n}/installations`}function Tx(n){return{token:n.token,requestStatus:2,expiresIn:KD(n.expiresIn),creationTime:Date.now()}}async function xx(n,e){const r=(await e.json()).error;return co.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Sx({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function WD(n,{refreshToken:e}){const t=Sx(n);return t.append("Authorization",GD(e)),t}async function kx(n){const e=await n();return e.status>=500&&e.status<600?n():e}function KD(n){return Number(n.replace("s","000"))}function GD(n){return`${wx} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Ix(n),s=Sx(n),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&s.append("x-firebase-client",m)}const u={fid:t,authVersion:wx,appId:n.appId,sdkVersion:_x},h={method:"POST",headers:s,body:JSON.stringify(u)},f=await kx(()=>fetch(r,h));if(f.ok){const m=await f.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:Tx(m.authToken)}}else throw await xx("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=/^[cdef][\w-]{21}$/,Vm="";function JD(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=ZD(n);return YD.test(t)?t:Vm}catch{return Vm}}function ZD(n){return XD(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=new Map;function Rx(n,e){const t=ef(n);Cx(t,e),e2(t,e)}function Cx(n,e){const t=Ax.get(n);if(t)for(const r of t)r(e)}function e2(n,e){const t=t2();t&&t.postMessage({key:n,fid:e}),n2()}let Qs=null;function t2(){return!Qs&&"BroadcastChannel"in self&&(Qs=new BroadcastChannel("[Firebase] FID Change"),Qs.onmessage=n=>{Cx(n.data.key,n.data.fid)}),Qs}function n2(){Ax.size===0&&Qs&&(Qs.close(),Qs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="firebase-installations-database",i2=1,ho="firebase-installations-store";let Xp=null;function Zg(){return Xp||(Xp=vE(r2,i2,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ho)}}})),Xp}async function gd(n,e){const t=ef(n),s=(await Zg()).transaction(ho,"readwrite"),a=s.objectStore(ho),u=await a.get(t);return await a.put(e,t),await s.done,(!u||u.fid!==e.fid)&&Rx(n,e.fid),e}async function Px(n){const e=ef(n),r=(await Zg()).transaction(ho,"readwrite");await r.objectStore(ho).delete(e),await r.done}async function tf(n,e){const t=ef(n),s=(await Zg()).transaction(ho,"readwrite"),a=s.objectStore(ho),u=await a.get(t),h=e(u);return h===void 0?await a.delete(t):await a.put(h,t),await s.done,h&&(!u||u.fid!==h.fid)&&Rx(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ey(n){let e;const t=await tf(n.appConfig,r=>{const s=s2(r),a=o2(n,s);return e=a.registrationPromise,a.installationEntry});return t.fid===Vm?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function s2(n){const e=n||{fid:JD(),registrationStatus:0};return Nx(e)}function o2(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(co.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=a2(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:l2(n)}:{installationEntry:e}}async function a2(n,e){try{const t=await QD(n,e);return gd(n.appConfig,t)}catch(t){throw Ex(t)&&t.customData.serverCode===409?await Px(n.appConfig):await gd(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function l2(n){let e=await A0(n.appConfig);for(;e.registrationStatus===1;)await bx(100),e=await A0(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await ey(n);return r||t}return e}function A0(n){return tf(n,e=>{if(!e)throw co.create("installation-not-found");return Nx(e)})}function Nx(n){return u2(n)?{fid:n.fid,registrationStatus:0}:n}function u2(n){return n.registrationStatus===1&&n.registrationTime+vx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c2({appConfig:n,heartbeatServiceProvider:e},t){const r=h2(n,t),s=WD(n,t),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&s.append("x-firebase-client",m)}const u={installation:{sdkVersion:_x,appId:n.appId}},h={method:"POST",headers:s,body:JSON.stringify(u)},f=await kx(()=>fetch(r,h));if(f.ok){const m=await f.json();return Tx(m)}else throw await xx("Generate Auth Token",f)}function h2(n,{fid:e}){return`${Ix(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ty(n,e=!1){let t;const r=await tf(n.appConfig,a=>{if(!Dx(a))throw co.create("not-registered");const u=a.authToken;if(!e&&p2(u))return a;if(u.requestStatus===1)return t=d2(n,e),a;{if(!navigator.onLine)throw co.create("app-offline");const h=g2(a);return t=f2(n,h),h}});return t?await t:r.authToken}async function d2(n,e){let t=await R0(n.appConfig);for(;t.authToken.requestStatus===1;)await bx(100),t=await R0(n.appConfig);const r=t.authToken;return r.requestStatus===0?ty(n,e):r}function R0(n){return tf(n,e=>{if(!Dx(e))throw co.create("not-registered");const t=e.authToken;return y2(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function f2(n,e){try{const t=await c2(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await gd(n.appConfig,r),t}catch(t){if(Ex(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Px(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await gd(n.appConfig,r)}throw t}}function Dx(n){return n!==void 0&&n.registrationStatus===2}function p2(n){return n.requestStatus===2&&!m2(n)}function m2(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+zD}function g2(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function y2(n){return n.requestStatus===1&&n.requestTime+vx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v2(n){const e=n,{installationEntry:t,registrationPromise:r}=await ey(e);return r?r.catch(console.error):ty(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _2(n,e=!1){const t=n;return await w2(t),(await ty(t,e)).token}async function w2(n){const{registrationPromise:e}=await ey(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(n){if(!n||!n.options)throw Yp("App Configuration");if(!n.name)throw Yp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Yp(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Yp(n){return co.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="installations",I2="installations-internal",T2=n=>{const e=n.getProvider("app").getImmediate(),t=E2(e),r=go(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},x2=n=>{const e=n.getProvider("app").getImmediate(),t=go(e,Vx).getImmediate();return{getId:()=>v2(t),getToken:s=>_2(t,s)}};function S2(){Rr(new ar(Vx,T2,"PUBLIC")),Rr(new ar(I2,x2,"PRIVATE"))}S2();jn(yx,Jg);jn(yx,Jg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="analytics",k2="firebase_id",b2="origin",A2=60*1e3,R2="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ny="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn=new Id("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},xn=new mo("analytics","Analytics",C2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(n){if(!n.startsWith(ny)){const e=xn.create("invalid-gtag-resource",{gtagURL:n});return pn.warn(e.message),""}return n}function Ox(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function N2(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function D2(n,e){const t=N2("firebase-js-sdk-policy",{createScriptURL:P2}),r=document.createElement("script"),s=`${ny}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function V2(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function O2(n,e,t,r,s,a){const u=r[s];try{if(u)await e[u];else{const f=(await Ox(t)).find(m=>m.measurementId===s);f&&await e[f.appId]}}catch(h){pn.error(h)}n("config",s,a)}async function L2(n,e,t,r,s){try{let a=[];if(s&&s.send_to){let u=s.send_to;Array.isArray(u)||(u=[u]);const h=await Ox(t);for(const f of u){const m=h.find(w=>w.measurementId===f),v=m&&e[m.appId];if(v)a.push(v);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,s||{})}catch(a){pn.error(a)}}function M2(n,e,t,r){async function s(a,...u){try{if(a==="event"){const[h,f]=u;await L2(n,e,t,h,f)}else if(a==="config"){const[h,f]=u;await O2(n,e,t,r,h,f)}else if(a==="consent"){const[h,f]=u;n("consent",h,f)}else if(a==="get"){const[h,f,m]=u;n("get",h,f,m)}else if(a==="set"){const[h]=u;n("set",h)}else n(a,...u)}catch(h){pn.error(h)}}return s}function j2(n,e,t,r,s){let a=function(...u){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=M2(a,n,e,t),{gtagCore:a,wrappedGtag:window[s]}}function F2(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(ny)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=30,B2=1e3;class z2{constructor(e={},t=B2){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Lx=new z2;function $2(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function q2(n){var e;const{appId:t,apiKey:r}=n,s={method:"GET",headers:$2(r)},a=R2.replace("{app-id}",t),u=await fetch(a,s);if(u.status!==200&&u.status!==304){let h="";try{const f=await u.json();!((e=f.error)===null||e===void 0)&&e.message&&(h=f.error.message)}catch{}throw xn.create("config-fetch-failed",{httpStatus:u.status,responseMessage:h})}return u.json()}async function H2(n,e=Lx,t){const{appId:r,apiKey:s,measurementId:a}=n.options;if(!r)throw xn.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:r};throw xn.create("no-api-key")}const u=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new G2;return setTimeout(async()=>{h.abort()},A2),Mx({appId:r,apiKey:s,measurementId:a},u,h,e)}async function Mx(n,{throttleEndTimeMillis:e,backoffCount:t},r,s=Lx){var a;const{appId:u,measurementId:h}=n;try{await W2(r,e)}catch(f){if(h)return pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:u,measurementId:h};throw f}try{const f=await q2(n);return s.deleteThrottleMetadata(u),f}catch(f){const m=f;if(!K2(m)){if(s.deleteThrottleMetadata(u),h)return pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:u,measurementId:h};throw f}const v=Number((a=m==null?void 0:m.customData)===null||a===void 0?void 0:a.httpStatus)===503?N_(t,s.intervalMillis,U2):N_(t,s.intervalMillis),w={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return s.setThrottleMetadata(u,w),pn.debug(`Calling attemptFetch again in ${v} millis`),Mx(n,w,r,s)}}function W2(n,e){return new Promise((t,r)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(a),r(xn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function K2(n){if(!(n instanceof cr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class G2{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Q2(n,e,t,r,s){if(s&&s.global){n("event",t,r);return}else{const a=await e,u=Object.assign(Object.assign({},r),{send_to:a});n("event",t,u)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2(){if(Ed())try{await qm()}catch(n){return pn.warn(xn.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return pn.warn(xn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Y2(n,e,t,r,s,a,u){var h;const f=H2(n);f.then(S=>{t[S.measurementId]=S.appId,n.options.measurementId&&S.measurementId!==n.options.measurementId&&pn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>pn.error(S)),e.push(f);const m=X2().then(S=>{if(S)return r.getId()}),[v,w]=await Promise.all([f,m]);F2(a)||D2(a,v.measurementId),s("js",new Date);const T=(h=u==null?void 0:u.config)!==null&&h!==void 0?h:{};return T[b2]="firebase",T.update=!0,w!=null&&(T[k2]=w),s("config",v.measurementId,T),v.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.app=e}_delete(){return delete gu[this.app.options.appId],Promise.resolve()}}let gu={},C0=[];const P0={};let Jp="dataLayer",Z2="gtag",N0,jx,D0=!1;function eV(){const n=[];if($m()&&n.push("This is a browser extension environment."),mE()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),t=xn.create("invalid-analytics-context",{errorInfo:e});pn.warn(t.message)}}function tV(n,e,t){eV();const r=n.options.appId;if(!r)throw xn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw xn.create("no-api-key");if(gu[r]!=null)throw xn.create("already-exists",{id:r});if(!D0){V2(Jp);const{wrappedGtag:a,gtagCore:u}=j2(gu,C0,P0,Jp,Z2);jx=a,N0=u,D0=!0}return gu[r]=Y2(n,C0,P0,e,N0,Jp,t),new J2(n)}function nV(n=Wm()){n=yt(n);const e=go(n,yd);return e.isInitialized()?e.getImmediate():rV(n)}function rV(n,e={}){const t=go(n,yd);if(t.isInitialized()){const s=t.getImmediate();if(Zi(e,t.getOptions()))return s;throw xn.create("already-initialized")}return t.initialize({options:e})}async function iV(){if($m()||!mE()||!Ed())return!1;try{return await qm()}catch{return!1}}function sV(n,e,t,r){n=yt(n),Q2(jx,gu[n.app.options.appId],e,t,r).catch(s=>pn.error(s))}const V0="@firebase/analytics",O0="0.10.17";function oV(){Rr(new ar(yd,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return tV(r,s,t)},"PUBLIC")),Rr(new ar("analytics-internal",n,"PRIVATE")),jn(V0,O0),jn(V0,O0,"esm2017");function n(e){try{const t=e.getProvider(yd).getImmediate();return{logEvent:(r,s,a)=>sV(t,r,s,a)}}catch(t){throw xn.create("interop-component-reg-failed",{reason:t})}}}oV();const aV={apiKey:"AIzaSyD2bnfNTNjJ4XyVFlM_1PzvGMmnc69VqX8",authDomain:"habit-tracker-pwa-e5a97.firebaseapp.com",projectId:"habit-tracker-pwa-e5a97",storageBucket:"habit-tracker-pwa-e5a97.firebasestorage.app",messagingSenderId:"600484609036",appId:"1:600484609036:web:0650ca5337d57f1b02c229",measurementId:"G-M990KPRLXC"},ry=_E(aV);iV().then(n=>{n&&nV(ry)});const iy=FD(ry),Nt=TP(ry);xP(Nt).catch(n=>{n.code=="failed-precondition"?console.warn("Persistence failed: Multiple tabs open"):n.code=="unimplemented"&&console.warn("Persistence failed: Browser not supported")});const Xu="habits";async function lV(n,e){try{const t=Vr(Nt,Xu);return{id:(await jT(t,{...e,userId:n,currentStreak:0,createdAt:Nu(),updatedAt:Nu()})).id,...e,userId:n,currentStreak:0}}catch(t){throw console.error("Error creating habit:",t),t}}async function uV(n){try{const e=Vr(Nt,Xu),t=ls(e,fn("userId","==",n),Qd("createdAt","desc"));return(await Xa(t)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){throw console.error("Error getting habits:",e),e}}async function L0(n,e){try{const t=is(Nt,Xu,n);return await MP(t,{...e,updatedAt:Nu()}),{id:n,...e}}catch(t){throw console.error("Error updating habit:",t),t}}async function cV(n){try{const e=is(Nt,Xu,n);return await MT(e),n}catch(e){throw console.error("Error deleting habit:",e),e}}function hV(n,e){const t=Vr(Nt,Xu),r=ls(t,fn("userId","==",n),Qd("createdAt","desc"));return FT(r,s=>{const a=s.docs.map(u=>({id:u.id,...u.data()}));e(a)},s=>{console.error("Error in habits subscription:",s)})}function Ws(n){const e=new Date(n),t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${s}`}function M0(n=new Date){const e=new Date(n);e.setDate(e.getDate()-e.getDay()),e.setHours(0,0,0,0);const t=new Date(e);return t.setDate(t.getDate()+6),t.setHours(23,59,59,999),{start:e,end:t}}const Yu="completions";async function dV(n,e,t,r=!0){try{const s=Vr(Nt,Yu);return{id:(await jT(s,{habitId:n,userId:e,date:t,value:r,timestamp:Nu()})).id,habitId:n,userId:e,date:t,value:r}}catch(s){throw console.error("Error adding completion:",s),s}}async function fV(n,e,t){try{const r=Vr(Nt,Yu),s=ls(r,fn("habitId","==",n),fn("userId","==",e),fn("date","==",t)),u=(await Xa(s)).docs.map(h=>MT(h.ref));return await Promise.all(u),{habitId:n,userId:e,date:t}}catch(r){throw console.error("Error removing completion:",r),r}}async function pV(n,e,t,r=!0){try{const s=Vr(Nt,Yu),a=ls(s,fn("habitId","==",n),fn("userId","==",e),fn("date","==",t));return(await Xa(a)).empty?await dV(n,e,t,r):(await fV(n,e,t),null)}catch(s){throw console.error("Error toggling completion:",s),s}}async function mV(n,e){try{const t=Vr(Nt,Yu),r=ls(t,fn("userId","==",n),fn("date","==",e));return(await Xa(r)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Error getting completions:",t),t}}async function gV(n,e,t){try{const r=Vr(Nt,Yu),s=ls(r,fn("userId","==",n),fn("date",">=",e),fn("date","<=",t));return(await Xa(s)).docs.map(u=>({id:u.id,...u.data()}))}catch(r){throw console.error("Error getting completions range:",r),r}}const Fx="weeklyStats",yV="users";function nf(n=new Date){const e=new Date(n);e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);const t=new Date(e.getFullYear(),0,4),r=Math.ceil(((e.getTime()-t.getTime())/864e5+t.getDay()+1)/7);return`${e.getFullYear()}-W${String(r).padStart(2,"0")}`}async function vV(n,e,t){try{const r=nf(),s=e>0?Math.round(t/e*100):0,a=is(Nt,Fx,`${r}_${n}`);return await LT(a,{weekId:r,userId:n,totalScheduled:e,totalCompleted:t,percentage:s,lastUpdated:new Date().toISOString()},{merge:!0}),{weekId:r,userId:n,percentage:s}}catch(r){throw console.error("Error updating weekly stats:",r),r}}function _V(){const n=new Date;return n.setDate(n.getDate()-7),nf(n)}function wV(n,e){const t=n||nf(),r=Vr(Nt,Fx),s=ls(r,fn("weekId","==",t),Qd("percentage","desc"));return FT(s,async a=>{const u=a.docs.map(f=>({id:f.id,...f.data()})),h=await Promise.all(u.map(async(f,m)=>{try{const v=is(Nt,yV,f.userId),w=await ud(v),T=w.exists()?w.data():{};return{...f,rank:m+1,displayName:T.displayName||"Anonymous",photoURL:T.photoURL||null}}catch{return{...f,rank:m+1,displayName:"Anonymous",photoURL:null}}}));e(h)},a=>{console.error("Error in leaderboard subscription:",a)})}const fo=nE((n,e)=>({habits:[],completions:{},isLoading:!1,error:null,setHabits:t=>n({habits:t}),setLoading:t=>n({isLoading:t}),setError:t=>n({error:t}),addHabit:async(t,r)=>{const s="temp_"+Date.now(),a={id:s,...r,userId:t,currentStreak:0,createdAt:new Date,updatedAt:new Date,isTemp:!0};return n(u=>({habits:[a,...u.habits],isLoading:!1})),lV(t,r).then(u=>{n(h=>({habits:h.habits.map(f=>f.id===s?u:f)}))}).catch(u=>{console.error("Background create failed:",u),n(h=>({error:"Failed to sync new habit. It may disappear on reload.",habits:h.habits.map(f=>f.id===s?{...f,syncError:!0}:f)}))}),a},updateHabit:async(t,r)=>{n(s=>({habits:s.habits.map(a=>a.id===t?{...a,...r}:a)}));try{await L0(t,r)}catch(s){console.error("Error in updateHabit:",s),n({error:s.message})}},deleteHabit:async t=>{n(r=>({habits:r.habits.filter(s=>s.id!==t)}));try{await cV(t)}catch(r){console.error("Error in deleteHabit:",r)}},loadHabits:async t=>{n({isLoading:!0,error:null});try{const r=await uV(t);return n({habits:r,isLoading:!1}),r}catch(r){throw console.error("Error in loadHabits:",r),n({error:r.message,isLoading:!1,habits:[]}),r}},subscribeToHabits:t=>(e().habits.length===0&&n({isLoading:!0}),hV(t,r=>{n({habits:r,isLoading:!1})})),setCompletions:(t,r)=>n(s=>({completions:{...s.completions,[t]:r}})),loadCompletionsForWeek:async t=>{try{const{start:r,end:s}=M0(new Date),a=Ws(s),u=Ws(r),h=await gV(t,u,a),f={};return h.forEach(m=>{f[m.date]||(f[m.date]=[]),f[m.date].push(m)}),n(m=>({completions:{...m.completions,...f}})),f}catch(r){return console.error("Error loading completions:",r),{}}},loadCompletionsForDate:async(t,r)=>{try{const s=await mV(t,r);return n(a=>({completions:{...a.completions,[r]:s}})),s}catch(s){return console.error("Error loading completions:",s),[]}},toggleCompletion:async(t,r,s)=>{const{completions:a,habits:u}=e(),h=a[s]||[],f=u.find(S=>S.id===t),m=Ws(new Date);if(s>m){console.warn("Cannot mark future habits as done");return}const w=!h.find(S=>S.habitId===t);let T;if(w?T=[...h,{habitId:t,userId:r,date:s,value:!0,isOptimistic:!0}]:T=h.filter(S=>S.habitId!==t),n(S=>({completions:{...S.completions,[s]:T}})),f){let S=f.currentStreak;w?S=(f.currentStreak||0)+1:S=Math.max(0,(f.currentStreak||0)-1),n(V=>({habits:V.habits.map(M=>M.id===t?{...M,currentStreak:S}:M)})),L0(t,{currentStreak:S}).catch(V=>console.error("Background streak update failed:",V))}try{const{start:S,end:V}=M0(new Date);let M=0,L=0;const Q=new Date(S),J=e().completions;for(;Q<=V;){const W=Ws(Q),oe=e().getTodaysHabits(Q);M+=oe.length;const ce=J[W]||[];L+=ce.length,Q.setDate(Q.getDate()+1)}vV(r,M,L).catch(W=>console.error("Background leaderboard update failed:",W))}catch(S){console.error("Error updating weekly stats:",S)}try{await pV(t,r,s,w)}catch(S){throw console.error("Error toggling completion in Firestore:",S),S}},isHabitCompleted:(t,r)=>{const{completions:s}=e();return(s[r]||[]).some(u=>u.habitId===t)},getTodaysHabits:(t=null)=>{const{habits:r}=e(),a=(t?new Date(t):new Date).getDay();return r.filter(u=>{var h,f;return u.frequency==="daily"?!0:u.frequency==="custom"&&u.customDays?u.customDays.includes(a):u.frequency==="weekly"?(((f=(h=u.createdAt)==null?void 0:h.toDate)==null?void 0:f.call(h))||new Date(u.createdAt)).getDay()===a:!0})},getStatsForDate:t=>{const{completions:r}=e(),s=e().getTodaysHabits(t),a=typeof t=="string"?t:Ws(t),h=(r[a]||[]).length,f=s.length,m=f>0?Math.round(h/f*100):0;return{completed:h,total:f,percentage:m}},clearAll:()=>n({habits:[],completions:{},isLoading:!1,error:null})})),EV=new ei;async function IV(){try{const e=(await GN(iy,EV)).user,t=is(Nt,"users",e.uid);return(await ud(t)).exists()||await LT(t,{displayName:e.displayName,email:e.email,photoURL:e.photoURL,createdAt:Nu()}),e}catch(n){throw console.error("Error signing in with Google:",n),n}}async function TV(){try{await AN(iy)}catch(n){throw console.error("Error signing out:",n),n}}function Ja({size:n="md",className:e=""}){const t={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-10 w-10"};return E.jsxs("svg",{className:`animate-spin text-primary ${t[n]} ${e}`,fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[E.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),E.jsx("path",{className:"opacity-75",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",fill:"currentColor"})]})}const xV={primary:"bg-primary text-text-light-primary shadow-[0_4px_14px_rgba(19,236,91,0.3)] hover:shadow-[0_4px_20px_rgba(19,236,91,0.4)]",secondary:"bg-transparent text-text-light-primary dark:text-text-dark-primary border border-border-light dark:border-border-dark hover:bg-gray-100 dark:hover:bg-gray-800",danger:"bg-transparent text-danger hover:bg-danger/10",google:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 shadow-sm"},SV={sm:"h-10 px-4 text-sm",md:"h-12 px-6 text-base",lg:"h-14 px-8 text-base"};function Ji({children:n,variant:e="primary",size:t="md",fullWidth:r=!1,isLoading:s=!1,disabled:a=!1,icon:u,className:h="",...f}){return E.jsx("button",{className:`
        flex items-center justify-center gap-2.5 rounded-xl font-bold
        transition-all duration-200 ease-out
        disabled:opacity-50 disabled:cursor-not-allowed
        ${xV[e]}
        ${SV[t]}
        ${r?"w-full":""}
        ${h}
      `,disabled:a||s,...f,children:s?E.jsx(Ja,{size:"sm"}):E.jsxs(E.Fragment,{children:[u&&E.jsx("span",{className:"material-symbols-outlined text-xl",children:u}),n]})})}function kV(){const[n,e]=q.useState(!1),[t,r]=q.useState(null),s=ur(),{isAuthenticated:a}=po();q.useEffect(()=>{a&&s("/dashboard",{replace:!0})},[a,s]);const u=async()=>{e(!0),r(null);try{await IV(),s("/dashboard")}catch(f){console.error("Sign in error:",f),r("Failed to sign in. Please try again.")}finally{e(!1)}},h=[{icon:"local_fire_department",title:"Track Streaks",description:"Never miss a day and watch your streaks grow."},{icon:"leaderboard",title:"Join Leaderboards",description:"Compete weekly and celebrate wins."},{icon:"share",title:"Share Progress",description:"Share your journey or keep it private."}];return a?null:E.jsx("div",{className:"relative flex h-auto min-h-screen w-full flex-col bg-background-light dark:bg-background-dark font-display overflow-x-hidden",children:E.jsxs("div",{className:"flex flex-col grow justify-between",children:[E.jsxs("div",{className:"flex flex-col",children:[E.jsx("div",{className:"p-4",children:E.jsx("div",{className:"w-full bg-center bg-no-repeat bg-cover flex flex-col justify-end overflow-hidden rounded-xl min-h-80",style:{backgroundImage:`linear-gradient(135deg, 
                  rgba(19, 236, 91, 0.3) 0%, 
                  rgba(16, 34, 22, 0.5) 50%, 
                  rgba(19, 236, 91, 0.2) 100%),
                  url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 300'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%2313ec5b;stop-opacity:0.3'/%3E%3Cstop offset='100%25' style='stop-color:%23102216;stop-opacity:0.8'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill='url(%23grad)' width='400' height='300'/%3E%3Ccircle cx='100' cy='150' r='60' fill='%2313ec5b' opacity='0.2'/%3E%3Ccircle cx='300' cy='100' r='80' fill='%2313ec5b' opacity='0.15'/%3E%3Ccircle cx='250' cy='220' r='50' fill='%2313ec5b' opacity='0.25'/%3E%3C/svg%3E")`},children:E.jsx("div",{className:"p-6 flex items-center justify-center",children:E.jsx("span",{className:"material-symbols-outlined text-primary text-6xl",children:"eco"})})})}),E.jsx("h1",{className:"text-text-light-primary dark:text-gray-100 tracking-tight text-[32px] font-bold leading-tight px-4 text-center pb-3 pt-6",children:"Build Better Habits, Together."}),E.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-base font-normal leading-normal pb-3 pt-1 px-4 text-center",children:"Track your progress, compete with friends, and stay motivated every day."}),E.jsx("div",{className:"flex overflow-x-auto no-scrollbar",children:E.jsx("div",{className:"flex items-stretch p-4 gap-4 w-full",children:h.map(f=>E.jsxs("div",{className:"flex h-full flex-1 flex-col items-center gap-2 text-center rounded-lg min-w-32 pt-4",children:[E.jsx("div",{className:"flex items-center justify-center bg-primary/20 dark:bg-primary/30 h-14 w-14 rounded-full",children:E.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:f.icon})}),E.jsxs("div",{children:[E.jsx("p",{className:"text-text-light-primary dark:text-gray-100 text-base font-medium leading-normal",children:f.title}),E.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-normal leading-normal",children:f.description})]})]},f.title))})}),E.jsxs("div",{className:"flex w-full flex-row items-center justify-center gap-3 py-5",children:[E.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"}),E.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-300 dark:bg-gray-600"}),E.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-300 dark:bg-gray-600"})]})]}),E.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[t&&E.jsx("p",{className:"text-danger text-sm text-center",children:t}),E.jsx("button",{onClick:u,disabled:n,className:"flex h-12 w-full items-center justify-center gap-2.5 rounded-lg bg-primary px-6 text-base font-bold text-gray-900 dark:text-black disabled:opacity-50 transition-all hover:shadow-lg",children:n?E.jsx("span",{className:"animate-spin",children:""}):E.jsxs(E.Fragment,{children:[E.jsxs("svg",{"aria-hidden":"true",className:"h-6 w-6",fill:"none",height:"24",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:[E.jsx("path",{d:"M22.56 12.25C22.56 11.45 22.49 10.68 22.36 9.92H12V14.3H18.05C17.78 15.68 17.06 16.85 15.96 17.65V20.12H19.64C21.55 18.35 22.56 15.54 22.56 12.25Z",fill:"#4285F4"}),E.jsx("path",{d:"M12 23C14.97 23 17.52 22.02 19.64 20.12L15.96 17.65C14.99 18.31 13.62 18.72 12 18.72C9.09 18.72 6.6 16.83 5.75 14.15H1.97V16.7C3.86 20.48 7.64 23 12 23Z",fill:"#34A853"}),E.jsx("path",{d:"M5.75 14.15C5.55 13.59 5.45 12.98 5.45 12.35C5.45 11.72 5.55 11.11 5.75 10.55V7.98H1.97C1.22 9.38 0.77 10.83 0.77 12.35C0.77 13.87 1.22 15.32 1.97 16.7L5.75 14.15Z",fill:"#FBBC05"}),E.jsx("path",{d:"M12 5.98C13.72 5.98 15.14 6.58 16.22 7.59L19.71 4.1C17.52 2.19 14.97 1 12 1C7.64 1 3.86 3.52 1.97 7.98L5.75 10.55C6.6 7.87 9.09 5.98 12 5.98Z",fill:"#EA4335"})]}),"Continue with Google"]})})]})]})})}const bV=[{path:"/dashboard",icon:"home",label:"Dashboard"},{path:"/leaderboard",icon:"leaderboard",label:"Leaderboard"},{path:"/feed",icon:"feed",label:"Feed"},{path:"/settings",icon:"settings",label:"Settings"}];function Ju(){return E.jsx("nav",{className:"fixed bottom-0 left-0 right-0 h-20 bg-content-light/80 dark:bg-content-dark/80 backdrop-blur-lg border-t border-border-light dark:border-border-dark z-20",children:E.jsx("div",{className:"flex justify-around items-center h-full max-w-md mx-auto",children:bV.map(n=>E.jsx(eE,{to:n.path,className:({isActive:e})=>`flex flex-col items-center justify-center gap-1 transition-colors ${e?"text-primary":"text-text-light-secondary dark:text-text-dark-secondary"}`,children:({isActive:e})=>E.jsxs(E.Fragment,{children:[E.jsx("span",{className:`material-symbols-outlined ${e?"filled":""}`,style:e?{fontVariationSettings:"'FILL' 1, 'wght' 400"}:{},children:n.icon}),E.jsx("span",{className:`text-xs ${e?"font-bold":""}`,children:n.label})]})},n.path))})})}const AV=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function RV({selectedDate:n,onDateSelect:e,completionsByDate:t={}}){const r=new Date;r.setHours(0,0,0,0);const s=q.useMemo(()=>{const v=[],w=new Date(r),T=r.getDay();w.setDate(r.getDate()-T);for(let S=0;S<7;S++){const V=new Date(w);V.setDate(w.getDate()+S),v.push(V)}return v},[]),a=v=>v.toDateString()===r.toDateString(),u=v=>n?v.toDateString()===new Date(n).toDateString():a(v),h=v=>v.toISOString().split("T")[0],f=v=>{const w=h(v);return t[w]&&t[w].length>0},m=v=>v<r&&!a(v);return E.jsx("div",{className:"flex overflow-x-auto no-scrollbar pt-2 pb-4 px-4",children:E.jsx("div",{className:"flex space-x-3",children:s.map(v=>{const w=u(v),T=f(v),S=m(v);return E.jsxs("button",{onClick:()=>e==null?void 0:e(v),className:`
                flex flex-col items-center justify-center w-14 h-24 rounded-xl flex-shrink-0 transition-all
                ${w?"bg-primary":"bg-content-light dark:bg-content-dark border border-border-light dark:border-border-dark"}
              `,children:[E.jsx("p",{className:`text-sm font-medium ${w?"text-text-light-primary":"text-text-light-secondary dark:text-text-dark-secondary"}`,children:AV[v.getDay()]}),E.jsx("p",{className:`text-lg font-bold mt-1 ${w?"text-text-light-primary":"text-text-light-primary dark:text-text-dark-primary"}`,children:v.getDate()}),E.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${w?"bg-text-light-primary":T?"bg-primary":S?"bg-text-light-secondary/30 dark:bg-text-dark-secondary/30":"bg-text-light-secondary dark:bg-text-dark-secondary/50"}`})]},v.toISOString())})})})}function CV({streak:n,size:e="md"}){if(!n||n===0)return null;const t={sm:"text-xs",md:"text-sm",lg:"text-base"};return E.jsxs("span",{className:`text-text-light-secondary dark:text-text-dark-secondary ${t[e]}`,children:[" ",n," ",n===1?"day":"days"]})}function PV({habit:n,isCompleted:e,onToggle:t,showCheckbox:r=!0,disabled:s=!1}){const a=ur(),u=()=>{a(`/habit/${n.id}`)},h=f=>{f.stopPropagation(),!s&&t(n.id)};return E.jsxs("div",{className:`flex items-center gap-x-4 p-4 rounded-lg bg-content-light dark:bg-content-dark cursor-pointer transition-colors ${s?"opacity-70 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-gray-800/50"}`,onClick:s?void 0:u,children:[E.jsx("div",{className:"flex-grow",children:E.jsxs("p",{className:"text-text-light-primary dark:text-text-dark-primary text-base font-normal leading-normal",children:[n.title," ",n.currentStreak>0&&E.jsx(CV,{streak:n.currentStreak})]})}),E.jsx("span",{className:"material-symbols-outlined text-text-light-secondary dark:text-text-dark-secondary text-base",children:n.isPublic?"public":"lock"}),r&&E.jsx("input",{type:"checkbox",checked:e,onChange:h,onClick:f=>f.stopPropagation(),disabled:s,className:`h-6 w-6 rounded-md border-border-light dark:border-border-dark border-2 bg-transparent text-primary checked:bg-primary checked:border-primary focus:ring-0 focus:ring-offset-0 focus:border-border-light dark:focus:border-border-dark focus:outline-none ${s?"cursor-not-allowed opacity-50":"cursor-pointer"}`})]})}function NV(){var N;const n=ur(),{user:e}=po(),{habits:t,completions:r,isLoading:s,getTodaysHabits:a,getStatsForDate:u,isHabitCompleted:h,toggleCompletion:f,loadCompletionsForDate:m,subscribeToHabits:v}=fo(),[w,T]=q.useState(new Date),V=Ws(new Date),M=Ws(w),L=M===V,Q=M>V,J=a(w),{completed:W,total:oe,percentage:ce}=u(M);q.useEffect(()=>{e!=null&&e.uid&&m(e.uid,M)},[M,e==null?void 0:e.uid,m]),q.useEffect(()=>{if(e!=null&&e.uid){const D=v(e.uid);return()=>D()}},[e==null?void 0:e.uid,v]);const X=()=>{const D=new Date().getHours();return D<12?"Good Morning":D<18?"Good Afternoon":"Good Evening"},C=((N=e==null?void 0:e.displayName)==null?void 0:N.split(" ")[0])||"there",k=async D=>{if(e!=null&&e.uid)try{await f(D,e.uid,M)}catch(j){console.error("Error toggling completion:",j)}},A=D=>{T(D)};return E.jsxs("div",{className:"relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden",children:[E.jsxs("div",{className:"flex-grow pb-28",children:[E.jsxs("div",{className:"md:min-h-[50vh] md:flex md:flex-col md:justify-center md:bg-gray-50/50 md:dark:bg-gray-900/50",children:[E.jsxs("div",{className:"flex items-center bg-background-light dark:bg-background-dark md:bg-transparent p-4 pb-2 justify-between sticky top-0 z-10 md:static",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"flex size-12 shrink-0 items-center justify-center",children:e!=null&&e.photoURL?E.jsx("img",{src:e.photoURL,alt:"Profile",className:"rounded-full size-10 object-cover",referrerPolicy:"no-referrer"}):E.jsx("div",{className:"rounded-full size-10 bg-primary/20 flex items-center justify-center",children:E.jsx("span",{className:"material-symbols-outlined text-primary",children:"person"})})}),E.jsxs("h2",{className:"text-text-light-primary dark:text-text-dark-primary text-lg font-bold leading-tight tracking-[-0.015em] flex-1",children:[X(),", ",C,"!"]})]}),E.jsx("div",{className:"flex w-12 items-center justify-end",children:E.jsx("button",{className:"flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 bg-transparent text-text-light-primary dark:text-text-dark-primary gap-2 text-base font-bold leading-normal tracking-[0.015em] min-w-0 p-0",children:E.jsx("span",{className:"material-symbols-outlined",children:"calendar_today"})})})]}),E.jsxs("div",{className:"flex flex-col gap-3 p-4",children:[E.jsxs("div",{className:"flex gap-6 justify-between items-center",children:[E.jsxs("p",{className:"text-text-light-primary dark:text-text-dark-primary text-base font-medium leading-normal",children:[L?"You've completed":"Completed"," ",W," of ",oe," habits",L?" today":"","!"]}),E.jsxs("p",{className:"text-text-light-secondary dark:text-text-dark-secondary text-sm font-normal leading-normal",children:[ce,"%"]})]}),E.jsx("div",{className:"rounded-full bg-border-light dark:bg-border-dark/50",children:E.jsx("div",{className:"h-2 rounded-full bg-primary transition-all duration-500 ease-out",style:{width:`${ce}%`}})}),E.jsx("p",{className:"text-text-light-secondary dark:text-text-dark-secondary text-sm font-normal leading-normal",children:ce>=100?" All done!":ce>0?"Keep it up!":oe===0?"No habits scheduled":"Start completing your habits!"})]}),E.jsx(RV,{selectedDate:w,onDateSelect:A,completionsByDate:r})]}),E.jsx("h3",{className:"text-text-light-primary dark:text-text-dark-primary text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-2",children:L?"Today's Habits":`Habits for ${w.toLocaleDateString("en-US",{weekday:"long"})}`}),E.jsx("div",{className:"px-4 flex flex-col gap-2",children:s?E.jsx("div",{className:"flex justify-center py-12",children:E.jsx(Ja,{})}):J.length===0?E.jsxs("div",{className:"text-center py-12",children:[E.jsx("span",{className:"material-symbols-outlined text-4xl text-gray-400 mb-2 block",children:"checklist"}),E.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:t.length===0?"No habits yet":"No habits scheduled for this day"}),t.length===0&&E.jsx("button",{onClick:()=>n("/new-habit"),className:"text-primary font-medium hover:underline",children:"Create your first habit"})]}):J.map(D=>E.jsx(PV,{habit:D,isCompleted:h(D.id,M),onToggle:k,disabled:Q},D.id))})]}),E.jsx("div",{className:"fixed bottom-24 right-4 z-20",children:E.jsx("button",{onClick:()=>n("/new-habit"),className:"flex items-center justify-center size-14 cursor-pointer overflow-hidden rounded-full bg-primary text-text-light-primary shadow-lg hover:shadow-xl transition-shadow animate-pulse-glow",children:E.jsx("span",{className:"material-symbols-outlined text-3xl",children:"add"})})}),E.jsx(Ju,{})]})}function Ux({label:n,id:e,error:t,className:r="",...s}){return E.jsxs("div",{className:"flex flex-col",children:[n&&E.jsx("label",{htmlFor:e,className:"text-base font-medium leading-normal pb-2 text-gray-800 dark:text-gray-400 uppercase tracking-wide",children:n}),E.jsx("input",{id:e,className:`
          form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden 
          rounded-lg border border-gray-200 dark:border-gray-700 
          bg-white dark:bg-gray-800 
          h-14 p-4 
          text-base font-normal leading-normal 
          text-text-light-primary dark:text-white 
          placeholder:text-gray-400 dark:placeholder:text-gray-500 
          focus:border-primary focus:ring-primary/50 focus:ring-2 focus:outline-none
          transition-colors
          ${t?"border-danger focus:border-danger focus:ring-danger/50":""}
          ${r}
        `,...s}),t&&E.jsx("p",{className:"mt-1 text-sm text-danger",children:t})]})}function sy({checked:n,onChange:e,label:t,description:r}){return E.jsxs("div",{className:"flex flex-col",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[t&&E.jsx("h3",{className:"text-base font-medium leading-tight tracking-[-0.015em] text-gray-800 dark:text-gray-400 uppercase",children:t}),E.jsxs("label",{className:"relative inline-flex cursor-pointer items-center",children:[E.jsx("input",{type:"checkbox",checked:n,onChange:s=>e(s.target.checked),className:"peer sr-only"}),E.jsx("div",{className:"peer h-6 w-11 rounded-full bg-gray-200 dark:bg-gray-700 after:absolute after:top-[2px] after:left-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 dark:after:border-gray-600 after:bg-white after:transition-all peer-checked:bg-primary peer-checked:after:translate-x-full peer-checked:after:border-white"})]})]}),r&&E.jsx("p",{className:"pt-2 text-sm text-gray-500 dark:text-gray-400",children:r})]})}const DV=[{key:0,label:"S",name:"Sunday"},{key:1,label:"M",name:"Monday"},{key:2,label:"T",name:"Tuesday"},{key:3,label:"W",name:"Wednesday"},{key:4,label:"T",name:"Thursday"},{key:5,label:"F",name:"Friday"},{key:6,label:"S",name:"Saturday"}];function Bx({isOpen:n,onClose:e,selectedDays:t=[],onSave:r}){const[s,a]=q.useState(t),u=f=>{a(m=>m.includes(f)?m.filter(v=>v!==f):[...m,f])},h=()=>{r(s),e()};return n?E.jsx("div",{className:"fixed inset-0 z-50 flex items-end bg-black/50 backdrop-blur-sm animate-fade-in",children:E.jsxs("div",{className:"flex h-auto w-full flex-col rounded-t-xl bg-background-light dark:bg-gray-800 animate-slide-up",children:[E.jsxs("div",{className:"relative flex items-center justify-center border-b border-gray-200 p-4 dark:border-gray-700",children:[E.jsx("h2",{className:"text-lg font-bold text-text-light-primary dark:text-text-dark-primary",children:"Select Days"}),E.jsx("button",{onClick:e,className:"absolute right-4 top-1/2 -translate-y-1/2",children:E.jsx("span",{className:"material-symbols-outlined !text-2xl text-gray-500 dark:text-gray-400",children:"close"})})]}),E.jsxs("div",{className:"p-4",children:[E.jsx("p",{className:"mb-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"Choose the specific days of the week you want to track this habit."}),E.jsx("div",{className:"flex justify-center gap-2",children:DV.map(f=>{const m=s.includes(f.key);return E.jsx("button",{onClick:()=>u(f.key),className:`
                    relative flex h-12 w-12 cursor-pointer flex-col items-center justify-center rounded-full border transition-all
                    ${m?"border-primary bg-primary text-black":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 text-text-light-primary dark:text-text-dark-primary hover:border-primary/50"}
                  `,title:f.name,children:E.jsx("span",{className:"font-bold",children:f.label})},f.key)})})]}),E.jsx("div",{className:"p-4 pt-2 pb-6",children:E.jsx(Ji,{fullWidth:!0,onClick:h,disabled:s.length===0,children:"Save"})})]})}):null}const VV=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"custom",label:"More"}],OV=[{value:"checkbox",icon:"check_box",label:"Checkbox"},{value:"numerical",icon:"pin",label:"Numerical"}];function LV(){const n=ur(),{user:e}=po(),{addHabit:t}=fo(),[r,s]=q.useState(""),[a,u]=q.useState("daily"),[h,f]=q.useState([]),[m,v]=q.useState("checkbox"),[w,T]=q.useState(!1),[S,V]=q.useState(!1),[M,L]=q.useState(!1),[Q,J]=q.useState(null),W=r.trim().length>0,oe=X=>{u(X),X==="custom"&&V(!0)},ce=async()=>{if(!(!W||M||!(e!=null&&e.uid))){L(!0),J(null);try{const X={title:r.trim(),description:"",frequency:a,customDays:a==="custom"?h:[],completionType:m,targetValue:null,isPublic:!w};await t(e.uid,X),n("/dashboard")}catch(X){console.error("Failed to create habit:",X),J("Failed to create habit. Please try again.")}finally{L(!1)}}};return E.jsxs("div",{className:"relative flex h-auto min-h-screen w-full flex-col bg-background-light dark:bg-background-dark overflow-x-hidden",children:[E.jsxs("header",{className:"flex items-center p-4",children:[E.jsx("button",{onClick:()=>n(-1),className:"flex size-12 shrink-0 items-center justify-start text-text-light-primary dark:text-gray-200",children:E.jsx("span",{className:"material-symbols-outlined !text-2xl",children:"arrow_back_ios_new"})}),E.jsx("h1",{className:"flex-1 text-center text-lg font-bold leading-tight tracking-[-0.015em] text-text-light-primary dark:text-gray-200",children:"New Habit"}),E.jsx("div",{className:"flex w-12 items-center justify-end",children:E.jsx("button",{onClick:ce,disabled:!W||M,className:`text-base font-bold leading-normal tracking-[0.015em] shrink-0 ${W&&!M?"text-primary":"text-primary/50 dark:text-primary/70"}`,children:"Save"})})]}),E.jsxs("main",{className:"flex flex-col gap-6 px-4 pt-4 pb-6",children:[Q&&E.jsx("div",{className:"p-3 rounded-lg bg-danger/10 text-danger text-sm",children:Q}),E.jsx(Ux,{label:"Name",id:"habitName",placeholder:"e.g., Read for 15 minutes",value:r,onChange:X=>s(X.target.value)}),E.jsxs("div",{className:"flex flex-col",children:[E.jsx("h3",{className:"text-base font-medium leading-tight tracking-[-0.015em] pb-2 text-gray-800 dark:text-gray-400 uppercase",children:"Frequency"}),E.jsx("div",{className:"flex h-12 flex-1 items-center justify-center rounded-lg bg-gray-200/60 dark:bg-gray-800 p-1",children:VV.map(X=>E.jsxs("label",{className:`
                  flex h-full flex-1 cursor-pointer items-center justify-center overflow-hidden rounded-md px-2 
                  text-sm font-medium leading-normal transition-all
                  ${a===X.value?"bg-white dark:bg-gray-900 text-text-light-primary dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400"}
                `,children:[E.jsxs("span",{className:"flex items-center gap-1",children:[X.label,X.value==="custom"&&E.jsx("span",{className:"material-symbols-outlined !text-base",children:"expand_more"})]}),E.jsx("input",{type:"radio",name:"frequency",value:X.value,checked:a===X.value,onChange:()=>oe(X.value),className:"invisible w-0"})]},X.value))}),a==="custom"&&h.length>0&&E.jsxs("button",{onClick:()=>V(!0),className:"mt-2 text-sm text-primary hover:underline text-left",children:[h.length," days selected - tap to edit"]}),a==="custom"&&h.length===0&&E.jsx("button",{onClick:()=>V(!0),className:"mt-2 text-sm text-gray-500 hover:text-primary text-left",children:"Click to select days"})]}),E.jsxs("div",{className:"flex flex-col",children:[E.jsx("h3",{className:"text-base font-medium leading-tight tracking-[-0.015em] pb-2 text-gray-800 dark:text-gray-400 uppercase",children:"How will you track it?"}),E.jsx("div",{className:"grid grid-cols-2 gap-3",children:OV.map(X=>E.jsxs("label",{className:`
                  flex cursor-pointer flex-col items-center justify-center gap-2 rounded-lg border-2 p-4 py-6 text-center transition-all
                  ${m===X.value?"border-primary bg-primary/10 dark:bg-primary/20 text-primary":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300"}
                `,children:[E.jsx("span",{className:"material-symbols-outlined !text-3xl",children:X.icon}),E.jsx("span",{className:"font-medium",children:X.label}),E.jsx("input",{type:"radio",name:"tracking_type",value:X.value,checked:m===X.value,onChange:()=>v(X.value),className:"invisible w-0"})]},X.value))})]}),E.jsx(sy,{label:"Make it private?",description:"Private habits will not appear on the community feed or your profile.",checked:w,onChange:T})]}),E.jsx("footer",{className:"mt-auto px-4 pb-6 pt-4",children:E.jsx(Ji,{fullWidth:!0,onClick:ce,isLoading:M,disabled:!W,children:"Add Habit"})}),E.jsx(Bx,{isOpen:S,onClose:()=>V(!1),selectedDays:h,onSave:f})]})}const MV=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"custom",label:"More"}],jV=[{value:"checkbox",icon:"check_box",label:"Checkbox"},{value:"numerical",icon:"pin",label:"Numerical"}];function FV(){const{habitId:n}=W0(),e=ur(),{habits:t,updateHabit:r}=fo(),s=t.find(X=>X.id===n),[a,u]=q.useState(""),[h,f]=q.useState("daily"),[m,v]=q.useState([]),[w,T]=q.useState("checkbox"),[S,V]=q.useState(!1),[M,L]=q.useState(!1),[Q,J]=q.useState(!1);if(q.useEffect(()=>{s&&(u(s.title||""),f(s.frequency||"daily"),v(s.customDays||[]),T(s.completionType||"checkbox"),V(!s.isPublic))},[s]),!s)return E.jsx("div",{className:"min-h-screen bg-background-light dark:bg-background-dark flex items-center justify-center",children:E.jsxs("div",{className:"text-center",children:[E.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Habit not found"}),E.jsx(Ji,{onClick:()=>e("/dashboard"),children:"Back to Dashboard"})]})});const W=a.trim().length>0,oe=X=>{f(X),X==="custom"&&L(!0)},ce=async()=>{if(!(!W||Q)){J(!0);try{await r(n,{title:a.trim(),frequency:h,customDays:h==="custom"?m:[],completionType:w,isPublic:!S}),e(`/habit/${n}`)}catch(X){console.error("Failed to update habit:",X)}finally{J(!1)}}};return E.jsxs("div",{className:"relative flex h-auto min-h-screen w-full flex-col bg-background-light dark:bg-background-dark overflow-x-hidden",children:[E.jsxs("header",{className:"flex items-center p-4",children:[E.jsx("button",{onClick:()=>e("/dashboard"),className:"flex size-12 shrink-0 items-center justify-start text-text-light-primary dark:text-gray-200",children:E.jsx("span",{className:"material-symbols-outlined !text-2xl",children:"arrow_back_ios_new"})}),E.jsx("h1",{className:"flex-1 text-center text-lg font-bold leading-tight tracking-[-0.015em] text-text-light-primary dark:text-gray-200",children:"Edit Habit"}),E.jsx("div",{className:"flex w-12 items-center justify-end",children:E.jsx("button",{onClick:ce,disabled:!W||Q,className:`text-base font-bold leading-normal tracking-[0.015em] shrink-0 ${W&&!Q?"text-primary":"text-primary/50 dark:text-primary/70"}`,children:"Save"})})]}),E.jsxs("main",{className:"flex flex-col gap-6 px-4 pt-4 pb-6",children:[E.jsx(Ux,{label:"Name",id:"habitName",placeholder:"e.g., Read for 15 minutes",value:a,onChange:X=>u(X.target.value)}),E.jsxs("div",{className:"flex flex-col",children:[E.jsx("h3",{className:"text-base font-medium leading-tight tracking-[-0.015em] pb-2 text-gray-800 dark:text-gray-400 uppercase",children:"Frequency"}),E.jsx("div",{className:"flex h-12 flex-1 items-center justify-center rounded-lg bg-gray-200/60 dark:bg-gray-800 p-1",children:MV.map(X=>E.jsxs("label",{className:`
                  flex h-full flex-1 cursor-pointer items-center justify-center overflow-hidden rounded-md px-2 
                  text-sm font-medium leading-normal transition-all
                  ${h===X.value?"bg-white dark:bg-gray-900 text-text-light-primary dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400"}
                `,children:[E.jsxs("span",{className:"flex items-center gap-1",children:[X.label,X.value==="custom"&&E.jsx("span",{className:"material-symbols-outlined !text-base",children:"expand_more"})]}),E.jsx("input",{type:"radio",name:"frequency",value:X.value,checked:h===X.value,onChange:()=>oe(X.value),className:"invisible w-0"})]},X.value))}),h==="custom"&&m.length>0&&E.jsxs("button",{onClick:()=>L(!0),className:"mt-2 text-sm text-primary hover:underline text-left",children:[m.length," days selected - tap to edit"]})]}),E.jsxs("div",{className:"flex flex-col",children:[E.jsx("h3",{className:"text-base font-medium leading-tight tracking-[-0.015em] pb-2 text-gray-800 dark:text-gray-400 uppercase",children:"How will you track it?"}),E.jsx("div",{className:"grid grid-cols-2 gap-3",children:jV.map(X=>E.jsxs("label",{className:`
                  flex cursor-pointer flex-col items-center justify-center gap-2 rounded-lg border-2 p-4 py-6 text-center transition-all
                  ${w===X.value?"border-primary bg-primary/10 dark:bg-primary/20 text-primary":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300"}
                `,children:[E.jsx("span",{className:"material-symbols-outlined !text-3xl",children:X.icon}),E.jsx("span",{className:"font-medium",children:X.label}),E.jsx("input",{type:"radio",name:"tracking_type",value:X.value,checked:w===X.value,onChange:()=>T(X.value),className:"invisible w-0"})]},X.value))})]}),E.jsx(sy,{label:"Make it private?",description:"Private habits will not appear on the community feed or your profile.",checked:S,onChange:V})]}),E.jsx("footer",{className:"mt-auto px-4 pb-6 pt-4",children:E.jsx(Ji,{fullWidth:!0,onClick:ce,isLoading:Q,disabled:!W,children:"Save Changes"})}),E.jsx(Bx,{isOpen:M,onClose:()=>L(!1),selectedDays:m,onSave:v})]})}const UV={daily:"Daily",weekly:"Weekly",custom:"Custom Days"},BV={checkbox:"Check-off",numerical:"Numerical"},zV=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function $V(){const{habitId:n}=W0(),e=ur(),{habits:t,deleteHabit:r,isLoading:s}=fo(),a=t.find(m=>m.id===n),u=async()=>{if(window.confirm("Are you sure you want to delete this habit? This action cannot be undone."))try{await r(n),e("/dashboard")}catch(m){console.error("Error deleting habit:",m),alert("Failed to delete habit. Please try again.")}};if(s)return E.jsx("div",{className:"min-h-screen bg-background-light dark:bg-background-dark flex items-center justify-center",children:E.jsx(Ja,{size:"lg"})});if(!a)return E.jsx("div",{className:"min-h-screen bg-background-light dark:bg-background-dark flex items-center justify-center",children:E.jsxs("div",{className:"text-center",children:[E.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Habit not found"}),E.jsx(Ji,{onClick:()=>e("/dashboard"),children:"Back to Dashboard"})]})});const h=()=>{var m;return a.frequency!=="custom"||!((m=a.customDays)!=null&&m.length)?null:a.customDays.map(v=>zV[v]).join(", ")},f=[{icon:"event_repeat",label:"Frequency",value:a.frequency==="custom"?h():UV[a.frequency]||a.frequency},{icon:"task_alt",label:"Completion Type",value:BV[a.completionType]||a.completionType||"Check-off"},{icon:a.isPublic?"public":"lock",label:"Visibility",value:a.isPublic?"Public":"Private"}];return E.jsxs("div",{className:"relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden font-display bg-background-light dark:bg-background-dark",children:[E.jsxs("div",{className:"flex-grow pb-28",children:[E.jsxs("header",{className:"flex items-center bg-background-light dark:bg-background-dark p-4 justify-between sticky top-0 z-10 border-b border-border-light dark:border-border-dark",children:[E.jsx("div",{className:"flex w-12 items-center justify-start",children:E.jsx("button",{onClick:()=>e(-1),className:"flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 bg-transparent text-text-light-primary dark:text-text-dark-primary gap-2 text-base font-bold leading-normal tracking-[0.015em] min-w-0 p-0",children:E.jsx("span",{className:"material-symbols-outlined",children:"arrow_back_ios_new"})})}),E.jsx("h1",{className:"text-text-light-primary dark:text-text-dark-primary text-lg font-bold leading-tight tracking-[-0.015em] text-center",children:"Habit Details"}),E.jsx("div",{className:"flex w-12 items-center justify-end",children:E.jsx("button",{className:"flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 bg-transparent text-text-light-primary dark:text-text-dark-primary gap-2 text-base font-bold leading-normal tracking-[0.015em] min-w-0 p-0",children:E.jsx("span",{className:"material-symbols-outlined",children:"more_vert"})})})]}),E.jsxs("main",{className:"p-4",children:[E.jsxs("div",{className:"bg-content-light dark:bg-content-dark rounded-xl p-6 flex flex-col items-center",children:[E.jsx("h2",{className:"text-2xl font-bold text-text-light-primary dark:text-text-dark-primary text-center",children:a.title}),(a.currentStreak||0)>0&&E.jsxs("div",{className:"mt-4 py-2 px-4 rounded-full bg-primary/20 text-primary flex items-center gap-2",children:[E.jsx("span",{className:"material-symbols-outlined text-base",style:{fontVariationSettings:"'FILL' 1, 'wght' 700"},children:"local_fire_department"}),E.jsxs("p",{className:"font-bold text-sm",children:["Current Streak: ",a.currentStreak," ",a.currentStreak===1?"day":"days"]})]})]}),E.jsx("div",{className:"mt-4 grid grid-cols-1 gap-4",children:f.map(m=>E.jsxs("div",{className:"bg-content-light dark:bg-content-dark rounded-xl p-4 flex items-center gap-4",children:[E.jsx("div",{className:"flex items-center justify-center size-10 rounded-lg bg-primary/20 text-primary",children:E.jsx("span",{className:"material-symbols-outlined",children:m.icon})}),E.jsxs("div",{children:[E.jsx("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary",children:m.label}),E.jsx("p",{className:"text-base font-medium text-text-light-primary dark:text-text-dark-primary",children:m.value})]})]},m.label))}),E.jsxs("div",{className:"mt-8 flex flex-col gap-3",children:[E.jsx(Ji,{fullWidth:!0,icon:"edit",onClick:()=>e(`/edit-habit/${a.id}`),children:"Edit Habit"}),E.jsx(Ji,{fullWidth:!0,variant:"danger",icon:"delete",onClick:u,children:"Delete Habit"})]})]})]}),E.jsx(Ju,{})]})}function qV(){const n=ur(),{user:e}=po(),[t,r]=q.useState("thisWeek"),[s,a]=q.useState([]),[u,h]=q.useState({rank:0,percentage:0}),[f,m]=q.useState(!0);q.useEffect(()=>{let V=()=>{};m(!0);try{const M=t==="thisWeek"?nf():_V();V=wV(M,L=>{if(a(L),e!=null&&e.uid){const Q=L.find(J=>J.userId===e.uid);h(Q?{rank:Q.rank,percentage:Q.percentage}:{rank:L.length+1,percentage:0})}m(!1)})}catch(M){console.error("Error in leaderboard subscription:",M),m(!1)}return()=>{V&&V()}},[t,e==null?void 0:e.uid]);const v=s.slice(0,3),w=s,T=V=>{switch(V){case 1:return"border-yellow-400";case 2:return"border-slate-300";case 3:return"border-amber-600";default:return"border-gray-300"}},S=V=>{switch(V){case 1:return"bg-yellow-400 text-yellow-900";case 2:return"bg-slate-300 text-slate-700";case 3:return"bg-amber-600 text-amber-100";default:return"bg-gray-300 text-gray-700"}};return E.jsxs("div",{className:"relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden bg-background-light dark:bg-background-dark font-display text-slate-800 dark:text-slate-200",children:[E.jsxs("div",{className:"flex items-center p-4 pb-2 bg-background-light dark:bg-background-dark sticky top-0 z-10",children:[E.jsx("button",{onClick:()=>n(-1),className:"flex size-12 shrink-0 items-center justify-start",children:E.jsx("span",{className:"material-symbols-outlined",children:"arrow_back_ios_new"})}),E.jsx("h2",{className:"flex-1 text-center text-lg font-bold leading-tight tracking-[-0.015em]",children:"Weekly Leaderboard"}),E.jsx("div",{className:"flex w-12 items-center justify-end",children:E.jsx("button",{className:"flex h-12 cursor-pointer items-center justify-center gap-2 overflow-hidden rounded-lg bg-transparent min-w-0 p-0 text-base font-bold leading-normal tracking-[0.015em]",children:E.jsx("span",{className:"material-symbols-outlined",children:"ios_share"})})})]}),E.jsx("div",{className:"flex px-4 py-3",children:E.jsxs("div",{className:"flex h-10 flex-1 items-center justify-center rounded-lg bg-black/5 dark:bg-white/5 p-1",children:[E.jsxs("label",{className:`flex h-full grow cursor-pointer items-center justify-center overflow-hidden rounded-lg px-2 text-sm font-medium leading-normal transition-all ${t==="thisWeek"?"bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:[E.jsx("span",{className:"truncate",children:"This Week"}),E.jsx("input",{type:"radio",name:"time-period",value:"thisWeek",checked:t==="thisWeek",onChange:()=>r("thisWeek"),className:"invisible w-0"})]}),E.jsxs("label",{className:`flex h-full grow cursor-pointer items-center justify-center overflow-hidden rounded-lg px-2 text-sm font-medium leading-normal transition-all ${t==="lastWeek"?"bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:[E.jsx("span",{className:"truncate",children:"Last Week"}),E.jsx("input",{type:"radio",name:"time-period",value:"lastWeek",checked:t==="lastWeek",onChange:()=>r("lastWeek"),className:"invisible w-0"})]})]})}),f?E.jsx("div",{className:"flex-1 flex items-center justify-center py-12",children:E.jsx(Ja,{size:"lg"})}):s.length===0?E.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-12 px-4",children:[E.jsx("span",{className:"material-symbols-outlined text-5xl text-gray-400 mb-4",children:"leaderboard"}),E.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"No leaderboard data yet."}),E.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm text-center mt-2",children:"Complete habits to appear on the leaderboard!"})]}):E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"flex items-end justify-center gap-4 px-4 py-6",children:[v[1]&&E.jsxs("div",{className:"flex flex-col items-center gap-2",children:[E.jsxs("div",{className:"relative",children:[v[1].photoURL?E.jsx("img",{src:v[1].photoURL,alt:v[1].displayName,className:`aspect-square w-16 rounded-full bg-cover bg-center border-2 ${T(2)} object-cover`,referrerPolicy:"no-referrer"}):E.jsx("div",{className:`aspect-square w-16 rounded-full border-2 ${T(2)} bg-primary/20 flex items-center justify-center`,children:E.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"person"})}),E.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 flex h-6 w-6 items-center justify-center rounded-full ${S(2)} text-sm font-bold`,children:"2"})]}),E.jsx("p",{className:"text-sm font-bold",children:v[1].displayName}),E.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[v[1].percentage,"%"]})]}),v[0]&&E.jsxs("div",{className:"flex flex-col items-center gap-2",children:[E.jsxs("div",{className:"relative",children:[v[0].photoURL?E.jsx("img",{src:v[0].photoURL,alt:v[0].displayName,className:`aspect-square w-24 rounded-full bg-cover bg-center border-4 ${T(1)} object-cover`,referrerPolicy:"no-referrer"}):E.jsx("div",{className:`aspect-square w-24 rounded-full border-4 ${T(1)} bg-primary/20 flex items-center justify-center`,children:E.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"person"})}),E.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 flex h-8 w-8 items-center justify-center rounded-full ${S(1)} text-base font-bold`,children:"1"})]}),E.jsx("p",{className:"text-base font-bold",children:v[0].displayName}),E.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[v[0].percentage,"%"]})]}),v[2]&&E.jsxs("div",{className:"flex flex-col items-center gap-2",children:[E.jsxs("div",{className:"relative",children:[v[2].photoURL?E.jsx("img",{src:v[2].photoURL,alt:v[2].displayName,className:`aspect-square w-16 rounded-full bg-cover bg-center border-2 ${T(3)} object-cover`,referrerPolicy:"no-referrer"}):E.jsx("div",{className:`aspect-square w-16 rounded-full border-2 ${T(3)} bg-primary/20 flex items-center justify-center`,children:E.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"person"})}),E.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 flex h-6 w-6 items-center justify-center rounded-full ${S(3)} text-sm font-bold`,children:"3"})]}),E.jsx("p",{className:"text-sm font-bold",children:v[2].displayName}),E.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[v[2].percentage,"%"]})]})]}),e&&E.jsx("div",{className:"p-4",children:E.jsxs("div",{className:"flex items-center justify-between gap-4 rounded-xl bg-primary/20 dark:bg-primary/30 p-4 border border-primary",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("p",{className:"text-lg font-bold w-6 text-center",children:u.rank||"-"}),e.photoURL?E.jsx("img",{src:e.photoURL,alt:"Your avatar",className:"w-12 h-12 rounded-full object-cover flex-shrink-0",referrerPolicy:"no-referrer"}):E.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/30 flex items-center justify-center flex-shrink-0",children:E.jsx("span",{className:"material-symbols-outlined text-primary",children:"person"})}),E.jsxs("div",{className:"flex flex-col",children:[E.jsx("p",{className:"text-base font-bold leading-tight",children:"You"}),E.jsxs("p",{className:"text-sm font-normal leading-normal text-slate-600 dark:text-slate-300",children:[u.percentage||0,"% complete"]})]})]}),E.jsx("span",{className:"material-symbols-outlined text-primary",children:"workspace_premium"})]})}),E.jsx("div",{className:"flex flex-col gap-2 px-4 pb-24",children:w.map(V=>E.jsxs("div",{className:`flex items-center gap-4 rounded-xl p-3 shadow-sm ${V.userId===(e==null?void 0:e.uid)?"bg-primary/10 dark:bg-primary/20 border border-primary/50":"bg-white dark:bg-background-dark"}`,children:[E.jsx("p",{className:"w-6 text-center font-semibold text-slate-500 dark:text-slate-400",children:V.rank}),V.photoURL?E.jsx("img",{src:V.photoURL,alt:V.displayName,className:"h-10 w-10 flex-shrink-0 rounded-full object-cover",referrerPolicy:"no-referrer"}):E.jsx("div",{className:"h-10 w-10 flex-shrink-0 rounded-full bg-primary/20 flex items-center justify-center",children:E.jsx("span",{className:"material-symbols-outlined text-primary text-xl",children:"person"})}),E.jsxs("div",{className:"flex-grow",children:[E.jsx("p",{className:"font-bold",children:V.displayName}),E.jsx("div",{className:"mt-1 h-1.5 w-full rounded-full bg-slate-200 dark:bg-slate-700",children:E.jsx("div",{className:"h-1.5 rounded-full bg-primary transition-all",style:{width:`${V.percentage}%`}})})]}),E.jsxs("p",{className:"font-bold text-sm",children:[V.percentage,"%"]})]},V.id))})]}),E.jsx(Ju,{})]})}const HV="completions",WV="habits",KV="users";async function GV(n=50){try{const e=Vr(Nt,HV),t=ls(e,Qd("timestamp","desc"),VP(n*2)),s=(await Xa(t)).docs.map(h=>({id:h.id,...h.data()})),a=[],u=new Set;for(const h of s){if(a.length>=n)break;if(!u.has(`${h.habitId}_${h.date}`))try{const f=is(Nt,WV,h.habitId),m=await ud(f);if(!m.exists())continue;const v=m.data();if(!v.isPublic)continue;const w=is(Nt,KV,h.userId),T=await ud(w),S=T.exists()?T.data():{};a.push({id:h.id,habitId:h.habitId,habitTitle:v.title,userId:h.userId,username:S.displayName||"Anonymous",photoURL:S.photoURL||null,streak:v.currentStreak||0,timestamp:h.timestamp,date:h.date,type:"completion"}),u.add(`${h.habitId}_${h.date}`)}catch(f){console.error("Error processing completion:",f);continue}}return a}catch(e){throw console.error("Error getting public feed:",e),e}}function QV(n){if(!n)return"";const e=n.toDate?n.toDate():new Date(n),r=new Date().getTime()-e.getTime(),s=Math.floor(r/6e4),a=Math.floor(r/36e5),u=Math.floor(r/864e5);return s<1?"just now":s<60?`${s}m ago`:a<24?`${a}h ago`:u<7?`${u}d ago`:e.toLocaleDateString()}function XV(){const n=ur(),[e,t]=q.useState([]),[r,s]=q.useState(!0);return q.useEffect(()=>{(async()=>{s(!0);try{const u=await GV(50);t(u)}catch(u){console.error("Error loading feed:",u)}finally{s(!1)}})()},[]),E.jsxs("div",{className:"relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden bg-background-light dark:bg-background-dark font-display",children:[E.jsxs("header",{className:"sticky top-0 z-10 flex items-center justify-between border-b border-gray-200/80 bg-background-light/80 p-4 pb-3 backdrop-blur-sm dark:border-gray-800/80 dark:bg-background-dark/80",children:[E.jsx("button",{onClick:()=>n(-1),className:"flex size-12 shrink-0 items-center justify-start",children:E.jsx("span",{className:"material-symbols-outlined text-text-light-primary dark:text-text-dark-primary",children:"arrow_back_ios_new"})}),E.jsx("h1",{className:"flex-1 text-center text-lg font-bold leading-tight tracking-[-0.015em] text-text-light-primary dark:text-text-dark-primary",children:"Progress Feed"}),E.jsx("div",{className:"flex w-12 items-center justify-end",children:E.jsx("button",{className:"flex h-12 cursor-pointer items-center justify-center gap-2 overflow-hidden rounded-lg bg-transparent text-base font-bold leading-normal tracking-[0.015em] text-text-light-primary dark:text-text-dark-primary",children:E.jsx("span",{className:"material-symbols-outlined",children:"search"})})})]}),E.jsx("main",{className:"flex-grow pb-24",children:r?E.jsx("div",{className:"flex justify-center py-12",children:E.jsx(Ja,{size:"lg"})}):e.length===0?E.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[E.jsx("span",{className:"material-symbols-outlined text-5xl text-gray-400 mb-4",children:"feed"}),E.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"No public activity yet."}),E.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm text-center mt-2",children:"Complete public habits to appear in the feed!"})]}):e.map(a=>E.jsx("div",{className:"border-b border-gray-200/80 p-4 dark:border-gray-800/80",children:E.jsxs("div",{className:"flex items-start gap-3",children:[a.photoURL?E.jsx("img",{className:"h-10 w-10 rounded-full object-cover flex-shrink-0",alt:`${a.username}'s avatar`,src:a.photoURL,referrerPolicy:"no-referrer"}):E.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0",children:E.jsx("span",{className:"material-symbols-outlined text-primary text-xl",children:"person"})}),E.jsxs("div",{className:"flex flex-1 flex-col gap-2",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("p",{className:"font-bold text-text-light-primary dark:text-text-dark-primary",children:a.username}),E.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[" ",QV(a.timestamp)]})]}),E.jsxs("p",{className:"text-base text-text-light-primary dark:text-text-dark-primary",children:["Completed: ",a.habitTitle]}),a.streak>0&&E.jsx("div",{className:"mt-2 flex items-center",children:E.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-primary/20 px-3 py-1 text-sm font-medium",children:[E.jsx("span",{className:"material-symbols-outlined !text-[18px] !font-bold text-primary",children:"local_fire_department"}),E.jsx("span",{className:"font-bold text-text-light-primary dark:text-text-dark-primary",children:a.streak})]})})]})]})},a.id))}),E.jsx(Ju,{})]})}function YV(){const n=ur(),{user:e,clearUser:t}=po(),{habits:r,clearAll:s}=fo(),[a,u]=q.useState(document.documentElement.classList.contains("dark")),[h,f]=q.useState(!1),m=T=>{u(T),T?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},v=async()=>{f(!0);try{await TV(),t(),s(),n("/")}catch(T){console.error("Logout error:",T),alert("Failed to sign out. Please try again.")}finally{f(!1)}},w={totalHabits:r.length,publicHabits:r.filter(T=>T.isPublic).length,privateHabits:r.filter(T=>!T.isPublic).length,totalStreak:r.reduce((T,S)=>T+(S.currentStreak||0),0)};return E.jsxs("div",{className:"relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden bg-background-light dark:bg-background-dark font-display",children:[E.jsxs("div",{className:"flex-grow pb-28",children:[E.jsxs("header",{className:"flex items-center bg-background-light dark:bg-background-dark p-4 pb-2 sticky top-0 z-10",children:[E.jsx("button",{onClick:()=>n(-1),className:"flex size-12 shrink-0 items-center justify-start text-text-light-primary dark:text-text-dark-primary",children:E.jsx("span",{className:"material-symbols-outlined",children:"arrow_back_ios_new"})}),E.jsx("h1",{className:"flex-1 text-center text-lg font-bold leading-tight tracking-[-0.015em] text-text-light-primary dark:text-text-dark-primary",children:"Settings"}),E.jsx("div",{className:"w-12"})]}),E.jsxs("main",{className:"p-4 flex flex-col gap-6",children:[E.jsx("section",{className:"bg-content-light dark:bg-content-dark rounded-xl p-4",children:E.jsxs("div",{className:"flex items-center gap-4",children:[e!=null&&e.photoURL?E.jsx("img",{src:e.photoURL,alt:"Profile",className:"w-16 h-16 rounded-full object-cover",referrerPolicy:"no-referrer"}):E.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/20 flex items-center justify-center",children:E.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"person"})}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-lg font-bold text-text-light-primary dark:text-text-dark-primary",children:(e==null?void 0:e.displayName)||"User"}),E.jsx("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary",children:e==null?void 0:e.email})]})]})}),E.jsxs("section",{className:"bg-content-light dark:bg-content-dark rounded-xl p-4",children:[E.jsx("h3",{className:"text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary uppercase mb-4",children:"Your Stats"}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{className:"text-center p-3 bg-primary/10 dark:bg-primary/20 rounded-lg",children:[E.jsx("p",{className:"text-2xl font-bold text-primary",children:w.totalHabits}),E.jsx("p",{className:"text-xs text-text-light-secondary dark:text-text-dark-secondary",children:"Total Habits"})]}),E.jsxs("div",{className:"text-center p-3 bg-primary/10 dark:bg-primary/20 rounded-lg",children:[E.jsxs("p",{className:"text-2xl font-bold text-primary",children:[" ",w.totalStreak]}),E.jsx("p",{className:"text-xs text-text-light-secondary dark:text-text-dark-secondary",children:"Total Streak Days"})]}),E.jsxs("div",{className:"text-center",children:[E.jsx("p",{className:"text-xl font-bold text-primary",children:w.publicHabits}),E.jsx("p",{className:"text-xs text-text-light-secondary dark:text-text-dark-secondary",children:"Public"})]}),E.jsxs("div",{className:"text-center",children:[E.jsx("p",{className:"text-xl font-bold text-primary",children:w.privateHabits}),E.jsx("p",{className:"text-xs text-text-light-secondary dark:text-text-dark-secondary",children:"Private"})]})]})]}),E.jsxs("section",{className:"bg-content-light dark:bg-content-dark rounded-xl p-4",children:[E.jsx("h3",{className:"text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary uppercase mb-4",children:"Preferences"}),E.jsx(sy,{label:"Dark Mode",checked:a,onChange:m})]}),E.jsxs("section",{className:"bg-content-light dark:bg-content-dark rounded-xl p-4",children:[E.jsx("h3",{className:"text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary uppercase mb-4",children:"About"}),E.jsxs("div",{className:"space-y-3",children:[E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-text-light-primary dark:text-text-dark-primary",children:"Version"}),E.jsx("span",{className:"text-text-light-secondary dark:text-text-dark-secondary",children:"1.0.0"})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-text-light-primary dark:text-text-dark-primary",children:"Build"}),E.jsx("span",{className:"text-text-light-secondary dark:text-text-dark-secondary",children:"PWA"})]})]})]}),E.jsx(Ji,{fullWidth:!0,variant:"danger",onClick:v,isLoading:h,icon:"logout",children:"Sign Out"})]})]}),E.jsx(Ju,{})]})}function js({children:n}){const{isAuthenticated:e,isLoading:t}=po();return t?E.jsx("div",{className:"min-h-screen bg-background-light dark:bg-background-dark flex items-center justify-center",children:E.jsx(Ja,{size:"lg"})}):e?n:E.jsx(Hk,{to:"/",replace:!0})}function JV(){const{user:n,setUser:e,setLoading:t}=po(),{loadHabits:r,loadCompletionsForDate:s,subscribeToHabits:a,clearAll:u}=fo();return q.useEffect(()=>{let h=null;const f=bN(iy,async m=>{if(m){e({uid:m.uid,displayName:m.displayName,email:m.email,photoURL:m.photoURL});try{const{loadCompletionsForWeek:v,subscribeToHabits:w}=fo.getState();await v(m.uid),h=w(m.uid)}catch(v){console.error("Error loading user data:",v)}}else e(null),u(),h&&(h(),h=null);t(!1)});return()=>{f(),h&&h()}},[e,t,r,s,a,u]),q.useEffect(()=>{localStorage.getItem("theme")==="dark"&&document.documentElement.classList.add("dark")},[]),E.jsx(g1,{basename:"/habit-tracker-pwa/",children:E.jsx("div",{className:"min-h-screen bg-background-light dark:bg-background-dark font-display",children:E.jsxs(Kk,{children:[E.jsx(Zr,{path:"/",element:E.jsx(kV,{})}),E.jsx(Zr,{path:"/dashboard",element:E.jsx(js,{children:E.jsx(NV,{})})}),E.jsx(Zr,{path:"/new-habit",element:E.jsx(js,{children:E.jsx(LV,{})})}),E.jsx(Zr,{path:"/edit-habit/:habitId",element:E.jsx(js,{children:E.jsx(FV,{})})}),E.jsx(Zr,{path:"/habit/:habitId",element:E.jsx(js,{children:E.jsx($V,{})})}),E.jsx(Zr,{path:"/leaderboard",element:E.jsx(js,{children:E.jsx(qV,{})})}),E.jsx(Zr,{path:"/feed",element:E.jsx(js,{children:E.jsx(XV,{})})}),E.jsx(Zr,{path:"/settings",element:E.jsx(js,{children:E.jsx(YV,{})})})]})})})}const ZV=["habits-storage","auth-storage"];ZV.forEach(n=>{localStorage.getItem(n)&&(localStorage.removeItem(n),console.log(`[Init] Cleared old localStorage: ${n}`))});const eO=Object.keys(localStorage);eO.forEach(n=>{(n.startsWith("zustand")||n.includes("habit")||n.includes("auth"))&&(localStorage.removeItem(n),console.log(`[Init] Cleared cached data: ${n}`))});ek.createRoot(document.getElementById("root")).render(E.jsx(eu.StrictMode,{children:E.jsx(JV,{})}));
