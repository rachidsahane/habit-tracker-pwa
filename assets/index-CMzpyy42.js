(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function Kw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Dp={exports:{}},tu={},Vp={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_;function tk(){if(E_)return Pe;E_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.iterator;function x(U){return U===null||typeof U!="object"?null:(U=_&&U[_]||U["@@iterator"],typeof U=="function"?U:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,C={};function O(U,X,_e){this.props=U,this.context=X,this.refs=C,this.updater=_e||S}O.prototype.isReactComponent={},O.prototype.setState=function(U,X){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,X,"setState")},O.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function K(){}K.prototype=O.prototype;function Q(U,X,_e){this.props=U,this.context=X,this.refs=C,this.updater=_e||S}var F=Q.prototype=new K;F.constructor=Q,D(F,O.prototype),F.isPureReactComponent=!0;var re=Array.isArray,ue=Object.prototype.hasOwnProperty,ce={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function k(U,X,_e){var Ae,Ce={},Oe=null,Be=null;if(X!=null)for(Ae in X.ref!==void 0&&(Be=X.ref),X.key!==void 0&&(Oe=""+X.key),X)ue.call(X,Ae)&&!P.hasOwnProperty(Ae)&&(Ce[Ae]=X[Ae]);var ze=arguments.length-2;if(ze===1)Ce.children=_e;else if(1<ze){for(var Ye=Array(ze),Ct=0;Ct<ze;Ct++)Ye[Ct]=arguments[Ct+2];Ce.children=Ye}if(U&&U.defaultProps)for(Ae in ze=U.defaultProps,ze)Ce[Ae]===void 0&&(Ce[Ae]=ze[Ae]);return{$$typeof:n,type:U,key:Oe,ref:Be,props:Ce,_owner:ce.current}}function A(U,X){return{$$typeof:n,type:U.type,key:X,ref:U.ref,props:U.props,_owner:U._owner}}function N(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function L(U){var X={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(_e){return X[_e]})}var j=/\/+/g;function R(U,X){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):X.toString(36)}function Ke(U,X,_e,Ae,Ce){var Oe=typeof U;(Oe==="undefined"||Oe==="boolean")&&(U=null);var Be=!1;if(U===null)Be=!0;else switch(Oe){case"string":case"number":Be=!0;break;case"object":switch(U.$$typeof){case n:case e:Be=!0}}if(Be)return Be=U,Ce=Ce(Be),U=Ae===""?"."+R(Be,0):Ae,re(Ce)?(_e="",U!=null&&(_e=U.replace(j,"$&/")+"/"),Ke(Ce,X,_e,"",function(Ct){return Ct})):Ce!=null&&(N(Ce)&&(Ce=A(Ce,_e+(!Ce.key||Be&&Be.key===Ce.key?"":(""+Ce.key).replace(j,"$&/")+"/")+U)),X.push(Ce)),1;if(Be=0,Ae=Ae===""?".":Ae+":",re(U))for(var ze=0;ze<U.length;ze++){Oe=U[ze];var Ye=Ae+R(Oe,ze);Be+=Ke(Oe,X,_e,Ye,Ce)}else if(Ye=x(U),typeof Ye=="function")for(U=Ye.call(U),ze=0;!(Oe=U.next()).done;)Oe=Oe.value,Ye=Ae+R(Oe,ze++),Be+=Ke(Oe,X,_e,Ye,Ce);else if(Oe==="object")throw X=String(U),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Be}function Ze(U,X,_e){if(U==null)return U;var Ae=[],Ce=0;return Ke(U,Ae,"","",function(Oe){return X.call(_e,Oe,Ce++)}),Ae}function ee(U){if(U._status===-1){var X=U._result;X=X(),X.then(function(_e){(U._status===0||U._status===-1)&&(U._status=1,U._result=_e)},function(_e){(U._status===0||U._status===-1)&&(U._status=2,U._result=_e)}),U._status===-1&&(U._status=0,U._result=X)}if(U._status===1)return U._result.default;throw U._result}var Fe={current:null},ae={transition:null},Ee={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:ae,ReactCurrentOwner:ce};function he(){throw Error("act(...) is not supported in production builds of React.")}return Pe.Children={map:Ze,forEach:function(U,X,_e){Ze(U,function(){X.apply(this,arguments)},_e)},count:function(U){var X=0;return Ze(U,function(){X++}),X},toArray:function(U){return Ze(U,function(X){return X})||[]},only:function(U){if(!N(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Pe.Component=O,Pe.Fragment=t,Pe.Profiler=s,Pe.PureComponent=Q,Pe.StrictMode=r,Pe.Suspense=f,Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ee,Pe.act=he,Pe.cloneElement=function(U,X,_e){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Ae=D({},U.props),Ce=U.key,Oe=U.ref,Be=U._owner;if(X!=null){if(X.ref!==void 0&&(Oe=X.ref,Be=ce.current),X.key!==void 0&&(Ce=""+X.key),U.type&&U.type.defaultProps)var ze=U.type.defaultProps;for(Ye in X)ue.call(X,Ye)&&!P.hasOwnProperty(Ye)&&(Ae[Ye]=X[Ye]===void 0&&ze!==void 0?ze[Ye]:X[Ye])}var Ye=arguments.length-2;if(Ye===1)Ae.children=_e;else if(1<Ye){ze=Array(Ye);for(var Ct=0;Ct<Ye;Ct++)ze[Ct]=arguments[Ct+2];Ae.children=ze}return{$$typeof:n,type:U.type,key:Ce,ref:Oe,props:Ae,_owner:Be}},Pe.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},Pe.createElement=k,Pe.createFactory=function(U){var X=k.bind(null,U);return X.type=U,X},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(U){return{$$typeof:d,render:U}},Pe.isValidElement=N,Pe.lazy=function(U){return{$$typeof:v,_payload:{_status:-1,_result:U},_init:ee}},Pe.memo=function(U,X){return{$$typeof:p,type:U,compare:X===void 0?null:X}},Pe.startTransition=function(U){var X=ae.transition;ae.transition={};try{U()}finally{ae.transition=X}},Pe.unstable_act=he,Pe.useCallback=function(U,X){return Fe.current.useCallback(U,X)},Pe.useContext=function(U){return Fe.current.useContext(U)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(U){return Fe.current.useDeferredValue(U)},Pe.useEffect=function(U,X){return Fe.current.useEffect(U,X)},Pe.useId=function(){return Fe.current.useId()},Pe.useImperativeHandle=function(U,X,_e){return Fe.current.useImperativeHandle(U,X,_e)},Pe.useInsertionEffect=function(U,X){return Fe.current.useInsertionEffect(U,X)},Pe.useLayoutEffect=function(U,X){return Fe.current.useLayoutEffect(U,X)},Pe.useMemo=function(U,X){return Fe.current.useMemo(U,X)},Pe.useReducer=function(U,X,_e){return Fe.current.useReducer(U,X,_e)},Pe.useRef=function(U){return Fe.current.useRef(U)},Pe.useState=function(U){return Fe.current.useState(U)},Pe.useSyncExternalStore=function(U,X,_e){return Fe.current.useSyncExternalStore(U,X,_e)},Pe.useTransition=function(){return Fe.current.useTransition()},Pe.version="18.3.1",Pe}var I_;function Um(){return I_||(I_=1,Vp.exports=tk()),Vp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_;function nk(){if(x_)return tu;x_=1;var n=Um(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(d,f,p){var v,_={},x=null,S=null;p!==void 0&&(x=""+p),f.key!==void 0&&(x=""+f.key),f.ref!==void 0&&(S=f.ref);for(v in f)r.call(f,v)&&!a.hasOwnProperty(v)&&(_[v]=f[v]);if(d&&d.defaultProps)for(v in f=d.defaultProps,f)_[v]===void 0&&(_[v]=f[v]);return{$$typeof:e,type:d,key:x,ref:S,props:_,_owner:s.current}}return tu.Fragment=t,tu.jsx=l,tu.jsxs=l,tu}var T_;function rk(){return T_||(T_=1,Dp.exports=nk()),Dp.exports}var w=rk(),B=Um();const Sa=Kw(B);var _d={},Op={exports:{}},hn={},Lp={exports:{}},Mp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S_;function ik(){return S_||(S_=1,(function(n){function e(ae,Ee){var he=ae.length;ae.push(Ee);e:for(;0<he;){var U=he-1>>>1,X=ae[U];if(0<s(X,Ee))ae[U]=Ee,ae[he]=X,he=U;else break e}}function t(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var Ee=ae[0],he=ae.pop();if(he!==Ee){ae[0]=he;e:for(var U=0,X=ae.length,_e=X>>>1;U<_e;){var Ae=2*(U+1)-1,Ce=ae[Ae],Oe=Ae+1,Be=ae[Oe];if(0>s(Ce,he))Oe<X&&0>s(Be,Ce)?(ae[U]=Be,ae[Oe]=he,U=Oe):(ae[U]=Ce,ae[Ae]=he,U=Ae);else if(Oe<X&&0>s(Be,he))ae[U]=Be,ae[Oe]=he,U=Oe;else break e}}return Ee}function s(ae,Ee){var he=ae.sortIndex-Ee.sortIndex;return he!==0?he:ae.id-Ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();n.unstable_now=function(){return l.now()-d}}var f=[],p=[],v=1,_=null,x=3,S=!1,D=!1,C=!1,O=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(ae){for(var Ee=t(p);Ee!==null;){if(Ee.callback===null)r(p);else if(Ee.startTime<=ae)r(p),Ee.sortIndex=Ee.expirationTime,e(f,Ee);else break;Ee=t(p)}}function re(ae){if(C=!1,F(ae),!D)if(t(f)!==null)D=!0,ee(ue);else{var Ee=t(p);Ee!==null&&Fe(re,Ee.startTime-ae)}}function ue(ae,Ee){D=!1,C&&(C=!1,K(k),k=-1),S=!0;var he=x;try{for(F(Ee),_=t(f);_!==null&&(!(_.expirationTime>Ee)||ae&&!L());){var U=_.callback;if(typeof U=="function"){_.callback=null,x=_.priorityLevel;var X=U(_.expirationTime<=Ee);Ee=n.unstable_now(),typeof X=="function"?_.callback=X:_===t(f)&&r(f),F(Ee)}else r(f);_=t(f)}if(_!==null)var _e=!0;else{var Ae=t(p);Ae!==null&&Fe(re,Ae.startTime-Ee),_e=!1}return _e}finally{_=null,x=he,S=!1}}var ce=!1,P=null,k=-1,A=5,N=-1;function L(){return!(n.unstable_now()-N<A)}function j(){if(P!==null){var ae=n.unstable_now();N=ae;var Ee=!0;try{Ee=P(!0,ae)}finally{Ee?R():(ce=!1,P=null)}}else ce=!1}var R;if(typeof Q=="function")R=function(){Q(j)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,Ze=Ke.port2;Ke.port1.onmessage=j,R=function(){Ze.postMessage(null)}}else R=function(){O(j,0)};function ee(ae){P=ae,ce||(ce=!0,R())}function Fe(ae,Ee){k=O(function(){ae(n.unstable_now())},Ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ae){ae.callback=null},n.unstable_continueExecution=function(){D||S||(D=!0,ee(ue))},n.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ae?Math.floor(1e3/ae):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ae){switch(x){case 1:case 2:case 3:var Ee=3;break;default:Ee=x}var he=x;x=Ee;try{return ae()}finally{x=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ae,Ee){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var he=x;x=ae;try{return Ee()}finally{x=he}},n.unstable_scheduleCallback=function(ae,Ee,he){var U=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?U+he:U):he=U,ae){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=he+X,ae={id:v++,callback:Ee,priorityLevel:ae,startTime:he,expirationTime:X,sortIndex:-1},he>U?(ae.sortIndex=he,e(p,ae),t(f)===null&&ae===t(p)&&(C?(K(k),k=-1):C=!0,Fe(re,he-U))):(ae.sortIndex=X,e(f,ae),D||S||(D=!0,ee(ue))),ae},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(ae){var Ee=x;return function(){var he=x;x=Ee;try{return ae.apply(this,arguments)}finally{x=he}}}})(Mp)),Mp}var k_;function sk(){return k_||(k_=1,Lp.exports=ik()),Lp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_;function ok(){if(b_)return hn;b_=1;var n=Um(),e=sk();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},_={};function x(i){return f.call(_,i)?!0:f.call(v,i)?!1:p.test(i)?_[i]=!0:(v[i]=!0,!1)}function S(i,o,u,h){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return h?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function D(i,o,u,h){if(o===null||typeof o>"u"||S(i,o,u,h))return!0;if(h)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function C(i,o,u,h,m,y,I){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=h,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=I}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){O[i]=new C(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];O[o]=new C(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){O[i]=new C(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){O[i]=new C(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){O[i]=new C(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){O[i]=new C(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){O[i]=new C(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){O[i]=new C(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){O[i]=new C(i,5,!1,i.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function Q(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(K,Q);O[o]=new C(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(K,Q);O[o]=new C(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(K,Q);O[o]=new C(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){O[i]=new C(i,1,!1,i.toLowerCase(),null,!1,!1)}),O.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){O[i]=new C(i,1,!1,i.toLowerCase(),null,!0,!0)});function F(i,o,u,h){var m=O.hasOwnProperty(o)?O[o]:null;(m!==null?m.type!==0:h||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(D(o,u,m,h)&&(u=null),h||m===null?x(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):m.mustUseProperty?i[m.propertyName]=u===null?m.type===3?!1:"":u:(o=m.attributeName,h=m.attributeNamespace,u===null?i.removeAttribute(o):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,h?i.setAttributeNS(h,o,u):i.setAttribute(o,u))))}var re=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ue=Symbol.for("react.element"),ce=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),L=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Ke=Symbol.for("react.suspense_list"),Ze=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),Fe=Symbol.for("react.offscreen"),ae=Symbol.iterator;function Ee(i){return i===null||typeof i!="object"?null:(i=ae&&i[ae]||i["@@iterator"],typeof i=="function"?i:null)}var he=Object.assign,U;function X(i){if(U===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);U=o&&o[1]||""}return`
`+U+i}var _e=!1;function Ae(i,o){if(!i||_e)return"";_e=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(W){var h=W}Reflect.construct(i,[],o)}else{try{o.call()}catch(W){h=W}i.call(o.prototype)}else{try{throw Error()}catch(W){h=W}i()}}catch(W){if(W&&h&&typeof W.stack=="string"){for(var m=W.stack.split(`
`),y=h.stack.split(`
`),I=m.length-1,b=y.length-1;1<=I&&0<=b&&m[I]!==y[b];)b--;for(;1<=I&&0<=b;I--,b--)if(m[I]!==y[b]){if(I!==1||b!==1)do if(I--,b--,0>b||m[I]!==y[b]){var V=`
`+m[I].replace(" at new "," at ");return i.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",i.displayName)),V}while(1<=I&&0<=b);break}}}finally{_e=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?X(i):""}function Ce(i){switch(i.tag){case 5:return X(i.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return i=Ae(i.type,!1),i;case 11:return i=Ae(i.type.render,!1),i;case 1:return i=Ae(i.type,!0),i;default:return""}}function Oe(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case ce:return"Portal";case A:return"Profiler";case k:return"StrictMode";case R:return"Suspense";case Ke:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case L:return(i.displayName||"Context")+".Consumer";case N:return(i._context.displayName||"Context")+".Provider";case j:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ze:return o=i.displayName||null,o!==null?o:Oe(i.type)||"Memo";case ee:o=i._payload,i=i._init;try{return Oe(i(o))}catch{}}return null}function Be(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(o);case 8:return o===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ze(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ye(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ct(i){var o=Ye(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return m.call(this)},set:function(I){h=""+I,y.call(this,I)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(I){h=""+I},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ur(i){i._valueTracker||(i._valueTracker=Ct(i))}function Io(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),h="";return i&&(h=Ye(i)?i.checked?"true":"false":i.value),i=h,i!==u?(o.setValue(i),!0):!1}function vi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ps(i,o){var u=o.checked;return he({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function xo(i,o){var u=o.defaultValue==null?"":o.defaultValue,h=o.checked!=null?o.checked:o.defaultChecked;u=ze(o.value!=null?o.value:u),i._wrapperState={initialChecked:h,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function al(i,o){o=o.checked,o!=null&&F(i,"checked",o,!1)}function ll(i,o){al(i,o);var u=ze(o.value),h=o.type;if(u!=null)h==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?To(i,o.type,u):o.hasOwnProperty("defaultValue")&&To(i,o.type,ze(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function ic(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var h=o.type;if(!(h!=="submit"&&h!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function To(i,o,u){(o!=="number"||vi(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Br=Array.isArray;function zr(i,o,u,h){if(i=i.options,o){o={};for(var m=0;m<u.length;m++)o["$"+u[m]]=!0;for(u=0;u<i.length;u++)m=o.hasOwnProperty("$"+i[u].value),i[u].selected!==m&&(i[u].selected=m),m&&h&&(i[u].defaultSelected=!0)}else{for(u=""+ze(u),o=null,m=0;m<i.length;m++){if(i[m].value===u){i[m].selected=!0,h&&(i[m].defaultSelected=!0);return}o!==null||i[m].disabled||(o=i[m])}o!==null&&(o.selected=!0)}}function ul(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return he({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function So(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Br(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:ze(u)}}function ko(i,o){var u=ze(o.value),h=ze(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),h!=null&&(i.defaultValue=""+h)}function cl(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function xt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tt(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?xt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var $r,dl=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,h,m){MSApp.execUnsafeLocalFunction(function(){return i(o,u,h,m)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for($r=$r||document.createElement("div"),$r.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=$r.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function _i(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gs=["Webkit","ms","Moz","O"];Object.keys(ms).forEach(function(i){gs.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),ms[o]=ms[i]})});function hl(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||ms.hasOwnProperty(i)&&ms[i]?(""+o).trim():o+"px"}function fl(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var h=u.indexOf("--")===0,m=hl(u,o[u],h);u==="float"&&(u="cssFloat"),h?i.setProperty(u,m):i[u]=m}}var pl=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ml(i,o){if(o){if(pl[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function gl(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ys=null;function bo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ao=null,bn=null,pr=null;function Ro(i){if(i=Ul(i)){if(typeof Ao!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Vc(o),Ao(i.stateNode,i.type,o))}}function mr(i){bn?pr?pr.push(i):pr=[i]:bn=i}function yl(){if(bn){var i=bn,o=pr;if(pr=bn=null,Ro(i),o)for(i=0;i<o.length;i++)Ro(o[i])}}function vs(i,o){return i(o)}function vl(){}var qr=!1;function _l(i,o,u){if(qr)return i(o,u);qr=!0;try{return vs(i,o,u)}finally{qr=!1,(bn!==null||pr!==null)&&(vl(),yl())}}function pt(i,o){var u=i.stateNode;if(u===null)return null;var h=Vc(u);if(h===null)return null;u=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Co=!1;if(d)try{var qn={};Object.defineProperty(qn,"passive",{get:function(){Co=!0}}),window.addEventListener("test",qn,qn),window.removeEventListener("test",qn,qn)}catch{Co=!1}function _s(i,o,u,h,m,y,I,b,V){var W=Array.prototype.slice.call(arguments,3);try{o.apply(u,W)}catch(Z){this.onError(Z)}}var ws=!1,Po=null,Hn=!1,wl=null,af={onError:function(i){ws=!0,Po=i}};function No(i,o,u,h,m,y,I,b,V){ws=!1,Po=null,_s.apply(af,arguments)}function sc(i,o,u,h,m,y,I,b,V){if(No.apply(this,arguments),ws){if(ws){var W=Po;ws=!1,Po=null}else throw Error(t(198));Hn||(Hn=!0,wl=W)}}function Wn(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Es(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Gn(i){if(Wn(i)!==i)throw Error(t(188))}function oc(i){var o=i.alternate;if(!o){if(o=Wn(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,h=o;;){var m=u.return;if(m===null)break;var y=m.alternate;if(y===null){if(h=m.return,h!==null){u=h;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===u)return Gn(m),i;if(y===h)return Gn(m),o;y=y.sibling}throw Error(t(188))}if(u.return!==h.return)u=m,h=y;else{for(var I=!1,b=m.child;b;){if(b===u){I=!0,u=m,h=y;break}if(b===h){I=!0,h=m,u=y;break}b=b.sibling}if(!I){for(b=y.child;b;){if(b===u){I=!0,u=y,h=m;break}if(b===h){I=!0,h=y,u=m;break}b=b.sibling}if(!I)throw Error(t(189))}}if(u.alternate!==h)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function El(i){return i=oc(i),i!==null?Do(i):null}function Do(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Do(i);if(o!==null)return o;i=i.sibling}return null}var Vo=e.unstable_scheduleCallback,Il=e.unstable_cancelCallback,ac=e.unstable_shouldYield,lf=e.unstable_requestPaint,Xe=e.unstable_now,lc=e.unstable_getCurrentPriorityLevel,Is=e.unstable_ImmediatePriority,wi=e.unstable_UserBlockingPriority,An=e.unstable_NormalPriority,xl=e.unstable_LowPriority,uc=e.unstable_IdlePriority,xs=null,mn=null;function cc(i){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(xs,i,void 0,(i.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:hc,Tl=Math.log,dc=Math.LN2;function hc(i){return i>>>=0,i===0?32:31-(Tl(i)/dc|0)|0}var Oo=64,Lo=4194304;function Ei(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ts(i,o){var u=i.pendingLanes;if(u===0)return 0;var h=0,m=i.suspendedLanes,y=i.pingedLanes,I=u&268435455;if(I!==0){var b=I&~m;b!==0?h=Ei(b):(y&=I,y!==0&&(h=Ei(y)))}else I=u&~m,I!==0?h=Ei(I):y!==0&&(h=Ei(y));if(h===0)return 0;if(o!==0&&o!==h&&(o&m)===0&&(m=h&-h,y=o&-o,m>=y||m===16&&(y&4194240)!==0))return o;if((h&4)!==0&&(h|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=h;0<o;)u=31-Xt(o),m=1<<u,h|=i[u],o&=~m;return h}function uf(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hr(i,o){for(var u=i.suspendedLanes,h=i.pingedLanes,m=i.expirationTimes,y=i.pendingLanes;0<y;){var I=31-Xt(y),b=1<<I,V=m[I];V===-1?((b&u)===0||(b&h)!==0)&&(m[I]=uf(b,o)):V<=o&&(i.expiredLanes|=b),y&=~b}}function gn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Ss(){var i=Oo;return Oo<<=1,(Oo&4194240)===0&&(Oo=64),i}function Ii(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function xi(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Xt(o),i[o]=u}function Qe(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<u;){var m=31-Xt(u),y=1<<m;o[m]=0,h[m]=-1,i[m]=-1,u&=~y}}function Ti(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var h=31-Xt(u),m=1<<h;m&o|i[h]&o&&(i[h]|=o),u&=~m}}var Ve=0;function Si(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var fc,Mo,pc,mc,gc,Sl=!1,gr=[],Lt=null,Kn=null,Qn=null,ki=new Map,Rn=new Map,yr=[],cf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yc(i,o){switch(i){case"focusin":case"focusout":Lt=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":ki.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rn.delete(o.pointerId)}}function sn(i,o,u,h,m,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:u,eventSystemFlags:h,nativeEvent:y,targetContainers:[m]},o!==null&&(o=Ul(o),o!==null&&Mo(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),i)}function df(i,o,u,h,m){switch(o){case"focusin":return Lt=sn(Lt,i,o,u,h,m),!0;case"dragenter":return Kn=sn(Kn,i,o,u,h,m),!0;case"mouseover":return Qn=sn(Qn,i,o,u,h,m),!0;case"pointerover":var y=m.pointerId;return ki.set(y,sn(ki.get(y)||null,i,o,u,h,m)),!0;case"gotpointercapture":return y=m.pointerId,Rn.set(y,sn(Rn.get(y)||null,i,o,u,h,m)),!0}return!1}function vc(i){var o=Cs(i.target);if(o!==null){var u=Wn(o);if(u!==null){if(o=u.tag,o===13){if(o=Es(u),o!==null){i.blockedOn=o,gc(i.priority,function(){pc(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Wr(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=jo(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var h=new u.constructor(u.type,u);ys=h,u.target.dispatchEvent(h),ys=null}else return o=Ul(u),o!==null&&Mo(o),i.blockedOn=u,!1;o.shift()}return!0}function ks(i,o,u){Wr(i)&&u.delete(o)}function _c(){Sl=!1,Lt!==null&&Wr(Lt)&&(Lt=null),Kn!==null&&Wr(Kn)&&(Kn=null),Qn!==null&&Wr(Qn)&&(Qn=null),ki.forEach(ks),Rn.forEach(ks)}function Yn(i,o){i.blockedOn===o&&(i.blockedOn=null,Sl||(Sl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,_c)))}function Xn(i){function o(m){return Yn(m,i)}if(0<gr.length){Yn(gr[0],i);for(var u=1;u<gr.length;u++){var h=gr[u];h.blockedOn===i&&(h.blockedOn=null)}}for(Lt!==null&&Yn(Lt,i),Kn!==null&&Yn(Kn,i),Qn!==null&&Yn(Qn,i),ki.forEach(o),Rn.forEach(o),u=0;u<yr.length;u++)h=yr[u],h.blockedOn===i&&(h.blockedOn=null);for(;0<yr.length&&(u=yr[0],u.blockedOn===null);)vc(u),u.blockedOn===null&&yr.shift()}var Gr=re.ReactCurrentBatchConfig,bi=!0;function nt(i,o,u,h){var m=Ve,y=Gr.transition;Gr.transition=null;try{Ve=1,kl(i,o,u,h)}finally{Ve=m,Gr.transition=y}}function hf(i,o,u,h){var m=Ve,y=Gr.transition;Gr.transition=null;try{Ve=4,kl(i,o,u,h)}finally{Ve=m,Gr.transition=y}}function kl(i,o,u,h){if(bi){var m=jo(i,o,u,h);if(m===null)xf(i,o,h,bs,u),yc(i,h);else if(df(m,i,o,u,h))h.stopPropagation();else if(yc(i,h),o&4&&-1<cf.indexOf(i)){for(;m!==null;){var y=Ul(m);if(y!==null&&fc(y),y=jo(i,o,u,h),y===null&&xf(i,o,h,bs,u),y===m)break;m=y}m!==null&&h.stopPropagation()}else xf(i,o,h,null,u)}}var bs=null;function jo(i,o,u,h){if(bs=null,i=bo(h),i=Cs(i),i!==null)if(o=Wn(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Es(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return bs=i,null}function bl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lc()){case Is:return 1;case wi:return 4;case An:case xl:return 16;case uc:return 536870912;default:return 16}default:return 16}}var yn=null,Fo=null,on=null;function Al(){if(on)return on;var i,o=Fo,u=o.length,h,m="value"in yn?yn.value:yn.textContent,y=m.length;for(i=0;i<u&&o[i]===m[i];i++);var I=u-i;for(h=1;h<=I&&o[u-h]===m[y-h];h++);return on=m.slice(i,1<h?1-h:void 0)}function Uo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function vr(){return!0}function Rl(){return!1}function Mt(i){function o(u,h,m,y,I){this._reactName=u,this._targetInst=m,this.type=h,this.nativeEvent=y,this.target=I,this.currentTarget=null;for(var b in i)i.hasOwnProperty(b)&&(u=i[b],this[b]=u?u(y):y[b]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?vr:Rl,this.isPropagationStopped=Rl,this}return he(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=vr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=vr)},persist:function(){},isPersistent:vr}),o}var Jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bo=Mt(Jn),_r=he({},Jn,{view:0,detail:0}),ff=Mt(_r),zo,Kr,Ai,As=he({},_r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ai&&(Ai&&i.type==="mousemove"?(zo=i.screenX-Ai.screenX,Kr=i.screenY-Ai.screenY):Kr=zo=0,Ai=i),zo)},movementY:function(i){return"movementY"in i?i.movementY:Kr}}),$o=Mt(As),Cl=he({},As,{dataTransfer:0}),wc=Mt(Cl),qo=he({},_r,{relatedTarget:0}),Ho=Mt(qo),Ec=he({},Jn,{animationName:0,elapsedTime:0,pseudoElement:0}),Qr=Mt(Ec),Ic=he({},Jn,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),xc=Mt(Ic),Tc=he({},Jn,{data:0}),Pl=Mt(Tc),Wo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kc(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Sc[i])?!!o[i]:!1}function wr(){return kc}var c=he({},_r,{key:function(i){if(i.key){var o=Wo[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Uo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Jt[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wr,charCode:function(i){return i.type==="keypress"?Uo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Uo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=Mt(c),E=he({},As,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Mt(E),z=he({},_r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wr}),G=Mt(z),oe=he({},Jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),qe=Mt(oe),St=he({},As,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=Mt(St),Pt=[9,13,27,32],gt=d&&"CompositionEvent"in window,Cn=null;d&&"documentMode"in document&&(Cn=document.documentMode);var vn=d&&"TextEvent"in window&&!Cn,Rs=d&&(!gt||Cn&&8<Cn&&11>=Cn),Go=" ",my=!1;function gy(i,o){switch(i){case"keyup":return Pt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yy(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ko=!1;function JT(i,o){switch(i){case"compositionend":return yy(o);case"keypress":return o.which!==32?null:(my=!0,Go);case"textInput":return i=o.data,i===Go&&my?null:i;default:return null}}function ZT(i,o){if(Ko)return i==="compositionend"||!gt&&gy(i,o)?(i=Al(),on=Fo=yn=null,Ko=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Rs&&o.locale!=="ko"?null:o.data;default:return null}}var eS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vy(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!eS[i.type]:o==="textarea"}function _y(i,o,u,h){mr(h),o=Pc(o,"onChange"),0<o.length&&(u=new Bo("onChange","change",null,u,h),i.push({event:u,listeners:o}))}var Nl=null,Dl=null;function tS(i){My(i,0)}function bc(i){var o=Zo(i);if(Io(o))return i}function nS(i,o){if(i==="change")return o}var wy=!1;if(d){var pf;if(d){var mf="oninput"in document;if(!mf){var Ey=document.createElement("div");Ey.setAttribute("oninput","return;"),mf=typeof Ey.oninput=="function"}pf=mf}else pf=!1;wy=pf&&(!document.documentMode||9<document.documentMode)}function Iy(){Nl&&(Nl.detachEvent("onpropertychange",xy),Dl=Nl=null)}function xy(i){if(i.propertyName==="value"&&bc(Dl)){var o=[];_y(o,Dl,i,bo(i)),_l(tS,o)}}function rS(i,o,u){i==="focusin"?(Iy(),Nl=o,Dl=u,Nl.attachEvent("onpropertychange",xy)):i==="focusout"&&Iy()}function iS(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return bc(Dl)}function sS(i,o){if(i==="click")return bc(o)}function oS(i,o){if(i==="input"||i==="change")return bc(o)}function aS(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Zn=typeof Object.is=="function"?Object.is:aS;function Vl(i,o){if(Zn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),h=Object.keys(o);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var m=u[h];if(!f.call(o,m)||!Zn(i[m],o[m]))return!1}return!0}function Ty(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Sy(i,o){var u=Ty(i);i=0;for(var h;u;){if(u.nodeType===3){if(h=i+u.textContent.length,i<=o&&h>=o)return{node:u,offset:o-i};i=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Ty(u)}}function ky(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?ky(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function by(){for(var i=window,o=vi();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=vi(i.document)}return o}function gf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function lS(i){var o=by(),u=i.focusedElem,h=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&ky(u.ownerDocument.documentElement,u)){if(h!==null&&gf(u)){if(o=h.start,i=h.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var m=u.textContent.length,y=Math.min(h.start,m);h=h.end===void 0?y:Math.min(h.end,m),!i.extend&&y>h&&(m=h,h=y,y=m),m=Sy(u,y);var I=Sy(u,h);m&&I&&(i.rangeCount!==1||i.anchorNode!==m.node||i.anchorOffset!==m.offset||i.focusNode!==I.node||i.focusOffset!==I.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),i.removeAllRanges(),y>h?(i.addRange(o),i.extend(I.node,I.offset)):(o.setEnd(I.node,I.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var uS=d&&"documentMode"in document&&11>=document.documentMode,Qo=null,yf=null,Ol=null,vf=!1;function Ay(i,o,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;vf||Qo==null||Qo!==vi(h)||(h=Qo,"selectionStart"in h&&gf(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ol&&Vl(Ol,h)||(Ol=h,h=Pc(yf,"onSelect"),0<h.length&&(o=new Bo("onSelect","select",null,o,u),i.push({event:o,listeners:h}),o.target=Qo)))}function Ac(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var Yo={animationend:Ac("Animation","AnimationEnd"),animationiteration:Ac("Animation","AnimationIteration"),animationstart:Ac("Animation","AnimationStart"),transitionend:Ac("Transition","TransitionEnd")},_f={},Ry={};d&&(Ry=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function Rc(i){if(_f[i])return _f[i];if(!Yo[i])return i;var o=Yo[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in Ry)return _f[i]=o[u];return i}var Cy=Rc("animationend"),Py=Rc("animationiteration"),Ny=Rc("animationstart"),Dy=Rc("transitionend"),Vy=new Map,Oy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ri(i,o){Vy.set(i,o),a(o,[i])}for(var wf=0;wf<Oy.length;wf++){var Ef=Oy[wf],cS=Ef.toLowerCase(),dS=Ef[0].toUpperCase()+Ef.slice(1);Ri(cS,"on"+dS)}Ri(Cy,"onAnimationEnd"),Ri(Py,"onAnimationIteration"),Ri(Ny,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(Dy,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ll));function Ly(i,o,u){var h=i.type||"unknown-event";i.currentTarget=u,sc(h,o,void 0,i),i.currentTarget=null}function My(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var h=i[u],m=h.event;h=h.listeners;e:{var y=void 0;if(o)for(var I=h.length-1;0<=I;I--){var b=h[I],V=b.instance,W=b.currentTarget;if(b=b.listener,V!==y&&m.isPropagationStopped())break e;Ly(m,b,W),y=V}else for(I=0;I<h.length;I++){if(b=h[I],V=b.instance,W=b.currentTarget,b=b.listener,V!==y&&m.isPropagationStopped())break e;Ly(m,b,W),y=V}}}if(Hn)throw i=wl,Hn=!1,wl=null,i}function et(i,o){var u=o[Rf];u===void 0&&(u=o[Rf]=new Set);var h=i+"__bubble";u.has(h)||(jy(o,i,2,!1),u.add(h))}function If(i,o,u){var h=0;o&&(h|=4),jy(u,i,h,o)}var Cc="_reactListening"+Math.random().toString(36).slice(2);function Ml(i){if(!i[Cc]){i[Cc]=!0,r.forEach(function(u){u!=="selectionchange"&&(hS.has(u)||If(u,!1,i),If(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Cc]||(o[Cc]=!0,If("selectionchange",!1,o))}}function jy(i,o,u,h){switch(bl(o)){case 1:var m=nt;break;case 4:m=hf;break;default:m=kl}u=m.bind(null,o,u,i),m=void 0,!Co||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),h?m!==void 0?i.addEventListener(o,u,{capture:!0,passive:m}):i.addEventListener(o,u,!0):m!==void 0?i.addEventListener(o,u,{passive:m}):i.addEventListener(o,u,!1)}function xf(i,o,u,h,m){var y=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var I=h.tag;if(I===3||I===4){var b=h.stateNode.containerInfo;if(b===m||b.nodeType===8&&b.parentNode===m)break;if(I===4)for(I=h.return;I!==null;){var V=I.tag;if((V===3||V===4)&&(V=I.stateNode.containerInfo,V===m||V.nodeType===8&&V.parentNode===m))return;I=I.return}for(;b!==null;){if(I=Cs(b),I===null)return;if(V=I.tag,V===5||V===6){h=y=I;continue e}b=b.parentNode}}h=h.return}_l(function(){var W=y,Z=bo(u),te=[];e:{var J=Vy.get(i);if(J!==void 0){var de=Bo,pe=i;switch(i){case"keypress":if(Uo(u)===0)break e;case"keydown":case"keyup":de=g;break;case"focusin":pe="focus",de=Ho;break;case"focusout":pe="blur",de=Ho;break;case"beforeblur":case"afterblur":de=Ho;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=$o;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=wc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=G;break;case Cy:case Py:case Ny:de=Qr;break;case Dy:de=qe;break;case"scroll":de=ff;break;case"wheel":de=Le;break;case"copy":case"cut":case"paste":de=xc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=T}var ge=(o&4)!==0,mt=!ge&&i==="scroll",q=ge?J!==null?J+"Capture":null:J;ge=[];for(var M=W,H;M!==null;){H=M;var ie=H.stateNode;if(H.tag===5&&ie!==null&&(H=ie,q!==null&&(ie=pt(M,q),ie!=null&&ge.push(jl(M,ie,H)))),mt)break;M=M.return}0<ge.length&&(J=new de(J,pe,null,u,Z),te.push({event:J,listeners:ge}))}}if((o&7)===0){e:{if(J=i==="mouseover"||i==="pointerover",de=i==="mouseout"||i==="pointerout",J&&u!==ys&&(pe=u.relatedTarget||u.fromElement)&&(Cs(pe)||pe[Yr]))break e;if((de||J)&&(J=Z.window===Z?Z:(J=Z.ownerDocument)?J.defaultView||J.parentWindow:window,de?(pe=u.relatedTarget||u.toElement,de=W,pe=pe?Cs(pe):null,pe!==null&&(mt=Wn(pe),pe!==mt||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(de=null,pe=W),de!==pe)){if(ge=$o,ie="onMouseLeave",q="onMouseEnter",M="mouse",(i==="pointerout"||i==="pointerover")&&(ge=T,ie="onPointerLeave",q="onPointerEnter",M="pointer"),mt=de==null?J:Zo(de),H=pe==null?J:Zo(pe),J=new ge(ie,M+"leave",de,u,Z),J.target=mt,J.relatedTarget=H,ie=null,Cs(Z)===W&&(ge=new ge(q,M+"enter",pe,u,Z),ge.target=H,ge.relatedTarget=mt,ie=ge),mt=ie,de&&pe)t:{for(ge=de,q=pe,M=0,H=ge;H;H=Xo(H))M++;for(H=0,ie=q;ie;ie=Xo(ie))H++;for(;0<M-H;)ge=Xo(ge),M--;for(;0<H-M;)q=Xo(q),H--;for(;M--;){if(ge===q||q!==null&&ge===q.alternate)break t;ge=Xo(ge),q=Xo(q)}ge=null}else ge=null;de!==null&&Fy(te,J,de,ge,!1),pe!==null&&mt!==null&&Fy(te,mt,pe,ge,!0)}}e:{if(J=W?Zo(W):window,de=J.nodeName&&J.nodeName.toLowerCase(),de==="select"||de==="input"&&J.type==="file")var ye=nS;else if(vy(J))if(wy)ye=oS;else{ye=iS;var Ie=rS}else(de=J.nodeName)&&de.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(ye=sS);if(ye&&(ye=ye(i,W))){_y(te,ye,u,Z);break e}Ie&&Ie(i,J,W),i==="focusout"&&(Ie=J._wrapperState)&&Ie.controlled&&J.type==="number"&&To(J,"number",J.value)}switch(Ie=W?Zo(W):window,i){case"focusin":(vy(Ie)||Ie.contentEditable==="true")&&(Qo=Ie,yf=W,Ol=null);break;case"focusout":Ol=yf=Qo=null;break;case"mousedown":vf=!0;break;case"contextmenu":case"mouseup":case"dragend":vf=!1,Ay(te,u,Z);break;case"selectionchange":if(uS)break;case"keydown":case"keyup":Ay(te,u,Z)}var xe;if(gt)e:{switch(i){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Ko?gy(i,u)&&(Se="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Se="onCompositionStart");Se&&(Rs&&u.locale!=="ko"&&(Ko||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Ko&&(xe=Al()):(yn=Z,Fo="value"in yn?yn.value:yn.textContent,Ko=!0)),Ie=Pc(W,Se),0<Ie.length&&(Se=new Pl(Se,i,null,u,Z),te.push({event:Se,listeners:Ie}),xe?Se.data=xe:(xe=yy(u),xe!==null&&(Se.data=xe)))),(xe=vn?JT(i,u):ZT(i,u))&&(W=Pc(W,"onBeforeInput"),0<W.length&&(Z=new Pl("onBeforeInput","beforeinput",null,u,Z),te.push({event:Z,listeners:W}),Z.data=xe))}My(te,o)})}function jl(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Pc(i,o){for(var u=o+"Capture",h=[];i!==null;){var m=i,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=pt(i,u),y!=null&&h.unshift(jl(i,y,m)),y=pt(i,o),y!=null&&h.push(jl(i,y,m))),i=i.return}return h}function Xo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Fy(i,o,u,h,m){for(var y=o._reactName,I=[];u!==null&&u!==h;){var b=u,V=b.alternate,W=b.stateNode;if(V!==null&&V===h)break;b.tag===5&&W!==null&&(b=W,m?(V=pt(u,y),V!=null&&I.unshift(jl(u,V,b))):m||(V=pt(u,y),V!=null&&I.push(jl(u,V,b)))),u=u.return}I.length!==0&&i.push({event:o,listeners:I})}var fS=/\r\n?/g,pS=/\u0000|\uFFFD/g;function Uy(i){return(typeof i=="string"?i:""+i).replace(fS,`
`).replace(pS,"")}function Nc(i,o,u){if(o=Uy(o),Uy(i)!==o&&u)throw Error(t(425))}function Dc(){}var Tf=null,Sf=null;function kf(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var bf=typeof setTimeout=="function"?setTimeout:void 0,mS=typeof clearTimeout=="function"?clearTimeout:void 0,By=typeof Promise=="function"?Promise:void 0,gS=typeof queueMicrotask=="function"?queueMicrotask:typeof By<"u"?function(i){return By.resolve(null).then(i).catch(yS)}:bf;function yS(i){setTimeout(function(){throw i})}function Af(i,o){var u=o,h=0;do{var m=u.nextSibling;if(i.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(h===0){i.removeChild(m),Xn(o);return}h--}else u!=="$"&&u!=="$?"&&u!=="$!"||h++;u=m}while(u);Xn(o)}function Ci(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function zy(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var Jo=Math.random().toString(36).slice(2),Er="__reactFiber$"+Jo,Fl="__reactProps$"+Jo,Yr="__reactContainer$"+Jo,Rf="__reactEvents$"+Jo,vS="__reactListeners$"+Jo,_S="__reactHandles$"+Jo;function Cs(i){var o=i[Er];if(o)return o;for(var u=i.parentNode;u;){if(o=u[Yr]||u[Er]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=zy(i);i!==null;){if(u=i[Er])return u;i=zy(i)}return o}i=u,u=i.parentNode}return null}function Ul(i){return i=i[Er]||i[Yr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Zo(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Vc(i){return i[Fl]||null}var Cf=[],ea=-1;function Pi(i){return{current:i}}function tt(i){0>ea||(i.current=Cf[ea],Cf[ea]=null,ea--)}function Je(i,o){ea++,Cf[ea]=i.current,i.current=o}var Ni={},zt=Pi(Ni),an=Pi(!1),Ps=Ni;function ta(i,o){var u=i.type.contextTypes;if(!u)return Ni;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===o)return h.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in u)m[y]=o[y];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=m),m}function ln(i){return i=i.childContextTypes,i!=null}function Oc(){tt(an),tt(zt)}function $y(i,o,u){if(zt.current!==Ni)throw Error(t(168));Je(zt,o),Je(an,u)}function qy(i,o,u){var h=i.stateNode;if(o=o.childContextTypes,typeof h.getChildContext!="function")return u;h=h.getChildContext();for(var m in h)if(!(m in o))throw Error(t(108,Be(i)||"Unknown",m));return he({},u,h)}function Lc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ni,Ps=zt.current,Je(zt,i),Je(an,an.current),!0}function Hy(i,o,u){var h=i.stateNode;if(!h)throw Error(t(169));u?(i=qy(i,o,Ps),h.__reactInternalMemoizedMergedChildContext=i,tt(an),tt(zt),Je(zt,i)):tt(an),Je(an,u)}var Xr=null,Mc=!1,Pf=!1;function Wy(i){Xr===null?Xr=[i]:Xr.push(i)}function wS(i){Mc=!0,Wy(i)}function Di(){if(!Pf&&Xr!==null){Pf=!0;var i=0,o=Ve;try{var u=Xr;for(Ve=1;i<u.length;i++){var h=u[i];do h=h(!0);while(h!==null)}Xr=null,Mc=!1}catch(m){throw Xr!==null&&(Xr=Xr.slice(i+1)),Vo(Is,Di),m}finally{Ve=o,Pf=!1}}return null}var na=[],ra=0,jc=null,Fc=0,Pn=[],Nn=0,Ns=null,Jr=1,Zr="";function Ds(i,o){na[ra++]=Fc,na[ra++]=jc,jc=i,Fc=o}function Gy(i,o,u){Pn[Nn++]=Jr,Pn[Nn++]=Zr,Pn[Nn++]=Ns,Ns=i;var h=Jr;i=Zr;var m=32-Xt(h)-1;h&=~(1<<m),u+=1;var y=32-Xt(o)+m;if(30<y){var I=m-m%5;y=(h&(1<<I)-1).toString(32),h>>=I,m-=I,Jr=1<<32-Xt(o)+m|u<<m|h,Zr=y+i}else Jr=1<<y|u<<m|h,Zr=i}function Nf(i){i.return!==null&&(Ds(i,1),Gy(i,1,0))}function Df(i){for(;i===jc;)jc=na[--ra],na[ra]=null,Fc=na[--ra],na[ra]=null;for(;i===Ns;)Ns=Pn[--Nn],Pn[Nn]=null,Zr=Pn[--Nn],Pn[Nn]=null,Jr=Pn[--Nn],Pn[Nn]=null}var _n=null,wn=null,rt=!1,er=null;function Ky(i,o){var u=Ln(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function Qy(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,_n=i,wn=Ci(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,_n=i,wn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=Ns!==null?{id:Jr,overflow:Zr}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Ln(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,_n=i,wn=null,!0):!1;default:return!1}}function Vf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Of(i){if(rt){var o=wn;if(o){var u=o;if(!Qy(i,o)){if(Vf(i))throw Error(t(418));o=Ci(u.nextSibling);var h=_n;o&&Qy(i,o)?Ky(h,u):(i.flags=i.flags&-4097|2,rt=!1,_n=i)}}else{if(Vf(i))throw Error(t(418));i.flags=i.flags&-4097|2,rt=!1,_n=i}}}function Yy(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;_n=i}function Uc(i){if(i!==_n)return!1;if(!rt)return Yy(i),rt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!kf(i.type,i.memoizedProps)),o&&(o=wn)){if(Vf(i))throw Xy(),Error(t(418));for(;o;)Ky(i,o),o=Ci(o.nextSibling)}if(Yy(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){wn=Ci(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}wn=null}}else wn=_n?Ci(i.stateNode.nextSibling):null;return!0}function Xy(){for(var i=wn;i;)i=Ci(i.nextSibling)}function ia(){wn=_n=null,rt=!1}function Lf(i){er===null?er=[i]:er.push(i)}var ES=re.ReactCurrentBatchConfig;function Bl(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var h=u.stateNode}if(!h)throw Error(t(147,i));var m=h,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(I){var b=m.refs;I===null?delete b[y]:b[y]=I},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Bc(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Jy(i){var o=i._init;return o(i._payload)}function Zy(i){function o(q,M){if(i){var H=q.deletions;H===null?(q.deletions=[M],q.flags|=16):H.push(M)}}function u(q,M){if(!i)return null;for(;M!==null;)o(q,M),M=M.sibling;return null}function h(q,M){for(q=new Map;M!==null;)M.key!==null?q.set(M.key,M):q.set(M.index,M),M=M.sibling;return q}function m(q,M){return q=Bi(q,M),q.index=0,q.sibling=null,q}function y(q,M,H){return q.index=H,i?(H=q.alternate,H!==null?(H=H.index,H<M?(q.flags|=2,M):H):(q.flags|=2,M)):(q.flags|=1048576,M)}function I(q){return i&&q.alternate===null&&(q.flags|=2),q}function b(q,M,H,ie){return M===null||M.tag!==6?(M=bp(H,q.mode,ie),M.return=q,M):(M=m(M,H),M.return=q,M)}function V(q,M,H,ie){var ye=H.type;return ye===P?Z(q,M,H.props.children,ie,H.key):M!==null&&(M.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===ee&&Jy(ye)===M.type)?(ie=m(M,H.props),ie.ref=Bl(q,M,H),ie.return=q,ie):(ie=dd(H.type,H.key,H.props,null,q.mode,ie),ie.ref=Bl(q,M,H),ie.return=q,ie)}function W(q,M,H,ie){return M===null||M.tag!==4||M.stateNode.containerInfo!==H.containerInfo||M.stateNode.implementation!==H.implementation?(M=Ap(H,q.mode,ie),M.return=q,M):(M=m(M,H.children||[]),M.return=q,M)}function Z(q,M,H,ie,ye){return M===null||M.tag!==7?(M=Bs(H,q.mode,ie,ye),M.return=q,M):(M=m(M,H),M.return=q,M)}function te(q,M,H){if(typeof M=="string"&&M!==""||typeof M=="number")return M=bp(""+M,q.mode,H),M.return=q,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case ue:return H=dd(M.type,M.key,M.props,null,q.mode,H),H.ref=Bl(q,null,M),H.return=q,H;case ce:return M=Ap(M,q.mode,H),M.return=q,M;case ee:var ie=M._init;return te(q,ie(M._payload),H)}if(Br(M)||Ee(M))return M=Bs(M,q.mode,H,null),M.return=q,M;Bc(q,M)}return null}function J(q,M,H,ie){var ye=M!==null?M.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return ye!==null?null:b(q,M,""+H,ie);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case ue:return H.key===ye?V(q,M,H,ie):null;case ce:return H.key===ye?W(q,M,H,ie):null;case ee:return ye=H._init,J(q,M,ye(H._payload),ie)}if(Br(H)||Ee(H))return ye!==null?null:Z(q,M,H,ie,null);Bc(q,H)}return null}function de(q,M,H,ie,ye){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return q=q.get(H)||null,b(M,q,""+ie,ye);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case ue:return q=q.get(ie.key===null?H:ie.key)||null,V(M,q,ie,ye);case ce:return q=q.get(ie.key===null?H:ie.key)||null,W(M,q,ie,ye);case ee:var Ie=ie._init;return de(q,M,H,Ie(ie._payload),ye)}if(Br(ie)||Ee(ie))return q=q.get(H)||null,Z(M,q,ie,ye,null);Bc(M,ie)}return null}function pe(q,M,H,ie){for(var ye=null,Ie=null,xe=M,Se=M=0,Vt=null;xe!==null&&Se<H.length;Se++){xe.index>Se?(Vt=xe,xe=null):Vt=xe.sibling;var Ue=J(q,xe,H[Se],ie);if(Ue===null){xe===null&&(xe=Vt);break}i&&xe&&Ue.alternate===null&&o(q,xe),M=y(Ue,M,Se),Ie===null?ye=Ue:Ie.sibling=Ue,Ie=Ue,xe=Vt}if(Se===H.length)return u(q,xe),rt&&Ds(q,Se),ye;if(xe===null){for(;Se<H.length;Se++)xe=te(q,H[Se],ie),xe!==null&&(M=y(xe,M,Se),Ie===null?ye=xe:Ie.sibling=xe,Ie=xe);return rt&&Ds(q,Se),ye}for(xe=h(q,xe);Se<H.length;Se++)Vt=de(xe,q,Se,H[Se],ie),Vt!==null&&(i&&Vt.alternate!==null&&xe.delete(Vt.key===null?Se:Vt.key),M=y(Vt,M,Se),Ie===null?ye=Vt:Ie.sibling=Vt,Ie=Vt);return i&&xe.forEach(function(zi){return o(q,zi)}),rt&&Ds(q,Se),ye}function ge(q,M,H,ie){var ye=Ee(H);if(typeof ye!="function")throw Error(t(150));if(H=ye.call(H),H==null)throw Error(t(151));for(var Ie=ye=null,xe=M,Se=M=0,Vt=null,Ue=H.next();xe!==null&&!Ue.done;Se++,Ue=H.next()){xe.index>Se?(Vt=xe,xe=null):Vt=xe.sibling;var zi=J(q,xe,Ue.value,ie);if(zi===null){xe===null&&(xe=Vt);break}i&&xe&&zi.alternate===null&&o(q,xe),M=y(zi,M,Se),Ie===null?ye=zi:Ie.sibling=zi,Ie=zi,xe=Vt}if(Ue.done)return u(q,xe),rt&&Ds(q,Se),ye;if(xe===null){for(;!Ue.done;Se++,Ue=H.next())Ue=te(q,Ue.value,ie),Ue!==null&&(M=y(Ue,M,Se),Ie===null?ye=Ue:Ie.sibling=Ue,Ie=Ue);return rt&&Ds(q,Se),ye}for(xe=h(q,xe);!Ue.done;Se++,Ue=H.next())Ue=de(xe,q,Se,Ue.value,ie),Ue!==null&&(i&&Ue.alternate!==null&&xe.delete(Ue.key===null?Se:Ue.key),M=y(Ue,M,Se),Ie===null?ye=Ue:Ie.sibling=Ue,Ie=Ue);return i&&xe.forEach(function(ek){return o(q,ek)}),rt&&Ds(q,Se),ye}function mt(q,M,H,ie){if(typeof H=="object"&&H!==null&&H.type===P&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case ue:e:{for(var ye=H.key,Ie=M;Ie!==null;){if(Ie.key===ye){if(ye=H.type,ye===P){if(Ie.tag===7){u(q,Ie.sibling),M=m(Ie,H.props.children),M.return=q,q=M;break e}}else if(Ie.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===ee&&Jy(ye)===Ie.type){u(q,Ie.sibling),M=m(Ie,H.props),M.ref=Bl(q,Ie,H),M.return=q,q=M;break e}u(q,Ie);break}else o(q,Ie);Ie=Ie.sibling}H.type===P?(M=Bs(H.props.children,q.mode,ie,H.key),M.return=q,q=M):(ie=dd(H.type,H.key,H.props,null,q.mode,ie),ie.ref=Bl(q,M,H),ie.return=q,q=ie)}return I(q);case ce:e:{for(Ie=H.key;M!==null;){if(M.key===Ie)if(M.tag===4&&M.stateNode.containerInfo===H.containerInfo&&M.stateNode.implementation===H.implementation){u(q,M.sibling),M=m(M,H.children||[]),M.return=q,q=M;break e}else{u(q,M);break}else o(q,M);M=M.sibling}M=Ap(H,q.mode,ie),M.return=q,q=M}return I(q);case ee:return Ie=H._init,mt(q,M,Ie(H._payload),ie)}if(Br(H))return pe(q,M,H,ie);if(Ee(H))return ge(q,M,H,ie);Bc(q,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,M!==null&&M.tag===6?(u(q,M.sibling),M=m(M,H),M.return=q,q=M):(u(q,M),M=bp(H,q.mode,ie),M.return=q,q=M),I(q)):u(q,M)}return mt}var sa=Zy(!0),ev=Zy(!1),zc=Pi(null),$c=null,oa=null,Mf=null;function jf(){Mf=oa=$c=null}function Ff(i){var o=zc.current;tt(zc),i._currentValue=o}function Uf(i,o,u){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===u)break;i=i.return}}function aa(i,o){$c=i,Mf=oa=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(un=!0),i.firstContext=null)}function Dn(i){var o=i._currentValue;if(Mf!==i)if(i={context:i,memoizedValue:o,next:null},oa===null){if($c===null)throw Error(t(308));oa=i,$c.dependencies={lanes:0,firstContext:i}}else oa=oa.next=i;return o}var Vs=null;function Bf(i){Vs===null?Vs=[i]:Vs.push(i)}function tv(i,o,u,h){var m=o.interleaved;return m===null?(u.next=u,Bf(o)):(u.next=m.next,m.next=u),o.interleaved=u,ei(i,h)}function ei(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Vi=!1;function zf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nv(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ti(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Oi(i,o,u){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(je&2)!==0){var m=h.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),h.pending=o,ei(i,u)}return m=h.interleaved,m===null?(o.next=o,Bf(h)):(o.next=m.next,m.next=o),h.interleaved=o,ei(i,u)}function qc(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,Ti(i,u)}}function rv(i,o){var u=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var m=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var I={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};y===null?m=y=I:y=y.next=I,u=u.next}while(u!==null);y===null?m=y=o:y=y.next=o}else m=y=o;u={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:h.shared,effects:h.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function Hc(i,o,u,h){var m=i.updateQueue;Vi=!1;var y=m.firstBaseUpdate,I=m.lastBaseUpdate,b=m.shared.pending;if(b!==null){m.shared.pending=null;var V=b,W=V.next;V.next=null,I===null?y=W:I.next=W,I=V;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,b=Z.lastBaseUpdate,b!==I&&(b===null?Z.firstBaseUpdate=W:b.next=W,Z.lastBaseUpdate=V))}if(y!==null){var te=m.baseState;I=0,Z=W=V=null,b=y;do{var J=b.lane,de=b.eventTime;if((h&J)===J){Z!==null&&(Z=Z.next={eventTime:de,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var pe=i,ge=b;switch(J=o,de=u,ge.tag){case 1:if(pe=ge.payload,typeof pe=="function"){te=pe.call(de,te,J);break e}te=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=ge.payload,J=typeof pe=="function"?pe.call(de,te,J):pe,J==null)break e;te=he({},te,J);break e;case 2:Vi=!0}}b.callback!==null&&b.lane!==0&&(i.flags|=64,J=m.effects,J===null?m.effects=[b]:J.push(b))}else de={eventTime:de,lane:J,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Z===null?(W=Z=de,V=te):Z=Z.next=de,I|=J;if(b=b.next,b===null){if(b=m.shared.pending,b===null)break;J=b,b=J.next,J.next=null,m.lastBaseUpdate=J,m.shared.pending=null}}while(!0);if(Z===null&&(V=te),m.baseState=V,m.firstBaseUpdate=W,m.lastBaseUpdate=Z,o=m.shared.interleaved,o!==null){m=o;do I|=m.lane,m=m.next;while(m!==o)}else y===null&&(m.shared.lanes=0);Ms|=I,i.lanes=I,i.memoizedState=te}}function iv(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var h=i[o],m=h.callback;if(m!==null){if(h.callback=null,h=u,typeof m!="function")throw Error(t(191,m));m.call(h)}}}var zl={},Ir=Pi(zl),$l=Pi(zl),ql=Pi(zl);function Os(i){if(i===zl)throw Error(t(174));return i}function $f(i,o){switch(Je(ql,o),Je($l,i),Je(Ir,zl),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Tt(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Tt(o,i)}tt(Ir),Je(Ir,o)}function la(){tt(Ir),tt($l),tt(ql)}function sv(i){Os(ql.current);var o=Os(Ir.current),u=Tt(o,i.type);o!==u&&(Je($l,i),Je(Ir,u))}function qf(i){$l.current===i&&(tt(Ir),tt($l))}var lt=Pi(0);function Wc(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Hf=[];function Wf(){for(var i=0;i<Hf.length;i++)Hf[i]._workInProgressVersionPrimary=null;Hf.length=0}var Gc=re.ReactCurrentDispatcher,Gf=re.ReactCurrentBatchConfig,Ls=0,ut=null,kt=null,Nt=null,Kc=!1,Hl=!1,Wl=0,IS=0;function $t(){throw Error(t(321))}function Kf(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!Zn(i[u],o[u]))return!1;return!0}function Qf(i,o,u,h,m,y){if(Ls=y,ut=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Gc.current=i===null||i.memoizedState===null?kS:bS,i=u(h,m),Hl){y=0;do{if(Hl=!1,Wl=0,25<=y)throw Error(t(301));y+=1,Nt=kt=null,o.updateQueue=null,Gc.current=AS,i=u(h,m)}while(Hl)}if(Gc.current=Xc,o=kt!==null&&kt.next!==null,Ls=0,Nt=kt=ut=null,Kc=!1,o)throw Error(t(300));return i}function Yf(){var i=Wl!==0;return Wl=0,i}function xr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?ut.memoizedState=Nt=i:Nt=Nt.next=i,Nt}function Vn(){if(kt===null){var i=ut.alternate;i=i!==null?i.memoizedState:null}else i=kt.next;var o=Nt===null?ut.memoizedState:Nt.next;if(o!==null)Nt=o,kt=i;else{if(i===null)throw Error(t(310));kt=i,i={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Nt===null?ut.memoizedState=Nt=i:Nt=Nt.next=i}return Nt}function Gl(i,o){return typeof o=="function"?o(i):o}function Xf(i){var o=Vn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var h=kt,m=h.baseQueue,y=u.pending;if(y!==null){if(m!==null){var I=m.next;m.next=y.next,y.next=I}h.baseQueue=m=y,u.pending=null}if(m!==null){y=m.next,h=h.baseState;var b=I=null,V=null,W=y;do{var Z=W.lane;if((Ls&Z)===Z)V!==null&&(V=V.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),h=W.hasEagerState?W.eagerState:i(h,W.action);else{var te={lane:Z,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};V===null?(b=V=te,I=h):V=V.next=te,ut.lanes|=Z,Ms|=Z}W=W.next}while(W!==null&&W!==y);V===null?I=h:V.next=b,Zn(h,o.memoizedState)||(un=!0),o.memoizedState=h,o.baseState=I,o.baseQueue=V,u.lastRenderedState=h}if(i=u.interleaved,i!==null){m=i;do y=m.lane,ut.lanes|=y,Ms|=y,m=m.next;while(m!==i)}else m===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Jf(i){var o=Vn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var h=u.dispatch,m=u.pending,y=o.memoizedState;if(m!==null){u.pending=null;var I=m=m.next;do y=i(y,I.action),I=I.next;while(I!==m);Zn(y,o.memoizedState)||(un=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,h]}function ov(){}function av(i,o){var u=ut,h=Vn(),m=o(),y=!Zn(h.memoizedState,m);if(y&&(h.memoizedState=m,un=!0),h=h.queue,Zf(cv.bind(null,u,h,i),[i]),h.getSnapshot!==o||y||Nt!==null&&Nt.memoizedState.tag&1){if(u.flags|=2048,Kl(9,uv.bind(null,u,h,m,o),void 0,null),Dt===null)throw Error(t(349));(Ls&30)!==0||lv(u,o,m)}return m}function lv(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=ut.updateQueue,o===null?(o={lastEffect:null,stores:null},ut.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function uv(i,o,u,h){o.value=u,o.getSnapshot=h,dv(o)&&hv(i)}function cv(i,o,u){return u(function(){dv(o)&&hv(i)})}function dv(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!Zn(i,u)}catch{return!0}}function hv(i){var o=ei(i,1);o!==null&&ir(o,i,1,-1)}function fv(i){var o=xr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gl,lastRenderedState:i},o.queue=i,i=i.dispatch=SS.bind(null,ut,i),[o.memoizedState,i]}function Kl(i,o,u,h){return i={tag:i,create:o,destroy:u,deps:h,next:null},o=ut.updateQueue,o===null?(o={lastEffect:null,stores:null},ut.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(h=u.next,u.next=i,i.next=h,o.lastEffect=i)),i}function pv(){return Vn().memoizedState}function Qc(i,o,u,h){var m=xr();ut.flags|=i,m.memoizedState=Kl(1|o,u,void 0,h===void 0?null:h)}function Yc(i,o,u,h){var m=Vn();h=h===void 0?null:h;var y=void 0;if(kt!==null){var I=kt.memoizedState;if(y=I.destroy,h!==null&&Kf(h,I.deps)){m.memoizedState=Kl(o,u,y,h);return}}ut.flags|=i,m.memoizedState=Kl(1|o,u,y,h)}function mv(i,o){return Qc(8390656,8,i,o)}function Zf(i,o){return Yc(2048,8,i,o)}function gv(i,o){return Yc(4,2,i,o)}function yv(i,o){return Yc(4,4,i,o)}function vv(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function _v(i,o,u){return u=u!=null?u.concat([i]):null,Yc(4,4,vv.bind(null,o,i),u)}function ep(){}function wv(i,o){var u=Vn();o=o===void 0?null:o;var h=u.memoizedState;return h!==null&&o!==null&&Kf(o,h[1])?h[0]:(u.memoizedState=[i,o],i)}function Ev(i,o){var u=Vn();o=o===void 0?null:o;var h=u.memoizedState;return h!==null&&o!==null&&Kf(o,h[1])?h[0]:(i=i(),u.memoizedState=[i,o],i)}function Iv(i,o,u){return(Ls&21)===0?(i.baseState&&(i.baseState=!1,un=!0),i.memoizedState=u):(Zn(u,o)||(u=Ss(),ut.lanes|=u,Ms|=u,i.baseState=!0),o)}function xS(i,o){var u=Ve;Ve=u!==0&&4>u?u:4,i(!0);var h=Gf.transition;Gf.transition={};try{i(!1),o()}finally{Ve=u,Gf.transition=h}}function xv(){return Vn().memoizedState}function TS(i,o,u){var h=Fi(i);if(u={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null},Tv(i))Sv(o,u);else if(u=tv(i,o,u,h),u!==null){var m=en();ir(u,i,h,m),kv(u,o,h)}}function SS(i,o,u){var h=Fi(i),m={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null};if(Tv(i))Sv(o,m);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var I=o.lastRenderedState,b=y(I,u);if(m.hasEagerState=!0,m.eagerState=b,Zn(b,I)){var V=o.interleaved;V===null?(m.next=m,Bf(o)):(m.next=V.next,V.next=m),o.interleaved=m;return}}catch{}finally{}u=tv(i,o,m,h),u!==null&&(m=en(),ir(u,i,h,m),kv(u,o,h))}}function Tv(i){var o=i.alternate;return i===ut||o!==null&&o===ut}function Sv(i,o){Hl=Kc=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function kv(i,o,u){if((u&4194240)!==0){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,Ti(i,u)}}var Xc={readContext:Dn,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},kS={readContext:Dn,useCallback:function(i,o){return xr().memoizedState=[i,o===void 0?null:o],i},useContext:Dn,useEffect:mv,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,Qc(4194308,4,vv.bind(null,o,i),u)},useLayoutEffect:function(i,o){return Qc(4194308,4,i,o)},useInsertionEffect:function(i,o){return Qc(4,2,i,o)},useMemo:function(i,o){var u=xr();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var h=xr();return o=u!==void 0?u(o):o,h.memoizedState=h.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},h.queue=i,i=i.dispatch=TS.bind(null,ut,i),[h.memoizedState,i]},useRef:function(i){var o=xr();return i={current:i},o.memoizedState=i},useState:fv,useDebugValue:ep,useDeferredValue:function(i){return xr().memoizedState=i},useTransition:function(){var i=fv(!1),o=i[0];return i=xS.bind(null,i[1]),xr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var h=ut,m=xr();if(rt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),Dt===null)throw Error(t(349));(Ls&30)!==0||lv(h,o,u)}m.memoizedState=u;var y={value:u,getSnapshot:o};return m.queue=y,mv(cv.bind(null,h,y,i),[i]),h.flags|=2048,Kl(9,uv.bind(null,h,y,u,o),void 0,null),u},useId:function(){var i=xr(),o=Dt.identifierPrefix;if(rt){var u=Zr,h=Jr;u=(h&~(1<<32-Xt(h)-1)).toString(32)+u,o=":"+o+"R"+u,u=Wl++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=IS++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},bS={readContext:Dn,useCallback:wv,useContext:Dn,useEffect:Zf,useImperativeHandle:_v,useInsertionEffect:gv,useLayoutEffect:yv,useMemo:Ev,useReducer:Xf,useRef:pv,useState:function(){return Xf(Gl)},useDebugValue:ep,useDeferredValue:function(i){var o=Vn();return Iv(o,kt.memoizedState,i)},useTransition:function(){var i=Xf(Gl)[0],o=Vn().memoizedState;return[i,o]},useMutableSource:ov,useSyncExternalStore:av,useId:xv,unstable_isNewReconciler:!1},AS={readContext:Dn,useCallback:wv,useContext:Dn,useEffect:Zf,useImperativeHandle:_v,useInsertionEffect:gv,useLayoutEffect:yv,useMemo:Ev,useReducer:Jf,useRef:pv,useState:function(){return Jf(Gl)},useDebugValue:ep,useDeferredValue:function(i){var o=Vn();return kt===null?o.memoizedState=i:Iv(o,kt.memoizedState,i)},useTransition:function(){var i=Jf(Gl)[0],o=Vn().memoizedState;return[i,o]},useMutableSource:ov,useSyncExternalStore:av,useId:xv,unstable_isNewReconciler:!1};function tr(i,o){if(i&&i.defaultProps){o=he({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function tp(i,o,u,h){o=i.memoizedState,u=u(h,o),u=u==null?o:he({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Jc={isMounted:function(i){return(i=i._reactInternals)?Wn(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var h=en(),m=Fi(i),y=ti(h,m);y.payload=o,u!=null&&(y.callback=u),o=Oi(i,y,m),o!==null&&(ir(o,i,m,h),qc(o,i,m))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var h=en(),m=Fi(i),y=ti(h,m);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=Oi(i,y,m),o!==null&&(ir(o,i,m,h),qc(o,i,m))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=en(),h=Fi(i),m=ti(u,h);m.tag=2,o!=null&&(m.callback=o),o=Oi(i,m,h),o!==null&&(ir(o,i,h,u),qc(o,i,h))}};function bv(i,o,u,h,m,y,I){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,I):o.prototype&&o.prototype.isPureReactComponent?!Vl(u,h)||!Vl(m,y):!0}function Av(i,o,u){var h=!1,m=Ni,y=o.contextType;return typeof y=="object"&&y!==null?y=Dn(y):(m=ln(o)?Ps:zt.current,h=o.contextTypes,y=(h=h!=null)?ta(i,m):Ni),o=new o(u,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Jc,i.stateNode=o,o._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=m,i.__reactInternalMemoizedMaskedChildContext=y),o}function Rv(i,o,u,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,h),o.state!==i&&Jc.enqueueReplaceState(o,o.state,null)}function np(i,o,u,h){var m=i.stateNode;m.props=u,m.state=i.memoizedState,m.refs={},zf(i);var y=o.contextType;typeof y=="object"&&y!==null?m.context=Dn(y):(y=ln(o)?Ps:zt.current,m.context=ta(i,y)),m.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(tp(i,o,y,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&Jc.enqueueReplaceState(m,m.state,null),Hc(i,u,m,h),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308)}function ua(i,o){try{var u="",h=o;do u+=Ce(h),h=h.return;while(h);var m=u}catch(y){m=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:m,digest:null}}function rp(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function ip(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var RS=typeof WeakMap=="function"?WeakMap:Map;function Cv(i,o,u){u=ti(-1,u),u.tag=3,u.payload={element:null};var h=o.value;return u.callback=function(){sd||(sd=!0,_p=h),ip(i,o)},u}function Pv(i,o,u){u=ti(-1,u),u.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var m=o.value;u.payload=function(){return h(m)},u.callback=function(){ip(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(u.callback=function(){ip(i,o),typeof h!="function"&&(Mi===null?Mi=new Set([this]):Mi.add(this));var I=o.stack;this.componentDidCatch(o.value,{componentStack:I!==null?I:""})}),u}function Nv(i,o,u){var h=i.pingCache;if(h===null){h=i.pingCache=new RS;var m=new Set;h.set(o,m)}else m=h.get(o),m===void 0&&(m=new Set,h.set(o,m));m.has(u)||(m.add(u),i=$S.bind(null,i,o,u),o.then(i,i))}function Dv(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Vv(i,o,u,h,m){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=ti(-1,1),o.tag=2,Oi(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=m,i)}var CS=re.ReactCurrentOwner,un=!1;function Zt(i,o,u,h){o.child=i===null?ev(o,null,u,h):sa(o,i.child,u,h)}function Ov(i,o,u,h,m){u=u.render;var y=o.ref;return aa(o,m),h=Qf(i,o,u,h,y,m),u=Yf(),i!==null&&!un?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~m,ni(i,o,m)):(rt&&u&&Nf(o),o.flags|=1,Zt(i,o,h,m),o.child)}function Lv(i,o,u,h,m){if(i===null){var y=u.type;return typeof y=="function"&&!kp(y)&&y.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=y,Mv(i,o,y,h,m)):(i=dd(u.type,null,h,o,o.mode,m),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&m)===0){var I=y.memoizedProps;if(u=u.compare,u=u!==null?u:Vl,u(I,h)&&i.ref===o.ref)return ni(i,o,m)}return o.flags|=1,i=Bi(y,h),i.ref=o.ref,i.return=o,o.child=i}function Mv(i,o,u,h,m){if(i!==null){var y=i.memoizedProps;if(Vl(y,h)&&i.ref===o.ref)if(un=!1,o.pendingProps=h=y,(i.lanes&m)!==0)(i.flags&131072)!==0&&(un=!0);else return o.lanes=i.lanes,ni(i,o,m)}return sp(i,o,u,h,m)}function jv(i,o,u){var h=o.pendingProps,m=h.children,y=i!==null?i.memoizedState:null;if(h.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(da,En),En|=u;else{if((u&1073741824)===0)return i=y!==null?y.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Je(da,En),En|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:u,Je(da,En),En|=h}else y!==null?(h=y.baseLanes|u,o.memoizedState=null):h=u,Je(da,En),En|=h;return Zt(i,o,m,u),o.child}function Fv(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function sp(i,o,u,h,m){var y=ln(u)?Ps:zt.current;return y=ta(o,y),aa(o,m),u=Qf(i,o,u,h,y,m),h=Yf(),i!==null&&!un?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~m,ni(i,o,m)):(rt&&h&&Nf(o),o.flags|=1,Zt(i,o,u,m),o.child)}function Uv(i,o,u,h,m){if(ln(u)){var y=!0;Lc(o)}else y=!1;if(aa(o,m),o.stateNode===null)ed(i,o),Av(o,u,h),np(o,u,h,m),h=!0;else if(i===null){var I=o.stateNode,b=o.memoizedProps;I.props=b;var V=I.context,W=u.contextType;typeof W=="object"&&W!==null?W=Dn(W):(W=ln(u)?Ps:zt.current,W=ta(o,W));var Z=u.getDerivedStateFromProps,te=typeof Z=="function"||typeof I.getSnapshotBeforeUpdate=="function";te||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(b!==h||V!==W)&&Rv(o,I,h,W),Vi=!1;var J=o.memoizedState;I.state=J,Hc(o,h,I,m),V=o.memoizedState,b!==h||J!==V||an.current||Vi?(typeof Z=="function"&&(tp(o,u,Z,h),V=o.memoizedState),(b=Vi||bv(o,u,b,h,J,V,W))?(te||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(o.flags|=4194308)):(typeof I.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=V),I.props=h,I.state=V,I.context=W,h=b):(typeof I.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{I=o.stateNode,nv(i,o),b=o.memoizedProps,W=o.type===o.elementType?b:tr(o.type,b),I.props=W,te=o.pendingProps,J=I.context,V=u.contextType,typeof V=="object"&&V!==null?V=Dn(V):(V=ln(u)?Ps:zt.current,V=ta(o,V));var de=u.getDerivedStateFromProps;(Z=typeof de=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(b!==te||J!==V)&&Rv(o,I,h,V),Vi=!1,J=o.memoizedState,I.state=J,Hc(o,h,I,m);var pe=o.memoizedState;b!==te||J!==pe||an.current||Vi?(typeof de=="function"&&(tp(o,u,de,h),pe=o.memoizedState),(W=Vi||bv(o,u,W,h,J,pe,V)||!1)?(Z||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(h,pe,V),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(h,pe,V)),typeof I.componentDidUpdate=="function"&&(o.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof I.componentDidUpdate!="function"||b===i.memoizedProps&&J===i.memoizedState||(o.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&J===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=pe),I.props=h,I.state=pe,I.context=V,h=W):(typeof I.componentDidUpdate!="function"||b===i.memoizedProps&&J===i.memoizedState||(o.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&J===i.memoizedState||(o.flags|=1024),h=!1)}return op(i,o,u,h,y,m)}function op(i,o,u,h,m,y){Fv(i,o);var I=(o.flags&128)!==0;if(!h&&!I)return m&&Hy(o,u,!1),ni(i,o,y);h=o.stateNode,CS.current=o;var b=I&&typeof u.getDerivedStateFromError!="function"?null:h.render();return o.flags|=1,i!==null&&I?(o.child=sa(o,i.child,null,y),o.child=sa(o,null,b,y)):Zt(i,o,b,y),o.memoizedState=h.state,m&&Hy(o,u,!0),o.child}function Bv(i){var o=i.stateNode;o.pendingContext?$y(i,o.pendingContext,o.pendingContext!==o.context):o.context&&$y(i,o.context,!1),$f(i,o.containerInfo)}function zv(i,o,u,h,m){return ia(),Lf(m),o.flags|=256,Zt(i,o,u,h),o.child}var ap={dehydrated:null,treeContext:null,retryLane:0};function lp(i){return{baseLanes:i,cachePool:null,transitions:null}}function $v(i,o,u){var h=o.pendingProps,m=lt.current,y=!1,I=(o.flags&128)!==0,b;if((b=I)||(b=i!==null&&i.memoizedState===null?!1:(m&2)!==0),b?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(m|=1),Je(lt,m&1),i===null)return Of(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(I=h.children,i=h.fallback,y?(h=o.mode,y=o.child,I={mode:"hidden",children:I},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=I):y=hd(I,h,0,null),i=Bs(i,h,u,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=lp(u),o.memoizedState=ap,i):up(o,I));if(m=i.memoizedState,m!==null&&(b=m.dehydrated,b!==null))return PS(i,o,I,h,b,m,u);if(y){y=h.fallback,I=o.mode,m=i.child,b=m.sibling;var V={mode:"hidden",children:h.children};return(I&1)===0&&o.child!==m?(h=o.child,h.childLanes=0,h.pendingProps=V,o.deletions=null):(h=Bi(m,V),h.subtreeFlags=m.subtreeFlags&14680064),b!==null?y=Bi(b,y):(y=Bs(y,I,u,null),y.flags|=2),y.return=o,h.return=o,h.sibling=y,o.child=h,h=y,y=o.child,I=i.child.memoizedState,I=I===null?lp(u):{baseLanes:I.baseLanes|u,cachePool:null,transitions:I.transitions},y.memoizedState=I,y.childLanes=i.childLanes&~u,o.memoizedState=ap,h}return y=i.child,i=y.sibling,h=Bi(y,{mode:"visible",children:h.children}),(o.mode&1)===0&&(h.lanes=u),h.return=o,h.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=h,o.memoizedState=null,h}function up(i,o){return o=hd({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Zc(i,o,u,h){return h!==null&&Lf(h),sa(o,i.child,null,u),i=up(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function PS(i,o,u,h,m,y,I){if(u)return o.flags&256?(o.flags&=-257,h=rp(Error(t(422))),Zc(i,o,I,h)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=h.fallback,m=o.mode,h=hd({mode:"visible",children:h.children},m,0,null),y=Bs(y,m,I,null),y.flags|=2,h.return=o,y.return=o,h.sibling=y,o.child=h,(o.mode&1)!==0&&sa(o,i.child,null,I),o.child.memoizedState=lp(I),o.memoizedState=ap,y);if((o.mode&1)===0)return Zc(i,o,I,null);if(m.data==="$!"){if(h=m.nextSibling&&m.nextSibling.dataset,h)var b=h.dgst;return h=b,y=Error(t(419)),h=rp(y,h,void 0),Zc(i,o,I,h)}if(b=(I&i.childLanes)!==0,un||b){if(h=Dt,h!==null){switch(I&-I){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(h.suspendedLanes|I))!==0?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,ei(i,m),ir(h,i,m,-1))}return Sp(),h=rp(Error(t(421))),Zc(i,o,I,h)}return m.data==="$?"?(o.flags|=128,o.child=i.child,o=qS.bind(null,i),m._reactRetry=o,null):(i=y.treeContext,wn=Ci(m.nextSibling),_n=o,rt=!0,er=null,i!==null&&(Pn[Nn++]=Jr,Pn[Nn++]=Zr,Pn[Nn++]=Ns,Jr=i.id,Zr=i.overflow,Ns=o),o=up(o,h.children),o.flags|=4096,o)}function qv(i,o,u){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),Uf(i.return,o,u)}function cp(i,o,u,h,m){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:m}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=u,y.tailMode=m)}function Hv(i,o,u){var h=o.pendingProps,m=h.revealOrder,y=h.tail;if(Zt(i,o,h.children,u),h=lt.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&qv(i,u,o);else if(i.tag===19)qv(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(Je(lt,h),(o.mode&1)===0)o.memoizedState=null;else switch(m){case"forwards":for(u=o.child,m=null;u!==null;)i=u.alternate,i!==null&&Wc(i)===null&&(m=u),u=u.sibling;u=m,u===null?(m=o.child,o.child=null):(m=u.sibling,u.sibling=null),cp(o,!1,m,u,y);break;case"backwards":for(u=null,m=o.child,o.child=null;m!==null;){if(i=m.alternate,i!==null&&Wc(i)===null){o.child=m;break}i=m.sibling,m.sibling=u,u=m,m=i}cp(o,!0,u,null,y);break;case"together":cp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ed(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function ni(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Ms|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=Bi(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Bi(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function NS(i,o,u){switch(o.tag){case 3:Bv(o),ia();break;case 5:sv(o);break;case 1:ln(o.type)&&Lc(o);break;case 4:$f(o,o.stateNode.containerInfo);break;case 10:var h=o.type._context,m=o.memoizedProps.value;Je(zc,h._currentValue),h._currentValue=m;break;case 13:if(h=o.memoizedState,h!==null)return h.dehydrated!==null?(Je(lt,lt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?$v(i,o,u):(Je(lt,lt.current&1),i=ni(i,o,u),i!==null?i.sibling:null);Je(lt,lt.current&1);break;case 19:if(h=(u&o.childLanes)!==0,(i.flags&128)!==0){if(h)return Hv(i,o,u);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Je(lt,lt.current),h)break;return null;case 22:case 23:return o.lanes=0,jv(i,o,u)}return ni(i,o,u)}var Wv,dp,Gv,Kv;Wv=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},dp=function(){},Gv=function(i,o,u,h){var m=i.memoizedProps;if(m!==h){i=o.stateNode,Os(Ir.current);var y=null;switch(u){case"input":m=ps(i,m),h=ps(i,h),y=[];break;case"select":m=he({},m,{value:void 0}),h=he({},h,{value:void 0}),y=[];break;case"textarea":m=ul(i,m),h=ul(i,h),y=[];break;default:typeof m.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=Dc)}ml(u,h);var I;u=null;for(W in m)if(!h.hasOwnProperty(W)&&m.hasOwnProperty(W)&&m[W]!=null)if(W==="style"){var b=m[W];for(I in b)b.hasOwnProperty(I)&&(u||(u={}),u[I]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(s.hasOwnProperty(W)?y||(y=[]):(y=y||[]).push(W,null));for(W in h){var V=h[W];if(b=m!=null?m[W]:void 0,h.hasOwnProperty(W)&&V!==b&&(V!=null||b!=null))if(W==="style")if(b){for(I in b)!b.hasOwnProperty(I)||V&&V.hasOwnProperty(I)||(u||(u={}),u[I]="");for(I in V)V.hasOwnProperty(I)&&b[I]!==V[I]&&(u||(u={}),u[I]=V[I])}else u||(y||(y=[]),y.push(W,u)),u=V;else W==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,b=b?b.__html:void 0,V!=null&&b!==V&&(y=y||[]).push(W,V)):W==="children"?typeof V!="string"&&typeof V!="number"||(y=y||[]).push(W,""+V):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(s.hasOwnProperty(W)?(V!=null&&W==="onScroll"&&et("scroll",i),y||b===V||(y=[])):(y=y||[]).push(W,V))}u&&(y=y||[]).push("style",u);var W=y;(o.updateQueue=W)&&(o.flags|=4)}},Kv=function(i,o,u,h){u!==h&&(o.flags|=4)};function Ql(i,o){if(!rt)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function qt(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,h=0;if(o)for(var m=i.child;m!==null;)u|=m.lanes|m.childLanes,h|=m.subtreeFlags&14680064,h|=m.flags&14680064,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)u|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=h,i.childLanes=u,o}function DS(i,o,u){var h=o.pendingProps;switch(Df(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(o),null;case 1:return ln(o.type)&&Oc(),qt(o),null;case 3:return h=o.stateNode,la(),tt(an),tt(zt),Wf(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(Uc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,er!==null&&(Ip(er),er=null))),dp(i,o),qt(o),null;case 5:qf(o);var m=Os(ql.current);if(u=o.type,i!==null&&o.stateNode!=null)Gv(i,o,u,h,m),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!h){if(o.stateNode===null)throw Error(t(166));return qt(o),null}if(i=Os(Ir.current),Uc(o)){h=o.stateNode,u=o.type;var y=o.memoizedProps;switch(h[Er]=o,h[Fl]=y,i=(o.mode&1)!==0,u){case"dialog":et("cancel",h),et("close",h);break;case"iframe":case"object":case"embed":et("load",h);break;case"video":case"audio":for(m=0;m<Ll.length;m++)et(Ll[m],h);break;case"source":et("error",h);break;case"img":case"image":case"link":et("error",h),et("load",h);break;case"details":et("toggle",h);break;case"input":xo(h,y),et("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},et("invalid",h);break;case"textarea":So(h,y),et("invalid",h)}ml(u,y),m=null;for(var I in y)if(y.hasOwnProperty(I)){var b=y[I];I==="children"?typeof b=="string"?h.textContent!==b&&(y.suppressHydrationWarning!==!0&&Nc(h.textContent,b,i),m=["children",b]):typeof b=="number"&&h.textContent!==""+b&&(y.suppressHydrationWarning!==!0&&Nc(h.textContent,b,i),m=["children",""+b]):s.hasOwnProperty(I)&&b!=null&&I==="onScroll"&&et("scroll",h)}switch(u){case"input":Ur(h),ic(h,y,!0);break;case"textarea":Ur(h),cl(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=Dc)}h=m,o.updateQueue=h,h!==null&&(o.flags|=4)}else{I=m.nodeType===9?m:m.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=xt(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=I.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=I.createElement(u,{is:h.is}):(i=I.createElement(u),u==="select"&&(I=i,h.multiple?I.multiple=!0:h.size&&(I.size=h.size))):i=I.createElementNS(i,u),i[Er]=o,i[Fl]=h,Wv(i,o,!1,!1),o.stateNode=i;e:{switch(I=gl(u,h),u){case"dialog":et("cancel",i),et("close",i),m=h;break;case"iframe":case"object":case"embed":et("load",i),m=h;break;case"video":case"audio":for(m=0;m<Ll.length;m++)et(Ll[m],i);m=h;break;case"source":et("error",i),m=h;break;case"img":case"image":case"link":et("error",i),et("load",i),m=h;break;case"details":et("toggle",i),m=h;break;case"input":xo(i,h),m=ps(i,h),et("invalid",i);break;case"option":m=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},m=he({},h,{value:void 0}),et("invalid",i);break;case"textarea":So(i,h),m=ul(i,h),et("invalid",i);break;default:m=h}ml(u,m),b=m;for(y in b)if(b.hasOwnProperty(y)){var V=b[y];y==="style"?fl(i,V):y==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&dl(i,V)):y==="children"?typeof V=="string"?(u!=="textarea"||V!=="")&&_i(i,V):typeof V=="number"&&_i(i,""+V):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?V!=null&&y==="onScroll"&&et("scroll",i):V!=null&&F(i,y,V,I))}switch(u){case"input":Ur(i),ic(i,h,!1);break;case"textarea":Ur(i),cl(i);break;case"option":h.value!=null&&i.setAttribute("value",""+ze(h.value));break;case"select":i.multiple=!!h.multiple,y=h.value,y!=null?zr(i,!!h.multiple,y,!1):h.defaultValue!=null&&zr(i,!!h.multiple,h.defaultValue,!0);break;default:typeof m.onClick=="function"&&(i.onclick=Dc)}switch(u){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return qt(o),null;case 6:if(i&&o.stateNode!=null)Kv(i,o,i.memoizedProps,h);else{if(typeof h!="string"&&o.stateNode===null)throw Error(t(166));if(u=Os(ql.current),Os(Ir.current),Uc(o)){if(h=o.stateNode,u=o.memoizedProps,h[Er]=o,(y=h.nodeValue!==u)&&(i=_n,i!==null))switch(i.tag){case 3:Nc(h.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Nc(h.nodeValue,u,(i.mode&1)!==0)}y&&(o.flags|=4)}else h=(u.nodeType===9?u:u.ownerDocument).createTextNode(h),h[Er]=o,o.stateNode=h}return qt(o),null;case 13:if(tt(lt),h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(rt&&wn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Xy(),ia(),o.flags|=98560,y=!1;else if(y=Uc(o),h!==null&&h.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Er]=o}else ia(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;qt(o),y=!1}else er!==null&&(Ip(er),er=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(lt.current&1)!==0?bt===0&&(bt=3):Sp())),o.updateQueue!==null&&(o.flags|=4),qt(o),null);case 4:return la(),dp(i,o),i===null&&Ml(o.stateNode.containerInfo),qt(o),null;case 10:return Ff(o.type._context),qt(o),null;case 17:return ln(o.type)&&Oc(),qt(o),null;case 19:if(tt(lt),y=o.memoizedState,y===null)return qt(o),null;if(h=(o.flags&128)!==0,I=y.rendering,I===null)if(h)Ql(y,!1);else{if(bt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(I=Wc(i),I!==null){for(o.flags|=128,Ql(y,!1),h=I.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),o.subtreeFlags=0,h=u,u=o.child;u!==null;)y=u,i=h,y.flags&=14680066,I=y.alternate,I===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=I.childLanes,y.lanes=I.lanes,y.child=I.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=I.memoizedProps,y.memoizedState=I.memoizedState,y.updateQueue=I.updateQueue,y.type=I.type,i=I.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Je(lt,lt.current&1|2),o.child}i=i.sibling}y.tail!==null&&Xe()>ha&&(o.flags|=128,h=!0,Ql(y,!1),o.lanes=4194304)}else{if(!h)if(i=Wc(I),i!==null){if(o.flags|=128,h=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Ql(y,!0),y.tail===null&&y.tailMode==="hidden"&&!I.alternate&&!rt)return qt(o),null}else 2*Xe()-y.renderingStartTime>ha&&u!==1073741824&&(o.flags|=128,h=!0,Ql(y,!1),o.lanes=4194304);y.isBackwards?(I.sibling=o.child,o.child=I):(u=y.last,u!==null?u.sibling=I:o.child=I,y.last=I)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=Xe(),o.sibling=null,u=lt.current,Je(lt,h?u&1|2:u&1),o):(qt(o),null);case 22:case 23:return Tp(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&(o.mode&1)!==0?(En&1073741824)!==0&&(qt(o),o.subtreeFlags&6&&(o.flags|=8192)):qt(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function VS(i,o){switch(Df(o),o.tag){case 1:return ln(o.type)&&Oc(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return la(),tt(an),tt(zt),Wf(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return qf(o),null;case 13:if(tt(lt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ia()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return tt(lt),null;case 4:return la(),null;case 10:return Ff(o.type._context),null;case 22:case 23:return Tp(),null;case 24:return null;default:return null}}var td=!1,Ht=!1,OS=typeof WeakSet=="function"?WeakSet:Set,fe=null;function ca(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(h){dt(i,o,h)}else u.current=null}function hp(i,o,u){try{u()}catch(h){dt(i,o,h)}}var Qv=!1;function LS(i,o){if(Tf=bi,i=by(),gf(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var m=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var I=0,b=-1,V=-1,W=0,Z=0,te=i,J=null;t:for(;;){for(var de;te!==u||m!==0&&te.nodeType!==3||(b=I+m),te!==y||h!==0&&te.nodeType!==3||(V=I+h),te.nodeType===3&&(I+=te.nodeValue.length),(de=te.firstChild)!==null;)J=te,te=de;for(;;){if(te===i)break t;if(J===u&&++W===m&&(b=I),J===y&&++Z===h&&(V=I),(de=te.nextSibling)!==null)break;te=J,J=te.parentNode}te=de}u=b===-1||V===-1?null:{start:b,end:V}}else u=null}u=u||{start:0,end:0}}else u=null;for(Sf={focusedElem:i,selectionRange:u},bi=!1,fe=o;fe!==null;)if(o=fe,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,fe=i;else for(;fe!==null;){o=fe;try{var pe=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var ge=pe.memoizedProps,mt=pe.memoizedState,q=o.stateNode,M=q.getSnapshotBeforeUpdate(o.elementType===o.type?ge:tr(o.type,ge),mt);q.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var H=o.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){dt(o,o.return,ie)}if(i=o.sibling,i!==null){i.return=o.return,fe=i;break}fe=o.return}return pe=Qv,Qv=!1,pe}function Yl(i,o,u){var h=o.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&i)===i){var y=m.destroy;m.destroy=void 0,y!==void 0&&hp(o,u,y)}m=m.next}while(m!==h)}}function nd(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var h=u.create;u.destroy=h()}u=u.next}while(u!==o)}}function fp(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function Yv(i){var o=i.alternate;o!==null&&(i.alternate=null,Yv(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Er],delete o[Fl],delete o[Rf],delete o[vS],delete o[_S])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Xv(i){return i.tag===5||i.tag===3||i.tag===4}function Jv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Xv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function pp(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Dc));else if(h!==4&&(i=i.child,i!==null))for(pp(i,o,u),i=i.sibling;i!==null;)pp(i,o,u),i=i.sibling}function mp(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(mp(i,o,u),i=i.sibling;i!==null;)mp(i,o,u),i=i.sibling}var jt=null,nr=!1;function Li(i,o,u){for(u=u.child;u!==null;)Zv(i,o,u),u=u.sibling}function Zv(i,o,u){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(xs,u)}catch{}switch(u.tag){case 5:Ht||ca(u,o);case 6:var h=jt,m=nr;jt=null,Li(i,o,u),jt=h,nr=m,jt!==null&&(nr?(i=jt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):jt.removeChild(u.stateNode));break;case 18:jt!==null&&(nr?(i=jt,u=u.stateNode,i.nodeType===8?Af(i.parentNode,u):i.nodeType===1&&Af(i,u),Xn(i)):Af(jt,u.stateNode));break;case 4:h=jt,m=nr,jt=u.stateNode.containerInfo,nr=!0,Li(i,o,u),jt=h,nr=m;break;case 0:case 11:case 14:case 15:if(!Ht&&(h=u.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){m=h=h.next;do{var y=m,I=y.destroy;y=y.tag,I!==void 0&&((y&2)!==0||(y&4)!==0)&&hp(u,o,I),m=m.next}while(m!==h)}Li(i,o,u);break;case 1:if(!Ht&&(ca(u,o),h=u.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=u.memoizedProps,h.state=u.memoizedState,h.componentWillUnmount()}catch(b){dt(u,o,b)}Li(i,o,u);break;case 21:Li(i,o,u);break;case 22:u.mode&1?(Ht=(h=Ht)||u.memoizedState!==null,Li(i,o,u),Ht=h):Li(i,o,u);break;default:Li(i,o,u)}}function e_(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new OS),o.forEach(function(h){var m=HS.bind(null,i,h);u.has(h)||(u.add(h),h.then(m,m))})}}function rr(i,o){var u=o.deletions;if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];try{var y=i,I=o,b=I;e:for(;b!==null;){switch(b.tag){case 5:jt=b.stateNode,nr=!1;break e;case 3:jt=b.stateNode.containerInfo,nr=!0;break e;case 4:jt=b.stateNode.containerInfo,nr=!0;break e}b=b.return}if(jt===null)throw Error(t(160));Zv(y,I,m),jt=null,nr=!1;var V=m.alternate;V!==null&&(V.return=null),m.return=null}catch(W){dt(m,o,W)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)t_(o,i),o=o.sibling}function t_(i,o){var u=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(rr(o,i),Tr(i),h&4){try{Yl(3,i,i.return),nd(3,i)}catch(ge){dt(i,i.return,ge)}try{Yl(5,i,i.return)}catch(ge){dt(i,i.return,ge)}}break;case 1:rr(o,i),Tr(i),h&512&&u!==null&&ca(u,u.return);break;case 5:if(rr(o,i),Tr(i),h&512&&u!==null&&ca(u,u.return),i.flags&32){var m=i.stateNode;try{_i(m,"")}catch(ge){dt(i,i.return,ge)}}if(h&4&&(m=i.stateNode,m!=null)){var y=i.memoizedProps,I=u!==null?u.memoizedProps:y,b=i.type,V=i.updateQueue;if(i.updateQueue=null,V!==null)try{b==="input"&&y.type==="radio"&&y.name!=null&&al(m,y),gl(b,I);var W=gl(b,y);for(I=0;I<V.length;I+=2){var Z=V[I],te=V[I+1];Z==="style"?fl(m,te):Z==="dangerouslySetInnerHTML"?dl(m,te):Z==="children"?_i(m,te):F(m,Z,te,W)}switch(b){case"input":ll(m,y);break;case"textarea":ko(m,y);break;case"select":var J=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var de=y.value;de!=null?zr(m,!!y.multiple,de,!1):J!==!!y.multiple&&(y.defaultValue!=null?zr(m,!!y.multiple,y.defaultValue,!0):zr(m,!!y.multiple,y.multiple?[]:"",!1))}m[Fl]=y}catch(ge){dt(i,i.return,ge)}}break;case 6:if(rr(o,i),Tr(i),h&4){if(i.stateNode===null)throw Error(t(162));m=i.stateNode,y=i.memoizedProps;try{m.nodeValue=y}catch(ge){dt(i,i.return,ge)}}break;case 3:if(rr(o,i),Tr(i),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Xn(o.containerInfo)}catch(ge){dt(i,i.return,ge)}break;case 4:rr(o,i),Tr(i);break;case 13:rr(o,i),Tr(i),m=i.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(vp=Xe())),h&4&&e_(i);break;case 22:if(Z=u!==null&&u.memoizedState!==null,i.mode&1?(Ht=(W=Ht)||Z,rr(o,i),Ht=W):rr(o,i),Tr(i),h&8192){if(W=i.memoizedState!==null,(i.stateNode.isHidden=W)&&!Z&&(i.mode&1)!==0)for(fe=i,Z=i.child;Z!==null;){for(te=fe=Z;fe!==null;){switch(J=fe,de=J.child,J.tag){case 0:case 11:case 14:case 15:Yl(4,J,J.return);break;case 1:ca(J,J.return);var pe=J.stateNode;if(typeof pe.componentWillUnmount=="function"){h=J,u=J.return;try{o=h,pe.props=o.memoizedProps,pe.state=o.memoizedState,pe.componentWillUnmount()}catch(ge){dt(h,u,ge)}}break;case 5:ca(J,J.return);break;case 22:if(J.memoizedState!==null){i_(te);continue}}de!==null?(de.return=J,fe=de):i_(te)}Z=Z.sibling}e:for(Z=null,te=i;;){if(te.tag===5){if(Z===null){Z=te;try{m=te.stateNode,W?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(b=te.stateNode,V=te.memoizedProps.style,I=V!=null&&V.hasOwnProperty("display")?V.display:null,b.style.display=hl("display",I))}catch(ge){dt(i,i.return,ge)}}}else if(te.tag===6){if(Z===null)try{te.stateNode.nodeValue=W?"":te.memoizedProps}catch(ge){dt(i,i.return,ge)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===i)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===i)break e;for(;te.sibling===null;){if(te.return===null||te.return===i)break e;Z===te&&(Z=null),te=te.return}Z===te&&(Z=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:rr(o,i),Tr(i),h&4&&e_(i);break;case 21:break;default:rr(o,i),Tr(i)}}function Tr(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(Xv(u)){var h=u;break e}u=u.return}throw Error(t(160))}switch(h.tag){case 5:var m=h.stateNode;h.flags&32&&(_i(m,""),h.flags&=-33);var y=Jv(i);mp(i,y,m);break;case 3:case 4:var I=h.stateNode.containerInfo,b=Jv(i);pp(i,b,I);break;default:throw Error(t(161))}}catch(V){dt(i,i.return,V)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function MS(i,o,u){fe=i,n_(i)}function n_(i,o,u){for(var h=(i.mode&1)!==0;fe!==null;){var m=fe,y=m.child;if(m.tag===22&&h){var I=m.memoizedState!==null||td;if(!I){var b=m.alternate,V=b!==null&&b.memoizedState!==null||Ht;b=td;var W=Ht;if(td=I,(Ht=V)&&!W)for(fe=m;fe!==null;)I=fe,V=I.child,I.tag===22&&I.memoizedState!==null?s_(m):V!==null?(V.return=I,fe=V):s_(m);for(;y!==null;)fe=y,n_(y),y=y.sibling;fe=m,td=b,Ht=W}r_(i)}else(m.subtreeFlags&8772)!==0&&y!==null?(y.return=m,fe=y):r_(i)}}function r_(i){for(;fe!==null;){var o=fe;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Ht||nd(5,o);break;case 1:var h=o.stateNode;if(o.flags&4&&!Ht)if(u===null)h.componentDidMount();else{var m=o.elementType===o.type?u.memoizedProps:tr(o.type,u.memoizedProps);h.componentDidUpdate(m,u.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&iv(o,y,h);break;case 3:var I=o.updateQueue;if(I!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}iv(o,I,u)}break;case 5:var b=o.stateNode;if(u===null&&o.flags&4){u=b;var V=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&u.focus();break;case"img":V.src&&(u.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var W=o.alternate;if(W!==null){var Z=W.memoizedState;if(Z!==null){var te=Z.dehydrated;te!==null&&Xn(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ht||o.flags&512&&fp(o)}catch(J){dt(o,o.return,J)}}if(o===i){fe=null;break}if(u=o.sibling,u!==null){u.return=o.return,fe=u;break}fe=o.return}}function i_(i){for(;fe!==null;){var o=fe;if(o===i){fe=null;break}var u=o.sibling;if(u!==null){u.return=o.return,fe=u;break}fe=o.return}}function s_(i){for(;fe!==null;){var o=fe;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{nd(4,o)}catch(V){dt(o,u,V)}break;case 1:var h=o.stateNode;if(typeof h.componentDidMount=="function"){var m=o.return;try{h.componentDidMount()}catch(V){dt(o,m,V)}}var y=o.return;try{fp(o)}catch(V){dt(o,y,V)}break;case 5:var I=o.return;try{fp(o)}catch(V){dt(o,I,V)}}}catch(V){dt(o,o.return,V)}if(o===i){fe=null;break}var b=o.sibling;if(b!==null){b.return=o.return,fe=b;break}fe=o.return}}var jS=Math.ceil,rd=re.ReactCurrentDispatcher,gp=re.ReactCurrentOwner,On=re.ReactCurrentBatchConfig,je=0,Dt=null,yt=null,Ft=0,En=0,da=Pi(0),bt=0,Xl=null,Ms=0,id=0,yp=0,Jl=null,cn=null,vp=0,ha=1/0,ri=null,sd=!1,_p=null,Mi=null,od=!1,ji=null,ad=0,Zl=0,wp=null,ld=-1,ud=0;function en(){return(je&6)!==0?Xe():ld!==-1?ld:ld=Xe()}function Fi(i){return(i.mode&1)===0?1:(je&2)!==0&&Ft!==0?Ft&-Ft:ES.transition!==null?(ud===0&&(ud=Ss()),ud):(i=Ve,i!==0||(i=window.event,i=i===void 0?16:bl(i.type)),i)}function ir(i,o,u,h){if(50<Zl)throw Zl=0,wp=null,Error(t(185));xi(i,u,h),((je&2)===0||i!==Dt)&&(i===Dt&&((je&2)===0&&(id|=u),bt===4&&Ui(i,Ft)),dn(i,h),u===1&&je===0&&(o.mode&1)===0&&(ha=Xe()+500,Mc&&Di()))}function dn(i,o){var u=i.callbackNode;Hr(i,o);var h=Ts(i,i===Dt?Ft:0);if(h===0)u!==null&&Il(u),i.callbackNode=null,i.callbackPriority=0;else if(o=h&-h,i.callbackPriority!==o){if(u!=null&&Il(u),o===1)i.tag===0?wS(a_.bind(null,i)):Wy(a_.bind(null,i)),gS(function(){(je&6)===0&&Di()}),u=null;else{switch(Si(h)){case 1:u=Is;break;case 4:u=wi;break;case 16:u=An;break;case 536870912:u=uc;break;default:u=An}u=m_(u,o_.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function o_(i,o){if(ld=-1,ud=0,(je&6)!==0)throw Error(t(327));var u=i.callbackNode;if(fa()&&i.callbackNode!==u)return null;var h=Ts(i,i===Dt?Ft:0);if(h===0)return null;if((h&30)!==0||(h&i.expiredLanes)!==0||o)o=cd(i,h);else{o=h;var m=je;je|=2;var y=u_();(Dt!==i||Ft!==o)&&(ri=null,ha=Xe()+500,Fs(i,o));do try{BS();break}catch(b){l_(i,b)}while(!0);jf(),rd.current=y,je=m,yt!==null?o=0:(Dt=null,Ft=0,o=bt)}if(o!==0){if(o===2&&(m=gn(i),m!==0&&(h=m,o=Ep(i,m))),o===1)throw u=Xl,Fs(i,0),Ui(i,h),dn(i,Xe()),u;if(o===6)Ui(i,h);else{if(m=i.current.alternate,(h&30)===0&&!FS(m)&&(o=cd(i,h),o===2&&(y=gn(i),y!==0&&(h=y,o=Ep(i,y))),o===1))throw u=Xl,Fs(i,0),Ui(i,h),dn(i,Xe()),u;switch(i.finishedWork=m,i.finishedLanes=h,o){case 0:case 1:throw Error(t(345));case 2:Us(i,cn,ri);break;case 3:if(Ui(i,h),(h&130023424)===h&&(o=vp+500-Xe(),10<o)){if(Ts(i,0)!==0)break;if(m=i.suspendedLanes,(m&h)!==h){en(),i.pingedLanes|=i.suspendedLanes&m;break}i.timeoutHandle=bf(Us.bind(null,i,cn,ri),o);break}Us(i,cn,ri);break;case 4:if(Ui(i,h),(h&4194240)===h)break;for(o=i.eventTimes,m=-1;0<h;){var I=31-Xt(h);y=1<<I,I=o[I],I>m&&(m=I),h&=~y}if(h=m,h=Xe()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*jS(h/1960))-h,10<h){i.timeoutHandle=bf(Us.bind(null,i,cn,ri),h);break}Us(i,cn,ri);break;case 5:Us(i,cn,ri);break;default:throw Error(t(329))}}}return dn(i,Xe()),i.callbackNode===u?o_.bind(null,i):null}function Ep(i,o){var u=Jl;return i.current.memoizedState.isDehydrated&&(Fs(i,o).flags|=256),i=cd(i,o),i!==2&&(o=cn,cn=u,o!==null&&Ip(o)),i}function Ip(i){cn===null?cn=i:cn.push.apply(cn,i)}function FS(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var h=0;h<u.length;h++){var m=u[h],y=m.getSnapshot;m=m.value;try{if(!Zn(y(),m))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ui(i,o){for(o&=~yp,o&=~id,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-Xt(o),h=1<<u;i[u]=-1,o&=~h}}function a_(i){if((je&6)!==0)throw Error(t(327));fa();var o=Ts(i,0);if((o&1)===0)return dn(i,Xe()),null;var u=cd(i,o);if(i.tag!==0&&u===2){var h=gn(i);h!==0&&(o=h,u=Ep(i,h))}if(u===1)throw u=Xl,Fs(i,0),Ui(i,o),dn(i,Xe()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Us(i,cn,ri),dn(i,Xe()),null}function xp(i,o){var u=je;je|=1;try{return i(o)}finally{je=u,je===0&&(ha=Xe()+500,Mc&&Di())}}function js(i){ji!==null&&ji.tag===0&&(je&6)===0&&fa();var o=je;je|=1;var u=On.transition,h=Ve;try{if(On.transition=null,Ve=1,i)return i()}finally{Ve=h,On.transition=u,je=o,(je&6)===0&&Di()}}function Tp(){En=da.current,tt(da)}function Fs(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,mS(u)),yt!==null)for(u=yt.return;u!==null;){var h=u;switch(Df(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Oc();break;case 3:la(),tt(an),tt(zt),Wf();break;case 5:qf(h);break;case 4:la();break;case 13:tt(lt);break;case 19:tt(lt);break;case 10:Ff(h.type._context);break;case 22:case 23:Tp()}u=u.return}if(Dt=i,yt=i=Bi(i.current,null),Ft=En=o,bt=0,Xl=null,yp=id=Ms=0,cn=Jl=null,Vs!==null){for(o=0;o<Vs.length;o++)if(u=Vs[o],h=u.interleaved,h!==null){u.interleaved=null;var m=h.next,y=u.pending;if(y!==null){var I=y.next;y.next=m,h.next=I}u.pending=h}Vs=null}return i}function l_(i,o){do{var u=yt;try{if(jf(),Gc.current=Xc,Kc){for(var h=ut.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}Kc=!1}if(Ls=0,Nt=kt=ut=null,Hl=!1,Wl=0,gp.current=null,u===null||u.return===null){bt=1,Xl=o,yt=null;break}e:{var y=i,I=u.return,b=u,V=o;if(o=Ft,b.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var W=V,Z=b,te=Z.tag;if((Z.mode&1)===0&&(te===0||te===11||te===15)){var J=Z.alternate;J?(Z.updateQueue=J.updateQueue,Z.memoizedState=J.memoizedState,Z.lanes=J.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var de=Dv(I);if(de!==null){de.flags&=-257,Vv(de,I,b,y,o),de.mode&1&&Nv(y,W,o),o=de,V=W;var pe=o.updateQueue;if(pe===null){var ge=new Set;ge.add(V),o.updateQueue=ge}else pe.add(V);break e}else{if((o&1)===0){Nv(y,W,o),Sp();break e}V=Error(t(426))}}else if(rt&&b.mode&1){var mt=Dv(I);if(mt!==null){(mt.flags&65536)===0&&(mt.flags|=256),Vv(mt,I,b,y,o),Lf(ua(V,b));break e}}y=V=ua(V,b),bt!==4&&(bt=2),Jl===null?Jl=[y]:Jl.push(y),y=I;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var q=Cv(y,V,o);rv(y,q);break e;case 1:b=V;var M=y.type,H=y.stateNode;if((y.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Mi===null||!Mi.has(H)))){y.flags|=65536,o&=-o,y.lanes|=o;var ie=Pv(y,b,o);rv(y,ie);break e}}y=y.return}while(y!==null)}d_(u)}catch(ye){o=ye,yt===u&&u!==null&&(yt=u=u.return);continue}break}while(!0)}function u_(){var i=rd.current;return rd.current=Xc,i===null?Xc:i}function Sp(){(bt===0||bt===3||bt===2)&&(bt=4),Dt===null||(Ms&268435455)===0&&(id&268435455)===0||Ui(Dt,Ft)}function cd(i,o){var u=je;je|=2;var h=u_();(Dt!==i||Ft!==o)&&(ri=null,Fs(i,o));do try{US();break}catch(m){l_(i,m)}while(!0);if(jf(),je=u,rd.current=h,yt!==null)throw Error(t(261));return Dt=null,Ft=0,bt}function US(){for(;yt!==null;)c_(yt)}function BS(){for(;yt!==null&&!ac();)c_(yt)}function c_(i){var o=p_(i.alternate,i,En);i.memoizedProps=i.pendingProps,o===null?d_(i):yt=o,gp.current=null}function d_(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=DS(u,o,En),u!==null){yt=u;return}}else{if(u=VS(u,o),u!==null){u.flags&=32767,yt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{bt=6,yt=null;return}}if(o=o.sibling,o!==null){yt=o;return}yt=o=i}while(o!==null);bt===0&&(bt=5)}function Us(i,o,u){var h=Ve,m=On.transition;try{On.transition=null,Ve=1,zS(i,o,u,h)}finally{On.transition=m,Ve=h}return null}function zS(i,o,u,h){do fa();while(ji!==null);if((je&6)!==0)throw Error(t(327));u=i.finishedWork;var m=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=u.lanes|u.childLanes;if(Qe(i,y),i===Dt&&(yt=Dt=null,Ft=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||od||(od=!0,m_(An,function(){return fa(),null})),y=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||y){y=On.transition,On.transition=null;var I=Ve;Ve=1;var b=je;je|=4,gp.current=null,LS(i,u),t_(u,i),lS(Sf),bi=!!Tf,Sf=Tf=null,i.current=u,MS(u),lf(),je=b,Ve=I,On.transition=y}else i.current=u;if(od&&(od=!1,ji=i,ad=m),y=i.pendingLanes,y===0&&(Mi=null),cc(u.stateNode),dn(i,Xe()),o!==null)for(h=i.onRecoverableError,u=0;u<o.length;u++)m=o[u],h(m.value,{componentStack:m.stack,digest:m.digest});if(sd)throw sd=!1,i=_p,_p=null,i;return(ad&1)!==0&&i.tag!==0&&fa(),y=i.pendingLanes,(y&1)!==0?i===wp?Zl++:(Zl=0,wp=i):Zl=0,Di(),null}function fa(){if(ji!==null){var i=Si(ad),o=On.transition,u=Ve;try{if(On.transition=null,Ve=16>i?16:i,ji===null)var h=!1;else{if(i=ji,ji=null,ad=0,(je&6)!==0)throw Error(t(331));var m=je;for(je|=4,fe=i.current;fe!==null;){var y=fe,I=y.child;if((fe.flags&16)!==0){var b=y.deletions;if(b!==null){for(var V=0;V<b.length;V++){var W=b[V];for(fe=W;fe!==null;){var Z=fe;switch(Z.tag){case 0:case 11:case 15:Yl(8,Z,y)}var te=Z.child;if(te!==null)te.return=Z,fe=te;else for(;fe!==null;){Z=fe;var J=Z.sibling,de=Z.return;if(Yv(Z),Z===W){fe=null;break}if(J!==null){J.return=de,fe=J;break}fe=de}}}var pe=y.alternate;if(pe!==null){var ge=pe.child;if(ge!==null){pe.child=null;do{var mt=ge.sibling;ge.sibling=null,ge=mt}while(ge!==null)}}fe=y}}if((y.subtreeFlags&2064)!==0&&I!==null)I.return=y,fe=I;else e:for(;fe!==null;){if(y=fe,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Yl(9,y,y.return)}var q=y.sibling;if(q!==null){q.return=y.return,fe=q;break e}fe=y.return}}var M=i.current;for(fe=M;fe!==null;){I=fe;var H=I.child;if((I.subtreeFlags&2064)!==0&&H!==null)H.return=I,fe=H;else e:for(I=M;fe!==null;){if(b=fe,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:nd(9,b)}}catch(ye){dt(b,b.return,ye)}if(b===I){fe=null;break e}var ie=b.sibling;if(ie!==null){ie.return=b.return,fe=ie;break e}fe=b.return}}if(je=m,Di(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(xs,i)}catch{}h=!0}return h}finally{Ve=u,On.transition=o}}return!1}function h_(i,o,u){o=ua(u,o),o=Cv(i,o,1),i=Oi(i,o,1),o=en(),i!==null&&(xi(i,1,o),dn(i,o))}function dt(i,o,u){if(i.tag===3)h_(i,i,u);else for(;o!==null;){if(o.tag===3){h_(o,i,u);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Mi===null||!Mi.has(h))){i=ua(u,i),i=Pv(o,i,1),o=Oi(o,i,1),i=en(),o!==null&&(xi(o,1,i),dn(o,i));break}}o=o.return}}function $S(i,o,u){var h=i.pingCache;h!==null&&h.delete(o),o=en(),i.pingedLanes|=i.suspendedLanes&u,Dt===i&&(Ft&u)===u&&(bt===4||bt===3&&(Ft&130023424)===Ft&&500>Xe()-vp?Fs(i,0):yp|=u),dn(i,o)}function f_(i,o){o===0&&((i.mode&1)===0?o=1:(o=Lo,Lo<<=1,(Lo&130023424)===0&&(Lo=4194304)));var u=en();i=ei(i,o),i!==null&&(xi(i,o,u),dn(i,u))}function qS(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),f_(i,u)}function HS(i,o){var u=0;switch(i.tag){case 13:var h=i.stateNode,m=i.memoizedState;m!==null&&(u=m.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(o),f_(i,u)}var p_;p_=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||an.current)un=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return un=!1,NS(i,o,u);un=(i.flags&131072)!==0}else un=!1,rt&&(o.flags&1048576)!==0&&Gy(o,Fc,o.index);switch(o.lanes=0,o.tag){case 2:var h=o.type;ed(i,o),i=o.pendingProps;var m=ta(o,zt.current);aa(o,u),m=Qf(null,o,h,i,m,u);var y=Yf();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,ln(h)?(y=!0,Lc(o)):y=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,zf(o),m.updater=Jc,o.stateNode=m,m._reactInternals=o,np(o,h,i,u),o=op(null,o,h,!0,y,u)):(o.tag=0,rt&&y&&Nf(o),Zt(null,o,m,u),o=o.child),o;case 16:h=o.elementType;e:{switch(ed(i,o),i=o.pendingProps,m=h._init,h=m(h._payload),o.type=h,m=o.tag=GS(h),i=tr(h,i),m){case 0:o=sp(null,o,h,i,u);break e;case 1:o=Uv(null,o,h,i,u);break e;case 11:o=Ov(null,o,h,i,u);break e;case 14:o=Lv(null,o,h,tr(h.type,i),u);break e}throw Error(t(306,h,""))}return o;case 0:return h=o.type,m=o.pendingProps,m=o.elementType===h?m:tr(h,m),sp(i,o,h,m,u);case 1:return h=o.type,m=o.pendingProps,m=o.elementType===h?m:tr(h,m),Uv(i,o,h,m,u);case 3:e:{if(Bv(o),i===null)throw Error(t(387));h=o.pendingProps,y=o.memoizedState,m=y.element,nv(i,o),Hc(o,h,null,u);var I=o.memoizedState;if(h=I.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){m=ua(Error(t(423)),o),o=zv(i,o,h,u,m);break e}else if(h!==m){m=ua(Error(t(424)),o),o=zv(i,o,h,u,m);break e}else for(wn=Ci(o.stateNode.containerInfo.firstChild),_n=o,rt=!0,er=null,u=ev(o,null,h,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ia(),h===m){o=ni(i,o,u);break e}Zt(i,o,h,u)}o=o.child}return o;case 5:return sv(o),i===null&&Of(o),h=o.type,m=o.pendingProps,y=i!==null?i.memoizedProps:null,I=m.children,kf(h,m)?I=null:y!==null&&kf(h,y)&&(o.flags|=32),Fv(i,o),Zt(i,o,I,u),o.child;case 6:return i===null&&Of(o),null;case 13:return $v(i,o,u);case 4:return $f(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=sa(o,null,h,u):Zt(i,o,h,u),o.child;case 11:return h=o.type,m=o.pendingProps,m=o.elementType===h?m:tr(h,m),Ov(i,o,h,m,u);case 7:return Zt(i,o,o.pendingProps,u),o.child;case 8:return Zt(i,o,o.pendingProps.children,u),o.child;case 12:return Zt(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(h=o.type._context,m=o.pendingProps,y=o.memoizedProps,I=m.value,Je(zc,h._currentValue),h._currentValue=I,y!==null)if(Zn(y.value,I)){if(y.children===m.children&&!an.current){o=ni(i,o,u);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var b=y.dependencies;if(b!==null){I=y.child;for(var V=b.firstContext;V!==null;){if(V.context===h){if(y.tag===1){V=ti(-1,u&-u),V.tag=2;var W=y.updateQueue;if(W!==null){W=W.shared;var Z=W.pending;Z===null?V.next=V:(V.next=Z.next,Z.next=V),W.pending=V}}y.lanes|=u,V=y.alternate,V!==null&&(V.lanes|=u),Uf(y.return,u,o),b.lanes|=u;break}V=V.next}}else if(y.tag===10)I=y.type===o.type?null:y.child;else if(y.tag===18){if(I=y.return,I===null)throw Error(t(341));I.lanes|=u,b=I.alternate,b!==null&&(b.lanes|=u),Uf(I,u,o),I=y.sibling}else I=y.child;if(I!==null)I.return=y;else for(I=y;I!==null;){if(I===o){I=null;break}if(y=I.sibling,y!==null){y.return=I.return,I=y;break}I=I.return}y=I}Zt(i,o,m.children,u),o=o.child}return o;case 9:return m=o.type,h=o.pendingProps.children,aa(o,u),m=Dn(m),h=h(m),o.flags|=1,Zt(i,o,h,u),o.child;case 14:return h=o.type,m=tr(h,o.pendingProps),m=tr(h.type,m),Lv(i,o,h,m,u);case 15:return Mv(i,o,o.type,o.pendingProps,u);case 17:return h=o.type,m=o.pendingProps,m=o.elementType===h?m:tr(h,m),ed(i,o),o.tag=1,ln(h)?(i=!0,Lc(o)):i=!1,aa(o,u),Av(o,h,m),np(o,h,m,u),op(null,o,h,!0,i,u);case 19:return Hv(i,o,u);case 22:return jv(i,o,u)}throw Error(t(156,o.tag))};function m_(i,o){return Vo(i,o)}function WS(i,o,u,h){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(i,o,u,h){return new WS(i,o,u,h)}function kp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function GS(i){if(typeof i=="function")return kp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===j)return 11;if(i===Ze)return 14}return 2}function Bi(i,o){var u=i.alternate;return u===null?(u=Ln(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function dd(i,o,u,h,m,y){var I=2;if(h=i,typeof i=="function")kp(i)&&(I=1);else if(typeof i=="string")I=5;else e:switch(i){case P:return Bs(u.children,m,y,o);case k:I=8,m|=8;break;case A:return i=Ln(12,u,o,m|2),i.elementType=A,i.lanes=y,i;case R:return i=Ln(13,u,o,m),i.elementType=R,i.lanes=y,i;case Ke:return i=Ln(19,u,o,m),i.elementType=Ke,i.lanes=y,i;case Fe:return hd(u,m,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case N:I=10;break e;case L:I=9;break e;case j:I=11;break e;case Ze:I=14;break e;case ee:I=16,h=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Ln(I,u,o,m),o.elementType=i,o.type=h,o.lanes=y,o}function Bs(i,o,u,h){return i=Ln(7,i,h,o),i.lanes=u,i}function hd(i,o,u,h){return i=Ln(22,i,h,o),i.elementType=Fe,i.lanes=u,i.stateNode={isHidden:!1},i}function bp(i,o,u){return i=Ln(6,i,null,o),i.lanes=u,i}function Ap(i,o,u){return o=Ln(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function KS(i,o,u,h,m){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ii(0),this.expirationTimes=Ii(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.identifierPrefix=h,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Rp(i,o,u,h,m,y,I,b,V){return i=new KS(i,o,u,b,V),o===1?(o=1,y===!0&&(o|=8)):o=0,y=Ln(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:h,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},zf(y),i}function QS(i,o,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ce,key:h==null?null:""+h,children:i,containerInfo:o,implementation:u}}function g_(i){if(!i)return Ni;i=i._reactInternals;e:{if(Wn(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(ln(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(ln(u))return qy(i,u,o)}return o}function y_(i,o,u,h,m,y,I,b,V){return i=Rp(u,h,!0,i,m,y,I,b,V),i.context=g_(null),u=i.current,h=en(),m=Fi(u),y=ti(h,m),y.callback=o??null,Oi(u,y,m),i.current.lanes=m,xi(i,m,h),dn(i,h),i}function fd(i,o,u,h){var m=o.current,y=en(),I=Fi(m);return u=g_(u),o.context===null?o.context=u:o.pendingContext=u,o=ti(y,I),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=Oi(m,o,I),i!==null&&(ir(i,m,I,y),qc(i,m,I)),I}function pd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function v_(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function Cp(i,o){v_(i,o),(i=i.alternate)&&v_(i,o)}function YS(){return null}var __=typeof reportError=="function"?reportError:function(i){console.error(i)};function Pp(i){this._internalRoot=i}md.prototype.render=Pp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));fd(i,o,null,null)},md.prototype.unmount=Pp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;js(function(){fd(null,i,null,null)}),o[Yr]=null}};function md(i){this._internalRoot=i}md.prototype.unstable_scheduleHydration=function(i){if(i){var o=mc();i={blockedOn:null,target:i,priority:o};for(var u=0;u<yr.length&&o!==0&&o<yr[u].priority;u++);yr.splice(u,0,i),u===0&&vc(i)}};function Np(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function gd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function w_(){}function XS(i,o,u,h,m){if(m){if(typeof h=="function"){var y=h;h=function(){var W=pd(I);y.call(W)}}var I=y_(o,h,i,0,null,!1,!1,"",w_);return i._reactRootContainer=I,i[Yr]=I.current,Ml(i.nodeType===8?i.parentNode:i),js(),I}for(;m=i.lastChild;)i.removeChild(m);if(typeof h=="function"){var b=h;h=function(){var W=pd(V);b.call(W)}}var V=Rp(i,0,!1,null,null,!1,!1,"",w_);return i._reactRootContainer=V,i[Yr]=V.current,Ml(i.nodeType===8?i.parentNode:i),js(function(){fd(o,V,u,h)}),V}function yd(i,o,u,h,m){var y=u._reactRootContainer;if(y){var I=y;if(typeof m=="function"){var b=m;m=function(){var V=pd(I);b.call(V)}}fd(o,I,i,m)}else I=XS(u,o,i,m,h);return pd(I)}fc=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=Ei(o.pendingLanes);u!==0&&(Ti(o,u|1),dn(o,Xe()),(je&6)===0&&(ha=Xe()+500,Di()))}break;case 13:js(function(){var h=ei(i,1);if(h!==null){var m=en();ir(h,i,1,m)}}),Cp(i,1)}},Mo=function(i){if(i.tag===13){var o=ei(i,134217728);if(o!==null){var u=en();ir(o,i,134217728,u)}Cp(i,134217728)}},pc=function(i){if(i.tag===13){var o=Fi(i),u=ei(i,o);if(u!==null){var h=en();ir(u,i,o,h)}Cp(i,o)}},mc=function(){return Ve},gc=function(i,o){var u=Ve;try{return Ve=i,o()}finally{Ve=u}},Ao=function(i,o,u){switch(o){case"input":if(ll(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var h=u[o];if(h!==i&&h.form===i.form){var m=Vc(h);if(!m)throw Error(t(90));Io(h),ll(h,m)}}}break;case"textarea":ko(i,u);break;case"select":o=u.value,o!=null&&zr(i,!!u.multiple,o,!1)}},vs=xp,vl=js;var JS={usingClientEntryPoint:!1,Events:[Ul,Zo,Vc,mr,yl,xp]},eu={findFiberByHostInstance:Cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZS={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:re.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=El(i),i===null?null:i.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||YS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vd.isDisabled&&vd.supportsFiber)try{xs=vd.inject(ZS),mn=vd}catch{}}return hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JS,hn.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Np(o))throw Error(t(200));return QS(i,o,null,u)},hn.createRoot=function(i,o){if(!Np(i))throw Error(t(299));var u=!1,h="",m=__;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=Rp(i,1,!1,null,null,u,!1,h,m),i[Yr]=o.current,Ml(i.nodeType===8?i.parentNode:i),new Pp(o)},hn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=El(o),i=i===null?null:i.stateNode,i},hn.flushSync=function(i){return js(i)},hn.hydrate=function(i,o,u){if(!gd(o))throw Error(t(200));return yd(null,i,o,!0,u)},hn.hydrateRoot=function(i,o,u){if(!Np(i))throw Error(t(405));var h=u!=null&&u.hydratedSources||null,m=!1,y="",I=__;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(I=u.onRecoverableError)),o=y_(o,null,i,1,u??null,m,!1,y,I),i[Yr]=o.current,Ml(i),h)for(i=0;i<h.length;i++)u=h[i],m=u._getVersion,m=m(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,m]:o.mutableSourceEagerHydrationData.push(u,m);return new md(o)},hn.render=function(i,o,u){if(!gd(o))throw Error(t(200));return yd(null,i,o,!1,u)},hn.unmountComponentAtNode=function(i){if(!gd(i))throw Error(t(40));return i._reactRootContainer?(js(function(){yd(null,null,i,!1,function(){i._reactRootContainer=null,i[Yr]=null})}),!0):!1},hn.unstable_batchedUpdates=xp,hn.unstable_renderSubtreeIntoContainer=function(i,o,u,h){if(!gd(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return yd(i,o,u,!1,h)},hn.version="18.3.1-next-f1338f8080-20240426",hn}var A_;function ak(){if(A_)return Op.exports;A_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Op.exports=ok(),Op.exports}var R_;function lk(){if(R_)return _d;R_=1;var n=ak();return _d.createRoot=n.createRoot,_d.hydrateRoot=n.hydrateRoot,_d}var uk=lk();const ck=Kw(uk);/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var C_="popstate";function dk(n={}){function e(r,s){let{pathname:a,search:l,hash:d}=r.location;return nm("",{pathname:a,search:l,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Tu(s)}return fk(e,t,null,n)}function st(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Bn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hk(){return Math.random().toString(36).substring(2,10)}function P_(n,e){return{usr:n.state,key:n.key,idx:e}}function nm(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ga(e):e,state:t,key:e&&e.key||r||hk()}}function Tu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ga(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function fk(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,l=s.history,d="POP",f=null,p=v();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function v(){return(l.state||{idx:null}).idx}function _(){d="POP";let O=v(),K=O==null?null:O-p;p=O,f&&f({action:d,location:C.location,delta:K})}function x(O,K){d="PUSH";let Q=nm(C.location,O,K);p=v()+1;let F=P_(Q,p),re=C.createHref(Q);try{l.pushState(F,"",re)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;s.location.assign(re)}a&&f&&f({action:d,location:C.location,delta:1})}function S(O,K){d="REPLACE";let Q=nm(C.location,O,K);p=v();let F=P_(Q,p),re=C.createHref(Q);l.replaceState(F,"",re),a&&f&&f({action:d,location:C.location,delta:0})}function D(O){return pk(O)}let C={get action(){return d},get location(){return n(s,l)},listen(O){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(C_,_),f=O,()=>{s.removeEventListener(C_,_),f=null}},createHref(O){return e(s,O)},createURL:D,encodeLocation(O){let K=D(O);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:x,replace:S,go(O){return l.go(O)}};return C}function pk(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),st(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Tu(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Qw(n,e,t="/"){return mk(n,e,t,!1)}function mk(n,e,t,r){let s=typeof e=="string"?Ga(e):e,a=ui(s.pathname||"/",t);if(a==null)return null;let l=Yw(n);gk(l);let d=null;for(let f=0;d==null&&f<l.length;++f){let p=bk(a);d=Sk(l[f],p,r)}return d}function Yw(n,e=[],t=[],r="",s=!1){let a=(l,d,f=s,p)=>{let v={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(r)&&f)return;st(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length)}let _=li([r,v.relativePath]),x=t.concat(v);l.children&&l.children.length>0&&(st(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),Yw(l.children,e,x,_,f)),!(l.path==null&&!l.index)&&e.push({path:_,score:xk(_,l.index),routesMeta:x})};return n.forEach((l,d)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))a(l,d);else for(let p of Xw(l.path))a(l,d,!0,p)}),e}function Xw(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let l=Xw(r.join("/")),d=[];return d.push(...l.map(f=>f===""?a:[a,f].join("/"))),s&&d.push(...l),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function gk(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Tk(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var yk=/^:[\w-]+$/,vk=3,_k=2,wk=1,Ek=10,Ik=-2,N_=n=>n==="*";function xk(n,e){let t=n.split("/"),r=t.length;return t.some(N_)&&(r+=Ik),e&&(r+=_k),t.filter(s=>!N_(s)).reduce((s,a)=>s+(yk.test(a)?vk:a===""?wk:Ek),r)}function Tk(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function Sk(n,e,t=!1){let{routesMeta:r}=n,s={},a="/",l=[];for(let d=0;d<r.length;++d){let f=r[d],p=d===r.length-1,v=a==="/"?e:e.slice(a.length)||"/",_=Kd({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},v),x=f.route;if(!_&&p&&t&&!r[r.length-1].route.index&&(_=Kd({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!_)return null;Object.assign(s,_.params),l.push({params:s,pathname:li([a,_.pathname]),pathnameBase:Nk(li([a,_.pathnameBase])),route:x}),_.pathnameBase!=="/"&&(a=li([a,_.pathnameBase]))}return l}function Kd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=kk(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:r.reduce((p,{paramName:v,isOptional:_},x)=>{if(v==="*"){let D=d[x]||"";l=a.slice(0,a.length-D.length).replace(/(.)\/+$/,"$1")}const S=d[x];return _&&!S?p[v]=void 0:p[v]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:l,pattern:n}}function kk(n,e=!1,t=!0){Bn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function bk(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Bn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ui(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var Ak=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rk=n=>Ak.test(n);function Ck(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Ga(n):n,a;if(t)if(Rk(t))a=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),Bn(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?a=D_(t.substring(1),"/"):a=D_(t,e)}else a=e;return{pathname:a,search:Dk(r),hash:Vk(s)}}function D_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function jp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Pk(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Bm(n){let e=Pk(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function zm(n,e,t,r=!1){let s;typeof n=="string"?s=Ga(n):(s={...n},st(!s.pathname||!s.pathname.includes("?"),jp("?","pathname","search",s)),st(!s.pathname||!s.pathname.includes("#"),jp("#","pathname","hash",s)),st(!s.search||!s.search.includes("#"),jp("#","search","hash",s)));let a=n===""||s.pathname==="",l=a?"/":s.pathname,d;if(l==null)d=t;else{let _=e.length-1;if(!r&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),_-=1;s.pathname=x.join("/")}d=_>=0?e[_]:"/"}let f=Ck(s,d),p=l&&l!=="/"&&l.endsWith("/"),v=(a||l===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||v)&&(f.pathname+="/"),f}var li=n=>n.join("/").replace(/\/\/+/g,"/"),Nk=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Dk=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Vk=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Ok(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Lk(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Jw=["POST","PUT","PATCH","DELETE"];new Set(Jw);var Mk=["GET",...Jw];new Set(Mk);var Ka=B.createContext(null);Ka.displayName="DataRouter";var xh=B.createContext(null);xh.displayName="DataRouterState";B.createContext(!1);var Zw=B.createContext({isTransitioning:!1});Zw.displayName="ViewTransition";var jk=B.createContext(new Map);jk.displayName="Fetchers";var Fk=B.createContext(null);Fk.displayName="Await";var zn=B.createContext(null);zn.displayName="Navigation";var Bu=B.createContext(null);Bu.displayName="Location";var dr=B.createContext({outlet:null,matches:[],isDataRoute:!1});dr.displayName="Route";var $m=B.createContext(null);$m.displayName="RouteError";function Uk(n,{relative:e}={}){st(Qa(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=B.useContext(zn),{hash:s,pathname:a,search:l}=zu(n,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:li([t,a])),r.createHref({pathname:d,search:l,hash:s})}function Qa(){return B.useContext(Bu)!=null}function ds(){return st(Qa(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(Bu).location}var eE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tE(n){B.useContext(zn).static||B.useLayoutEffect(n)}function $n(){let{isDataRoute:n}=B.useContext(dr);return n?Zk():Bk()}function Bk(){st(Qa(),"useNavigate() may be used only in the context of a <Router> component.");let n=B.useContext(Ka),{basename:e,navigator:t}=B.useContext(zn),{matches:r}=B.useContext(dr),{pathname:s}=ds(),a=JSON.stringify(Bm(r)),l=B.useRef(!1);return tE(()=>{l.current=!0}),B.useCallback((f,p={})=>{if(Bn(l.current,eE),!l.current)return;if(typeof f=="number"){t.go(f);return}let v=zm(f,JSON.parse(a),s,p.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:li([e,v.pathname])),(p.replace?t.replace:t.push)(v,p.state,p)},[e,t,a,s,n])}B.createContext(null);function qm(){let{matches:n}=B.useContext(dr),e=n[n.length-1];return e?e.params:{}}function zu(n,{relative:e}={}){let{matches:t}=B.useContext(dr),{pathname:r}=ds(),s=JSON.stringify(Bm(t));return B.useMemo(()=>zm(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function zk(n,e){return nE(n,e)}function nE(n,e,t,r,s){var Q;st(Qa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=B.useContext(zn),{matches:l}=B.useContext(dr),d=l[l.length-1],f=d?d.params:{},p=d?d.pathname:"/",v=d?d.pathnameBase:"/",_=d&&d.route;{let F=_&&_.path||"";rE(p,!_||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let x=ds(),S;if(e){let F=typeof e=="string"?Ga(e):e;st(v==="/"||((Q=F.pathname)==null?void 0:Q.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${F.pathname}" was given in the \`location\` prop.`),S=F}else S=x;let D=S.pathname||"/",C=D;if(v!=="/"){let F=v.replace(/^\//,"").split("/");C="/"+D.replace(/^\//,"").split("/").slice(F.length).join("/")}let O=Qw(n,{pathname:C});Bn(_||O!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Bn(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let K=Gk(O&&O.map(F=>Object.assign({},F,{params:Object.assign({},f,F.params),pathname:li([v,a.encodeLocation?a.encodeLocation(F.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?v:li([v,a.encodeLocation?a.encodeLocation(F.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathnameBase])})),l,t,r,s);return e&&K?B.createElement(Bu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},K):K}function $k(){let n=Jk(),e=Ok(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=B.createElement(B.Fragment,null,B.createElement("p",null," Hey developer "),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:a},"ErrorBoundary")," or"," ",B.createElement("code",{style:a},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:s},t):null,l)}var qk=B.createElement($k,null),Hk=class extends B.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?B.createElement(dr.Provider,{value:this.props.routeContext},B.createElement($m.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Wk({routeContext:n,match:e,children:t}){let r=B.useContext(Ka);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),B.createElement(dr.Provider,{value:n},t)}function Gk(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let v=a.findIndex(_=>_.route.id&&(l==null?void 0:l[_.route.id])!==void 0);st(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,v+1))}let d=!1,f=-1;if(t)for(let v=0;v<a.length;v++){let _=a[v];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(f=v),_.route.id){let{loaderData:x,errors:S}=t,D=_.route.loader&&!x.hasOwnProperty(_.route.id)&&(!S||S[_.route.id]===void 0);if(_.route.lazy||D){d=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}let p=t&&r?(v,_)=>{var x,S;r(v,{location:t.location,params:((S=(x=t.matches)==null?void 0:x[0])==null?void 0:S.params)??{},unstable_pattern:Lk(t.matches),errorInfo:_})}:void 0;return a.reduceRight((v,_,x)=>{let S,D=!1,C=null,O=null;t&&(S=l&&_.route.id?l[_.route.id]:void 0,C=_.route.errorElement||qk,d&&(f<0&&x===0?(rE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,O=null):f===x&&(D=!0,O=_.route.hydrateFallbackElement||null)));let K=e.concat(a.slice(0,x+1)),Q=()=>{let F;return S?F=C:D?F=O:_.route.Component?F=B.createElement(_.route.Component,null):_.route.element?F=_.route.element:F=v,B.createElement(Wk,{match:_,routeContext:{outlet:v,matches:K,isDataRoute:t!=null},children:F})};return t&&(_.route.ErrorBoundary||_.route.errorElement||x===0)?B.createElement(Hk,{location:t.location,revalidation:t.revalidation,component:C,error:S,children:Q(),routeContext:{outlet:null,matches:K,isDataRoute:!0},onError:p}):Q()},null)}function Hm(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Kk(n){let e=B.useContext(Ka);return st(e,Hm(n)),e}function Qk(n){let e=B.useContext(xh);return st(e,Hm(n)),e}function Yk(n){let e=B.useContext(dr);return st(e,Hm(n)),e}function Wm(n){let e=Yk(n),t=e.matches[e.matches.length-1];return st(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Xk(){return Wm("useRouteId")}function Jk(){var r;let n=B.useContext($m),e=Qk("useRouteError"),t=Wm("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function Zk(){let{router:n}=Kk("useNavigate"),e=Wm("useNavigate"),t=B.useRef(!1);return tE(()=>{t.current=!0}),B.useCallback(async(s,a={})=>{Bn(t.current,eE),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var V_={};function rE(n,e,t){!e&&!V_[n]&&(V_[n]=!0,Bn(!1,t))}B.memo(e1);function e1({routes:n,future:e,state:t,unstable_onError:r}){return nE(n,void 0,t,r,e)}function t1({to:n,replace:e,state:t,relative:r}){st(Qa(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=B.useContext(zn);Bn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=B.useContext(dr),{pathname:l}=ds(),d=$n(),f=zm(n,Bm(a),l,r==="path"),p=JSON.stringify(f);return B.useEffect(()=>{d(JSON.parse(p),{replace:e,state:t,relative:r})},[d,p,r,e,t]),null}function Sr(n){st(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function n1({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:a=!1,unstable_useTransitions:l}){st(!Qa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),f=B.useMemo(()=>({basename:d,navigator:s,static:a,unstable_useTransitions:l,future:{}}),[d,s,a,l]);typeof t=="string"&&(t=Ga(t));let{pathname:p="/",search:v="",hash:_="",state:x=null,key:S="default"}=t,D=B.useMemo(()=>{let C=ui(p,d);return C==null?null:{location:{pathname:C,search:v,hash:_,state:x,key:S},navigationType:r}},[d,p,v,_,x,S,r]);return Bn(D!=null,`<Router basename="${d}"> is not able to match the URL "${p}${v}${_}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:B.createElement(zn.Provider,{value:f},B.createElement(Bu.Provider,{children:e,value:D}))}function r1({children:n,location:e}){return zk(rm(n),e)}function rm(n,e=[]){let t=[];return B.Children.forEach(n,(r,s)=>{if(!B.isValidElement(r))return;let a=[...e,s];if(r.type===B.Fragment){t.push.apply(t,rm(r.props.children,a));return}st(r.type===Sr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),st(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=rm(r.props.children,a)),t.push(l)}),t}var Cd="get",Pd="application/x-www-form-urlencoded";function Th(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function i1(n){return Th(n)&&n.tagName.toLowerCase()==="button"}function s1(n){return Th(n)&&n.tagName.toLowerCase()==="form"}function o1(n){return Th(n)&&n.tagName.toLowerCase()==="input"}function a1(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function l1(n,e){return n.button===0&&(!e||e==="_self")&&!a1(n)}var wd=null;function u1(){if(wd===null)try{new FormData(document.createElement("form"),0),wd=!1}catch{wd=!0}return wd}var c1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fp(n){return n!=null&&!c1.has(n)?(Bn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Pd}"`),null):n}function d1(n,e){let t,r,s,a,l;if(s1(n)){let d=n.getAttribute("action");r=d?ui(d,e):null,t=n.getAttribute("method")||Cd,s=Fp(n.getAttribute("enctype"))||Pd,a=new FormData(n)}else if(i1(n)||o1(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||d.getAttribute("action");if(r=f?ui(f,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Cd,s=Fp(n.getAttribute("formenctype"))||Fp(d.getAttribute("enctype"))||Pd,a=new FormData(d,n),!u1()){let{name:p,type:v,value:_}=n;if(v==="image"){let x=p?`${p}.`:"";a.append(`${x}x`,"0"),a.append(`${x}y`,"0")}else p&&a.append(p,_)}}else{if(Th(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Cd,r=null,s=Pd,l=n}return a&&s==="text/plain"&&(l=a,a=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Gm(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function h1(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&ui(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function f1(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function p1(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function m1(n,e,t){let r=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let l=await f1(a,t);return l.links?l.links():[]}return[]}));return _1(r.flat(1).filter(p1).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function O_(n,e,t,r,s,a){let l=(f,p)=>t[p]?f.route.id!==t[p].route.id:!0,d=(f,p)=>{var v;return t[p].pathname!==f.pathname||((v=t[p].route.path)==null?void 0:v.endsWith("*"))&&t[p].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,p)=>l(f,p)||d(f,p)):a==="data"?e.filter((f,p)=>{var _;let v=r.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(l(f,p)||d(f,p))return!0;if(f.route.shouldRevalidate){let x=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((_=t[0])==null?void 0:_.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function g1(n,e,{includeHydrateFallback:t}={}){return y1(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function y1(n){return[...new Set(n)]}function v1(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function _1(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let a=JSON.stringify(v1(s));return t.has(a)||(t.add(a),r.push({key:a,link:s})),r},[])}function iE(){let n=B.useContext(Ka);return Gm(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function w1(){let n=B.useContext(xh);return Gm(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Km=B.createContext(void 0);Km.displayName="FrameworkContext";function sE(){let n=B.useContext(Km);return Gm(n,"You must render this element inside a <HydratedRouter> element"),n}function E1(n,e){let t=B.useContext(Km),[r,s]=B.useState(!1),[a,l]=B.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:p,onMouseLeave:v,onTouchStart:_}=e,x=B.useRef(null);B.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let C=K=>{K.forEach(Q=>{l(Q.isIntersecting)})},O=new IntersectionObserver(C,{threshold:.5});return x.current&&O.observe(x.current),()=>{O.disconnect()}}},[n]),B.useEffect(()=>{if(r){let C=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(C)}}},[r]);let S=()=>{s(!0)},D=()=>{s(!1),l(!1)};return t?n!=="intent"?[a,x,{}]:[a,x,{onFocus:nu(d,S),onBlur:nu(f,D),onMouseEnter:nu(p,S),onMouseLeave:nu(v,D),onTouchStart:nu(_,S)}]:[!1,x,{}]}function nu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function I1({page:n,...e}){let{router:t}=iE(),r=B.useMemo(()=>Qw(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?B.createElement(T1,{page:n,matches:r,...e}):null}function x1(n){let{manifest:e,routeModules:t}=sE(),[r,s]=B.useState([]);return B.useEffect(()=>{let a=!1;return m1(n,e,t).then(l=>{a||s(l)}),()=>{a=!0}},[n,e,t]),r}function T1({page:n,matches:e,...t}){let r=ds(),{manifest:s,routeModules:a}=sE(),{basename:l}=iE(),{loaderData:d,matches:f}=w1(),p=B.useMemo(()=>O_(n,e,f,s,r,"data"),[n,e,f,s,r]),v=B.useMemo(()=>O_(n,e,f,s,r,"assets"),[n,e,f,s,r]),_=B.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let D=new Set,C=!1;if(e.forEach(K=>{var F;let Q=s.routes[K.route.id];!Q||!Q.hasLoader||(!p.some(re=>re.route.id===K.route.id)&&K.route.id in d&&((F=a[K.route.id])!=null&&F.shouldRevalidate)||Q.hasClientLoader?C=!0:D.add(K.route.id))}),D.size===0)return[];let O=h1(n,l,"data");return C&&D.size>0&&O.searchParams.set("_routes",e.filter(K=>D.has(K.route.id)).map(K=>K.route.id).join(",")),[O.pathname+O.search]},[l,d,r,s,p,e,n,a]),x=B.useMemo(()=>g1(v,s),[v,s]),S=x1(v);return B.createElement(B.Fragment,null,_.map(D=>B.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...t})),x.map(D=>B.createElement("link",{key:D,rel:"modulepreload",href:D,...t})),S.map(({key:D,link:C})=>B.createElement("link",{key:D,nonce:t.nonce,...C})))}function S1(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var oE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oE&&(window.__reactRouterVersion="7.10.1")}catch{}function k1({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=B.useRef();s.current==null&&(s.current=dk({window:r,v5Compat:!0}));let a=s.current,[l,d]=B.useState({action:a.action,location:a.location}),f=B.useCallback(p=>{t===!1?d(p):B.startTransition(()=>d(p))},[t]);return B.useLayoutEffect(()=>a.listen(f),[a,f]),B.createElement(n1,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:t===!0})}var aE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lE=B.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:a,replace:l,state:d,target:f,to:p,preventScrollReset:v,viewTransition:_,...x},S){let{basename:D,unstable_useTransitions:C}=B.useContext(zn),O=typeof p=="string"&&aE.test(p),K,Q=!1;if(typeof p=="string"&&O&&(K=p,oE))try{let N=new URL(window.location.href),L=p.startsWith("//")?new URL(N.protocol+p):new URL(p),j=ui(L.pathname,D);L.origin===N.origin&&j!=null?p=j+L.search+L.hash:Q=!0}catch{Bn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=Uk(p,{relative:s}),[re,ue,ce]=E1(r,x),P=R1(p,{replace:l,state:d,target:f,preventScrollReset:v,relative:s,viewTransition:_,unstable_useTransitions:C});function k(N){e&&e(N),N.defaultPrevented||P(N)}let A=B.createElement("a",{...x,...ce,href:K||F,onClick:Q||a?e:k,ref:S1(S,ue),target:f,"data-discover":!O&&t==="render"?"true":void 0});return re&&!O?B.createElement(B.Fragment,null,A,B.createElement(I1,{page:F})):A});lE.displayName="Link";var uE=B.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:a,to:l,viewTransition:d,children:f,...p},v){let _=zu(l,{relative:p.relative}),x=ds(),S=B.useContext(xh),{navigator:D,basename:C}=B.useContext(zn),O=S!=null&&V1(_)&&d===!0,K=D.encodeLocation?D.encodeLocation(_).pathname:_.pathname,Q=x.pathname,F=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(Q=Q.toLowerCase(),F=F?F.toLowerCase():null,K=K.toLowerCase()),F&&C&&(F=ui(F,C)||F);const re=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let ue=Q===K||!s&&Q.startsWith(K)&&Q.charAt(re)==="/",ce=F!=null&&(F===K||!s&&F.startsWith(K)&&F.charAt(K.length)==="/"),P={isActive:ue,isPending:ce,isTransitioning:O},k=ue?e:void 0,A;typeof r=="function"?A=r(P):A=[r,ue?"active":null,ce?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(P):a;return B.createElement(lE,{...p,"aria-current":k,className:A,ref:v,style:N,to:l,viewTransition:d},typeof f=="function"?f(P):f)});uE.displayName="NavLink";var b1=B.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:a,method:l=Cd,action:d,onSubmit:f,relative:p,preventScrollReset:v,viewTransition:_,...x},S)=>{let{unstable_useTransitions:D}=B.useContext(zn),C=N1(),O=D1(d,{relative:p}),K=l.toLowerCase()==="get"?"get":"post",Q=typeof d=="string"&&aE.test(d),F=re=>{if(f&&f(re),re.defaultPrevented)return;re.preventDefault();let ue=re.nativeEvent.submitter,ce=(ue==null?void 0:ue.getAttribute("formmethod"))||l,P=()=>C(ue||re.currentTarget,{fetcherKey:e,method:ce,navigate:t,replace:s,state:a,relative:p,preventScrollReset:v,viewTransition:_});D&&t!==!1?B.startTransition(()=>P()):P()};return B.createElement("form",{ref:S,method:K,action:O,onSubmit:r?f:F,...x,"data-discover":!Q&&n==="render"?"true":void 0})});b1.displayName="Form";function A1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cE(n){let e=B.useContext(Ka);return st(e,A1(n)),e}function R1(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:l,unstable_useTransitions:d}={}){let f=$n(),p=ds(),v=zu(n,{relative:a});return B.useCallback(_=>{if(l1(_,e)){_.preventDefault();let x=t!==void 0?t:Tu(p)===Tu(v),S=()=>f(n,{replace:x,state:r,preventScrollReset:s,relative:a,viewTransition:l});d?B.startTransition(()=>S()):S()}},[p,f,v,t,r,e,n,s,a,l,d])}var C1=0,P1=()=>`__${String(++C1)}__`;function N1(){let{router:n}=cE("useSubmit"),{basename:e}=B.useContext(zn),t=Xk(),r=n.fetch,s=n.navigate;return B.useCallback(async(a,l={})=>{let{action:d,method:f,encType:p,formData:v,body:_}=d1(a,e);if(l.navigate===!1){let x=l.fetcherKey||P1();await r(x,t,l.action||d,{preventScrollReset:l.preventScrollReset,formData:v,body:_,formMethod:l.method||f,formEncType:l.encType||p,flushSync:l.flushSync})}else await s(l.action||d,{preventScrollReset:l.preventScrollReset,formData:v,body:_,formMethod:l.method||f,formEncType:l.encType||p,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,s,e,t])}function D1(n,{relative:e}={}){let{basename:t}=B.useContext(zn),r=B.useContext(dr);st(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...zu(n||".",{relative:e})},l=ds();if(n==null){a.search=l.search;let d=new URLSearchParams(a.search),f=d.getAll("index");if(f.some(v=>v==="")){d.delete("index"),f.filter(_=>_).forEach(_=>d.append("index",_));let v=d.toString();a.search=v?`?${v}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:li([t,a.pathname])),Tu(a)}function V1(n,{relative:e}={}){let t=B.useContext(Zw);st(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=cE("useViewTransitionState"),s=zu(n,{relative:e});if(!t.isTransitioning)return!1;let a=ui(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=ui(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Kd(s.pathname,l)!=null||Kd(s.pathname,a)!=null}const L_=n=>{let e;const t=new Set,r=(p,v)=>{const _=typeof p=="function"?p(e):p;if(!Object.is(_,e)){const x=e;e=v??(typeof _!="object"||_===null)?_:Object.assign({},e,_),t.forEach(S=>S(e,x))}},s=()=>e,d={setState:r,getState:s,getInitialState:()=>f,subscribe:p=>(t.add(p),()=>t.delete(p))},f=e=n(r,s,d);return d},O1=(n=>n?L_(n):L_),L1=n=>n;function M1(n,e=L1){const t=Sa.useSyncExternalStore(n.subscribe,Sa.useCallback(()=>e(n.getState()),[n,e]),Sa.useCallback(()=>e(n.getInitialState()),[n,e]));return Sa.useDebugValue(t),t}const M_=n=>{const e=O1(n),t=r=>M1(e,r);return Object.assign(t,e),t},Qm=(n=>n?M_(n):M_),go=Qm(n=>({user:null,isLoading:!0,isAuthenticated:!1,setUser:e=>n({user:e,isAuthenticated:!!e}),setLoading:e=>n({isLoading:e}),clearUser:()=>n({user:null,isAuthenticated:!1})})),j1=()=>{};var j_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},F1=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],l=n[t++],d=n[t++],f=((s&7)<<18|(a&63)<<12|(l&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},hE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],l=s+1<n.length,d=l?n[s+1]:0,f=s+2<n.length,p=f?n[s+2]:0,v=a>>2,_=(a&3)<<4|d>>4;let x=(d&15)<<2|p>>6,S=p&63;f||(S=64,l||(x=64)),r.push(t[v],t[_],t[x],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(dE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):F1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const _=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||d==null||p==null||_==null)throw new U1;const x=a<<2|d>>4;if(r.push(x),p!==64){const S=d<<4&240|p>>2;if(r.push(S),_!==64){const D=p<<6&192|_;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class U1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const B1=function(n){const e=dE(n);return hE.encodeByteArray(e,!0)},Qd=function(n){return B1(n).replace(/\./g,"")},fE=function(n){try{return hE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=()=>pE().__FIREBASE_DEFAULTS__,$1=()=>{if(typeof process>"u"||typeof j_>"u")return;const n=j_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},q1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&fE(n[1]);return e&&JSON.parse(e)},Sh=()=>{try{return j1()||z1()||$1()||q1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},mE=n=>{var e,t;return(t=(e=Sh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},H1=n=>{const e=mE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},gE=()=>{var n;return(n=Sh())===null||n===void 0?void 0:n.config},yE=n=>{var e;return(e=Sh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Qd(JSON.stringify(t)),Qd(JSON.stringify(l)),""].join(".")}const fu={};function K1(){const n={prod:[],emulator:[]};for(const e of Object.keys(fu))fu[e]?n.emulator.push(e):n.prod.push(e);return n}function Q1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let F_=!1;function _E(n,e){if(typeof window>"u"||typeof document>"u"||!Ya(window.location.host)||fu[n]===e||fu[n]||F_)return;fu[n]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",a=K1().prod.length>0;function l(){const x=document.getElementById(r);x&&x.remove()}function d(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function f(x,S){x.setAttribute("width","24"),x.setAttribute("id",S),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function p(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{F_=!0,l()},x}function v(x,S){x.setAttribute("id",S),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function _(){const x=Q1(r),S=t("text"),D=document.getElementById(S)||document.createElement("span"),C=t("learnmore"),O=document.getElementById(C)||document.createElement("a"),K=t("preprendIcon"),Q=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const F=x.element;d(F),v(O,C);const re=p();f(Q,K),F.append(Q,D,O,re),document.body.appendChild(F)}a?(D.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Y1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function wE(){var n;const e=(n=Sh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function X1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ym(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function J1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Z1(){const n=At();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function EE(){return!wE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IE(){return!wE()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function kh(){try{return typeof indexedDB=="object"}catch{return!1}}function Xm(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function xE(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="FirebaseError";class hr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=eb,Object.setPrototypeOf(this,hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yo.prototype.create)}}class yo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?tb(a,r):"Error",d=`${this.serviceName}: ${l} (${s}).`;return new hr(s,d,r)}}function tb(n,e){return n.replace(nb,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const nb=/\{\$([^}]+)}/g;function rb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ss(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],l=e[s];if(U_(a)&&U_(l)){if(!ss(a,l))return!1}else if(a!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function U_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ib(n,e){const t=new sb(n,e);return t.subscribe.bind(t)}class sb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");ob(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Up),s.error===void 0&&(s.error=Up),s.complete===void 0&&(s.complete=Up);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ob(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Up(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=1e3,lb=2,ub=14400*1e3,cb=.5;function B_(n,e=ab,t=lb){const r=e*Math.pow(t,n),s=Math.round(cb*r*(Math.random()-.5)*2);return Math.min(ub,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(n){return n&&n._delegate?n._delegate:n}class ur{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new W1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fb(e))try{this.getOrInitializeService({instanceIdentifier:$s})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=$s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$s){return this.instances.has(e)}getOptions(e=$s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&l.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hb(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$s){return this.component?this.component.multipleInstances?e:$s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hb(n){return n===$s?void 0:n}function fb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new db(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ne||(Ne={}));const mb={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},gb=Ne.INFO,yb={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},vb=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=yb[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bh{constructor(e){this.name=e,this._logLevel=gb,this._logHandler=vb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const _b=(n,e)=>e.some(t=>n instanceof t);let z_,$_;function wb(){return z_||(z_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Eb(){return $_||($_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TE=new WeakMap,im=new WeakMap,SE=new WeakMap,Bp=new WeakMap,Jm=new WeakMap;function Ib(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Zi(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&TE.set(t,n)}).catch(()=>{}),Jm.set(e,n),e}function xb(n){if(im.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});im.set(n,e)}let sm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return im.get(n);if(e==="objectStoreNames")return n.objectStoreNames||SE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Zi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Tb(n){sm=n(sm)}function Sb(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(zp(this),e,...t);return SE.set(r,e.sort?e.sort():[e]),Zi(r)}:Eb().includes(n)?function(...e){return n.apply(zp(this),e),Zi(TE.get(this))}:function(...e){return Zi(n.apply(zp(this),e))}}function kb(n){return typeof n=="function"?Sb(n):(n instanceof IDBTransaction&&xb(n),_b(n,wb())?new Proxy(n,sm):n)}function Zi(n){if(n instanceof IDBRequest)return Ib(n);if(Bp.has(n))return Bp.get(n);const e=kb(n);return e!==n&&(Bp.set(n,e),Jm.set(e,n)),e}const zp=n=>Jm.get(n);function kE(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const l=indexedDB.open(n,e),d=Zi(l);return r&&l.addEventListener("upgradeneeded",f=>{r(Zi(l.result),f.oldVersion,f.newVersion,Zi(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const bb=["get","getKey","getAll","getAllKeys","count"],Ab=["put","add","delete","clear"],$p=new Map;function q_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if($p.get(e))return $p.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=Ab.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||bb.includes(t)))return;const a=async function(l,...d){const f=this.transaction(l,s?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),s&&f.done]))[0]};return $p.set(e,a),a}Tb(n=>({...n,get:(e,t,r)=>q_(e,t)||n.get(e,t,r),has:(e,t)=>!!q_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Cb(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Cb(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const om="@firebase/app",H_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new bh("@firebase/app"),Pb="@firebase/app-compat",Nb="@firebase/analytics-compat",Db="@firebase/analytics",Vb="@firebase/app-check-compat",Ob="@firebase/app-check",Lb="@firebase/auth",Mb="@firebase/auth-compat",jb="@firebase/database",Fb="@firebase/data-connect",Ub="@firebase/database-compat",Bb="@firebase/functions",zb="@firebase/functions-compat",$b="@firebase/installations",qb="@firebase/installations-compat",Hb="@firebase/messaging",Wb="@firebase/messaging-compat",Gb="@firebase/performance",Kb="@firebase/performance-compat",Qb="@firebase/remote-config",Yb="@firebase/remote-config-compat",Xb="@firebase/storage",Jb="@firebase/storage-compat",Zb="@firebase/firestore",eA="@firebase/ai",tA="@firebase/firestore-compat",nA="firebase",rA="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="[DEFAULT]",iA={[om]:"fire-core",[Pb]:"fire-core-compat",[Db]:"fire-analytics",[Nb]:"fire-analytics-compat",[Ob]:"fire-app-check",[Vb]:"fire-app-check-compat",[Lb]:"fire-auth",[Mb]:"fire-auth-compat",[jb]:"fire-rtdb",[Fb]:"fire-data-connect",[Ub]:"fire-rtdb-compat",[Bb]:"fire-fn",[zb]:"fire-fn-compat",[$b]:"fire-iid",[qb]:"fire-iid-compat",[Hb]:"fire-fcm",[Wb]:"fire-fcm-compat",[Gb]:"fire-perf",[Kb]:"fire-perf-compat",[Qb]:"fire-rc",[Yb]:"fire-rc-compat",[Xb]:"fire-gcs",[Jb]:"fire-gcs-compat",[Zb]:"fire-fst",[tA]:"fire-fst-compat",[eA]:"fire-vertex","fire-js":"fire-js",[nA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd=new Map,sA=new Map,lm=new Map;function W_(n,e){try{n.container.addComponent(e)}catch(t){ci.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Or(n){const e=n.name;if(lm.has(e))return ci.debug(`There were multiple attempts to register component ${e}.`),!1;lm.set(e,n);for(const t of Yd.values())W_(t,n);for(const t of sA.values())W_(t,n);return!0}function vo(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function or(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},es=new yo("app","Firebase",oA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa=rA;function bE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:am,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw es.create("bad-app-name",{appName:String(s)});if(t||(t=gE()),!t)throw es.create("no-options");const a=Yd.get(s);if(a){if(ss(t,a.options)&&ss(r,a.config))return a;throw es.create("duplicate-app",{appName:s})}const l=new pb(s);for(const f of lm.values())l.addComponent(f);const d=new aA(t,r,l);return Yd.set(s,d),d}function Zm(n=am){const e=Yd.get(n);if(!e&&n===am&&gE())return bE();if(!e)throw es.create("no-app",{appName:n});return e}function Fn(n,e,t){var r;let s=(r=iA[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const d=[`Unable to register library "${s}" with version "${e}":`];a&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ci.warn(d.join(" "));return}Or(new ur(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="firebase-heartbeat-database",uA=1,Su="firebase-heartbeat-store";let qp=null;function AE(){return qp||(qp=kE(lA,uA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Su)}catch(t){console.warn(t)}}}}).catch(n=>{throw es.create("idb-open",{originalErrorMessage:n.message})})),qp}async function cA(n){try{const t=(await AE()).transaction(Su),r=await t.objectStore(Su).get(RE(n));return await t.done,r}catch(e){if(e instanceof hr)ci.warn(e.message);else{const t=es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ci.warn(t.message)}}}async function G_(n,e){try{const r=(await AE()).transaction(Su,"readwrite");await r.objectStore(Su).put(e,RE(n)),await r.done}catch(t){if(t instanceof hr)ci.warn(t.message);else{const r=es.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ci.warn(r.message)}}}function RE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=1024,hA=30;class fA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new mA(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=K_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>hA){const l=gA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ci.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=K_(),{heartbeatsToSend:r,unsentEntries:s}=pA(this._heartbeatsCache.heartbeats),a=Qd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ci.warn(t),""}}}function K_(){return new Date().toISOString().substring(0,10)}function pA(n,e=dA){const t=[];let r=n.slice();for(const s of n){const a=t.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),Q_(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Q_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class mA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kh()?Xm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await cA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return G_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return G_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Q_(n){return Qd(JSON.stringify({version:2,heartbeats:n})).length}function gA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(n){Or(new ur("platform-logger",e=>new Rb(e),"PRIVATE")),Or(new ur("heartbeat",e=>new fA(e),"PRIVATE")),Fn(om,H_,n),Fn(om,H_,"esm2017"),Fn("fire-js","")}yA("");var Y_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ts,CE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,k){function A(){}A.prototype=k.prototype,P.D=k.prototype,P.prototype=new A,P.prototype.constructor=P,P.C=function(N,L,j){for(var R=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)R[Ke-2]=arguments[Ke];return k.prototype[L].apply(N,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,k,A){A||(A=0);var N=Array(16);if(typeof k=="string")for(var L=0;16>L;++L)N[L]=k.charCodeAt(A++)|k.charCodeAt(A++)<<8|k.charCodeAt(A++)<<16|k.charCodeAt(A++)<<24;else for(L=0;16>L;++L)N[L]=k[A++]|k[A++]<<8|k[A++]<<16|k[A++]<<24;k=P.g[0],A=P.g[1],L=P.g[2];var j=P.g[3],R=k+(j^A&(L^j))+N[0]+3614090360&4294967295;k=A+(R<<7&4294967295|R>>>25),R=j+(L^k&(A^L))+N[1]+3905402710&4294967295,j=k+(R<<12&4294967295|R>>>20),R=L+(A^j&(k^A))+N[2]+606105819&4294967295,L=j+(R<<17&4294967295|R>>>15),R=A+(k^L&(j^k))+N[3]+3250441966&4294967295,A=L+(R<<22&4294967295|R>>>10),R=k+(j^A&(L^j))+N[4]+4118548399&4294967295,k=A+(R<<7&4294967295|R>>>25),R=j+(L^k&(A^L))+N[5]+1200080426&4294967295,j=k+(R<<12&4294967295|R>>>20),R=L+(A^j&(k^A))+N[6]+2821735955&4294967295,L=j+(R<<17&4294967295|R>>>15),R=A+(k^L&(j^k))+N[7]+4249261313&4294967295,A=L+(R<<22&4294967295|R>>>10),R=k+(j^A&(L^j))+N[8]+1770035416&4294967295,k=A+(R<<7&4294967295|R>>>25),R=j+(L^k&(A^L))+N[9]+2336552879&4294967295,j=k+(R<<12&4294967295|R>>>20),R=L+(A^j&(k^A))+N[10]+4294925233&4294967295,L=j+(R<<17&4294967295|R>>>15),R=A+(k^L&(j^k))+N[11]+2304563134&4294967295,A=L+(R<<22&4294967295|R>>>10),R=k+(j^A&(L^j))+N[12]+1804603682&4294967295,k=A+(R<<7&4294967295|R>>>25),R=j+(L^k&(A^L))+N[13]+4254626195&4294967295,j=k+(R<<12&4294967295|R>>>20),R=L+(A^j&(k^A))+N[14]+2792965006&4294967295,L=j+(R<<17&4294967295|R>>>15),R=A+(k^L&(j^k))+N[15]+1236535329&4294967295,A=L+(R<<22&4294967295|R>>>10),R=k+(L^j&(A^L))+N[1]+4129170786&4294967295,k=A+(R<<5&4294967295|R>>>27),R=j+(A^L&(k^A))+N[6]+3225465664&4294967295,j=k+(R<<9&4294967295|R>>>23),R=L+(k^A&(j^k))+N[11]+643717713&4294967295,L=j+(R<<14&4294967295|R>>>18),R=A+(j^k&(L^j))+N[0]+3921069994&4294967295,A=L+(R<<20&4294967295|R>>>12),R=k+(L^j&(A^L))+N[5]+3593408605&4294967295,k=A+(R<<5&4294967295|R>>>27),R=j+(A^L&(k^A))+N[10]+38016083&4294967295,j=k+(R<<9&4294967295|R>>>23),R=L+(k^A&(j^k))+N[15]+3634488961&4294967295,L=j+(R<<14&4294967295|R>>>18),R=A+(j^k&(L^j))+N[4]+3889429448&4294967295,A=L+(R<<20&4294967295|R>>>12),R=k+(L^j&(A^L))+N[9]+568446438&4294967295,k=A+(R<<5&4294967295|R>>>27),R=j+(A^L&(k^A))+N[14]+3275163606&4294967295,j=k+(R<<9&4294967295|R>>>23),R=L+(k^A&(j^k))+N[3]+4107603335&4294967295,L=j+(R<<14&4294967295|R>>>18),R=A+(j^k&(L^j))+N[8]+1163531501&4294967295,A=L+(R<<20&4294967295|R>>>12),R=k+(L^j&(A^L))+N[13]+2850285829&4294967295,k=A+(R<<5&4294967295|R>>>27),R=j+(A^L&(k^A))+N[2]+4243563512&4294967295,j=k+(R<<9&4294967295|R>>>23),R=L+(k^A&(j^k))+N[7]+1735328473&4294967295,L=j+(R<<14&4294967295|R>>>18),R=A+(j^k&(L^j))+N[12]+2368359562&4294967295,A=L+(R<<20&4294967295|R>>>12),R=k+(A^L^j)+N[5]+4294588738&4294967295,k=A+(R<<4&4294967295|R>>>28),R=j+(k^A^L)+N[8]+2272392833&4294967295,j=k+(R<<11&4294967295|R>>>21),R=L+(j^k^A)+N[11]+1839030562&4294967295,L=j+(R<<16&4294967295|R>>>16),R=A+(L^j^k)+N[14]+4259657740&4294967295,A=L+(R<<23&4294967295|R>>>9),R=k+(A^L^j)+N[1]+2763975236&4294967295,k=A+(R<<4&4294967295|R>>>28),R=j+(k^A^L)+N[4]+1272893353&4294967295,j=k+(R<<11&4294967295|R>>>21),R=L+(j^k^A)+N[7]+4139469664&4294967295,L=j+(R<<16&4294967295|R>>>16),R=A+(L^j^k)+N[10]+3200236656&4294967295,A=L+(R<<23&4294967295|R>>>9),R=k+(A^L^j)+N[13]+681279174&4294967295,k=A+(R<<4&4294967295|R>>>28),R=j+(k^A^L)+N[0]+3936430074&4294967295,j=k+(R<<11&4294967295|R>>>21),R=L+(j^k^A)+N[3]+3572445317&4294967295,L=j+(R<<16&4294967295|R>>>16),R=A+(L^j^k)+N[6]+76029189&4294967295,A=L+(R<<23&4294967295|R>>>9),R=k+(A^L^j)+N[9]+3654602809&4294967295,k=A+(R<<4&4294967295|R>>>28),R=j+(k^A^L)+N[12]+3873151461&4294967295,j=k+(R<<11&4294967295|R>>>21),R=L+(j^k^A)+N[15]+530742520&4294967295,L=j+(R<<16&4294967295|R>>>16),R=A+(L^j^k)+N[2]+3299628645&4294967295,A=L+(R<<23&4294967295|R>>>9),R=k+(L^(A|~j))+N[0]+4096336452&4294967295,k=A+(R<<6&4294967295|R>>>26),R=j+(A^(k|~L))+N[7]+1126891415&4294967295,j=k+(R<<10&4294967295|R>>>22),R=L+(k^(j|~A))+N[14]+2878612391&4294967295,L=j+(R<<15&4294967295|R>>>17),R=A+(j^(L|~k))+N[5]+4237533241&4294967295,A=L+(R<<21&4294967295|R>>>11),R=k+(L^(A|~j))+N[12]+1700485571&4294967295,k=A+(R<<6&4294967295|R>>>26),R=j+(A^(k|~L))+N[3]+2399980690&4294967295,j=k+(R<<10&4294967295|R>>>22),R=L+(k^(j|~A))+N[10]+4293915773&4294967295,L=j+(R<<15&4294967295|R>>>17),R=A+(j^(L|~k))+N[1]+2240044497&4294967295,A=L+(R<<21&4294967295|R>>>11),R=k+(L^(A|~j))+N[8]+1873313359&4294967295,k=A+(R<<6&4294967295|R>>>26),R=j+(A^(k|~L))+N[15]+4264355552&4294967295,j=k+(R<<10&4294967295|R>>>22),R=L+(k^(j|~A))+N[6]+2734768916&4294967295,L=j+(R<<15&4294967295|R>>>17),R=A+(j^(L|~k))+N[13]+1309151649&4294967295,A=L+(R<<21&4294967295|R>>>11),R=k+(L^(A|~j))+N[4]+4149444226&4294967295,k=A+(R<<6&4294967295|R>>>26),R=j+(A^(k|~L))+N[11]+3174756917&4294967295,j=k+(R<<10&4294967295|R>>>22),R=L+(k^(j|~A))+N[2]+718787259&4294967295,L=j+(R<<15&4294967295|R>>>17),R=A+(j^(L|~k))+N[9]+3951481745&4294967295,P.g[0]=P.g[0]+k&4294967295,P.g[1]=P.g[1]+(L+(R<<21&4294967295|R>>>11))&4294967295,P.g[2]=P.g[2]+L&4294967295,P.g[3]=P.g[3]+j&4294967295}r.prototype.u=function(P,k){k===void 0&&(k=P.length);for(var A=k-this.blockSize,N=this.B,L=this.h,j=0;j<k;){if(L==0)for(;j<=A;)s(this,P,j),j+=this.blockSize;if(typeof P=="string"){for(;j<k;)if(N[L++]=P.charCodeAt(j++),L==this.blockSize){s(this,N),L=0;break}}else for(;j<k;)if(N[L++]=P[j++],L==this.blockSize){s(this,N),L=0;break}}this.h=L,this.o+=k},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var k=1;k<P.length-8;++k)P[k]=0;var A=8*this.o;for(k=P.length-8;k<P.length;++k)P[k]=A&255,A/=256;for(this.u(P),P=Array(16),k=A=0;4>k;++k)for(var N=0;32>N;N+=8)P[A++]=this.g[k]>>>N&255;return P};function a(P,k){var A=d;return Object.prototype.hasOwnProperty.call(A,P)?A[P]:A[P]=k(P)}function l(P,k){this.h=k;for(var A=[],N=!0,L=P.length-1;0<=L;L--){var j=P[L]|0;N&&j==k||(A[L]=j,N=!1)}this.g=A}var d={};function f(P){return-128<=P&&128>P?a(P,function(k){return new l([k|0],0>k?-1:0)}):new l([P|0],0>P?-1:0)}function p(P){if(isNaN(P)||!isFinite(P))return _;if(0>P)return O(p(-P));for(var k=[],A=1,N=0;P>=A;N++)k[N]=P/A|0,A*=4294967296;return new l(k,0)}function v(P,k){if(P.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(P.charAt(0)=="-")return O(v(P.substring(1),k));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=p(Math.pow(k,8)),N=_,L=0;L<P.length;L+=8){var j=Math.min(8,P.length-L),R=parseInt(P.substring(L,L+j),k);8>j?(j=p(Math.pow(k,j)),N=N.j(j).add(p(R))):(N=N.j(A),N=N.add(p(R)))}return N}var _=f(0),x=f(1),S=f(16777216);n=l.prototype,n.m=function(){if(C(this))return-O(this).m();for(var P=0,k=1,A=0;A<this.g.length;A++){var N=this.i(A);P+=(0<=N?N:4294967296+N)*k,k*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(D(this))return"0";if(C(this))return"-"+O(this).toString(P);for(var k=p(Math.pow(P,6)),A=this,N="";;){var L=re(A,k).g;A=K(A,L.j(k));var j=((0<A.g.length?A.g[0]:A.h)>>>0).toString(P);if(A=L,D(A))return j+N;for(;6>j.length;)j="0"+j;N=j+N}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function D(P){if(P.h!=0)return!1;for(var k=0;k<P.g.length;k++)if(P.g[k]!=0)return!1;return!0}function C(P){return P.h==-1}n.l=function(P){return P=K(this,P),C(P)?-1:D(P)?0:1};function O(P){for(var k=P.g.length,A=[],N=0;N<k;N++)A[N]=~P.g[N];return new l(A,~P.h).add(x)}n.abs=function(){return C(this)?O(this):this},n.add=function(P){for(var k=Math.max(this.g.length,P.g.length),A=[],N=0,L=0;L<=k;L++){var j=N+(this.i(L)&65535)+(P.i(L)&65535),R=(j>>>16)+(this.i(L)>>>16)+(P.i(L)>>>16);N=R>>>16,j&=65535,R&=65535,A[L]=R<<16|j}return new l(A,A[A.length-1]&-2147483648?-1:0)};function K(P,k){return P.add(O(k))}n.j=function(P){if(D(this)||D(P))return _;if(C(this))return C(P)?O(this).j(O(P)):O(O(this).j(P));if(C(P))return O(this.j(O(P)));if(0>this.l(S)&&0>P.l(S))return p(this.m()*P.m());for(var k=this.g.length+P.g.length,A=[],N=0;N<2*k;N++)A[N]=0;for(N=0;N<this.g.length;N++)for(var L=0;L<P.g.length;L++){var j=this.i(N)>>>16,R=this.i(N)&65535,Ke=P.i(L)>>>16,Ze=P.i(L)&65535;A[2*N+2*L]+=R*Ze,Q(A,2*N+2*L),A[2*N+2*L+1]+=j*Ze,Q(A,2*N+2*L+1),A[2*N+2*L+1]+=R*Ke,Q(A,2*N+2*L+1),A[2*N+2*L+2]+=j*Ke,Q(A,2*N+2*L+2)}for(N=0;N<k;N++)A[N]=A[2*N+1]<<16|A[2*N];for(N=k;N<2*k;N++)A[N]=0;return new l(A,0)};function Q(P,k){for(;(P[k]&65535)!=P[k];)P[k+1]+=P[k]>>>16,P[k]&=65535,k++}function F(P,k){this.g=P,this.h=k}function re(P,k){if(D(k))throw Error("division by zero");if(D(P))return new F(_,_);if(C(P))return k=re(O(P),k),new F(O(k.g),O(k.h));if(C(k))return k=re(P,O(k)),new F(O(k.g),k.h);if(30<P.g.length){if(C(P)||C(k))throw Error("slowDivide_ only works with positive integers.");for(var A=x,N=k;0>=N.l(P);)A=ue(A),N=ue(N);var L=ce(A,1),j=ce(N,1);for(N=ce(N,2),A=ce(A,2);!D(N);){var R=j.add(N);0>=R.l(P)&&(L=L.add(A),j=R),N=ce(N,1),A=ce(A,1)}return k=K(P,L.j(k)),new F(L,k)}for(L=_;0<=P.l(k);){for(A=Math.max(1,Math.floor(P.m()/k.m())),N=Math.ceil(Math.log(A)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),j=p(A),R=j.j(k);C(R)||0<R.l(P);)A-=N,j=p(A),R=j.j(k);D(j)&&(j=x),L=L.add(j),P=K(P,R)}return new F(L,P)}n.A=function(P){return re(this,P).h},n.and=function(P){for(var k=Math.max(this.g.length,P.g.length),A=[],N=0;N<k;N++)A[N]=this.i(N)&P.i(N);return new l(A,this.h&P.h)},n.or=function(P){for(var k=Math.max(this.g.length,P.g.length),A=[],N=0;N<k;N++)A[N]=this.i(N)|P.i(N);return new l(A,this.h|P.h)},n.xor=function(P){for(var k=Math.max(this.g.length,P.g.length),A=[],N=0;N<k;N++)A[N]=this.i(N)^P.i(N);return new l(A,this.h^P.h)};function ue(P){for(var k=P.g.length+1,A=[],N=0;N<k;N++)A[N]=P.i(N)<<1|P.i(N-1)>>>31;return new l(A,P.h)}function ce(P,k){var A=k>>5;k%=32;for(var N=P.g.length-A,L=[],j=0;j<N;j++)L[j]=0<k?P.i(j+A)>>>k|P.i(j+A+1)<<32-k:P.i(j+A);return new l(L,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CE=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=v,ts=l}).apply(typeof Y_<"u"?Y_:typeof self<"u"?self:typeof window<"u"?window:{});var Ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PE,lu,NE,Nd,um,DE,VE,OE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,E){return c==Array.prototype||c==Object.prototype||(c[g]=E.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ed=="object"&&Ed];for(var g=0;g<c.length;++g){var E=c[g];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function s(c,g){if(g)e:{var E=r;c=c.split(".");for(var T=0;T<c.length-1;T++){var z=c[T];if(!(z in E))break e;E=E[z]}c=c[c.length-1],T=E[c],g=g(T),g!=T&&g!=null&&e(E,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var E=0,T=!1,z={next:function(){if(!T&&E<c.length){var G=E++;return{value:g(G,c[G]),done:!1}}return T=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}s("Array.prototype.values",function(c){return c||function(){return a(this,function(g,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},d=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function p(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function v(c,g,E){return c.call.apply(c.bind,arguments)}function _(c,g,E){if(!c)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,T),c.apply(g,z)}}return function(){return c.apply(g,arguments)}}function x(c,g,E){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:_,x.apply(null,arguments)}function S(c,g){var E=Array.prototype.slice.call(arguments,1);return function(){var T=E.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function D(c,g){function E(){}E.prototype=g.prototype,c.aa=g.prototype,c.prototype=new E,c.prototype.constructor=c,c.Qb=function(T,z,G){for(var oe=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)oe[qe-2]=arguments[qe];return g.prototype[z].apply(T,oe)}}function C(c){const g=c.length;if(0<g){const E=Array(g);for(let T=0;T<g;T++)E[T]=c[T];return E}return[]}function O(c,g){for(let E=1;E<arguments.length;E++){const T=arguments[E];if(f(T)){const z=c.length||0,G=T.length||0;c.length=z+G;for(let oe=0;oe<G;oe++)c[z+oe]=T[oe]}else c.push(T)}}class K{constructor(g,E){this.i=g,this.j=E,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function Q(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function re(c){return re[" "](c),c}re[" "]=function(){};var ue=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function ce(c,g,E){for(const T in c)g.call(E,c[T],T,c)}function P(c,g){for(const E in c)g.call(void 0,c[E],E,c)}function k(c){const g={};for(const E in c)g[E]=c[E];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(c,g){let E,T;for(let z=1;z<arguments.length;z++){T=arguments[z];for(E in T)c[E]=T[E];for(let G=0;G<A.length;G++)E=A[G],Object.prototype.hasOwnProperty.call(T,E)&&(c[E]=T[E])}}function L(c){var g=1;c=c.split(":");const E=[];for(;0<g&&c.length;)E.push(c.shift()),g--;return c.length&&E.push(c.join(":")),E}function j(c){d.setTimeout(()=>{throw c},0)}function R(){var c=Ee;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Ke{constructor(){this.h=this.g=null}add(g,E){const T=Ze.get();T.set(g,E),this.h?this.h.next=T:this.g=T,this.h=T}}var Ze=new K(()=>new ee,c=>c.reset());class ee{constructor(){this.next=this.g=this.h=null}set(g,E){this.h=g,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Fe,ae=!1,Ee=new Ke,he=()=>{const c=d.Promise.resolve(void 0);Fe=()=>{c.then(U)}};var U=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(E){j(E)}var g=Ze;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}ae=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var Ae=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};d.addEventListener("test",E,g),d.removeEventListener("test",E,g)}catch{}return c})();function Ce(c,g){if(_e.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var E=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(ue){e:{try{re(g.nodeName);var z=!0;break e}catch{}z=!1}z||(g=null)}}else E=="mouseover"?g=c.fromElement:E=="mouseout"&&(g=c.toElement);this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Oe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ce.aa.h.call(this)}}D(Ce,_e);var Oe={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),ze=0;function Ye(c,g,E,T,z){this.listener=c,this.proxy=null,this.src=g,this.type=E,this.capture=!!T,this.ha=z,this.key=++ze,this.da=this.fa=!1}function Ct(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ur(c){this.src=c,this.g={},this.h=0}Ur.prototype.add=function(c,g,E,T,z){var G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);var oe=vi(c,g,T,z);return-1<oe?(g=c[oe],E||(g.fa=!1)):(g=new Ye(g,this.src,G,!!T,z),g.fa=E,c.push(g)),g};function Io(c,g){var E=g.type;if(E in c.g){var T=c.g[E],z=Array.prototype.indexOf.call(T,g,void 0),G;(G=0<=z)&&Array.prototype.splice.call(T,z,1),G&&(Ct(g),c.g[E].length==0&&(delete c.g[E],c.h--))}}function vi(c,g,E,T){for(var z=0;z<c.length;++z){var G=c[z];if(!G.da&&G.listener==g&&G.capture==!!E&&G.ha==T)return z}return-1}var ps="closure_lm_"+(1e6*Math.random()|0),xo={};function al(c,g,E,T,z){if(Array.isArray(g)){for(var G=0;G<g.length;G++)al(c,g[G],E,T,z);return null}return E=cl(E),c&&c[Be]?c.K(g,E,p(T)?!!T.capture:!1,z):ll(c,g,E,!1,T,z)}function ll(c,g,E,T,z,G){if(!g)throw Error("Invalid event type");var oe=p(z)?!!z.capture:!!z,qe=So(c);if(qe||(c[ps]=qe=new Ur(c)),E=qe.add(g,E,T,oe,G),E.proxy)return E;if(T=ic(),E.proxy=T,T.src=c,T.listener=E,c.addEventListener)Ae||(z=oe),z===void 0&&(z=!1),c.addEventListener(g.toString(),T,z);else if(c.attachEvent)c.attachEvent(zr(g.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return E}function ic(){function c(E){return g.call(c.src,c.listener,E)}const g=ul;return c}function To(c,g,E,T,z){if(Array.isArray(g))for(var G=0;G<g.length;G++)To(c,g[G],E,T,z);else T=p(T)?!!T.capture:!!T,E=cl(E),c&&c[Be]?(c=c.i,g=String(g).toString(),g in c.g&&(G=c.g[g],E=vi(G,E,T,z),-1<E&&(Ct(G[E]),Array.prototype.splice.call(G,E,1),G.length==0&&(delete c.g[g],c.h--)))):c&&(c=So(c))&&(g=c.g[g.toString()],c=-1,g&&(c=vi(g,E,T,z)),(E=-1<c?g[c]:null)&&Br(E))}function Br(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Be])Io(g.i,c);else{var E=c.type,T=c.proxy;g.removeEventListener?g.removeEventListener(E,T,c.capture):g.detachEvent?g.detachEvent(zr(E),T):g.addListener&&g.removeListener&&g.removeListener(T),(E=So(g))?(Io(E,c),E.h==0&&(E.src=null,g[ps]=null)):Ct(c)}}}function zr(c){return c in xo?xo[c]:xo[c]="on"+c}function ul(c,g){if(c.da)c=!0;else{g=new Ce(g,this);var E=c.listener,T=c.ha||c.src;c.fa&&Br(c),c=E.call(T,g)}return c}function So(c){return c=c[ps],c instanceof Ur?c:null}var ko="__closure_events_fn_"+(1e9*Math.random()>>>0);function cl(c){return typeof c=="function"?c:(c[ko]||(c[ko]=function(g){return c.handleEvent(g)}),c[ko])}function xt(){X.call(this),this.i=new Ur(this),this.M=this,this.F=null}D(xt,X),xt.prototype[Be]=!0,xt.prototype.removeEventListener=function(c,g,E,T){To(this,c,g,E,T)};function Tt(c,g){var E,T=c.F;if(T)for(E=[];T;T=T.F)E.push(T);if(c=c.M,T=g.type||g,typeof g=="string")g=new _e(g,c);else if(g instanceof _e)g.target=g.target||c;else{var z=g;g=new _e(T,c),N(g,z)}if(z=!0,E)for(var G=E.length-1;0<=G;G--){var oe=g.g=E[G];z=$r(oe,T,!0,g)&&z}if(oe=g.g=c,z=$r(oe,T,!0,g)&&z,z=$r(oe,T,!1,g)&&z,E)for(G=0;G<E.length;G++)oe=g.g=E[G],z=$r(oe,T,!1,g)&&z}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var E=c.g[g],T=0;T<E.length;T++)Ct(E[T]);delete c.g[g],c.h--}}this.F=null},xt.prototype.K=function(c,g,E,T){return this.i.add(String(c),g,!1,E,T)},xt.prototype.L=function(c,g,E,T){return this.i.add(String(c),g,!0,E,T)};function $r(c,g,E,T){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var z=!0,G=0;G<g.length;++G){var oe=g[G];if(oe&&!oe.da&&oe.capture==E){var qe=oe.listener,St=oe.ha||oe.src;oe.fa&&Io(c.i,oe),z=qe.call(St,T)!==!1&&z}}return z&&!T.defaultPrevented}function dl(c,g,E){if(typeof c=="function")E&&(c=x(c,E));else if(c&&typeof c.handleEvent=="function")c=x(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(c,g||0)}function _i(c){c.g=dl(()=>{c.g=null,c.i&&(c.i=!1,_i(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class ms extends X{constructor(g,E){super(),this.m=g,this.l=E,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:_i(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gs(c){X.call(this),this.h=c,this.g={}}D(gs,X);var hl=[];function fl(c){ce(c.g,function(g,E){this.g.hasOwnProperty(E)&&Br(g)},c),c.g={}}gs.prototype.N=function(){gs.aa.N.call(this),fl(this)},gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pl=d.JSON.stringify,ml=d.JSON.parse,gl=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function ys(){}ys.prototype.h=null;function bo(c){return c.h||(c.h=c.i())}function Ao(){}var bn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pr(){_e.call(this,"d")}D(pr,_e);function Ro(){_e.call(this,"c")}D(Ro,_e);var mr={},yl=null;function vs(){return yl=yl||new xt}mr.La="serverreachability";function vl(c){_e.call(this,mr.La,c)}D(vl,_e);function qr(c){const g=vs();Tt(g,new vl(g))}mr.STAT_EVENT="statevent";function _l(c,g){_e.call(this,mr.STAT_EVENT,c),this.stat=g}D(_l,_e);function pt(c){const g=vs();Tt(g,new _l(g,c))}mr.Ma="timingevent";function Co(c,g){_e.call(this,mr.Ma,c),this.size=g}D(Co,_e);function qn(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},g)}function _s(){this.g=!0}_s.prototype.xa=function(){this.g=!1};function ws(c,g,E,T,z,G){c.info(function(){if(c.g)if(G)for(var oe="",qe=G.split("&"),St=0;St<qe.length;St++){var Le=qe[St].split("=");if(1<Le.length){var Pt=Le[0];Le=Le[1];var gt=Pt.split("_");oe=2<=gt.length&&gt[1]=="type"?oe+(Pt+"="+Le+"&"):oe+(Pt+"=redacted&")}}else oe=null;else oe=G;return"XMLHTTP REQ ("+T+") [attempt "+z+"]: "+g+`
`+E+`
`+oe})}function Po(c,g,E,T,z,G,oe){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+z+"]: "+g+`
`+E+`
`+G+" "+oe})}function Hn(c,g,E,T){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+af(c,E)+(T?" "+T:"")})}function wl(c,g){c.info(function(){return"TIMEOUT: "+g})}_s.prototype.info=function(){};function af(c,g){if(!c.g)return g;if(!g)return null;try{var E=JSON.parse(g);if(E){for(c=0;c<E.length;c++)if(Array.isArray(E[c])){var T=E[c];if(!(2>T.length)){var z=T[1];if(Array.isArray(z)&&!(1>z.length)){var G=z[0];if(G!="noop"&&G!="stop"&&G!="close")for(var oe=1;oe<z.length;oe++)z[oe]=""}}}}return pl(E)}catch{return g}}var No={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wn;function Es(){}D(Es,ys),Es.prototype.g=function(){return new XMLHttpRequest},Es.prototype.i=function(){return{}},Wn=new Es;function Gn(c,g,E,T){this.j=c,this.i=g,this.l=E,this.R=T||1,this.U=new gs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new oc}function oc(){this.i=null,this.g="",this.h=!1}var El={},Do={};function Vo(c,g,E){c.L=1,c.v=Ti(gn(g)),c.m=E,c.P=!0,Il(c,null)}function Il(c,g){c.F=Date.now(),Xe(c),c.A=gn(c.v);var E=c.A,T=c.R;Array.isArray(T)||(T=[String(T)]),ki(E.i,"t",T),c.C=0,E=c.j.J,c.h=new oc,c.g=Tc(c.j,E?g:null,!c.m),0<c.O&&(c.M=new ms(x(c.Y,c,c.g),c.O)),g=c.U,E=c.g,T=c.ca;var z="readystatechange";Array.isArray(z)||(z&&(hl[0]=z.toString()),z=hl);for(var G=0;G<z.length;G++){var oe=al(E,z[G],T||g.handleEvent,!1,g.h||g);if(!oe)break;g.g[oe.key]=oe}g=c.H?k(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),qr(),ws(c.i,c.u,c.A,c.l,c.R,c.m)}Gn.prototype.ca=function(c){c=c.target;const g=this.M;g&&on(c)==3?g.j():this.Y(c)},Gn.prototype.Y=function(c){try{if(c==this.g)e:{const gt=on(this.g);var g=this.g.Ba();const Cn=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||Al(this.g)))){this.J||gt!=4||g==7||(g==8||0>=Cn?qr(3):qr(2)),Is(this);var E=this.g.Z();this.X=E;t:if(ac(this)){var T=Al(this.g);c="";var z=T.length,G=on(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),wi(this);var oe="";break t}this.h.i=new d.TextDecoder}for(g=0;g<z;g++)this.h.h=!0,c+=this.h.i.decode(T[g],{stream:!(G&&g==z-1)});T.length=0,this.h.g+=c,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=E==200,Po(this.i,this.u,this.A,this.l,this.R,gt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,St=this.g;if((qe=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(qe)){var Le=qe;break t}}Le=null}if(E=Le)Hn(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xl(this,E);else{this.o=!1,this.s=3,pt(12),An(this),wi(this);break e}}if(this.P){E=!0;let vn;for(;!this.J&&this.C<oe.length;)if(vn=lf(this,oe),vn==Do){gt==4&&(this.s=4,pt(14),E=!1),Hn(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==El){this.s=4,pt(15),Hn(this.i,this.l,oe,"[Invalid Chunk]"),E=!1;break}else Hn(this.i,this.l,vn,null),xl(this,vn);if(ac(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||oe.length!=0||this.h.h||(this.s=1,pt(16),E=!1),this.o=this.o&&E,!E)Hn(this.i,this.l,oe,"[Invalid Chunked Response]"),An(this),wi(this);else if(0<oe.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Cl(Pt),Pt.M=!0,pt(11))}}else Hn(this.i,this.l,oe,null),xl(this,oe);gt==4&&An(this),this.o&&!this.J&&(gt==4?Ho(this.j,this):(this.o=!1,Xe(this)))}else Uo(this.g),E==400&&0<oe.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),An(this),wi(this)}}}catch{}finally{}};function ac(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function lf(c,g){var E=c.C,T=g.indexOf(`
`,E);return T==-1?Do:(E=Number(g.substring(E,T)),isNaN(E)?El:(T+=1,T+E>g.length?Do:(g=g.slice(T,T+E),c.C=T+E,g)))}Gn.prototype.cancel=function(){this.J=!0,An(this)};function Xe(c){c.S=Date.now()+c.I,lc(c,c.I)}function lc(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=qn(x(c.ba,c),g)}function Is(c){c.B&&(d.clearTimeout(c.B),c.B=null)}Gn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(wl(this.i,this.A),this.L!=2&&(qr(),pt(17)),An(this),this.s=2,wi(this)):lc(this,this.S-c)};function wi(c){c.j.G==0||c.J||Ho(c.j,c)}function An(c){Is(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,fl(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function xl(c,g){try{var E=c.j;if(E.G!=0&&(E.g==c||Xt(E.h,c))){if(!c.K&&Xt(E.h,c)&&E.G==3){try{var T=E.Da.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var z=T;if(z[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<c.F)qo(E),Jn(E);else break e;$o(E),pt(18)}}else E.za=z[1],0<E.za-E.T&&37500>z[2]&&E.F&&E.v==0&&!E.C&&(E.C=qn(x(E.Za,E),6e3));if(1>=cc(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Qr(E,11)}else if((c.K||E.g==c)&&qo(E),!Q(g))for(z=E.Da.g.parse(g),g=0;g<z.length;g++){let Le=z[g];if(E.T=Le[0],Le=Le[1],E.G==2)if(Le[0]=="c"){E.K=Le[1],E.ia=Le[2];const Pt=Le[3];Pt!=null&&(E.la=Pt,E.j.info("VER="+E.la));const gt=Le[4];gt!=null&&(E.Aa=gt,E.j.info("SVER="+E.Aa));const Cn=Le[5];Cn!=null&&typeof Cn=="number"&&0<Cn&&(T=1.5*Cn,E.L=T,E.j.info("backChannelRequestTimeoutMs_="+T)),T=E;const vn=c.g;if(vn){const Rs=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rs){var G=T.h;G.g||Rs.indexOf("spdy")==-1&&Rs.indexOf("quic")==-1&&Rs.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Tl(G,G.h),G.h=null))}if(T.D){const Go=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Go&&(T.ya=Go,Qe(T.I,T.D,Go))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-c.F,E.j.info("Handshake RTT: "+E.R+"ms")),T=E;var oe=c;if(T.qa=xc(T,T.J?T.ia:null,T.W),oe.K){dc(T.h,oe);var qe=oe,St=T.L;St&&(qe.I=St),qe.B&&(Is(qe),Xe(qe)),T.g=oe}else As(T);0<E.i.length&&_r(E)}else Le[0]!="stop"&&Le[0]!="close"||Qr(E,7);else E.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Qr(E,7):Mt(E):Le[0]!="noop"&&E.l&&E.l.ta(Le),E.v=0)}}qr(4)}catch{}}var uc=class{constructor(c,g){this.g=c,this.map=g}};function xs(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function cc(c){return c.h?1:c.g?c.g.size:0}function Xt(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Tl(c,g){c.g?c.g.add(g):c.h=g}function dc(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}xs.prototype.cancel=function(){if(this.i=hc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function hc(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const E of c.g.values())g=g.concat(E.D);return g}return C(c.i)}function Oo(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],E=c.length,T=0;T<E;T++)g.push(c[T]);return g}g=[],E=0;for(T in c)g[E++]=c[T];return g}function Lo(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var E=0;E<c;E++)g.push(E);return g}g=[],E=0;for(const T in c)g[E++]=T;return g}}}function Ei(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var E=Lo(c),T=Oo(c),z=T.length,G=0;G<z;G++)g.call(void 0,T[G],E&&E[G],c)}var Ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uf(c,g){if(c){c=c.split("&");for(var E=0;E<c.length;E++){var T=c[E].indexOf("="),z=null;if(0<=T){var G=c[E].substring(0,T);z=c[E].substring(T+1)}else G=c[E];g(G,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Hr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Hr){this.h=c.h,Ss(this,c.j),this.o=c.o,this.g=c.g,Ii(this,c.s),this.l=c.l;var g=c.i,E=new gr;E.i=g.i,g.g&&(E.g=new Map(g.g),E.h=g.h),xi(this,E),this.m=c.m}else c&&(g=String(c).match(Ts))?(this.h=!1,Ss(this,g[1]||"",!0),this.o=Ve(g[2]||""),this.g=Ve(g[3]||"",!0),Ii(this,g[4]),this.l=Ve(g[5]||"",!0),xi(this,g[6]||"",!0),this.m=Ve(g[7]||"")):(this.h=!1,this.i=new gr(null,this.h))}Hr.prototype.toString=function(){var c=[],g=this.j;g&&c.push(Si(g,Mo,!0),":");var E=this.g;return(E||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Si(g,Mo,!0),"@"),c.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&c.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(Si(E,E.charAt(0)=="/"?mc:pc,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",Si(E,Sl)),c.join("")};function gn(c){return new Hr(c)}function Ss(c,g,E){c.j=E?Ve(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Ii(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function xi(c,g,E){g instanceof gr?(c.i=g,yr(c.i,c.h)):(E||(g=Si(g,gc)),c.i=new gr(g,c.h))}function Qe(c,g,E){c.i.set(g,E)}function Ti(c){return Qe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ve(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Si(c,g,E){return typeof c=="string"?(c=encodeURI(c).replace(g,fc),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function fc(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Mo=/[#\/\?@]/g,pc=/[#\?:]/g,mc=/[#\?]/g,gc=/[#\?@]/g,Sl=/#/g;function gr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Lt(c){c.g||(c.g=new Map,c.h=0,c.i&&uf(c.i,function(g,E){c.add(decodeURIComponent(g.replace(/\+/g," ")),E)}))}n=gr.prototype,n.add=function(c,g){Lt(this),this.i=null,c=Rn(this,c);var E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(g),this.h+=1,this};function Kn(c,g){Lt(c),g=Rn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Qn(c,g){return Lt(c),g=Rn(c,g),c.g.has(g)}n.forEach=function(c,g){Lt(this),this.g.forEach(function(E,T){E.forEach(function(z){c.call(g,z,T,this)},this)},this)},n.na=function(){Lt(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),E=[];for(let T=0;T<g.length;T++){const z=c[T];for(let G=0;G<z.length;G++)E.push(g[T])}return E},n.V=function(c){Lt(this);let g=[];if(typeof c=="string")Qn(this,c)&&(g=g.concat(this.g.get(Rn(this,c))));else{c=Array.from(this.g.values());for(let E=0;E<c.length;E++)g=g.concat(c[E])}return g},n.set=function(c,g){return Lt(this),this.i=null,c=Rn(this,c),Qn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function ki(c,g,E){Kn(c,g),0<E.length&&(c.i=null,c.g.set(Rn(c,g),C(E)),c.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var E=0;E<g.length;E++){var T=g[E];const G=encodeURIComponent(String(T)),oe=this.V(T);for(T=0;T<oe.length;T++){var z=G;oe[T]!==""&&(z+="="+encodeURIComponent(String(oe[T]))),c.push(z)}}return this.i=c.join("&")};function Rn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function yr(c,g){g&&!c.j&&(Lt(c),c.i=null,c.g.forEach(function(E,T){var z=T.toLowerCase();T!=z&&(Kn(this,T),ki(this,z,E))},c)),c.j=g}function cf(c,g){const E=new _s;if(d.Image){const T=new Image;T.onload=S(sn,E,"TestLoadImage: loaded",!0,g,T),T.onerror=S(sn,E,"TestLoadImage: error",!1,g,T),T.onabort=S(sn,E,"TestLoadImage: abort",!1,g,T),T.ontimeout=S(sn,E,"TestLoadImage: timeout",!1,g,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else g(!1)}function yc(c,g){const E=new _s,T=new AbortController,z=setTimeout(()=>{T.abort(),sn(E,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:T.signal}).then(G=>{clearTimeout(z),G.ok?sn(E,"TestPingServer: ok",!0,g):sn(E,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(z),sn(E,"TestPingServer: error",!1,g)})}function sn(c,g,E,T,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),T(E)}catch{}}function df(){this.g=new gl}function vc(c,g,E){const T=E||"";try{Ei(c,function(z,G){let oe=z;p(z)&&(oe=pl(z)),g.push(T+G+"="+encodeURIComponent(oe))})}catch(z){throw g.push(T+"type="+encodeURIComponent("_badmap")),z}}function Wr(c){this.l=c.Ub||null,this.j=c.eb||!1}D(Wr,ys),Wr.prototype.g=function(){return new ks(this.l,this.j)},Wr.prototype.i=(function(c){return function(){return c}})({});function ks(c,g){xt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(ks,xt),n=ks.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Xn(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yn(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Xn(this)),this.g&&(this.readyState=3,Xn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_c(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function _c(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Yn(this):Xn(this),this.readyState==3&&_c(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Yn(this))},n.Qa=function(c){this.g&&(this.response=c,Yn(this))},n.ga=function(){this.g&&Yn(this)};function Yn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Xn(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var E=g.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=g.next();return c.join(`\r
`)};function Xn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ks.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Gr(c){let g="";return ce(c,function(E,T){g+=T,g+=":",g+=E,g+=`\r
`}),g}function bi(c,g,E){e:{for(T in E){var T=!1;break e}T=!0}T||(E=Gr(E),typeof c=="string"?E!=null&&encodeURIComponent(String(E)):Qe(c,g,E))}function nt(c){xt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(nt,xt);var hf=/^https?$/i,kl=["POST","PUT"];n=nt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,E,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wn.g(),this.v=this.o?bo(this.o):bo(Wn),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(G){bs(this,G);return}if(c=E||"",E=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var z in T)E.set(z,T[z]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const G of T.keys())E.set(G,T.get(G));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(E.keys()).find(G=>G.toLowerCase()=="content-type"),z=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(kl,g,void 0))||T||z||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,oe]of E)this.g.setRequestHeader(G,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fo(this),this.u=!0,this.g.send(c),this.u=!1}catch(G){bs(this,G)}};function bs(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,jo(c),yn(c)}function jo(c){c.A||(c.A=!0,Tt(c,"complete"),Tt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Tt(this,"complete"),Tt(this,"abort"),yn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yn(this,!0)),nt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?bl(this):this.bb())},n.bb=function(){bl(this)};function bl(c){if(c.h&&typeof l<"u"&&(!c.v[1]||on(c)!=4||c.Z()!=2)){if(c.u&&on(c)==4)dl(c.Ea,0,c);else if(Tt(c,"readystatechange"),on(c)==4){c.h=!1;try{const oe=c.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var E;if(!(E=g)){var T;if(T=oe===0){var z=String(c.D).match(Ts)[1]||null;!z&&d.self&&d.self.location&&(z=d.self.location.protocol.slice(0,-1)),T=!hf.test(z?z.toLowerCase():"")}E=T}if(E)Tt(c,"complete"),Tt(c,"success");else{c.m=6;try{var G=2<on(c)?c.g.statusText:""}catch{G=""}c.l=G+" ["+c.Z()+"]",jo(c)}}finally{yn(c)}}}}function yn(c,g){if(c.g){Fo(c);const E=c.g,T=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Tt(c,"ready");try{E.onreadystatechange=T}catch{}}}function Fo(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function on(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<on(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),ml(g)}};function Al(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Uo(c){const g={};c=(c.g&&2<=on(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(Q(c[T]))continue;var E=L(c[T]);const z=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const G=g[z]||[];g[z]=G,G.push(E)}P(g,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vr(c,g,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||g}function Rl(c){this.Aa=0,this.i=[],this.j=new _s,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vr("baseRetryDelayMs",5e3,c),this.cb=vr("retryDelaySeedMs",1e4,c),this.Wa=vr("forwardChannelMaxRetries",2,c),this.wa=vr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new xs(c&&c.concurrentRequestLimit),this.Da=new df,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Rl.prototype,n.la=8,n.G=1,n.connect=function(c,g,E,T){pt(0),this.W=c,this.H=g||{},E&&T!==void 0&&(this.H.OSID=E,this.H.OAID=T),this.F=this.X,this.I=xc(this,null,this.W),_r(this)};function Mt(c){if(Bo(c),c.G==3){var g=c.U++,E=gn(c.I);if(Qe(E,"SID",c.K),Qe(E,"RID",g),Qe(E,"TYPE","terminate"),Kr(c,E),g=new Gn(c,c.j,g),g.L=2,g.v=Ti(gn(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!E&&d.Image&&(new Image().src=g.v,E=!0),E||(g.g=Tc(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Xe(g)}Ic(c)}function Jn(c){c.g&&(Cl(c),c.g.cancel(),c.g=null)}function Bo(c){Jn(c),c.u&&(d.clearTimeout(c.u),c.u=null),qo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function _r(c){if(!mn(c.h)&&!c.s){c.s=!0;var g=c.Ga;Fe||he(),ae||(Fe(),ae=!0),Ee.add(g,c),c.B=0}}function ff(c,g){return cc(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=qn(x(c.Ga,c,g),Ec(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const z=new Gn(this,this.j,c);let G=this.o;if(this.S&&(G?(G=k(G),N(G,this.S)):G=this.S),this.m!==null||this.O||(z.H=G,G=null),this.P)e:{for(var g=0,E=0;E<this.i.length;E++){t:{var T=this.i[E];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,4096<g){g=E;break e}if(g===4096||E===this.i.length-1){g=E+1;break e}}g=1e3}else g=1e3;g=Ai(this,z,g),E=gn(this.I),Qe(E,"RID",c),Qe(E,"CVER",22),this.D&&Qe(E,"X-HTTP-Session-Id",this.D),Kr(this,E),G&&(this.O?g="headers="+encodeURIComponent(String(Gr(G)))+"&"+g:this.m&&bi(E,this.m,G)),Tl(this.h,z),this.Ua&&Qe(E,"TYPE","init"),this.P?(Qe(E,"$req",g),Qe(E,"SID","null"),z.T=!0,Vo(z,E,null)):Vo(z,E,g),this.G=2}}else this.G==3&&(c?zo(this,c):this.i.length==0||mn(this.h)||zo(this))};function zo(c,g){var E;g?E=g.l:E=c.U++;const T=gn(c.I);Qe(T,"SID",c.K),Qe(T,"RID",E),Qe(T,"AID",c.T),Kr(c,T),c.m&&c.o&&bi(T,c.m,c.o),E=new Gn(c,c.j,E,c.B+1),c.m===null&&(E.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Ai(c,E,1e3),E.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Tl(c.h,E),Vo(E,T,g)}function Kr(c,g){c.H&&ce(c.H,function(E,T){Qe(g,T,E)}),c.l&&Ei({},function(E,T){Qe(g,T,E)})}function Ai(c,g,E){E=Math.min(c.i.length,E);var T=c.l?x(c.l.Na,c.l,c):null;e:{var z=c.i;let G=-1;for(;;){const oe=["count="+E];G==-1?0<E?(G=z[0].g,oe.push("ofs="+G)):G=0:oe.push("ofs="+G);let qe=!0;for(let St=0;St<E;St++){let Le=z[St].g;const Pt=z[St].map;if(Le-=G,0>Le)G=Math.max(0,z[St].g-100),qe=!1;else try{vc(Pt,oe,"req"+Le+"_")}catch{T&&T(Pt)}}if(qe){T=oe.join("&");break e}}}return c=c.i.splice(0,E),g.D=c,T}function As(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;Fe||he(),ae||(Fe(),ae=!0),Ee.add(g,c),c.v=0}}function $o(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=qn(x(c.Fa,c),Ec(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,wc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=qn(x(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Jn(this),wc(this))};function Cl(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function wc(c){c.g=new Gn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=gn(c.qa);Qe(g,"RID","rpc"),Qe(g,"SID",c.K),Qe(g,"AID",c.T),Qe(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Qe(g,"TO",c.ja),Qe(g,"TYPE","xmlhttp"),Kr(c,g),c.m&&c.o&&bi(g,c.m,c.o),c.L&&(c.g.I=c.L);var E=c.g;c=c.ia,E.L=1,E.v=Ti(gn(g)),E.m=null,E.P=!0,Il(E,c)}n.Za=function(){this.C!=null&&(this.C=null,Jn(this),$o(this),pt(19))};function qo(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Ho(c,g){var E=null;if(c.g==g){qo(c),Cl(c),c.g=null;var T=2}else if(Xt(c.h,g))E=g.D,dc(c.h,g),T=1;else return;if(c.G!=0){if(g.o)if(T==1){E=g.m?g.m.length:0,g=Date.now()-g.F;var z=c.B;T=vs(),Tt(T,new Co(T,E)),_r(c)}else As(c);else if(z=g.s,z==3||z==0&&0<g.X||!(T==1&&ff(c,g)||T==2&&$o(c)))switch(E&&0<E.length&&(g=c.h,g.i=g.i.concat(E)),z){case 1:Qr(c,5);break;case 4:Qr(c,10);break;case 3:Qr(c,6);break;default:Qr(c,2)}}}function Ec(c,g){let E=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(E*=2),E*g}function Qr(c,g){if(c.j.info("Error code "+g),g==2){var E=x(c.fb,c),T=c.Xa;const z=!T;T=new Hr(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ss(T,"https"),Ti(T),z?cf(T.toString(),E):yc(T.toString(),E)}else pt(2);c.G=0,c.l&&c.l.sa(g),Ic(c),Bo(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Ic(c){if(c.G=0,c.ka=[],c.l){const g=hc(c.h);(g.length!=0||c.i.length!=0)&&(O(c.ka,g),O(c.ka,c.i),c.h.i.length=0,C(c.i),c.i.length=0),c.l.ra()}}function xc(c,g,E){var T=E instanceof Hr?gn(E):new Hr(E);if(T.g!="")g&&(T.g=g+"."+T.g),Ii(T,T.s);else{var z=d.location;T=z.protocol,g=g?g+"."+z.hostname:z.hostname,z=+z.port;var G=new Hr(null);T&&Ss(G,T),g&&(G.g=g),z&&Ii(G,z),E&&(G.l=E),T=G}return E=c.D,g=c.ya,E&&g&&Qe(T,E,g),Qe(T,"VER",c.la),Kr(c,T),T}function Tc(c,g,E){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new nt(new Wr({eb:E})):new nt(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pl(){}n=Pl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Wo(){}Wo.prototype.g=function(c,g){return new Jt(c,g)};function Jt(c,g){xt.call(this),this.g=new Rl(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!Q(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!Q(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new wr(this)}D(Jt,xt),Jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){Mt(this.g)},Jt.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.u&&(E={},E.__data__=pl(c),c=E);g.i.push(new uc(g.Ya++,c)),g.G==3&&_r(g)},Jt.prototype.N=function(){this.g.l=null,delete this.j,Mt(this.g),delete this.g,Jt.aa.N.call(this)};function Sc(c){pr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const E in g){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}D(Sc,pr);function kc(){Ro.call(this),this.status=1}D(kc,Ro);function wr(c){this.g=c}D(wr,Pl),wr.prototype.ua=function(){Tt(this.g,"a")},wr.prototype.ta=function(c){Tt(this.g,new Sc(c))},wr.prototype.sa=function(c){Tt(this.g,new kc)},wr.prototype.ra=function(){Tt(this.g,"b")},Wo.prototype.createWebChannel=Wo.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,OE=function(){return new Wo},VE=function(){return vs()},DE=mr,um={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},No.NO_ERROR=0,No.TIMEOUT=8,No.HTTP_ERROR=6,Nd=No,sc.COMPLETE="complete",NE=sc,Ao.EventType=bn,bn.OPEN="a",bn.CLOSE="b",bn.ERROR="c",bn.MESSAGE="d",xt.prototype.listen=xt.prototype.K,lu=Ao,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,PE=nt}).apply(typeof Ed<"u"?Ed:typeof self<"u"?self:typeof window<"u"?window:{});const X_="@firebase/firestore",J_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=new bh("@firebase/firestore");function wa(){return so.logLevel}function ne(n,...e){if(so.logLevel<=Ne.DEBUG){const t=e.map(eg);so.debug(`Firestore (${Ja}): ${n}`,...t)}}function tn(n,...e){if(so.logLevel<=Ne.ERROR){const t=e.map(eg);so.error(`Firestore (${Ja}): ${n}`,...t)}}function Lr(n,...e){if(so.logLevel<=Ne.WARN){const t=e.map(eg);so.warn(`Firestore (${Ja}): ${n}`,...t)}}function eg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,LE(n,r,t)}function LE(n,e,t){let r=`FIRESTORE (${Ja}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw tn(r),new Error(r)}function ve(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||LE(e,s,r)}function be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends hr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ut.UNAUTHENTICATED)))}shutdown(){}}class _A{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class wA{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ve(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Pr,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},d=f=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Pr)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new ME(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new Ut(e)}}class EA{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class IA{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new EA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ut.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Z_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,or(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ve(this.o===void 0,3512);const r=a=>{a.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,ne("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Z_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ve(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Z_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=TA(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function Te(n,e){return n<e?-1:n>e?1:0}function cm(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return Te(r,s);{const a=jE(),l=SA(a.encode(e0(n,t)),a.encode(e0(e,t)));return l!==0?l:Te(r,s)}}t+=r>65535?2:1}return Te(n.length,e.length)}function e0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function SA(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Te(n[t],e[t]);return Te(n.length,e.length)}function Ca(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}function FE(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="__name__";class br{constructor(e,t,r){t===void 0?t=0:t>e.length&&me(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&me(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return br.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof br?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=br.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Te(e.length,t.length)}static compareSegments(e,t){const r=br.isNumericId(e),s=br.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?br.extractNumericId(e).compare(br.extractNumericId(t)):cm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ts.fromString(e.substring(4,e.length-2))}}class $e extends br{construct(e,t,r){return new $e(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new $e(t)}static emptyPath(){return new $e([])}}const kA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ct extends br{construct(e,t,r){return new ct(e,t,r)}static isValidIdentifier(e){return kA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ct.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===t0}static keyField(){return new ct([t0])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new se(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new se(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new se(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else d==="`"?(l=!l,s++):d!=="."||l?(r+=d,s++):(a(),s++)}if(a(),l)throw new se(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ct(t)}static emptyPath(){return new ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le($e.fromString(e))}static fromName(e){return new le($e.fromString(e).popFirst(5))}static empty(){return new le($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return $e.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new $e(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(n,e,t){if(!t)throw new se(Y.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bA(n,e,t,r){if(e===!0&&r===!0)throw new se(Y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function n0(n){if(!le.isDocumentKey(n))throw new se(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function r0(n){if(le.isDocumentKey(n))throw new se(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function BE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ah(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":me(12329,{type:typeof n})}function nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new se(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ah(n);throw new se(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function AA(n,e){if(e<=0)throw new se(Y.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(n,e){const t={typeString:n};return e&&(t.value=e),t}function qu(n,e){if(!BE(n))throw new se(Y.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(s&&typeof l!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new se(Y.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=-62135596800,s0=1e6;class He{static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*s0);return new He(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<i0)throw new se(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/s0}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:He._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(qu(e,He._jsonSchema))return new He(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-i0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}He._jsonSchemaVersion="firestore/timestamp/1.0",He._jsonSchema={type:_t("string",He._jsonSchemaVersion),seconds:_t("number"),nanoseconds:_t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new He(0,0))}static max(){return new we(new He(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=-1;class Xd{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function dm(n){return n.fields.find((e=>e.kind===2))}function qs(n){return n.fields.filter((e=>e.kind!==2))}Xd.UNKNOWN_ID=-1;class Dd{constructor(e,t){this.fieldPath=e,this.kind=t}}class bu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bu(0,Sn.min())}}function RA(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=we.fromTimestamp(r===1e9?new He(t+1,0):new He(t,r));return new Sn(s,le.empty(),e)}function zE(n){return new Sn(n.readTime,n.key,ku)}class Sn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Sn(we.min(),le.empty(),ku)}static max(){return new Sn(we.max(),le.empty(),ku)}}function ng(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=le.comparator(n.documentKey,e.documentKey),t!==0?t:Te(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(n){if(n.code!==Y.FAILED_PRECONDITION||n.message!==$E)throw n;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):$.reject(t)}static resolve(e){return new $(((t,r)=>{t(e)}))}static reject(e){return new $(((t,r)=>{r(e)}))}static waitFor(e){return new $(((t,r)=>{let s=0,a=0,l=!1;e.forEach((d=>{++s,d.next((()=>{++a,l&&a===s&&t()}),(f=>r(f)))})),l=!0,a===s&&t()}))}static or(e){let t=$.resolve(!1);for(const r of e)t=t.next((s=>s?$.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new $(((r,s)=>{const a=e.length,l=new Array(a);let d=0;for(let f=0;f<a;f++){const p=f;t(e[p]).next((v=>{l[p]=v,++d,d===a&&r(l)}),(v=>s(v)))}}))}static doWhile(e,t){return new $(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="SimpleDb";class Rh{static open(e,t,r,s){try{return new Rh(t,e.transaction(s,r))}catch(a){throw new pu(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Pr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new pu(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=rg(r.target.error);this.S.reject(new pu(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ne(In,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new PA(t)}}class ns{static delete(e){return ne(In,"Removing database:",e),Ws(pE().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!kh())return!1;if(ns.F())return!0;const e=At(),t=ns.M(e),r=0<t&&t<10,s=HE(e),a=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,ns.M(At())===12.2&&tn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(ne(In,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=a=>{const l=a.target.result;t(l)},s.onblocked=()=>{r(new pu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const l=a.target.error;l.name==="VersionError"?r(new se(Y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new se(Y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new pu(e,l))},s.onupgradeneeded=a=>{ne(In,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;if(this.L!==null&&this.L!==a.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${a.oldVersion}, event.newVersion=${a.newVersion}, db.version=${l.version}`);this.B.q(l,s.transaction,a.oldVersion,this.version).next((()=>{ne(In,"Database upgrade to version "+this.version+" complete")}))}})),this.db.addEventListener("close",(t=>{const r=t.target;this.L=r.version}),{passive:!0})),this.db.addEventListener("versionchange",(t=>{var r;t.newVersion===null&&(Lr('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))}),{passive:!0}),this.db}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}async runTransaction(e,t,r,s){const a=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.k(e);const d=Rh.open(this.db,e,a?"readonly":"readwrite",r),f=s(d).next((p=>(d.v(),p))).catch((p=>(d.abort(p),$.reject(p)))).toPromise();return f.catch((()=>{})),await d.D,f}catch(d){const f=d,p=f.name!=="FirebaseError"&&l<3;if(ne(In,"Transaction failed with error:",f.message,"Retrying:",p),this.close(),!p)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function HE(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class CA{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return Ws(this.$.delete())}}class pu extends se{constructor(e,t){super(Y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function hs(n){return n.name==="IndexedDbTransactionError"}class PA{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ne(In,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ne(In,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ws(r)}add(e){return ne(In,"ADD",this.store.name,e,e),Ws(this.store.add(e))}get(e){return Ws(this.store.get(e)).next((t=>(t===void 0&&(t=null),ne(In,"GET",this.store.name,e,t),t)))}delete(e){return ne(In,"DELETE",this.store.name,e),Ws(this.store.delete(e))}count(){return ne(In,"COUNT",this.store.name),Ws(this.store.count())}j(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const a=s.getAll(r.range);return new $(((l,d)=>{a.onerror=f=>{d(f.target.error)},a.onsuccess=f=>{l(f.target.result)}}))}{const a=this.cursor(r),l=[];return this.J(a,((d,f)=>{l.push(f)})).next((()=>l))}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new $(((s,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{s(l.target.result)}}))}Y(e,t){ne(In,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const s=this.cursor(r);return this.J(s,((a,l,d)=>d.delete()))}X(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.J(s,t)}ee(e){const t=this.cursor({});return new $(((r,s)=>{t.onerror=a=>{const l=rg(a.target.error);s(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next((d=>{d?l.continue():r()})):r()}}))}J(e,t){const r=[];return new $(((s,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void s();const f=new CA(d),p=t(d.primaryKey,d.value,f);if(p instanceof $){const v=p.catch((_=>(f.done(),$.reject(_))));r.push(v)}f.isDone?s():f.W===null?d.continue():d.continue(f.W)}})).next((()=>$.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ws(n){return new $(((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=rg(r.target.error);t(s)}}))}let o0=!1;function rg(n){const e=ns.M(At());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return o0||(o0=!0,setTimeout((()=>{throw r}),0)),r}}return n}const mu="IndexBackfiller";class NA{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){ne(mu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.te.re();ne(mu,`Documents written: ${t}`)}catch(t){hs(t)?ne(mu,"Ignoring IndexedDB error during index backfill: ",t):await _o(t)}await this.ne(6e4)}))}}class DA{constructor(e,t){this.localStore=e,this.persistence=t}async re(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ie(t,e)))}ie(e,t){const r=new Set;let s=t,a=!0;return $.doWhile((()=>a===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!r.has(l))return ne(mu,`Processing collection: ${l}`),this.se(e,l,s).next((d=>{s-=d,r.add(l)}));a=!1})))).next((()=>t-s))}se(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next((a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this.oe(s,a))).next((d=>(ne(mu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>l.size))}))))}oe(e,t){let r=e;return t.changes.forEach(((s,a)=>{const l=zE(a);ng(l,r)>0&&(r=l)})),new Sn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}jn.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=-1;function Ch(n){return n==null}function Au(n){return n===0&&1/n==-1/0}function VA(n){return typeof n=="number"&&Number.isInteger(n)&&!Au(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="";function Yt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=a0(e)),e=OA(n.get(t),e);return a0(e)}function OA(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case Jd:t+="";break;default:t+=a}}return t}function a0(n){return n+Jd+""}function Rr(n){const e=n.length;if(ve(e>=2,64408,{path:n}),e===2)return ve(n.charAt(0)===Jd&&n.charAt(1)==="",56145,{path:n}),$e.emptyPath();const t=e-2,r=[];let s="";for(let a=0;a<e;){const l=n.indexOf(Jd,a);switch((l<0||l>t)&&me(50515,{path:n}),n.charAt(l+1)){case"":const d=n.substring(a,l);let f;s.length===0?f=d:(s+=d,f=s,s=""),r.push(f);break;case"":s+=n.substring(a,l),s+="\0";break;case"":s+=n.substring(a,l+1);break;default:me(61167,{path:n})}a=l+2}return new $e(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="remoteDocuments",Hu="owner",pa="owner",Ru="mutationQueues",LA="userId",sr="mutations",l0="batchId",Ys="userMutationsIndex",u0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(n,e){return[n,Yt(e)]}function WE(n,e,t){return[n,Yt(e),t]}const MA={},Pa="documentMutations",Zd="remoteDocumentsV14",jA=["prefixPath","collectionGroup","readTime","documentId"],Od="documentKeyIndex",FA=["prefixPath","collectionGroup","documentId"],GE="collectionGroupIndex",UA=["collectionGroup","readTime","prefixPath","documentId"],Cu="remoteDocumentGlobal",hm="remoteDocumentGlobalKey",Na="targets",KE="queryTargetsIndex",BA=["canonicalId","targetId"],Da="targetDocuments",zA=["targetId","path"],ig="documentTargetsIndex",$A=["path","targetId"],eh="targetGlobalKey",eo="targetGlobal",Pu="collectionParents",qA=["collectionId","parent"],Va="clientMetadata",HA="clientId",Ph="bundles",WA="bundleId",Nh="namedQueries",GA="name",sg="indexConfiguration",KA="indexId",fm="collectionGroupIndex",QA="collectionGroup",gu="indexState",YA=["indexId","uid"],QE="sequenceNumberIndex",XA=["uid","sequenceNumber"],yu="indexEntries",JA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],YE="documentKeyIndex",ZA=["indexId","uid","orderedDocumentKey"],Dh="documentOverlays",eR=["userId","collectionPath","documentId"],pm="collectionPathOverlayIndex",tR=["userId","collectionPath","largestBatchId"],XE="collectionGroupOverlayIndex",nR=["userId","collectionGroup","largestBatchId"],og="globals",rR="name",JE=[Ru,sr,Pa,Hs,Na,Hu,eo,Da,Va,Cu,Pu,Ph,Nh],iR=[...JE,Dh],ZE=[Ru,sr,Pa,Zd,Na,Hu,eo,Da,Va,Cu,Pu,Ph,Nh,Dh],eI=ZE,ag=[...eI,sg,gu,yu],sR=ag,tI=[...ag,og],oR=tI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm extends qE{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}}function Rt(n,e){const t=be(n);return ns.N(t.ce,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function nI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.comparator=e,this.root=t||Bt.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Id(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Id(this.root,e,this.comparator,!1)}getReverseIterator(){return new Id(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Id(this.root,e,this.comparator,!0)}}class Id{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??Bt.RED,this.left=s??Bt.EMPTY,this.right=a??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new Bt(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Bt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new Bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new d0(this.data.getIterator())}getIteratorFrom(e){return new d0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ge(this.comparator);return t.data=e,t}}class d0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ma(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.fields=e,e.sort(ct.comparator)}static empty(){return new fn([])}unionWith(e){let t=new Ge(ct.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new fn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ca(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new rI("Invalid base64 string: "+a):a}})(e);return new It(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new It(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const aR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function di(n){if(ve(!!n,39018),typeof n=="string"){let e=0;const t=aR.exec(n);if(ve(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:it(n.seconds),nanos:it(n.nanos)}}function it(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function hi(n){return typeof n=="string"?It.fromBase64String(n):It.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="server_timestamp",sI="__type__",oI="__previous_value__",aI="__local_write_time__";function lg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[sI])===null||t===void 0?void 0:t.stringValue)===iI}function Vh(n){const e=n.mapValue.fields[oI];return lg(e)?Vh(e):e}function Nu(n){const e=di(n.mapValue.fields[aI].timestampValue);return new He(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,t,r,s,a,l,d,f,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=v}}const th="(default)";class oo{constructor(e,t){this.projectId=e,this.database=t||th}static empty(){return new oo("","")}get isDefaultDatabase(){return this.database===th}isEqual(e){return e instanceof oo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="__type__",lI="__max__",Ji={mapValue:{fields:{__type__:{stringValue:lI}}}},cg="__vector__",Oa="value",Ld={nullValue:"NULL_VALUE"};function os(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lg(n)?4:uI(n)?9007199254740991:Oh(n)?10:11:me(28295,{value:n})}function Mr(n,e){if(n===e)return!0;const t=os(n);if(t!==os(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nu(n).isEqual(Nu(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=di(s.timestampValue),d=di(a.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return hi(s.bytesValue).isEqual(hi(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return it(s.geoPointValue.latitude)===it(a.geoPointValue.latitude)&&it(s.geoPointValue.longitude)===it(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return it(s.integerValue)===it(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=it(s.doubleValue),d=it(a.doubleValue);return l===d?Au(l)===Au(d):isNaN(l)&&isNaN(d)}return!1})(n,e);case 9:return Ca(n.arrayValue.values||[],e.arrayValue.values||[],Mr);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},d=a.mapValue.fields||{};if(c0(l)!==c0(d))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(d[f]===void 0||!Mr(l[f],d[f])))return!1;return!0})(n,e);default:return me(52216,{left:n})}}function Du(n,e){return(n.values||[]).find((t=>Mr(t,e)))!==void 0}function as(n,e){if(n===e)return 0;const t=os(n),r=os(e);if(t!==r)return Te(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Te(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const d=it(a.integerValue||a.doubleValue),f=it(l.integerValue||l.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return h0(n.timestampValue,e.timestampValue);case 4:return h0(Nu(n),Nu(e));case 5:return cm(n.stringValue,e.stringValue);case 6:return(function(a,l){const d=hi(a),f=hi(l);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const d=a.split("/"),f=l.split("/");for(let p=0;p<d.length&&p<f.length;p++){const v=Te(d[p],f[p]);if(v!==0)return v}return Te(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const d=Te(it(a.latitude),it(l.latitude));return d!==0?d:Te(it(a.longitude),it(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return f0(n.arrayValue,e.arrayValue);case 10:return(function(a,l){var d,f,p,v;const _=a.fields||{},x=l.fields||{},S=(d=_[Oa])===null||d===void 0?void 0:d.arrayValue,D=(f=x[Oa])===null||f===void 0?void 0:f.arrayValue,C=Te(((p=S==null?void 0:S.values)===null||p===void 0?void 0:p.length)||0,((v=D==null?void 0:D.values)===null||v===void 0?void 0:v.length)||0);return C!==0?C:f0(S,D)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Ji.mapValue&&l===Ji.mapValue)return 0;if(a===Ji.mapValue)return 1;if(l===Ji.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),p=l.fields||{},v=Object.keys(p);f.sort(),v.sort();for(let _=0;_<f.length&&_<v.length;++_){const x=cm(f[_],v[_]);if(x!==0)return x;const S=as(d[f[_]],p[v[_]]);if(S!==0)return S}return Te(f.length,v.length)})(n.mapValue,e.mapValue);default:throw me(23264,{le:t})}}function h0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Te(n,e);const t=di(n),r=di(e),s=Te(t.seconds,r.seconds);return s!==0?s:Te(t.nanos,r.nanos)}function f0(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=as(t[s],r[s]);if(a)return a}return Te(t.length,r.length)}function La(n){return gm(n)}function gm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=di(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return hi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return le.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=gm(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const l of r)a?a=!1:s+=",",s+=`${l}:${gm(t.fields[l])}`;return s+"}"})(n.mapValue):me(61005,{value:n})}function Md(n){switch(os(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vh(n);return e?16+Md(e):16;case 5:return 2*n.stringValue.length;case 6:return hi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+Md(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return fs(r.fields,((a,l)=>{s+=a.length+Md(l)})),s})(n.mapValue);default:throw me(13486,{value:n})}}function Vu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ym(n){return!!n&&"integerValue"in n}function Ou(n){return!!n&&"arrayValue"in n}function p0(n){return!!n&&"nullValue"in n}function m0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jd(n){return!!n&&"mapValue"in n}function Oh(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[ug])===null||t===void 0?void 0:t.stringValue)===cg}function vu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return fs(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=vu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function uI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===lI}const cI={mapValue:{fields:{[ug]:{stringValue:cg},[Oa]:{arrayValue:{}}}}};function uR(n){return"nullValue"in n?Ld:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Vu(oo.empty(),le.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Oh(n)?cI:{mapValue:{}}:me(35942,{value:n})}function cR(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Vu(oo.empty(),le.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?cI:"mapValue"in n?Oh(n)?{mapValue:{}}:Ji:me(61959,{value:n})}function g0(n,e){const t=as(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function y0(n,e){const t=as(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.value=e}static empty(){return new Kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!jd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vu(t)}setAll(e){let t=ct.emptyPath(),r={},s=[];e.forEach(((l,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=d.popLast()}l?r[d.lastSegment()]=vu(l):s.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());jd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];jd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){fs(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new Kt(vu(this.value))}}function dI(n){const e=[];return fs(n.fields,((t,r)=>{const s=new ct([t]);if(jd(r)){const a=dI(r.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t,r,s,a,l,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=l,this.documentState=d}static newInvalidDocument(e){return new ht(e,0,we.min(),we.min(),we.min(),Kt.empty(),0)}static newFoundDocument(e,t,r,s){return new ht(e,1,t,we.min(),r,s,0)}static newNoDocument(e,t){return new ht(e,2,t,we.min(),we.min(),Kt.empty(),0)}static newUnknownDocument(e,t){return new ht(e,3,t,we.min(),we.min(),Kt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,t){this.position=e,this.inclusive=t}}function v0(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],l=n.position[s];if(a.field.isKeyField()?r=le.comparator(le.fromName(l.referenceValue),t.key):r=as(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function _0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Mr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,t="asc"){this.field=e,this.dir=t}}function dR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{}class De extends hI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new hR(e,t,r):t==="array-contains"?new mR(e,r):t==="in"?new vI(e,r):t==="not-in"?new gR(e,r):t==="array-contains-any"?new yR(e,r):new De(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new fR(e,r):new pR(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(as(t,this.value)):t!==null&&os(this.value)===os(t)&&this.matchesComparison(as(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class We extends hI{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new We(e,t)}matches(e){return ja(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function ja(n){return n.op==="and"}function vm(n){return n.op==="or"}function dg(n){return fI(n)&&ja(n)}function fI(n){for(const e of n.filters)if(e instanceof We)return!1;return!0}function _m(n){if(n instanceof De)return n.field.canonicalString()+n.op.toString()+La(n.value);if(dg(n))return n.filters.map((e=>_m(e))).join(",");{const e=n.filters.map((t=>_m(t))).join(",");return`${n.op}(${e})`}}function pI(n,e){return n instanceof De?(function(r,s){return s instanceof De&&r.op===s.op&&r.field.isEqual(s.field)&&Mr(r.value,s.value)})(n,e):n instanceof We?(function(r,s){return s instanceof We&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,l,d)=>a&&pI(l,s.filters[d])),!0):!1})(n,e):void me(19439)}function mI(n,e){const t=n.filters.concat(e);return We.create(t,n.op)}function gI(n){return n instanceof De?(function(t){return`${t.field.canonicalString()} ${t.op} ${La(t.value)}`})(n):n instanceof We?(function(t){return t.op.toString()+" {"+t.getFilters().map(gI).join(" ,")+"}"})(n):"Filter"}class hR extends De{constructor(e,t,r){super(e,t,r),this.key=le.fromName(r.referenceValue)}matches(e){const t=le.comparator(e.key,this.key);return this.matchesComparison(t)}}class fR extends De{constructor(e,t){super(e,"in",t),this.keys=yI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class pR extends De{constructor(e,t){super(e,"not-in",t),this.keys=yI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yI(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>le.fromName(r.referenceValue)))}class mR extends De{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ou(t)&&Du(t.arrayValue,this.value)}}class vI extends De{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Du(this.value.arrayValue,t)}}class gR extends De{constructor(e,t){super(e,"not-in",t)}matches(e){if(Du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Du(this.value.arrayValue,t)}}class yR extends De{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ou(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Du(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,t=null,r=[],s=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=l,this.endAt=d,this.Pe=null}}function wm(n,e=null,t=[],r=[],s=null,a=null,l=null){return new vR(n,e,t,r,s,a,l)}function ao(n){const e=be(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>_m(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Ch(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>La(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>La(r))).join(",")),e.Pe=t}return e.Pe}function Wu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!dR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!pI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_0(n.startAt,e.startAt)&&_0(n.endAt,e.endAt)}function nh(n){return le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function rh(n,e){return n.filters.filter((t=>t instanceof De&&t.field.isEqual(e)))}function w0(n,e,t){let r=Ld,s=!0;for(const a of rh(n,e)){let l=Ld,d=!0;switch(a.op){case"<":case"<=":l=uR(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,d=!1;break;case"!=":case"not-in":l=Ld}g0({value:r,inclusive:s},{value:l,inclusive:d})<0&&(r=l,s=d)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];g0({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}}return{value:r,inclusive:s}}function E0(n,e,t){let r=Ji,s=!0;for(const a of rh(n,e)){let l=Ji,d=!0;switch(a.op){case">=":case">":l=cR(a.value),d=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,d=!1;break;case"!=":case"not-in":l=Ji}y0({value:r,inclusive:s},{value:l,inclusive:d})>0&&(r=l,s=d)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];y0({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,t=null,r=[],s=[],a=null,l="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function _R(n,e,t,r,s,a,l,d){return new Za(n,e,t,r,s,a,l,d)}function Gu(n){return new Za(n)}function I0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function _I(n){return n.collectionGroup!==null}function _u(n){const e=be(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new Ge(ct.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Lu(a,r))})),t.has(ct.keyField().canonicalString())||e.Te.push(new Lu(ct.keyField(),r))}return e.Te}function Un(n){const e=be(n);return e.Ie||(e.Ie=wR(e,_u(n))),e.Ie}function wR(n,e){if(n.limitType==="F")return wm(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Lu(s.field,a)}));const t=n.endAt?new Ma(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ma(n.startAt.position,n.startAt.inclusive):null;return wm(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Em(n,e){const t=n.filters.concat([e]);return new Za(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ih(n,e,t){return new Za(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lh(n,e){return Wu(Un(n),Un(e))&&n.limitType===e.limitType}function wI(n){return`${ao(Un(n))}|lt:${n.limitType}`}function Ea(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>gI(s))).join(", ")}]`),Ch(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>La(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>La(s))).join(",")),`Target(${r})`})(Un(n))}; limitType=${n.limitType})`}function Ku(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):le.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of _u(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,d,f){const p=v0(l,d,f);return l.inclusive?p<=0:p<0})(r.startAt,_u(r),s)||r.endAt&&!(function(l,d,f){const p=v0(l,d,f);return l.inclusive?p>=0:p>0})(r.endAt,_u(r),s))})(n,e)}function ER(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function EI(n){return(e,t)=>{let r=!1;for(const s of _u(n)){const a=IR(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function IR(n,e,t){const r=n.field.isKeyField()?le.comparator(e.key,t.key):(function(a,l,d){const f=l.data.field(a),p=d.data.field(a);return f!==null&&p!==null?as(f,p):me(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return me(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){fs(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return nI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=new at(le.comparator);function xn(){return xR}const II=new at(le.comparator);function uu(...n){let e=II;for(const t of n)e=e.insert(t.key,t);return e}function xI(n){let e=II;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Cr(){return wu()}function TI(){return wu()}function wu(){return new pi((n=>n.toString()),((n,e)=>n.isEqual(e)))}const TR=new at(le.comparator),SR=new Ge(le.comparator);function Re(...n){let e=SR;for(const t of n)e=e.add(t);return e}const kR=new Ge(Te);function bR(){return kR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Au(e)?"-0":e}}function SI(n){return{integerValue:""+n}}function AR(n,e){return VA(e)?SI(e):hg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(){this._=void 0}}function RR(n,e,t){return n instanceof Fa?(function(s,a){const l={fields:{[sI]:{stringValue:iI},[aI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&lg(a)&&(a=Vh(a)),a&&(l.fields[oI]=a),{mapValue:l}})(t,e):n instanceof Ua?bI(n,e):n instanceof Ba?AI(n,e):(function(s,a){const l=kI(s,a),d=x0(l)+x0(s.Ee);return ym(l)&&ym(s.Ee)?SI(d):hg(s.serializer,d)})(n,e)}function CR(n,e,t){return n instanceof Ua?bI(n,e):n instanceof Ba?AI(n,e):t}function kI(n,e){return n instanceof Mu?(function(r){return ym(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Fa extends Mh{}class Ua extends Mh{constructor(e){super(),this.elements=e}}function bI(n,e){const t=RI(e);for(const r of n.elements)t.some((s=>Mr(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Ba extends Mh{constructor(e){super(),this.elements=e}}function AI(n,e){let t=RI(e);for(const r of n.elements)t=t.filter((s=>!Mr(s,r)));return{arrayValue:{values:t}}}class Mu extends Mh{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function x0(n){return it(n.integerValue||n.doubleValue)}function RI(n){return Ou(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,t){this.field=e,this.transform=t}}function PR(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Ua&&s instanceof Ua||r instanceof Ba&&s instanceof Ba?Ca(r.elements,s.elements,Mr):r instanceof Mu&&s instanceof Mu?Mr(r.Ee,s.Ee):r instanceof Fa&&s instanceof Fa})(n.transform,e.transform)}class NR{constructor(e,t){this.version=e,this.transformResults=t}}class Qt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qt}static exists(e){return new Qt(void 0,e)}static updateTime(e){return new Qt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class jh{}function PI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Fh(n.key,Qt.none()):new el(n.key,n.data,Qt.none());{const t=n.data,r=Kt.empty();let s=new Ge(ct.comparator);for(let a of e.fields)if(!s.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),s=s.add(a)}return new mi(n.key,r,new fn(s.toArray()),Qt.none())}}function DR(n,e,t){n instanceof el?(function(s,a,l){const d=s.value.clone(),f=S0(s.fieldTransforms,a,l.transformResults);d.setAll(f),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):n instanceof mi?(function(s,a,l){if(!Fd(s.precondition,a))return void a.convertToUnknownDocument(l.version);const d=S0(s.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(NI(s)),f.setAll(d),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Eu(n,e,t,r){return n instanceof el?(function(a,l,d,f){if(!Fd(a.precondition,l))return d;const p=a.value.clone(),v=k0(a.fieldTransforms,f,l);return p.setAll(v),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof mi?(function(a,l,d,f){if(!Fd(a.precondition,l))return d;const p=k0(a.fieldTransforms,f,l),v=l.data;return v.setAll(NI(a)),v.setAll(p),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((_=>_.field)))})(n,e,t,r):(function(a,l,d){return Fd(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d})(n,e,t)}function VR(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=kI(r.transform,s||null);a!=null&&(t===null&&(t=Kt.empty()),t.set(r.field,a))}return t||null}function T0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ca(r,s,((a,l)=>PR(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class el extends jh{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class mi extends jh{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function NI(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function S0(n,e,t){const r=new Map;ve(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const a=n[s],l=a.transform,d=e.data.field(a.field);r.set(a.field,CR(l,d,t[s]))}return r}function k0(n,e,t){const r=new Map;for(const s of n){const a=s.transform,l=t.data.field(s.field);r.set(s.field,RR(a,l,e))}return r}class Fh extends jh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DI extends jh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&DR(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Eu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Eu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=TI();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=t.has(s.key)?null:d;const f=PI(l,d);f!==null&&r.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(we.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Re())}isEqual(e){return this.batchId===e.batchId&&Ca(this.mutations,e.mutations,((t,r)=>T0(t,r)))&&Ca(this.baseMutations,e.baseMutations,((t,r)=>T0(t,r)))}}class pg{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ve(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=(function(){return TR})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,r[l].version);return new pg(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,Me;function LR(n){switch(n){case Y.OK:return me(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return me(15467,{code:n})}}function VI(n){if(n===void 0)return tn("GRPC error has no .code"),Y.UNKNOWN;switch(n){case vt.OK:return Y.OK;case vt.CANCELLED:return Y.CANCELLED;case vt.UNKNOWN:return Y.UNKNOWN;case vt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case vt.INTERNAL:return Y.INTERNAL;case vt.UNAVAILABLE:return Y.UNAVAILABLE;case vt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case vt.NOT_FOUND:return Y.NOT_FOUND;case vt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case vt.ABORTED:return Y.ABORTED;case vt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case vt.DATA_LOSS:return Y.DATA_LOSS;default:return me(39323,{code:n})}}(Me=vt||(vt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=new ts([4294967295,4294967295],0);function b0(n){const e=jE().encode(n),t=new CE;return t.update(e),new Uint8Array(t.digest())}function A0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ts([t,r],0),new ts([s,a],0)]}class gg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new cu(`Invalid padding: ${t}`);if(r<0)throw new cu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new cu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new cu(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ts.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply(ts.fromNumber(r)));return s.compare(MR)===1&&(s=new ts([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=b0(e),[r,s]=A0(t);for(let a=0;a<this.hashCount;a++){const l=this.pe(r,s,a);if(!this.ye(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new gg(a,s,t);return r.forEach((d=>l.insert(d))),l}insert(e){if(this.fe===0)return;const t=b0(e),[r,s]=A0(t);for(let a=0;a<this.hashCount;a++){const l=this.pe(r,s,a);this.we(l)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Qu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Uh(we.min(),s,new at(Te),xn(),Re())}}class Qu{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Qu(r,t,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class OI{constructor(e,t){this.targetId=e,this.De=t}}class LI{constructor(e,t,r=It.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class R0{constructor(){this.ve=0,this.Ce=C0(),this.Fe=It.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Re(),t=Re(),r=Re();return this.Ce.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:me(38017,{changeType:a})}})),new Qu(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=C0()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class jR{constructor(e){this.We=e,this.Ge=new Map,this.ze=xn(),this.je=xd(),this.Je=xd(),this.He=new at(Te)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:me(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,s)=>{this.nt(s)&&t(s)}))}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const a=s.target;if(nh(a))if(r===0){const l=new le(a.path);this.Xe(t,l,ht.newNoDocument(l,we.min()))}else ve(r===1,20013,{expectedCount:r});else{const l=this.ot(t);if(l!==r){const d=this._t(e),f=d?this.ut(d,e,l):1;if(f!==0){this.rt(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,p)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let l,d;try{l=hi(r).toUint8Array()}catch(f){if(f instanceof rI)return Lr("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new gg(l,s,a)}catch(f){return Lr(f instanceof cu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.fe===0?null:d}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const l=this.We.lt(),d=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),s++)})),s}Pt(e){const t=new Map;this.Ge.forEach(((a,l)=>{const d=this.st(l);if(d){if(a.current&&nh(d.target)){const f=new le(d.target.path);this.Tt(f).has(l)||this.It(l,f)||this.Xe(l,f,ht.newNoDocument(f,e))}a.Ne&&(t.set(l,a.Le()),a.ke())}}));let r=Re();this.Je.forEach(((a,l)=>{let d=!0;l.forEachWhile((f=>{const p=this.st(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.ze.forEach(((a,l)=>l.setReadTime(e)));const s=new Uh(e,t,this.He,this.ze,r);return this.ze=xn(),this.je=xd(),this.Je=xd(),this.He=new at(Te),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new R0,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ge(Te),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ge(Te),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ne("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new R0),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function xd(){return new at(le.comparator)}function C0(){return new at(le.comparator)}const FR={asc:"ASCENDING",desc:"DESCENDING"},UR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BR={and:"AND",or:"OR"};class zR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Im(n,e){return n.useProto3Json||Ch(e)?e:{value:e}}function za(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function $R(n,e){return za(n,e.toTimestamp())}function rn(n){return ve(!!n,49232),we.fromTimestamp((function(t){const r=di(t);return new He(r.seconds,r.nanos)})(n))}function yg(n,e){return xm(n,e).canonicalString()}function xm(n,e){const t=(function(s){return new $e(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function jI(n){const e=$e.fromString(n);return ve(GI(e),10190,{key:e.toString()}),e}function sh(n,e){return yg(n.databaseId,e.path)}function to(n,e){const t=jI(e);if(t.get(1)!==n.databaseId.projectId)throw new se(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new se(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new le(BI(t))}function FI(n,e){return yg(n.databaseId,e)}function UI(n){const e=jI(n);return e.length===4?$e.emptyPath():BI(e)}function Tm(n){return new $e(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function BI(n){return ve(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function P0(n,e,t){return{name:sh(n,e),fields:t.value.mapValue.fields}}function qR(n,e,t){const r=to(n,e.name),s=rn(e.updateTime),a=e.createTime?rn(e.createTime):we.min(),l=new Kt({mapValue:{fields:e.fields}}),d=ht.newFoundDocument(r,s,a,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function HR(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:me(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(p,v){return p.useProto3Json?(ve(v===void 0||typeof v=="string",58123),It.fromBase64String(v||"")):(ve(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),It.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&(function(p){const v=p.code===void 0?Y.UNKNOWN:VI(p.code);return new se(v,p.message||"")})(l);t=new LI(r,s,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=to(n,r.document.name),a=rn(r.document.updateTime),l=r.document.createTime?rn(r.document.createTime):we.min(),d=new Kt({mapValue:{fields:r.document.fields}}),f=ht.newFoundDocument(s,a,l,d),p=r.targetIds||[],v=r.removedTargetIds||[];t=new Ud(p,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=to(n,r.document),a=r.readTime?rn(r.readTime):we.min(),l=ht.newNoDocument(s,a),d=r.removedTargetIds||[];t=new Ud([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=to(n,r.document),a=r.removedTargetIds||[];t=new Ud([],a,s,null)}else{if(!("filter"in e))return me(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,l=new OR(s,a),d=r.targetId;t=new OI(d,l)}}return t}function oh(n,e){let t;if(e instanceof el)t={update:P0(n,e.key,e.value)};else if(e instanceof Fh)t={delete:sh(n,e.key)};else if(e instanceof mi)t={update:P0(n,e.key,e.data),updateMask:XR(e.fieldMask)};else{if(!(e instanceof DI))return me(16599,{Rt:e.type});t={verify:sh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const d=l.transform;if(d instanceof Fa)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ua)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ba)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Mu)return{fieldPath:l.field.canonicalString(),increment:d.Ee};throw me(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:$R(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:me(27497)})(n,e.precondition)),t}function Sm(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?Qt.updateTime(rn(a.updateTime)):a.exists!==void 0?Qt.exists(a.exists):Qt.none()})(e.currentDocument):Qt.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(l,d){let f=null;if("setToServerValue"in d)ve(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),f=new Fa;else if("appendMissingElements"in d){const v=d.appendMissingElements.values||[];f=new Ua(v)}else if("removeAllFromArray"in d){const v=d.removeAllFromArray.values||[];f=new Ba(v)}else"increment"in d?f=new Mu(l,d.increment):me(16584,{proto:d});const p=ct.fromServerFormat(d.fieldPath);return new CI(p,f)})(n,s))):[];if(e.update){e.update.name;const s=to(n,e.update.name),a=new Kt({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(f){const p=f.fieldPaths||[];return new fn(p.map((v=>ct.fromServerFormat(v))))})(e.updateMask);return new mi(s,a,l,t,r)}return new el(s,a,t,r)}if(e.delete){const s=to(n,e.delete);return new Fh(s,t)}if(e.verify){const s=to(n,e.verify);return new DI(s,t)}return me(1463,{proto:e})}function WR(n,e){return n&&n.length>0?(ve(e!==void 0,14353),n.map((t=>(function(s,a){let l=s.updateTime?rn(s.updateTime):rn(a);return l.isEqual(we.min())&&(l=rn(a)),new NR(l,s.transformResults||[])})(t,e)))):[]}function zI(n,e){return{documents:[FI(n,e.path)]}}function $I(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=FI(n,s);const a=(function(p){if(p.length!==0)return WI(We.create(p,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(p){if(p.length!==0)return p.map((v=>(function(x){return{field:Ia(x.field),direction:KR(x.dir)}})(v)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const d=Im(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{Vt:t,parent:s}}function qI(n){let e=UI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ve(r===1,65062);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(_){const x=HI(_);return x instanceof We&&dg(x)?x.getFilters():[x]})(t.where));let l=[];t.orderBy&&(l=(function(_){return _.map((x=>(function(D){return new Lu(xa(D.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(x)))})(t.orderBy));let d=null;t.limit&&(d=(function(_){let x;return x=typeof _=="object"?_.value:_,Ch(x)?null:x})(t.limit));let f=null;t.startAt&&(f=(function(_){const x=!!_.before,S=_.values||[];return new Ma(S,x)})(t.startAt));let p=null;return t.endAt&&(p=(function(_){const x=!_.before,S=_.values||[];return new Ma(S,x)})(t.endAt)),_R(e,s,l,a,d,"F",f,p)}function GR(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function HI(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=xa(t.unaryFilter.field);return De.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=xa(t.unaryFilter.field);return De.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=xa(t.unaryFilter.field);return De.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=xa(t.unaryFilter.field);return De.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}})(n):n.fieldFilter!==void 0?(function(t){return De.create(xa(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return We.create(t.compositeFilter.filters.map((r=>HI(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return me(1026)}})(t.compositeFilter.op))})(n):me(30097,{filter:n})}function KR(n){return FR[n]}function QR(n){return UR[n]}function YR(n){return BR[n]}function Ia(n){return{fieldPath:n.canonicalString()}}function xa(n){return ct.fromServerFormat(n.fieldPath)}function WI(n){return n instanceof De?(function(t){if(t.op==="=="){if(m0(t.value))return{unaryFilter:{field:Ia(t.field),op:"IS_NAN"}};if(p0(t.value))return{unaryFilter:{field:Ia(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(m0(t.value))return{unaryFilter:{field:Ia(t.field),op:"IS_NOT_NAN"}};if(p0(t.value))return{unaryFilter:{field:Ia(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ia(t.field),op:QR(t.op),value:t.value}}})(n):n instanceof We?(function(t){const r=t.getFilters().map((s=>WI(s)));return r.length===1?r[0]:{compositeFilter:{op:YR(t.op),filters:r}}})(n):me(54877,{filter:n})}function XR(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function GI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,t,r,s,a=we.min(),l=we.min(),d=It.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new si(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.gt=e}}function JR(n,e){let t;if(e.document)t=qR(n.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=le.fromSegments(e.noDocument.path),s=uo(e.noDocument.readTime);t=ht.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return me(56709);{const r=le.fromSegments(e.unknownDocument.path),s=uo(e.unknownDocument.version);t=ht.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime((function(s){const a=new He(s[0],s[1]);return we.fromTimestamp(a)})(e.readTime)),t}function N0(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ah(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,l){return{name:sh(a,l.key),fields:l.data.value.mapValue.fields,updateTime:za(a,l.version.toTimestamp()),createTime:za(a,l.createTime.toTimestamp())}})(n.gt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:lo(e.version)};else{if(!e.isUnknownDocument())return me(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:lo(e.version)}}return r}function ah(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function lo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function uo(n){const e=new He(n.seconds,n.nanoseconds);return we.fromTimestamp(e)}function Gs(n,e){const t=(e.baseMutations||[]).map((a=>Sm(n.gt,a)));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const d=e.mutations[a+1];l.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>Sm(n.gt,a))),s=He.fromMillis(e.localWriteTimeMs);return new fg(e.batchId,s,t,r)}function du(n){const e=uo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?uo(n.lastLimboFreeSnapshotVersion):we.min();let r;return r=(function(a){return a.documents!==void 0})(n.query)?(function(a){const l=a.documents.length;return ve(l===1,1966,{count:l}),Un(Gu(UI(a.documents[0])))})(n.query):(function(a){return Un(qI(a))})(n.query),new si(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,It.fromBase64String(n.resumeToken))}function QI(n,e){const t=lo(e.snapshotVersion),r=lo(e.lastLimboFreeSnapshotVersion);let s;s=nh(e.target)?zI(n.gt,e.target):$I(n.gt,e.target).Vt;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ao(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function YI(n){const e=qI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ih(e,e.limit,"L"):e}function Hp(n,e){return new mg(e.largestBatchId,Sm(n.gt,e.overlayMutation))}function D0(n,e){const t=e.path.lastSegment();return[n,Yt(e.path.popLast()),t]}function V0(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:lo(r.readTime),documentKey:Yt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{getBundleMetadata(e,t){return O0(e).get(t).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:uo(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,t){return O0(e).put((function(s){return{bundleId:s.id,createTime:lo(rn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return L0(e).get(t).next((r=>{if(r)return(function(a){return{name:a.name,query:YI(a.bundledQuery),readTime:uo(a.readTime)}})(r)}))}saveNamedQuery(e,t){return L0(e).put((function(s){return{name:s.name,readTime:lo(rn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function O0(n){return Rt(n,Ph)}function L0(n){return Rt(n,Nh)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){const r=t.uid||"";return new Bh(e,r)}getOverlay(e,t){return ru(e).get(D0(this.userId,t)).next((r=>r?Hp(this.serializer,r):null))}getOverlays(e,t){const r=Cr();return $.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){const s=[];return r.forEach(((a,l)=>{const d=new mg(t,l);s.push(this.wt(e,d))})),$.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach((l=>s.add(Yt(l.getCollectionPath()))));const a=[];return s.forEach((l=>{const d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(ru(e).Y(pm,d))})),$.waitFor(a)}getOverlaysForCollection(e,t,r){const s=Cr(),a=Yt(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return ru(e).j(pm,l).next((d=>{for(const f of d){const p=Hp(this.serializer,f);s.set(p.getKey(),p)}return s}))}getOverlaysForCollectionGroup(e,t,r,s){const a=Cr();let l;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ru(e).X({index:XE,range:d},((f,p,v)=>{const _=Hp(this.serializer,p);a.size()<s||_.largestBatchId===l?(a.set(_.getKey(),_),l=_.largestBatchId):v.done()})).next((()=>a))}wt(e,t){return ru(e).put((function(s,a,l){const[d,f,p]=D0(a,l.mutation.key);return{userId:a,collectionPath:f,documentId:p,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:oh(s.gt,l.mutation)}})(this.serializer,this.userId,t))}}function ru(n){return Rt(n,Dh)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{St(e){return Rt(e,og)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?It.fromUint8Array(r):It.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(it(e.integerValue));else if("doubleValue"in e){const r=it(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Au(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=di(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(hi(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?uI(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Oh(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):me(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const r=e.fields||{};this.Ct(t,55);for(const s of Object.keys(r))this.xt(s,t),this.Dt(r[s],t)}Lt(e,t){var r,s;const a=e.fields||{};this.Ct(t,53);const l=Oa,d=((s=(r=a[l].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.Ct(t,15),t.Ft(it(d)),this.xt(l,t),this.Dt(a[l],t)}qt(e,t){const r=e.values||[];this.Ct(t,50);for(const s of r)this.Dt(s,t)}Bt(e,t){this.Ct(t,37),le.fromName(e).path.forEach((r=>{this.Ct(t,60),this.$t(r,t)}))}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}Ks.Ut=new Ks;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=255;function tC(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function M0(n){const e=64-(function(r){let s=0;for(let a=0;a<8;++a){const l=tC(255&r[a]);if(s+=l,l!==8)break}return s})(n);return Math.ceil(e/8)}class nC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Wt(r.value),r=t.next();this.Gt()}zt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.jt(r.value),r=t.next();this.Jt()}Ht(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{const s=t.codePointAt(0);this.Wt(240|s>>>18),this.Wt(128|63&s>>>12),this.Wt(128|63&s>>>6),this.Wt(128|63&s)}}this.Gt()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{const s=t.codePointAt(0);this.jt(240|s>>>18),this.jt(128|63&s>>>12),this.jt(128|63&s>>>6),this.jt(128|63&s)}}this.Jt()}Zt(e){const t=this.Xt(e),r=M0(t);this.en(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}tn(e){const t=this.Xt(e),r=M0(t);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}nn(){this.rn(ga),this.rn(255)}sn(){this._n(ga),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){const t=(function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Wt(e){const t=255&e;t===0?(this.rn(0),this.rn(255)):t===ga?(this.rn(ga),this.rn(0)):this.rn(t)}jt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===ga?(this._n(ga),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class rC{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}}class iC{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}}class iu{constructor(){this.un=new nC,this.cn=new rC(this.un),this.ln=new iC(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,t,r,s){this.Pn=e,this.Tn=t,this.In=r,this.dn=s}En(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new Qs(this.Pn,this.Tn,this.In,r)}An(e,t,r){return{indexId:this.Pn,uid:e,arrayValue:Bd(this.In),directionalValue:Bd(this.dn),orderedDocumentKey:Bd(t),documentKey:r.path.toArray()}}Rn(e,t,r){const s=this.An(e,t,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function $i(n,e){let t=n.Pn-e.Pn;return t!==0?t:(t=j0(n.In,e.In),t!==0?t:(t=j0(n.dn,e.dn),t!==0?t:le.comparator(n.Tn,e.Tn)))}function j0(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Bd(n){return IE()?(function(t){let r="";for(let s=0;s<t.length;s++)r+=String.fromCharCode(t[s]);return r})(n):n}function F0(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(n)}class U0{constructor(e){this.Vn=new Ge(((t,r)=>ct.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(ve(e.collectionGroup===this.collectionId,49279),this.gn)return!1;const t=dm(e);if(t!==void 0&&!this.yn(t))return!1;const r=qs(e);let s=new Set,a=0,l=0;for(;a<r.length&&this.yn(r[a]);++a)s=s.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.Vn.size>0){const d=this.Vn.getIterator().getNext();if(!s.has(d.field.canonicalString())){const f=r[a];if(!this.wn(d,f)||!this.Sn(this.mn[l++],f))return!1}++a}for(;a<r.length;++a){const d=r[a];if(l>=this.mn.length||!this.Sn(this.mn[l++],d))return!1}return!0}bn(){if(this.gn)return null;let e=new Ge(ct.comparator);const t=[];for(const r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Dd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Dd(r.field,0))}for(const r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Dd(r.field,r.dir==="asc"?0:1)));return new Xd(Xd.UNKNOWN_ID,this.collectionId,t,bu.empty())}yn(e){for(const t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(n){var e,t;if(ve(n instanceof De||n instanceof We,20012),n instanceof De){if(n instanceof vI){const s=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((a=>De.create(n.field,"==",a))))||[];return We.create(s,"or")}return n}const r=n.filters.map((s=>XI(s)));return We.create(r,n.op)}function sC(n){if(n.getFilters().length===0)return[];const e=Am(XI(n));return ve(JI(e),7391),km(e)||bm(e)?[e]:e.getFilters()}function km(n){return n instanceof De}function bm(n){return n instanceof We&&dg(n)}function JI(n){return km(n)||bm(n)||(function(t){if(t instanceof We&&vm(t)){for(const r of t.getFilters())if(!km(r)&&!bm(r))return!1;return!0}return!1})(n)}function Am(n){if(ve(n instanceof De||n instanceof We,34018),n instanceof De)return n;if(n.filters.length===1)return Am(n.filters[0]);const e=n.filters.map((r=>Am(r)));let t=We.create(e,n.op);return t=lh(t),JI(t)?t:(ve(t instanceof We,64498),ve(ja(t),40251),ve(t.filters.length>1,57927),t.filters.reduce(((r,s)=>vg(r,s))))}function vg(n,e){let t;return ve(n instanceof De||n instanceof We,38388),ve(e instanceof De||e instanceof We,25473),t=n instanceof De?e instanceof De?(function(s,a){return We.create([s,a],"and")})(n,e):B0(n,e):e instanceof De?B0(e,n):(function(s,a){if(ve(s.filters.length>0&&a.filters.length>0,48005),ja(s)&&ja(a))return mI(s,a.getFilters());const l=vm(s)?s:a,d=vm(s)?a:s,f=l.filters.map((p=>vg(p,d)));return We.create(f,"or")})(n,e),lh(t)}function B0(n,e){if(ja(e))return mI(e,n.getFilters());{const t=e.filters.map((r=>vg(n,r)));return We.create(t,"or")}}function lh(n){if(ve(n instanceof De||n instanceof We,11850),n instanceof De)return n;const e=n.getFilters();if(e.length===1)return lh(e[0]);if(fI(n))return n;const t=e.map((s=>lh(s))),r=[];return t.forEach((s=>{s instanceof De?r.push(s):s instanceof We&&(s.op===n.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:We.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.Dn=new _g}addToCollectionParentIndex(e,t){return this.Dn.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(Sn.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(Sn.min())}updateCollectionGroup(e,t,r){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class _g{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ge($e.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ge($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="IndexedDbIndexManager",Td=new Uint8Array(0);class aC{constructor(e,t){this.databaseId=t,this.vn=new _g,this.Cn=new pi((r=>ao(r)),((r,s)=>Wu(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const a={collectionId:r,parent:Yt(s)};return $0(e).put(a)}return $.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[FE(t),""],!1,!0);return $0(e).j(s).next((a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Rr(l.parent))}return r}))}addFieldIndex(e,t){const r=su(e),s=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete s.indexId;const a=r.add(s);if(t.indexState){const l=va(e);return a.next((d=>{l.put(V0(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const r=su(e),s=va(e),a=ya(e);return r.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=su(e),r=ya(e),s=va(e);return t.Y().next((()=>r.Y())).next((()=>s.Y()))}createTargetIndexes(e,t){return $.forEach(this.Fn(t),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const a=new U0(r).bn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const r=ya(e);let s=!0;const a=new Map;return $.forEach(this.Fn(t),(l=>this.Mn(e,l).next((d=>{s&&(s=!!d),a.set(l,d)})))).next((()=>{if(s){let l=Re();const d=[];return $.forEach(a,((f,p)=>{ne(z0,`Using index ${(function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map((re=>`${re.fieldPath}:${re.kind}`)).join(",")}`})(f)} to execute ${ao(t)}`);const v=(function(F,re){const ue=dm(re);if(ue===void 0)return null;for(const ce of rh(F,ue.fieldPath))switch(ce.op){case"array-contains-any":return ce.value.arrayValue.values||[];case"array-contains":return[ce.value]}return null})(p,f),_=(function(F,re){const ue=new Map;for(const ce of qs(re))for(const P of rh(F,ce.fieldPath))switch(P.op){case"==":case"in":ue.set(ce.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return ue.set(ce.fieldPath.canonicalString(),P.value),Array.from(ue.values())}return null})(p,f),x=(function(F,re){const ue=[];let ce=!0;for(const P of qs(re)){const k=P.kind===0?w0(F,P.fieldPath,F.startAt):E0(F,P.fieldPath,F.startAt);ue.push(k.value),ce&&(ce=k.inclusive)}return new Ma(ue,ce)})(p,f),S=(function(F,re){const ue=[];let ce=!0;for(const P of qs(re)){const k=P.kind===0?E0(F,P.fieldPath,F.endAt):w0(F,P.fieldPath,F.endAt);ue.push(k.value),ce&&(ce=k.inclusive)}return new Ma(ue,ce)})(p,f),D=this.xn(f,p,x),C=this.xn(f,p,S),O=this.On(f,p,_),K=this.Nn(f.indexId,v,D,x.inclusive,C,S.inclusive,O);return $.forEach(K,(Q=>r.H(Q,t.limit).next((F=>{F.forEach((re=>{const ue=le.fromSegments(re.documentKey);l.has(ue)||(l=l.add(ue),d.push(ue))}))}))))})).next((()=>d))}return $.resolve(null)}))}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=sC(We.create(e.filters,"and")).map((r=>wm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}Nn(e,t,r,s,a,l,d){const f=(t!=null?t.length:1)*Math.max(r.length,a.length),p=f/(t!=null?t.length:1),v=[];for(let _=0;_<f;++_){const x=t?this.Bn(t[_/p]):Td,S=this.Ln(e,x,r[_%p],s),D=this.kn(e,x,a[_%p],l),C=d.map((O=>this.Ln(e,x,O,!0)));v.push(...this.createRange(S,D,C))}return v}Ln(e,t,r,s){const a=new Qs(e,le.empty(),t,r);return s?a:a.En()}kn(e,t,r,s){const a=new Qs(e,le.empty(),t,r);return s?a.En():a}Mn(e,t){const r=new U0(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((a=>{let l=null;for(const d of a)r.pn(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l}))}getIndexType(e,t){let r=2;const s=this.Fn(t);return $.forEach(s,(a=>this.Mn(e,a).next((l=>{l?r!==0&&l.fields.length<(function(f){let p=new Ge(ct.comparator),v=!1;for(const _ of f.filters)for(const x of _.getFlattenedFilters())x.field.isKeyField()||(x.op==="array-contains"||x.op==="array-contains-any"?v=!0:p=p.add(x.field));for(const _ of f.orderBy)_.field.isKeyField()||(p=p.add(_.field));return p.size+(v?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(l){return l.limit!==null})(t)&&s.length>1&&r===2?1:r))}qn(e,t){const r=new iu;for(const s of qs(e)){const a=t.data.field(s.fieldPath);if(a==null)return null;const l=r.hn(s.kind);Ks.Ut.bt(a,l)}return r.an()}Bn(e){const t=new iu;return Ks.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){const r=new iu;return Ks.Ut.bt(Vu(this.databaseId,t),r.hn((function(a){const l=qs(a);return l.length===0?0:l[l.length-1].kind})(e))),r.an()}On(e,t,r){if(r===null)return[];let s=[];s.push(new iu);let a=0;for(const l of qs(e)){const d=r[a++];for(const f of s)if(this.$n(t,l.fieldPath)&&Ou(d))s=this.Un(s,l,d);else{const p=f.hn(l.kind);Ks.Ut.bt(d,p)}}return this.Kn(s)}xn(e,t,r){return this.On(e,t,r.position)}Kn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].an();return t}Un(e,t,r){const s=[...e],a=[];for(const l of r.arrayValue.values||[])for(const d of s){const f=new iu;f.seed(d.an()),Ks.Ut.bt(l,f.hn(t.kind)),a.push(f)}return a}$n(e,t){return!!e.filters.find((r=>r instanceof De&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=su(e),s=va(e);return(t?r.j(fm,IDBKeyRange.bound(t,t)):r.j()).next((a=>{const l=[];return $.forEach(a,(d=>s.get([d.indexId,this.uid]).next((f=>{l.push((function(v,_){const x=_?new bu(_.sequenceNumber,new Sn(uo(_.readTime),new le(Rr(_.documentKey)),_.largestBatchId)):bu.empty(),S=v.fields.map((([D,C])=>new Dd(ct.fromServerFormat(D),C)));return new Xd(v.indexId,v.collectionGroup,S,x)})(d,f))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,s)=>{const a=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return a!==0?a:Te(r.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const s=su(e),a=va(e);return this.Wn(e).next((l=>s.j(fm,IDBKeyRange.bound(t,t)).next((d=>$.forEach(d,(f=>a.put(V0(f.indexId,this.uid,l,r))))))))}updateIndexEntries(e,t){const r=new Map;return $.forEach(t,((s,a)=>{const l=r.get(s.collectionGroup);return(l?$.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next((d=>(r.set(s.collectionGroup,d),$.forEach(d,(f=>this.Gn(e,s,f).next((p=>{const v=this.zn(a,f);return p.isEqual(v)?$.resolve():this.jn(e,a,f,p,v)})))))))}))}Jn(e,t,r,s){return ya(e).put(s.An(this.uid,this.Qn(r,t.key),t.key))}Hn(e,t,r,s){return ya(e).delete(s.Rn(this.uid,this.Qn(r,t.key),t.key))}Gn(e,t,r){const s=ya(e);let a=new Ge($i);return s.X({index:YE,range:IDBKeyRange.only([r.indexId,this.uid,Bd(this.Qn(r,t))])},((l,d)=>{a=a.add(new Qs(r.indexId,t,F0(d.arrayValue),F0(d.directionalValue)))})).next((()=>a))}zn(e,t){let r=new Ge($i);const s=this.qn(t,e);if(s==null)return r;const a=dm(t);if(a!=null){const l=e.data.field(a.fieldPath);if(Ou(l))for(const d of l.arrayValue.values||[])r=r.add(new Qs(t.indexId,e.key,this.Bn(d),s))}else r=r.add(new Qs(t.indexId,e.key,Td,s));return r}jn(e,t,r,s,a){ne(z0,"Updating index entries for document '%s'",t.key);const l=[];return(function(f,p,v,_,x){const S=f.getIterator(),D=p.getIterator();let C=ma(S),O=ma(D);for(;C||O;){let K=!1,Q=!1;if(C&&O){const F=v(C,O);F<0?Q=!0:F>0&&(K=!0)}else C!=null?Q=!0:K=!0;K?(_(O),O=ma(D)):Q?(x(C),C=ma(S)):(C=ma(S),O=ma(D))}})(s,a,$i,(d=>{l.push(this.Jn(e,t,r,d))}),(d=>{l.push(this.Hn(e,t,r,d))})),$.waitFor(l)}Wn(e){let t=1;return va(e).X({index:QE,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,a)=>{a.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((l,d)=>$i(l,d))).filter(((l,d,f)=>!d||$i(l,f[d-1])!==0));const s=[];s.push(e);for(const l of r){const d=$i(l,e),f=$i(l,t);if(d===0)s[0]=e.En();else if(d>0&&f<0)s.push(l),s.push(l.En());else if(f>0)break}s.push(t);const a=[];for(let l=0;l<s.length;l+=2){if(this.Yn(s[l],s[l+1]))return[];const d=s[l].Rn(this.uid,Td,le.empty()),f=s[l+1].Rn(this.uid,Td,le.empty());a.push(IDBKeyRange.bound(d,f))}return a}Yn(e,t){return $i(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(q0)}getMinOffset(e,t){return $.mapArray(this.Fn(t),(r=>this.Mn(e,r).next((s=>s||me(44426))))).next(q0)}}function $0(n){return Rt(n,Pu)}function ya(n){return Rt(n,yu)}function su(n){return Rt(n,sg)}function va(n){return Rt(n,gu)}function q0(n){ve(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;ng(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Sn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZI=41943040;class Gt{static withCacheSize(e){return new Gt(e,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(n,e,t){const r=n.store(sr),s=n.store(Pa),a=[],l=IDBKeyRange.only(t.batchId);let d=0;const f=r.X({range:l},((v,_,x)=>(d++,x.delete())));a.push(f.next((()=>{ve(d===1,47070,{batchId:t.batchId})})));const p=[];for(const v of t.mutations){const _=WE(e,v.key.path,t.batchId);a.push(s.delete(_)),p.push(v.key)}return $.waitFor(a).next((()=>p))}function uh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw me(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gt.DEFAULT_COLLECTION_PERCENTILE=10,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gt.DEFAULT=new Gt(ZI,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gt.DISABLED=new Gt(-1,0,0);class zh{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Zn={}}static yt(e,t,r,s){ve(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new zh(a,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qi(e).X({index:Ys,range:r},((s,a,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,r,s){const a=Ta(e),l=qi(e);return l.add({}).next((d=>{ve(typeof d=="number",49019);const f=new fg(d,t,r,s),p=(function(S,D,C){const O=C.baseMutations.map((Q=>oh(S.gt,Q))),K=C.mutations.map((Q=>oh(S.gt,Q)));return{userId:D,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:O,mutations:K}})(this.serializer,this.userId,f),v=[];let _=new Ge(((x,S)=>Te(x.canonicalString(),S.canonicalString())));for(const x of s){const S=WE(this.userId,x.key.path,d);_=_.add(x.key.path.popLast()),v.push(l.put(p)),v.push(a.put(S,MA))}return _.forEach((x=>{v.push(this.indexManager.addToCollectionParentIndex(e,x))})),e.addOnCommittedListener((()=>{this.Zn[d]=f.keys()})),$.waitFor(v).next((()=>f))}))}lookupMutationBatch(e,t){return qi(e).get(t).next((r=>r?(ve(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Gs(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?$.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const s=r.keys();return this.Zn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return qi(e).X({index:Ys,range:s},((l,d,f)=>{d.userId===this.userId&&(ve(d.batchId>=r,47524,{er:r}),a=Gs(this.serializer,d)),f.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Zs;return qi(e).X({index:Ys,range:t,reverse:!0},((s,a,l)=>{r=a.batchId,l.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Zs],[this.userId,Number.POSITIVE_INFINITY]);return qi(e).j(Ys,t).next((r=>r.map((s=>Gs(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Vd(this.userId,t.path),s=IDBKeyRange.lowerBound(r),a=[];return Ta(e).X({range:s},((l,d,f)=>{const[p,v,_]=l,x=Rr(v);if(p===this.userId&&t.path.isEqual(x))return qi(e).get(_).next((S=>{if(!S)throw me(61480,{tr:l,batchId:_});ve(S.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:S.userId,batchId:_}),a.push(Gs(this.serializer,S))}));f.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ge(Te);const s=[];return t.forEach((a=>{const l=Vd(this.userId,a.path),d=IDBKeyRange.lowerBound(l),f=Ta(e).X({range:d},((p,v,_)=>{const[x,S,D]=p,C=Rr(S);x===this.userId&&a.path.isEqual(C)?r=r.add(D):_.done()}));s.push(f)})),$.waitFor(s).next((()=>this.nr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,a=Vd(this.userId,r),l=IDBKeyRange.lowerBound(a);let d=new Ge(Te);return Ta(e).X({range:l},((f,p,v)=>{const[_,x,S]=f,D=Rr(x);_===this.userId&&r.isPrefixOf(D)?D.length===s&&(d=d.add(S)):v.done()})).next((()=>this.nr(e,d)))}nr(e,t){const r=[],s=[];return t.forEach((a=>{s.push(qi(e).get(a).next((l=>{if(l===null)throw me(35274,{batchId:a});ve(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:a}),r.push(Gs(this.serializer,l))})))})),$.waitFor(s).next((()=>r))}removeMutationBatch(e,t){return ex(e.ce,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.rr(t.batchId)})),$.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return $.resolve();const r=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),s=[];return Ta(e).X({range:r},((a,l,d)=>{if(a[0]===this.userId){const f=Rr(a[1]);s.push(f)}else d.done()})).next((()=>{ve(s.length===0,56720,{ir:s.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return tx(e,this.userId,t)}sr(e){return nx(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Zs,lastStreamToken:""}))}}function tx(n,e,t){const r=Vd(e,t.path),s=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Ta(n).X({range:a,Z:!0},((d,f,p)=>{const[v,_,x]=d;v===e&&_===s&&(l=!0),p.done()})).next((()=>l))}function qi(n){return Rt(n,sr)}function Ta(n){return Rt(n,Pa)}function nx(n){return Rt(n,Ru)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new co(0)}static ur(){return new co(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next((t=>{const r=new co(t.highestTargetId);return t.highestTargetId=r.next(),this.lr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.cr(e).next((t=>we.fromTimestamp(new He(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.cr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.cr(e).next((s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.lr(e,s))))}addTargetData(e,t){return this.hr(e,t).next((()=>this.cr(e).next((r=>(r.targetCount+=1,this.Pr(t,r),this.lr(e,r))))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>_a(e).delete(t.targetId))).next((()=>this.cr(e))).next((r=>(ve(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r))))}removeTargets(e,t,r){let s=0;const a=[];return _a(e).X(((l,d)=>{const f=du(d);f.sequenceNumber<=t&&r.get(f.targetId)===null&&(s++,a.push(this.removeTargetData(e,f)))})).next((()=>$.waitFor(a))).next((()=>s))}forEachTarget(e,t){return _a(e).X(((r,s)=>{const a=du(s);t(a)}))}cr(e){return W0(e).get(eh).next((t=>(ve(t!==null,2888),t)))}lr(e,t){return W0(e).put(eh,t)}hr(e,t){return _a(e).put(QI(this.serializer,t))}Pr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=ao(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return _a(e).X({range:s,index:KE},((l,d,f)=>{const p=du(d);Wu(t,p.target)&&(a=p,f.done())})).next((()=>a))}addMatchingKeys(e,t,r){const s=[],a=Ki(e);return t.forEach((l=>{const d=Yt(l.path);s.push(a.put({targetId:r,path:d})),s.push(this.referenceDelegate.addReference(e,r,l))})),$.waitFor(s)}removeMatchingKeys(e,t,r){const s=Ki(e);return $.forEach(t,(a=>{const l=Yt(a.path);return $.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,t){const r=Ki(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Ki(e);let a=Re();return s.X({range:r,Z:!0},((l,d,f)=>{const p=Rr(l[1]),v=new le(p);a=a.add(v)})).next((()=>a))}containsKey(e,t){const r=Yt(t.path),s=IDBKeyRange.bound([r],[FE(r)],!1,!0);let a=0;return Ki(e).X({index:ig,Z:!0,range:s},(([l,d],f,p)=>{l!==0&&(a++,p.done())})).next((()=>a>0))}Et(e,t){return _a(e).get(t).next((r=>r?du(r):null))}}function _a(n){return Rt(n,Na)}function W0(n){return Rt(n,eo)}function Ki(n){return Rt(n,Da)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="LruGarbageCollector",uC=1048576;function K0([n,e],[t,r]){const s=Te(n,t);return s===0?Te(e,r):s}class cC{constructor(e){this.Tr=e,this.buffer=new Ge(K0),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();K0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rx{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ne(G0,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hs(t)?ne(G0,"Ignoring IndexedDB error during garbage collection: ",t):await _o(t)}await this.Rr(3e5)}))}}class dC{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return $.resolve(jn.ue);const r=new cC(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(H0)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),H0):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,a,l,d,f,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),s=this.params.maximumSequenceNumbersToCollect):s=_,l=Date.now(),this.nthSequenceNumber(e,s)))).next((_=>(r=_,d=Date.now(),this.removeTargets(e,r,t)))).next((_=>(a=_,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((_=>(p=Date.now(),wa()<=Ne.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-v}ms
	Determined least recently used ${s} in `+(d-l)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${_} documents in `+(p-f)+`ms
Total Duration: ${p-v}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:_}))))}}function ix(n,e){return new dC(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,t){this.db=e,this.garbageCollector=ix(this,t)}mr(e){const t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,((r,s)=>t(s)))}addReference(e,t,r){return Sd(e,r)}removeReference(e,t,r){return Sd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Sd(e,t)}Sr(e,t){return(function(s,a){let l=!1;return nx(s).ee((d=>tx(s,d,a).next((f=>(f&&(l=!0),$.resolve(!f)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let a=0;return this.wr(e,((l,d)=>{if(d<=t){const f=this.Sr(e,l).next((p=>{if(!p)return a++,r.getEntry(e,l).next((()=>(r.removeEntry(l,we.min()),Ki(e).delete((function(_){return[0,Yt(_.path)]})(l)))))}));s.push(f)}})).next((()=>$.waitFor(s))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Sd(e,t)}wr(e,t){const r=Ki(e);let s,a=jn.ue;return r.X({index:ig},(([l,d],{path:f,sequenceNumber:p})=>{l===0?(a!==jn.ue&&t(new le(Rr(s)),a),a=p,s=f):a=jn.ue})).next((()=>{a!==jn.ue&&t(new le(Rr(s)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Sd(n,e){return Ki(n).put((function(r,s){return{targetId:0,path:Yt(r.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(){this.changes=new pi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?$.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return zs(e).put(r)}removeEntry(e,t,r){return zs(e).delete((function(a,l){const d=a.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],ah(l),d[d.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=ht.newInvalidDocument(t);return zs(e).X({index:Od,range:IDBKeyRange.only(ou(t))},((s,a)=>{r=this.Dr(t,a)})).next((()=>r))}vr(e,t){let r={size:0,document:ht.newInvalidDocument(t)};return zs(e).X({index:Od,range:IDBKeyRange.only(ou(t))},((s,a)=>{r={document:this.Dr(t,a),size:uh(a)}})).next((()=>r))}getEntries(e,t){let r=xn();return this.Cr(e,t,((s,a)=>{const l=this.Dr(s,a);r=r.insert(s,l)})).next((()=>r))}Fr(e,t){let r=xn(),s=new at(le.comparator);return this.Cr(e,t,((a,l)=>{const d=this.Dr(a,l);r=r.insert(a,d),s=s.insert(a,uh(l))})).next((()=>({documents:r,Mr:s})))}Cr(e,t,r){if(t.isEmpty())return $.resolve();let s=new Ge(X0);t.forEach((f=>s=s.add(f)));const a=IDBKeyRange.bound(ou(s.first()),ou(s.last())),l=s.getIterator();let d=l.getNext();return zs(e).X({index:Od,range:a},((f,p,v)=>{const _=le.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;d&&X0(d,_)<0;)r(d,null),d=l.getNext();d&&d.isEqual(_)&&(r(d,p),d=l.hasNext()?l.getNext():null),d?v.G(ou(d)):v.done()})).next((()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,r,s,a){const l=t.path,d=[l.popLast().toArray(),l.lastSegment(),ah(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zs(e).j(IDBKeyRange.bound(d,f,!0)).next((p=>{a==null||a.incrementDocumentReadCount(p.length);let v=xn();for(const _ of p){const x=this.Dr(le.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);x.isFoundDocument()&&(Ku(t,x)||s.has(x.key))&&(v=v.insert(x.key,x))}return v}))}getAllFromCollectionGroup(e,t,r,s){let a=xn();const l=Y0(t,r),d=Y0(t,Sn.max());return zs(e).X({index:GE,range:IDBKeyRange.bound(l,d,!0)},((f,p,v)=>{const _=this.Dr(le.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);a=a.insert(_.key,_),a.size===s&&v.done()})).next((()=>a))}newChangeBuffer(e){return new pC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Q0(e).get(hm).next((t=>(ve(!!t,20021),t)))}br(e,t){return Q0(e).put(hm,t)}Dr(e,t){if(t){const r=JR(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(we.min())))return r}return ht.newInvalidDocument(e)}}function ox(n){return new fC(n)}class pC extends sx{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new pi((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const t=[];let r=0,s=new Ge(((a,l)=>Te(a.canonicalString(),l.canonicalString())));return this.changes.forEach(((a,l)=>{const d=this.Nr.get(a);if(t.push(this.Or.removeEntry(e,a,d.readTime)),l.isValidDocument()){const f=N0(this.Or.serializer,l);s=s.add(a.path.popLast());const p=uh(f);r+=p-d.size,t.push(this.Or.addEntry(e,a,f))}else if(r-=d.size,this.trackRemovals){const f=N0(this.Or.serializer,l.convertToNoDocument(we.min()));t.push(this.Or.addEntry(e,a,f))}})),s.forEach((a=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Or.updateMetadata(e,r)),$.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next((r=>(this.Nr.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Or.Fr(e,t).next((({documents:r,Mr:s})=>(s.forEach(((a,l)=>{this.Nr.set(a,{size:l,readTime:r.get(a).readTime})})),r)))}}function Q0(n){return Rt(n,Cu)}function zs(n){return Rt(n,Zd)}function ou(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Y0(n,e){const t=e.documentKey.path.toArray();return[n,ah(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function X0(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(s=Te(t[a],r[a]),s)return s;return s=Te(t.length,r.length),s||(s=Te(t[t.length-2],r[r.length-2]),s||Te(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Eu(r.mutation,s,fn.empty(),He.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Re()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Re()){const s=Cr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let l=uu();return a.forEach(((d,f)=>{l=l.insert(d,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=Cr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Re())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,d)=>{t.set(l,d)}))}))}computeViews(e,t,r,s){let a=xn();const l=wu(),d=(function(){return wu()})();return t.forEach(((f,p)=>{const v=r.get(p.key);s.has(p.key)&&(v===void 0||v.mutation instanceof mi)?a=a.insert(p.key,p):v!==void 0?(l.set(p.key,v.mutation.getFieldMask()),Eu(v.mutation,p,v.mutation.getFieldMask(),He.now())):l.set(p.key,fn.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((p,v)=>l.set(p,v))),t.forEach(((p,v)=>{var _;return d.set(p,new mC(v,(_=l.get(p))!==null&&_!==void 0?_:null))})),d)))}recalculateAndSaveOverlays(e,t){const r=wu();let s=new at(((l,d)=>l-d)),a=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const d of l)d.keys().forEach((f=>{const p=t.get(f);if(p===null)return;let v=r.get(f)||fn.empty();v=d.applyToLocalView(p,v),r.set(f,v);const _=(s.get(d.batchId)||Re()).add(f);s=s.insert(d.batchId,_)}))})).next((()=>{const l=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),p=f.key,v=f.value,_=TI();v.forEach((x=>{if(!a.has(x)){const S=PI(t.get(x),r.get(x));S!==null&&_.set(x,S),a=a.add(x)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,_))}return $.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(l){return le.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_I(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):$.resolve(Cr());let d=ku,f=a;return l.next((p=>$.forEach(p,((v,_)=>(d<_.largestBatchId&&(d=_.largestBatchId),a.get(v)?$.resolve():this.remoteDocumentCache.getEntry(e,v).next((x=>{f=f.insert(v,x)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,f,p,Re()))).next((v=>({batchId:d,changes:xI(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new le(t)).next((r=>{let s=uu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let l=uu();return this.indexManager.getCollectionParents(e,a).next((d=>$.forEach(d,(f=>{const p=(function(_,x){return new Za(x,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next((v=>{v.forEach(((_,x)=>{l=l.insert(_,x)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((l=>{a.forEach(((f,p)=>{const v=p.getKey();l.get(v)===null&&(l=l.insert(v,ht.newInvalidDocument(v)))}));let d=uu();return l.forEach(((f,p)=>{const v=a.get(f);v!==void 0&&Eu(v.mutation,p,fn.empty(),He.now()),Ku(t,p)&&(d=d.insert(f,p))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return $.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:rn(s.createTime)}})(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(s){return{name:s.name,query:YI(s.bundledQuery),readTime:rn(s.readTime)}})(t)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(){this.overlays=new at(le.comparator),this.kr=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Cr();return $.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.wt(e,t,a)})),$.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(r)),$.resolve()}getOverlaysForCollection(e,t,r){const s=Cr(),a=t.length+1,l=new le(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const f=d.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return $.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new at(((p,v)=>p-v));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let v=a.get(p.largestBatchId);v===null&&(v=Cr(),a=a.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const d=Cr(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((p,v)=>d.set(p,v))),!(d.size()>=s)););return $.resolve(d)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new mg(t,r));let a=this.kr.get(t);a===void 0&&(a=Re(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(){this.qr=new Ge(Ot.Qr),this.$r=new Ge(Ot.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Ot(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Ot(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new le(new $e([])),r=new Ot(t,e),s=new Ot(t,e+1),a=[];return this.$r.forEachInRange([r,s],(l=>{this.Wr(l),a.push(l.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new le(new $e([])),r=new Ot(t,e),s=new Ot(t,e+1);let a=Re();return this.$r.forEachInRange([r,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new Ot(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ot{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return le.comparator(e.key,t.key)||Te(e.Hr,t.Hr)}static Ur(e,t){return Te(e.Hr,t.Hr)||le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ge(Ot.Qr)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new fg(a,t,r,s);this.mutationQueue.push(l);for(const d of s)this.Yr=this.Yr.add(new Ot(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return $.resolve(l)}lookupMutationBatch(e,t){return $.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return $.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Zs:this.er-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ot(t,0),s=new Ot(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,s],(l=>{const d=this.Zr(l.Hr);a.push(d)})),$.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ge(Te);return t.forEach((s=>{const a=new Ot(s,0),l=new Ot(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,l],(d=>{r=r.add(d.Hr)}))})),$.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;le.isDocumentKey(a)||(a=a.child(""));const l=new Ot(new le(a),0);let d=new Ge(Te);return this.Yr.forEachWhile((f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(d=d.add(f.Hr)),!0)}),l),$.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){ve(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return $.forEach(t.mutations,(s=>{const a=new Ot(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new Ot(t,0),s=this.Yr.firstAfterOrEqual(r);return $.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.ni=e,this.docs=(function(){return new at(le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,l=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return $.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(t))}getEntries(e,t){let r=xn();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():ht.newInvalidDocument(s))})),$.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=xn();const l=t.path,d=new le(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:p,value:{document:v}}=f.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||ng(zE(v),r)<=0||(s.has(v.key)||Ku(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return $.resolve(a)}getAllFromCollectionGroup(e,t,r,s){me(9500)}ri(e,t){return $.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new EC(this)}getSize(e){return $.resolve(this.size)}}class EC extends sx{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)})),$.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.persistence=e,this.ii=new pi((t=>ao(t)),Wu),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.si=0,this.oi=new wg,this.targetCount=0,this._i=co.ar()}forEachTarget(e,t){return this.ii.forEach(((r,s)=>t(s))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),$.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new co(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.hr(t),$.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ii.forEach(((l,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ii.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),$.waitFor(a).next((()=>s))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return $.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),$.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),$.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return $.resolve(r)}containsKey(e,t){return $.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,t){this.ai={},this.overlays={},this.ui=new jn(0),this.ci=!1,this.ci=!0,this.li=new vC,this.referenceDelegate=e(this),this.hi=new IC(this),this.indexManager=new oC,this.remoteDocumentCache=(function(s){return new wC(s)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new KI(t),this.Ti=new gC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new _C(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ne("MemoryPersistence","Starting transaction:",e);const s=new xC(this.ui.next());return this.referenceDelegate.Ii(),r(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return $.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class xC extends qE{constructor(e){super(),this.currentSequenceNumber=e}}class $h{constructor(e){this.persistence=e,this.Ai=new wg,this.Ri=null}static Vi(e){return new $h(e)}get mi(){if(this.Ri)return this.Ri;throw me(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),$.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),$.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((s=>this.mi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.mi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.mi,(r=>{const s=le.fromPath(r);return this.fi(e,s).next((a=>{a||t.removeEntry(s,we.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return $.or([()=>$.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class ch{constructor(e,t){this.persistence=e,this.gi=new pi((r=>Yt(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=ix(this,t)}static Vi(e,t){return new ch(e,t)}Ii(){}di(e){return $.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return $.forEach(this.gi,((r,s)=>this.Sr(e,r,s).next((a=>a?$.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,(l=>this.Sr(e,l,t).next((d=>{d||(r++,a.removeEntry(l,we.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),$.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),$.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Md(e.data.value)),t}Sr(e,t,r){return $.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return $.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.serializer=e}q(e,t,r,s){const a=new Rh("createOrUpgrade",t);r<1&&s>=1&&((function(f){f.createObjectStore(Hu)})(e),(function(f){f.createObjectStore(Ru,{keyPath:LA}),f.createObjectStore(sr,{keyPath:l0,autoIncrement:!0}).createIndex(Ys,u0,{unique:!0}),f.createObjectStore(Pa)})(e),J0(e),(function(f){f.createObjectStore(Hs)})(e));let l=$.resolve();return r<3&&s>=3&&(r!==0&&((function(f){f.deleteObjectStore(Da),f.deleteObjectStore(Na),f.deleteObjectStore(eo)})(e),J0(e)),l=l.next((()=>(function(f){const p=f.store(eo),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:we.min().toTimestamp(),targetCount:0};return p.put(eh,v)})(a)))),r<4&&s>=4&&(r!==0&&(l=l.next((()=>(function(f,p){return p.store(sr).j().next((_=>{f.deleteObjectStore(sr),f.createObjectStore(sr,{keyPath:l0,autoIncrement:!0}).createIndex(Ys,u0,{unique:!0});const x=p.store(sr),S=_.map((D=>x.put(D)));return $.waitFor(S)}))})(e,a)))),l=l.next((()=>{(function(f){f.createObjectStore(Va,{keyPath:HA})})(e)}))),r<5&&s>=5&&(l=l.next((()=>this.pi(a)))),r<6&&s>=6&&(l=l.next((()=>((function(f){f.createObjectStore(Cu)})(e),this.yi(a))))),r<7&&s>=7&&(l=l.next((()=>this.wi(a)))),r<8&&s>=8&&(l=l.next((()=>this.Si(e,a)))),r<9&&s>=9&&(l=l.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(l=l.next((()=>this.bi(a)))),r<11&&s>=11&&(l=l.next((()=>{(function(f){f.createObjectStore(Ph,{keyPath:WA})})(e),(function(f){f.createObjectStore(Nh,{keyPath:GA})})(e)}))),r<12&&s>=12&&(l=l.next((()=>{(function(f){const p=f.createObjectStore(Dh,{keyPath:eR});p.createIndex(pm,tR,{unique:!1}),p.createIndex(XE,nR,{unique:!1})})(e)}))),r<13&&s>=13&&(l=l.next((()=>(function(f){const p=f.createObjectStore(Zd,{keyPath:jA});p.createIndex(Od,FA),p.createIndex(GE,UA)})(e))).next((()=>this.Di(e,a))).next((()=>e.deleteObjectStore(Hs)))),r<14&&s>=14&&(l=l.next((()=>this.Ci(e,a)))),r<15&&s>=15&&(l=l.next((()=>(function(f){f.createObjectStore(sg,{keyPath:KA,autoIncrement:!0}).createIndex(fm,QA,{unique:!1}),f.createObjectStore(gu,{keyPath:YA}).createIndex(QE,XA,{unique:!1}),f.createObjectStore(yu,{keyPath:JA}).createIndex(YE,ZA,{unique:!1})})(e)))),r<16&&s>=16&&(l=l.next((()=>{t.objectStore(gu).clear()})).next((()=>{t.objectStore(yu).clear()}))),r<17&&s>=17&&(l=l.next((()=>{(function(f){f.createObjectStore(og,{keyPath:rR})})(e)}))),r<18&&s>=18&&IE()&&(l=l.next((()=>{t.objectStore(gu).clear()})).next((()=>{t.objectStore(yu).clear()}))),l}yi(e){let t=0;return e.store(Hs).X(((r,s)=>{t+=uh(s)})).next((()=>{const r={byteSize:t};return e.store(Cu).put(hm,r)}))}pi(e){const t=e.store(Ru),r=e.store(sr);return t.j().next((s=>$.forEach(s,(a=>{const l=IDBKeyRange.bound([a.userId,Zs],[a.userId,a.lastAcknowledgedBatchId]);return r.j(Ys,l).next((d=>$.forEach(d,(f=>{ve(f.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const p=Gs(this.serializer,f);return ex(e,a.userId,p).next((()=>{}))}))))}))))}wi(e){const t=e.store(Da),r=e.store(Hs);return e.store(eo).get(eh).next((s=>{const a=[];return r.X(((l,d)=>{const f=new $e(l),p=(function(_){return[0,Yt(_)]})(f);a.push(t.get(p).next((v=>v?$.resolve():(_=>t.put({targetId:0,path:Yt(_),sequenceNumber:s.highestListenSequenceNumber}))(f))))})).next((()=>$.waitFor(a)))}))}Si(e,t){e.createObjectStore(Pu,{keyPath:qA});const r=t.store(Pu),s=new _g,a=l=>{if(s.add(l)){const d=l.lastSegment(),f=l.popLast();return r.put({collectionId:d,parent:Yt(f)})}};return t.store(Hs).X({Z:!0},((l,d)=>{const f=new $e(l);return a(f.popLast())})).next((()=>t.store(Pa).X({Z:!0},(([l,d,f],p)=>{const v=Rr(d);return a(v.popLast())}))))}bi(e){const t=e.store(Na);return t.X(((r,s)=>{const a=du(s),l=QI(this.serializer,a);return t.put(l)}))}Di(e,t){const r=t.store(Hs),s=[];return r.X(((a,l)=>{const d=t.store(Zd),f=(function(_){return _.document?new le($e.fromString(_.document.name).popFirst(5)):_.noDocument?le.fromSegments(_.noDocument.path):_.unknownDocument?le.fromSegments(_.unknownDocument.path):me(36783)})(l).path.toArray(),p={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(d.put(p))})).next((()=>$.waitFor(s)))}Ci(e,t){const r=t.store(sr),s=ox(this.serializer),a=new Eg($h.Vi,this.serializer.gt);return r.j().next((l=>{const d=new Map;return l.forEach((f=>{var p;let v=(p=d.get(f.userId))!==null&&p!==void 0?p:Re();Gs(this.serializer,f).keys().forEach((_=>v=v.add(_))),d.set(f.userId,v)})),$.forEach(d,((f,p)=>{const v=new Ut(p),_=Bh.yt(this.serializer,v),x=a.getIndexManager(v),S=zh.yt(v,this.serializer,x,a.referenceDelegate);return new ax(s,S,_,x).recalculateAndSaveOverlaysForDocumentKeys(new mm(t,jn.ue),f).next()}))}))}}function J0(n){n.createObjectStore(Da,{keyPath:zA}).createIndex(ig,$A,{unique:!0}),n.createObjectStore(Na,{keyPath:"targetId"}).createIndex(KE,BA,{unique:!0}),n.createObjectStore(eo)}const Hi="IndexedDbPersistence",Wp=18e5,Gp=5e3,Kp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",SC="main";class Ig{constructor(e,t,r,s,a,l,d,f,p,v,_=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fi=a,this.window=l,this.document=d,this.Mi=p,this.xi=v,this.Oi=_,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=x=>Promise.resolve(),!Ig.C())throw new se(Y.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hC(this,s),this.Qi=t+SC,this.serializer=new KI(f),this.$i=new ns(this.Qi,this.Oi,new TC(this.serializer)),this.li=new eC,this.hi=new lC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ox(this.serializer),this.Ti=new ZR,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,v===!1&&tn(Hi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new se(Y.FAILED_PRECONDITION,Kp);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.hi.getHighestSequenceNumber(e)))})).then((e=>{this.ui=new jn(e,this.Mi)})).then((()=>{this.ci=!0})).catch((e=>(this.$i&&this.$i.close(),Promise.reject(e))))}ji(e){return this.qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget((async()=>{this.started&&await this.Ki()})))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>kd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ji(e).next((t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable((()=>this.qi(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Yi(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(hs(e))return ne(Hi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ne(Hi,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable((()=>this.qi(e))),this.isPrimary=e}))}Ji(e){return au(e).get(pa).next((t=>$.resolve(this.Xi(t))))}es(e){return kd(e).delete(this.clientId)}async ts(){if(this.isPrimary&&!this.ns(this.ki,Wp)){this.ki=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Rt(t,Va);return r.j().next((s=>{const a=this.rs(s,Wp),l=s.filter((d=>a.indexOf(d)===-1));return $.forEach(l,(d=>r.delete(d.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.ss(t.clientId))}}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ki().then((()=>this.ts())).then((()=>this.zi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?$.resolve(!0):au(e).get(pa).next((t=>{if(t!==null&&this.ns(t.leaseTimestampMs,Gp)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new se(Y.FAILED_PRECONDITION,Kp);return!1}}return!(!this.networkEnabled||!this.inForeground)||kd(e).j().next((r=>this.rs(r,Gp).find((s=>{if(this.clientId!==s.clientId){const a=!this.networkEnabled&&s.networkEnabled,l=!this.inForeground&&s.inForeground,d=this.networkEnabled===s.networkEnabled;if(a||l&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ne(Hi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),await this.$i.runTransaction("shutdown","readwrite",[Hu,Va],(e=>{const t=new mm(e,jn.ue);return this.Yi(t).next((()=>this.es(t)))})),this.$i.close(),this.hs()}rs(e,t){return e.filter((r=>this.ns(r.updateTimeMs,t)&&!this._s(r.clientId)))}Ps(){return this.runTransaction("getActiveClients","readonly",(e=>kd(e).j().next((t=>this.rs(t,Wp).map((r=>r.clientId))))))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return zh.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new aC(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return Bh.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,r){ne(Hi,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",a=(function(f){return f===18?oR:f===17?tI:f===16?sR:f===15?ag:f===14?eI:f===13?ZE:f===12?iR:f===11?JE:void me(60245)})(this.Oi);let l;return this.$i.runTransaction(e,s,a,(d=>(l=new mm(d,this.ui?this.ui.next():jn.ue),t==="readwrite-primary"?this.Ji(l).next((f=>!!f||this.Hi(l))).next((f=>{if(!f)throw tn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable((()=>this.qi(!1))),new se(Y.FAILED_PRECONDITION,$E);return r(l)})).next((f=>this.Zi(l).next((()=>f)))):this.Ts(l).next((()=>r(l)))))).then((d=>(l.raiseOnCommittedEvent(),d)))}Ts(e){return au(e).get(pa).next((t=>{if(t!==null&&this.ns(t.leaseTimestampMs,Gp)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new se(Y.FAILED_PRECONDITION,Kp)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return au(e).put(pa,t)}static C(){return ns.C()}Yi(e){const t=au(e);return t.get(pa).next((r=>this.Xi(r)?(ne(Hi,"Releasing primary lease."),t.delete(pa)):$.resolve()))}ns(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(tn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki())))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();const t=/(?:Version|Mobile)\/1[456]/;EE()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{const r=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return ne(Hi,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return tn(Hi,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){tn("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function au(n){return Rt(n,Hu)}function kd(n){return Rt(n,Va)}function kC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=Re(),s=Re();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new xg(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return EE()?8:HE(At())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.ps(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ys(e,t,s,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new bC;return this.ws(e,t,l).next((d=>{if(a.result=d,this.Rs)return this.Ss(e,t,l,d.size)}))})).next((()=>a.result))}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(wa()<=Ne.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Ea(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),$.resolve()):(wa()<=Ne.DEBUG&&ne("QueryEngine","Query:",Ea(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(wa()<=Ne.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Ea(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Un(t))):$.resolve())}ps(e,t){if(I0(t))return $.resolve(null);let r=Un(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=ih(t,null,"F"),r=Un(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=Re(...a);return this.gs.getDocuments(e,l).next((d=>this.indexManager.getMinOffset(e,r).next((f=>{const p=this.bs(t,d);return this.Ds(t,p,l,f.readTime)?this.ps(e,ih(t,null,"F")):this.vs(e,p,t,f)}))))})))))}ys(e,t,r,s){return I0(t)||s.isEqual(we.min())?$.resolve(null):this.gs.getDocuments(e,r).next((a=>{const l=this.bs(t,a);return this.Ds(t,l,r,s)?$.resolve(null):(wa()<=Ne.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ea(t)),this.vs(e,l,t,RA(s,ku)).next((d=>d)))}))}bs(e,t){let r=new Ge(EI(e));return t.forEach(((s,a)=>{Ku(e,a)&&(r=r.add(a))})),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,t,r){return wa()<=Ne.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Ea(t)),this.gs.getDocumentsMatchingQuery(e,t,Sn.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="LocalStore",AC=3e8;class RC{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new at(Te),this.Ms=new pi((a=>ao(a)),Wu),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ax(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function ux(n,e,t,r){return new RC(n,e,t,r)}async function cx(n,e){const t=be(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],d=[];let f=Re();for(const p of s){l.push(p.batchId);for(const v of p.mutations)f=f.add(v.key)}for(const p of a){d.push(p.batchId);for(const v of p.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(r,f).next((p=>({Bs:p,removedBatchIds:l,addedBatchIds:d})))}))}))}function CC(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,f,p,v){const _=p.batch,x=_.keys();let S=$.resolve();return x.forEach((D=>{S=S.next((()=>v.getEntry(f,D))).next((C=>{const O=p.docVersions.get(D);ve(O!==null,48541),C.version.compareTo(O)<0&&(_.applyToRemoteDocument(C,p),C.isValidDocument()&&(C.setReadTime(p.commitVersion),v.addEntry(C)))}))})),S.next((()=>d.mutationQueue.removeMutationBatch(f,_)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let f=Re();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(f=f.add(d.batch.mutations[p].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function dx(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function PC(n,e){const t=be(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const d=[];e.targetChanges.forEach(((v,_)=>{const x=s.get(_);if(!x)return;d.push(t.hi.removeMatchingKeys(a,v.removedDocuments,_).next((()=>t.hi.addMatchingKeys(a,v.addedDocuments,_))));let S=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(_)!==null?S=S.withResumeToken(It.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):v.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(v.resumeToken,r)),s=s.insert(_,S),(function(C,O,K){return C.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=AC?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(x,S,v)&&d.push(t.hi.updateTargetData(a,S))}));let f=xn(),p=Re();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(NC(a,l,e.documentUpdates).next((v=>{f=v.Ls,p=v.ks}))),!r.isEqual(we.min())){const v=t.hi.getLastRemoteSnapshotVersion(a).next((_=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(v)}return $.waitFor(d).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,p))).next((()=>f))})).then((a=>(t.Fs=s,a)))}function NC(n,e,t){let r=Re(),s=Re();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let l=xn();return t.forEach(((d,f)=>{const p=a.get(d);f.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual(we.min())?(e.removeEntry(d,f.readTime),l=l.insert(d,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),l=l.insert(d,f)):ne(Tg,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",f.version)})),{Ls:l,ks:s}}))}function DC(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Zs),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function VC(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.hi.getTargetData(r,e).next((a=>a?(s=a,$.resolve(s)):t.hi.allocateTargetId(r).next((l=>(s=new si(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function Rm(n,e,t){const r=be(n),s=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!hs(l))throw l;ne(Tg,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Z0(n,e,t){const r=be(n);let s=we.min(),a=Re();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,p,v){const _=be(f),x=_.Ms.get(v);return x!==void 0?$.resolve(_.Fs.get(x)):_.hi.getTargetData(p,v)})(r,l,Un(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(l,d.targetId).next((f=>{a=f}))})).next((()=>r.Cs.getDocumentsMatchingQuery(l,e,t?s:we.min(),t?a:Re()))).next((d=>(OC(r,ER(e),d),{documents:d,qs:a})))))}function OC(n,e,t){let r=n.xs.get(e)||we.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.xs.set(e,r)}class ew{constructor(){this.activeTargetIds=bR()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hx{constructor(){this.Fo=new ew,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new ew,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="ConnectivityMonitor";class nw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ne(tw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ne(tw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bd=null;function Cm(){return bd===null?bd=(function(){return 268435456+Math.round(2147483648*Math.random())})():bd++,"0x"+bd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="RestConnection",MC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jC{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===th?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const l=Cm(),d=this.Go(e,t.toUriEncodedString());ne(Qp,`Sending RPC '${e}' ${l}:`,d,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,s,a);const{host:p}=new URL(d),v=Ya(p);return this.jo(e,d,f,r,v).then((_=>(ne(Qp,`Received RPC '${e}' ${l}: `,_),_)),(_=>{throw Lr(Qp,`RPC '${e}' ${l} failed with error: `,_,"url: ",d,"request:",r),_}))}Jo(e,t,r,s,a,l){return this.Wo(e,t,r,s,a)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ja})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}Go(e,t){const r=MC[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class UC extends jC{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,a){const l=Cm();return new Promise(((d,f)=>{const p=new PE;p.setWithCredentials(!0),p.listenOnce(NE.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Nd.NO_ERROR:const _=p.getResponseJson();ne(Wt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),d(_);break;case Nd.TIMEOUT:ne(Wt,`RPC '${e}' ${l} timed out`),f(new se(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Nd.HTTP_ERROR:const x=p.getStatus();if(ne(Wt,`RPC '${e}' ${l} failed with status:`,x,"response text:",p.getResponseText()),x>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const D=S==null?void 0:S.error;if(D&&D.status&&D.message){const C=(function(K){const Q=K.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(Q)>=0?Q:Y.UNKNOWN})(D.status);f(new se(C,D.message))}else f(new se(Y.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new se(Y.UNAVAILABLE,"Connection failed."));break;default:me(9055,{c_:e,streamId:l,l_:p.getLastErrorCode(),h_:p.getLastError()})}}finally{ne(Wt,`RPC '${e}' ${l} completed.`)}}));const v=JSON.stringify(s);ne(Wt,`RPC '${e}' ${l} sending request:`,s),p.send(t,"POST",v,r,15)}))}P_(e,t,r){const s=Cm(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=OE(),d=VE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const v=a.join("");ne(Wt,`Creating RPC '${e}' stream ${s}: ${v}`,f);const _=l.createWebChannel(v,f);this.T_(_);let x=!1,S=!1;const D=new FC({Ho:O=>{S?ne(Wt,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(x||(ne(Wt,`Opening RPC '${e}' stream ${s} transport.`),_.open(),x=!0),ne(Wt,`RPC '${e}' stream ${s} sending:`,O),_.send(O))},Yo:()=>_.close()}),C=(O,K,Q)=>{O.listen(K,(F=>{try{Q(F)}catch(re){setTimeout((()=>{throw re}),0)}}))};return C(_,lu.EventType.OPEN,(()=>{S||(ne(Wt,`RPC '${e}' stream ${s} transport opened.`),D.s_())})),C(_,lu.EventType.CLOSE,(()=>{S||(S=!0,ne(Wt,`RPC '${e}' stream ${s} transport closed`),D.__(),this.I_(_))})),C(_,lu.EventType.ERROR,(O=>{S||(S=!0,Lr(Wt,`RPC '${e}' stream ${s} transport errored. Name:`,O.name,"Message:",O.message),D.__(new se(Y.UNAVAILABLE,"The operation could not be completed")))})),C(_,lu.EventType.MESSAGE,(O=>{var K;if(!S){const Q=O.data[0];ve(!!Q,16349);const F=Q,re=(F==null?void 0:F.error)||((K=F[0])===null||K===void 0?void 0:K.error);if(re){ne(Wt,`RPC '${e}' stream ${s} received error:`,re);const ue=re.status;let ce=(function(A){const N=vt[A];if(N!==void 0)return VI(N)})(ue),P=re.message;ce===void 0&&(ce=Y.INTERNAL,P="Unknown error status: "+ue+" with message "+re.message),S=!0,D.__(new se(ce,P)),_.close()}else ne(Wt,`RPC '${e}' stream ${s} received:`,Q),D.a_(Q)}})),C(d,DE.STAT_EVENT,(O=>{O.stat===um.PROXY?ne(Wt,`RPC '${e}' stream ${s} detected buffering proxy`):O.stat===um.NOPROXY&&ne(Wt,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{D.o_()}),0),D}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(){return typeof window<"u"?window:null}function zd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(n){return new zR(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="PersistentStream";class px{constructor(e,t,r,s,a,l,d,f){this.Fi=e,this.w_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new fx(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(tn(t.toString()),tn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.b_===t&&this.W_(r,s)}),(r=>{e((()=>{const s=new se(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{r((()=>this.G_(s)))})),this.stream.onMessage((s=>{r((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ne(rw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ne(rw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class zC extends px{constructor(e,t,r,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=HR(this.serializer,e),r=(function(a){if(!("targetChange"in a))return we.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?we.min():l.readTime?rn(l.readTime):we.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=Tm(this.serializer),t.addTarget=(function(a,l){let d;const f=l.target;if(d=nh(f)?{documents:zI(a,f)}:{query:$I(a,f).Vt},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=MI(a,l.resumeToken);const p=Im(a,l.expectedCount);p!==null&&(d.expectedCount=p)}else if(l.snapshotVersion.compareTo(we.min())>0){d.readTime=za(a,l.snapshotVersion.toTimestamp());const p=Im(a,l.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const r=GR(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=Tm(this.serializer),t.removeTarget=e,this.k_(t)}}class $C extends px{constructor(e,t,r,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=WR(e.writeResults,e.commitTime),r=rn(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=Tm(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>oh(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{}class HC extends qC{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new se(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Wo(e,xm(t,r),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new se(Y.UNKNOWN,a.toString())}))}Jo(e,t,r,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Jo(e,xm(t,r),s,l,d,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new se(Y.UNKNOWN,l.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class WC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(tn(t),this._a=!1):ne("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="RemoteStore";class GC{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((l=>{r.enqueueAndForget((async()=>{wo(this)&&(ne(ho,"Restarting streams for network reachability change."),await(async function(f){const p=be(f);p.Ia.add(4),await Yu(p),p.Aa.set("Unknown"),p.Ia.delete(4),await Hh(p)})(this))}))})),this.Aa=new WC(r,s)}}async function Hh(n){if(wo(n))for(const e of n.da)await e(!0)}async function Yu(n){for(const e of n.da)await e(!1)}function mx(n,e){const t=be(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Ag(t)?bg(t):tl(t).x_()&&kg(t,e))}function Sg(n,e){const t=be(n),r=tl(t);t.Ta.delete(e),r.x_()&&gx(t,e),t.Ta.size===0&&(r.x_()?r.B_():wo(t)&&t.Aa.set("Unknown"))}function kg(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}tl(n).H_(e)}function gx(n,e){n.Ra.$e(e),tl(n).Y_(e)}function bg(n){n.Ra=new jR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),tl(n).start(),n.Aa.aa()}function Ag(n){return wo(n)&&!tl(n).M_()&&n.Ta.size>0}function wo(n){return be(n).Ia.size===0}function yx(n){n.Ra=void 0}async function KC(n){n.Aa.set("Online")}async function QC(n){n.Ta.forEach(((e,t)=>{kg(n,e)}))}async function YC(n,e){yx(n),Ag(n)?(n.Aa.la(e),bg(n)):n.Aa.set("Unknown")}async function XC(n,e,t){if(n.Aa.set("Online"),e instanceof LI&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const d of a.targetIds)s.Ta.has(d)&&(await s.remoteSyncer.rejectListen(d,l),s.Ta.delete(d),s.Ra.removeTarget(d))})(n,e)}catch(r){ne(ho,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dh(n,r)}else if(e instanceof Ud?n.Ra.Ye(e):e instanceof OI?n.Ra.it(e):n.Ra.et(e),!t.isEqual(we.min()))try{const r=await dx(n.localStore);t.compareTo(r)>=0&&await(function(a,l){const d=a.Ra.Pt(l);return d.targetChanges.forEach(((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.Ta.get(p);v&&a.Ta.set(p,v.withResumeToken(f.resumeToken,l))}})),d.targetMismatches.forEach(((f,p)=>{const v=a.Ta.get(f);if(!v)return;a.Ta.set(f,v.withResumeToken(It.EMPTY_BYTE_STRING,v.snapshotVersion)),gx(a,f);const _=new si(v.target,f,p,v.sequenceNumber);kg(a,_)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){ne(ho,"Failed to raise snapshot:",r),await dh(n,r)}}async function dh(n,e,t){if(!hs(e))throw e;n.Ia.add(1),await Yu(n),n.Aa.set("Offline"),t||(t=()=>dx(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ne(ho,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Hh(n)}))}function vx(n,e){return e().catch((t=>dh(n,t,e)))}async function Xu(n){const e=be(n),t=ls(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Zs;for(;JC(e);)try{const s=await DC(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,ZC(e,s)}catch(s){await dh(e,s)}_x(e)&&wx(e)}function JC(n){return wo(n)&&n.Pa.length<10}function ZC(n,e){n.Pa.push(e);const t=ls(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function _x(n){return wo(n)&&!ls(n).M_()&&n.Pa.length>0}function wx(n){ls(n).start()}async function eP(n){ls(n).na()}async function tP(n){const e=ls(n);for(const t of n.Pa)e.X_(t.mutations)}async function nP(n,e,t){const r=n.Pa.shift(),s=pg.from(r,e,t);await vx(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Xu(n)}async function rP(n,e){e&&ls(n).Z_&&await(async function(r,s){if((function(l){return LR(l)&&l!==Y.ABORTED})(s.code)){const a=r.Pa.shift();ls(r).N_(),await vx(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await Xu(r)}})(n,e),_x(n)&&wx(n)}async function iw(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),ne(ho,"RemoteStore received new credentials");const r=wo(t);t.Ia.add(3),await Yu(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Hh(t)}async function iP(n,e){const t=be(n);e?(t.Ia.delete(2),await Hh(t)):e||(t.Ia.add(2),await Yu(t),t.Aa.set("Unknown"))}function tl(n){return n.Va||(n.Va=(function(t,r,s){const a=be(t);return a.ia(),new zC(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:KC.bind(null,n),e_:QC.bind(null,n),n_:YC.bind(null,n),J_:XC.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Ag(n)?bg(n):n.Aa.set("Unknown")):(await n.Va.stop(),yx(n))}))),n.Va}function ls(n){return n.ma||(n.ma=(function(t,r,s){const a=be(t);return a.ia(),new $C(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:eP.bind(null,n),n_:rP.bind(null,n),ea:tP.bind(null,n),ta:nP.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await Xu(n)):(await n.ma.stop(),n.Pa.length>0&&(ne(ho,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const l=Date.now()+r,d=new Rg(e,t,l,s,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cg(n,e){if(tn("AsyncQueue",`${e}: ${n}`),hs(n))return new se(Y.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{static emptySet(e){return new ka(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||le.comparator(t.key,r.key):(t,r)=>le.comparator(t.key,r.key),this.keyedMap=uu(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ka)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ka;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(){this.fa=new at(le.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):me(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class $a{constructor(e,t,r,s,a,l,d,f,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,a){const l=[];return t.forEach((d=>{l.push({type:0,doc:d})})),new $a(e,t,ka.emptySet(t),l,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class oP{constructor(){this.queries=ow(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=be(t),a=s.queries;s.queries=ow(),a.forEach(((l,d)=>{for(const f of d.wa)f.onError(r)}))})(this,new se(Y.ABORTED,"Firestore shutting down"))}}function ow(){return new pi((n=>wI(n)),Lh)}async function Pg(n,e){const t=be(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.ba()&&(r=2):(a=new sP,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(s,!0);break;case 1:a.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const d=Cg(l,`Initialization of query '${Ea(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&Dg(t)}async function Ng(n,e){const t=be(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const l=a.wa.indexOf(e);l>=0&&(a.wa.splice(l,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function aP(n,e){const t=be(n);let r=!1;for(const s of e){const a=s.query,l=t.queries.get(a);if(l){for(const d of l.wa)d.Ca(s)&&(r=!0);l.ya=s}}r&&Dg(t)}function lP(n,e,t){const r=be(n),s=r.queries.get(e);if(s)for(const a of s.wa)a.onError(t);r.queries.delete(e)}function Dg(n){n.Da.forEach((e=>{e.next()}))}var Pm,aw;(aw=Pm||(Pm={})).Fa="default",aw.Cache="cache";class Vg{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new $a(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=$a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Pm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.key=e}}class Ix{constructor(e){this.key=e}}class uP{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Re(),this.mutatedKeys=Re(),this.Xa=EI(e),this.eu=new ka(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new sw,s=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,l=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,_)=>{const x=s.get(v),S=Ku(this.query,_)?_:null,D=!!x&&this.mutatedKeys.has(x.key),C=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let O=!1;x&&S?x.data.isEqual(S.data)?D!==C&&(r.track({type:3,doc:S}),O=!0):this.iu(x,S)||(r.track({type:2,doc:S}),O=!0,(f&&this.Xa(S,f)>0||p&&this.Xa(S,p)<0)&&(d=!0)):!x&&S?(r.track({type:0,doc:S}),O=!0):x&&!S&&(r.track({type:1,doc:x}),O=!0,(f||p)&&(d=!0)),O&&(S?(l=l.add(S),a=C?a.add(v):a.delete(v)):(l=l.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{eu:l,ru:r,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort(((v,_)=>(function(S,D){const C=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{At:O})}};return C(S)-C(D)})(v.type,_.type)||this.Xa(v.doc,_.doc))),this.su(r),s=s!=null&&s;const d=t&&!s?this.ou():[],f=this.Za.size===0&&this.current&&!s?1:0,p=f!==this.Ya;return this.Ya=f,l.length!==0||p?{snapshot:new $a(this.query,e.eu,a,l,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new sw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Re(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new Ix(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new Ex(r))})),t}uu(e){this.Ha=e.qs,this.Za=Re();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return $a.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Og="SyncEngine";class cP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class dP{constructor(e){this.key=e,this.lu=!1}}class hP{constructor(e,t,r,s,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new pi((d=>wI(d)),Lh),this.Tu=new Map,this.Iu=new Set,this.du=new at(le.comparator),this.Eu=new Map,this.Au=new wg,this.Ru={},this.Vu=new Map,this.mu=co.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function fP(n,e,t=!0){const r=Ax(n);let s;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await xx(r,e,t,!0),s}async function pP(n,e){const t=Ax(n);await xx(t,e,!0,!1)}async function xx(n,e,t,r){const s=await VC(n.localStore,Un(e)),a=s.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await mP(n,e,a,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&mx(n.remoteStore,s),d}async function mP(n,e,t,r,s){n.gu=(_,x,S)=>(async function(C,O,K,Q){let F=O.view.nu(K);F.Ds&&(F=await Z0(C.localStore,O.query,!1).then((({documents:P})=>O.view.nu(P,F))));const re=Q&&Q.targetChanges.get(O.targetId),ue=Q&&Q.targetMismatches.get(O.targetId)!=null,ce=O.view.applyChanges(F,C.isPrimaryClient,re,ue);return uw(C,O.targetId,ce._u),ce.snapshot})(n,_,x,S);const a=await Z0(n.localStore,e,!0),l=new uP(e,a.qs),d=l.nu(a.documents),f=Qu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=l.applyChanges(d,n.isPrimaryClient,f);uw(n,t,p._u);const v=new cP(e,t,l);return n.Pu.set(e,v),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),p.snapshot}async function gP(n,e,t){const r=be(n),s=r.Pu.get(e),a=r.Tu.get(s.targetId);if(a.length>1)return r.Tu.set(s.targetId,a.filter((l=>!Lh(l,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Rm(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Sg(r.remoteStore,s.targetId),Nm(r,s.targetId)})).catch(_o)):(Nm(r,s.targetId),await Rm(r.localStore,s.targetId,!0))}async function yP(n,e){const t=be(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Sg(t.remoteStore,r.targetId))}async function vP(n,e,t){const r=Rx(n);try{const s=await(function(l,d){const f=be(l),p=He.now(),v=d.reduce(((S,D)=>S.add(D.key)),Re());let _,x;return f.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let D=xn(),C=Re();return f.Os.getEntries(S,v).next((O=>{D=O,D.forEach(((K,Q)=>{Q.isValidDocument()||(C=C.add(K))}))})).next((()=>f.localDocuments.getOverlayedDocuments(S,D))).next((O=>{_=O;const K=[];for(const Q of d){const F=VR(Q,_.get(Q.key).overlayedDocument);F!=null&&K.push(new mi(Q.key,F,dI(F.value.mapValue),Qt.exists(!0)))}return f.mutationQueue.addMutationBatch(S,p,K,d)})).next((O=>{x=O;const K=O.applyToLocalDocumentSet(_,C);return f.documentOverlayCache.saveOverlays(S,O.batchId,K)}))})).then((()=>({batchId:x.batchId,changes:xI(_)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,d,f){let p=l.Ru[l.currentUser.toKey()];p||(p=new at(Te)),p=p.insert(d,f),l.Ru[l.currentUser.toKey()]=p})(r,s.batchId,t),await Ju(r,s.changes),await Xu(r.remoteStore)}catch(s){const a=Cg(s,"Failed to persist write");t.reject(a)}}async function Tx(n,e){const t=be(n);try{const r=await PC(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=t.Eu.get(a);l&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.lu=!0:s.modifiedDocuments.size>0?ve(l.lu,14607):s.removedDocuments.size>0&&(ve(l.lu,42227),l.lu=!1))})),await Ju(t,r,e)}catch(r){await _o(r)}}function lw(n,e,t){const r=be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach(((a,l)=>{const d=l.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(l,d){const f=be(l);f.onlineState=d;let p=!1;f.queries.forEach(((v,_)=>{for(const x of _.wa)x.va(d)&&(p=!0)})),p&&Dg(f)})(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _P(n,e,t){const r=be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),a=s&&s.key;if(a){let l=new at(le.comparator);l=l.insert(a,ht.newNoDocument(a,we.min()));const d=Re().add(a),f=new Uh(we.min(),new Map,new at(Te),l,d);await Tx(r,f),r.du=r.du.remove(a),r.Eu.delete(e),Lg(r)}else await Rm(r.localStore,e,!1).then((()=>Nm(r,e,t))).catch(_o)}async function wP(n,e){const t=be(n),r=e.batch.batchId;try{const s=await CC(t.localStore,e);kx(t,r,null),Sx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ju(t,s)}catch(s){await _o(s)}}async function EP(n,e,t){const r=be(n);try{const s=await(function(l,d){const f=be(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return f.mutationQueue.lookupMutationBatch(p,d).next((_=>(ve(_!==null,37113),v=_.keys(),f.mutationQueue.removeMutationBatch(p,_)))).next((()=>f.mutationQueue.performConsistencyCheck(p))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(p,v,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>f.localDocuments.getDocuments(p,v)))}))})(r.localStore,e);kx(r,e,t),Sx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ju(r,s)}catch(s){await _o(s)}}function Sx(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function kx(n,e,t){const r=be(n);let s=r.Ru[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function Nm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((r=>{n.Au.containsKey(r)||bx(n,r)}))}function bx(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Sg(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Lg(n))}function uw(n,e,t){for(const r of t)r instanceof Ex?(n.Au.addReference(r.key,e),IP(n,r)):r instanceof Ix?(ne(Og,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||bx(n,r.key)):me(19791,{yu:r})}function IP(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ne(Og,"New document in limbo: "+t),n.Iu.add(r),Lg(n))}function Lg(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new le($e.fromString(e)),r=n.mu.next();n.Eu.set(r,new dP(t)),n.du=n.du.insert(t,r),mx(n.remoteStore,new si(Un(Gu(t.path)),r,"TargetPurposeLimboResolution",jn.ue))}}async function Ju(n,e,t){const r=be(n),s=[],a=[],l=[];r.Pu.isEmpty()||(r.Pu.forEach(((d,f)=>{l.push(r.gu(f,e,t).then((p=>{var v;if((p||t)&&r.isPrimaryClient){const _=p?!p.fromCache:(v=t==null?void 0:t.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(p){s.push(p);const _=xg.Es(f.targetId,p);a.push(_)}})))})),await Promise.all(l),r.hu.J_(s),await(async function(f,p){const v=be(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>$.forEach(p,(x=>$.forEach(x.Is,(S=>v.persistence.referenceDelegate.addReference(_,x.targetId,S))).next((()=>$.forEach(x.ds,(S=>v.persistence.referenceDelegate.removeReference(_,x.targetId,S)))))))))}catch(_){if(!hs(_))throw _;ne(Tg,"Failed to update sequence numbers: "+_)}for(const _ of p){const x=_.targetId;if(!_.fromCache){const S=v.Fs.get(x),D=S.snapshotVersion,C=S.withLastLimboFreeSnapshotVersion(D);v.Fs=v.Fs.insert(x,C)}}})(r.localStore,a))}async function xP(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){ne(Og,"User change. New user:",e.toKey());const r=await cx(t.localStore,e);t.currentUser=e,(function(a,l){a.Vu.forEach((d=>{d.forEach((f=>{f.reject(new se(Y.CANCELLED,l))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ju(t,r.Bs)}}function TP(n,e){const t=be(n),r=t.Eu.get(e);if(r&&r.lu)return Re().add(r.key);{let s=Re();const a=t.Tu.get(e);if(!a)return s;for(const l of a){const d=t.Pu.get(l);s=s.unionWith(d.view.tu)}return s}}function Ax(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_P.bind(null,e),e.hu.J_=aP.bind(null,e.eventManager),e.hu.pu=lP.bind(null,e.eventManager),e}function Rx(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EP.bind(null,e),e}class ju{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return ux(this.persistence,new lx,e.initialUser,this.serializer)}Du(e){return new Eg($h.Vi,this.serializer)}bu(e){return new hx}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ju.provider={build:()=>new ju};class SP extends ju{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ve(this.persistence.referenceDelegate instanceof ch,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new rx(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Gt.withCacheSize(this.cacheSizeBytes):Gt.DEFAULT;return new Eg((r=>ch.Vi(r,t)),this.serializer)}}class kP extends ju{constructor(e,t,r){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Mu.initialize(this,e),await Rx(this.Mu.syncEngine),await Xu(this.Mu.remoteStore),await this.persistence.ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return ux(this.persistence,new lx,e.initialUser,this.serializer)}Cu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new rx(r,e.asyncQueue,t)}Fu(e,t){const r=new DA(t,this.persistence);return new NA(e.asyncQueue,r)}Du(e){const t=kC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Gt.withCacheSize(this.cacheSizeBytes):Gt.DEFAULT;return new Ig(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,BC(),zd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new hx}}class hh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=xP.bind(null,this.syncEngine),await iP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new oP})()}createDatastore(e){const t=qh(e.databaseInfo.databaseId),r=(function(a){return new UC(a)})(e.databaseInfo);return(function(a,l,d,f){return new HC(a,l,d,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,l,d){return new GC(r,s,a,l,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>lw(this.syncEngine,t,0)),(function(){return nw.C()?new nw:new LC})())}createSyncEngine(e,t){return(function(s,a,l,d,f,p,v){const _=new hP(s,a,l,d,f,p);return v&&(_.fu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=be(s);ne(ho,"RemoteStore shutting down."),a.Ia.add(5),await Yu(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}hh.provider={build:()=>new hh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):tn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="FirestoreClient";class bP{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Ut.UNAUTHENTICATED,this.clientId=tg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{ne(us,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(ne(us,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Cg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Yp(n,e){n.asyncQueue.verifyOperationInProgress(),ne(us,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await cx(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>{Lr("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{ne("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{Lr("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),n._offlineComponents=e}async function cw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await AP(n);ne(us,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>iw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>iw(e.remoteStore,s))),n._onlineComponents=e}async function AP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ne(us,"Using user provided OfflineComponentProvider");try{await Yp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===Y.FAILED_PRECONDITION||s.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Lr("Error using user provided cache. Falling back to memory cache: "+t),await Yp(n,new ju)}}else ne(us,"Using default OfflineComponentProvider"),await Yp(n,new SP(void 0));return n._offlineComponents}async function Cx(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ne(us,"Using user provided OnlineComponentProvider"),await cw(n,n._uninitializedComponentsProvider._online)):(ne(us,"Using default OnlineComponentProvider"),await cw(n,new hh))),n._onlineComponents}function RP(n){return Cx(n).then((e=>e.syncEngine))}async function fh(n){const e=await Cx(n),t=e.eventManager;return t.onListen=fP.bind(null,e.syncEngine),t.onUnlisten=gP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=pP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=yP.bind(null,e.syncEngine),t}function CP(n,e,t={}){const r=new Pr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,d,f,p){const v=new Mg({next:x=>{v.Ou(),l.enqueueAndForget((()=>Ng(a,_)));const S=x.docs.has(d);!S&&x.fromCache?p.reject(new se(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&x.fromCache&&f&&f.source==="server"?p.reject(new se(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(x)},error:x=>p.reject(x)}),_=new Vg(Gu(d.path),v,{includeMetadataChanges:!0,ka:!0});return Pg(a,_)})(await fh(n),n.asyncQueue,e,t,r))),r.promise}function PP(n,e,t={}){const r=new Pr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,d,f,p){const v=new Mg({next:x=>{v.Ou(),l.enqueueAndForget((()=>Ng(a,_))),x.fromCache&&f.source==="server"?p.reject(new se(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(x)},error:x=>p.reject(x)}),_=new Vg(d,v,{includeMetadataChanges:!0,ka:!0});return Pg(a,_)})(await fh(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="firestore.googleapis.com",hw=!0;class fw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new se(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Nx,this.ssl=hw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:hw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ZI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uC)throw new se(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Px((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new se(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new se(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new se(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wh{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new vA;switch(r.type){case"firstParty":return new IA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=dw.get(t);r&&(ne("ComponentProvider","Removing Datastore"),dw.delete(t),r.terminate())})(this),Promise.resolve()}}function NP(n,e,t,r={}){var s;n=nn(n,Wh);const a=Ya(e),l=n._getSettings(),d=Object.assign(Object.assign({},l),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;a&&(vE(`https://${f}`),_E("Firestore",!0)),l.host!==Nx&&l.host!==f&&Lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},l),{host:f,ssl:a,emulatorOptions:r});if(!ss(p,d)&&(n._setSettings(p),r.mockUserToken)){let v,_;if(typeof r.mockUserToken=="string")v=r.mockUserToken,_=Ut.MOCK_USER;else{v=G1(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new se(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Ut(x)}n._authCredentials=new _A(new ME(v,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gi(this.firestore,e,this._query)}}class ft{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}toJSON(){return{type:ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(qu(t,ft._jsonSchema))return new ft(e,r||null,new le($e.fromString(t.referencePath)))}}ft._jsonSchemaVersion="firestore/documentReference/1.0",ft._jsonSchema={type:_t("string",ft._jsonSchemaVersion),referencePath:_t("string")};class rs extends gi{constructor(e,t,r){super(e,t,Gu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new le(e))}withConverter(e){return new rs(this.firestore,e,this._path)}}function kn(n,e,...t){if(n=Et(n),UE("collection","path",e),n instanceof Wh){const r=$e.fromString(e,...t);return r0(r),new rs(n,null,r)}{if(!(n instanceof ft||n instanceof rs))throw new se(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($e.fromString(e,...t));return r0(r),new rs(n.firestore,null,r)}}function cr(n,e,...t){if(n=Et(n),arguments.length===1&&(e=tg.newId()),UE("doc","path",e),n instanceof Wh){const r=$e.fromString(e,...t);return n0(r),new ft(n,null,new le(r))}{if(!(n instanceof ft||n instanceof rs))throw new se(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($e.fromString(e,...t));return n0(r),new ft(n.firestore,n instanceof rs?n.converter:null,new le(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="AsyncQueue";class mw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new fx(this,"async_queue_retry"),this.oc=()=>{const r=zd();r&&ne(pw,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=zd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=zd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Pr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!hs(e))throw e;ne(pw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,tn("INTERNAL UNHANDLED ERROR: ",gw(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=Rg.createAndSchedule(this,e,t,r,(a=>this.lc(a)));return this.ec.push(s),s}ac(){this.tc&&me(47125,{hc:gw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function gw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1})(n,["next","error","complete"])}class jr extends Wh{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new mw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mw(e),this._firestoreClient=void 0,await e}}}function DP(n,e){const t=typeof n=="object"?n:Zm(),r=typeof n=="string"?n:th,s=vo(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=H1("firestore");a&&NP(s,...a)}return s}function Gh(n){if(n._terminated)throw new se(Y.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Dx(n),n._firestoreClient}function Dx(n){var e,t,r;const s=n._freezeSettings(),a=(function(d,f,p,v){return new lR(d,f,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Px(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new bP(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}})(n._componentsProvider))}function VP(n,e){Lr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return OP(n,hh.provider,{build:r=>new kP(r,t.cacheSizeBytes,void 0)}),Promise.resolve()}function OP(n,e,t){if((n=nn(n,jr))._firestoreClient||n._terminated)throw new se(Y.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new se(Y.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Dx(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mn(It.fromBase64String(e))}catch(t){throw new se(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Mn(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Mn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(qu(e,Mn._jsonSchema))return Mn.fromBase64String(e.bytes)}}Mn._jsonSchemaVersion="firestore/bytes/1.0",Mn._jsonSchema={type:_t("string",Mn._jsonSchemaVersion),bytes:_t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Nr._jsonSchemaVersion}}static fromJSON(e){if(qu(e,Nr._jsonSchema))return new Nr(e.latitude,e.longitude)}}Nr._jsonSchemaVersion="firestore/geoPoint/1.0",Nr._jsonSchema={type:_t("string",Nr._jsonSchemaVersion),latitude:_t("number"),longitude:_t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Dr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(qu(e,Dr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Dr(e.vectorValues);throw new se(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Dr._jsonSchemaVersion="firestore/vectorValue/1.0",Dr._jsonSchema={type:_t("string",Dr._jsonSchemaVersion),vectorValues:_t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=/^__.*__$/;class MP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new mi(e,this.data,this.fieldMask,t,this.fieldTransforms):new el(e,this.data,t,this.fieldTransforms)}}class Vx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new mi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ox(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ec:n})}}class jg{constructor(e,t,r,s,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new jg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return ph(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Ox(this.Ec)&&LP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class jP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||qh(e)}Dc(e,t,r,s=!1){return new jg({Ec:e,methodName:t,bc:r,path:ct.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yh(n){const e=n._freezeSettings(),t=qh(n._databaseId);return new jP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Lx(n,e,t,r,s,a={}){const l=n.Dc(a.merge||a.mergeFields?2:0,e,t,s);Ug("Data must be an object, but it was:",l,r);const d=Mx(r,l);let f,p;if(a.merge)f=new fn(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const v=[];for(const _ of a.mergeFields){const x=Dm(e,_,t);if(!l.contains(x))throw new se(Y.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);Fx(v,x)||v.push(x)}f=new fn(v),p=l.fieldTransforms.filter((_=>f.covers(_.field)))}else f=null,p=l.fieldTransforms;return new MP(new Kt(d),f,p)}class Xh extends Qh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xh}}class Fg extends Qh{_toFieldTransform(e){return new CI(e.path,new Fa)}isEqual(e){return e instanceof Fg}}function FP(n,e,t,r){const s=n.Dc(1,e,t);Ug("Data must be an object, but it was:",s,r);const a=[],l=Kt.empty();fs(r,((f,p)=>{const v=Bg(e,f,t);p=Et(p);const _=s.gc(v);if(p instanceof Xh)a.push(v);else{const x=Zu(p,_);x!=null&&(a.push(v),l.set(v,x))}}));const d=new fn(a);return new Vx(l,d,s.fieldTransforms)}function UP(n,e,t,r,s,a){const l=n.Dc(1,e,t),d=[Dm(e,r,t)],f=[s];if(a.length%2!=0)throw new se(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)d.push(Dm(e,a[x])),f.push(a[x+1]);const p=[],v=Kt.empty();for(let x=d.length-1;x>=0;--x)if(!Fx(p,d[x])){const S=d[x];let D=f[x];D=Et(D);const C=l.gc(S);if(D instanceof Xh)p.push(S);else{const O=Zu(D,C);O!=null&&(p.push(S),v.set(S,O))}}const _=new fn(p);return new Vx(v,_,l.fieldTransforms)}function BP(n,e,t,r=!1){return Zu(t,n.Dc(r?4:3,e))}function Zu(n,e){if(jx(n=Et(n)))return Ug("Unsupported field value:",e,n),Mx(n,e);if(n instanceof Qh)return(function(r,s){if(!Ox(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,s){const a=[];let l=0;for(const d of r){let f=Zu(d,s.yc(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=Et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=He.fromDate(r);return{timestampValue:za(s.serializer,a)}}if(r instanceof He){const a=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:za(s.serializer,a)}}if(r instanceof Nr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mn)return{bytesValue:MI(s.serializer,r._byteString)};if(r instanceof ft){const a=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw s.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:yg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Dr)return(function(l,d){return{mapValue:{fields:{[ug]:{stringValue:cg},[Oa]:{arrayValue:{values:l.toArray().map((p=>{if(typeof p!="number")throw d.wc("VectorValues must only contain numeric values.");return hg(d.serializer,p)}))}}}}}})(r,s);throw s.wc(`Unsupported field value: ${Ah(r)}`)})(n,e)}function Mx(n,e){const t={};return nI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fs(n,((r,s)=>{const a=Zu(s,e.Vc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function jx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof He||n instanceof Nr||n instanceof Mn||n instanceof ft||n instanceof Qh||n instanceof Dr)}function Ug(n,e,t){if(!jx(t)||!BE(t)){const r=Ah(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Dm(n,e,t){if((e=Et(e))instanceof Kh)return e._internalPath;if(typeof e=="string")return Bg(n,e);throw ph("Field path arguments must be of type string or ",n,!1,void 0,t)}const zP=new RegExp("[~\\*/\\[\\]]");function Bg(n,e,t){if(e.search(zP)>=0)throw ph(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Kh(...e.split("."))._internalPath}catch{throw ph(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ph(n,e,t,r,s){const a=r&&!r.isEmpty(),l=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${s}`),f+=")"),new se(Y.INVALID_ARGUMENT,d+n+f)}function Fx(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $P(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $P extends Ux{data(){return super.data()}}function Jh(n,e){return typeof e=="string"?Bg(n,e):e instanceof Kh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new se(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zg{}class $g extends zg{}function fr(n,e,...t){let r=[];e instanceof zg&&r.push(e),r=r.concat(t),(function(a){const l=a.filter((f=>f instanceof qg)).length,d=a.filter((f=>f instanceof Zh)).length;if(l>1||l>0&&d>0)throw new se(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Zh extends $g{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Zh(e,t,r)}_apply(e){const t=this._parse(e);return zx(e._query,t),new gi(e.firestore,e.converter,Em(e._query,t))}_parse(e){const t=Yh(e.firestore);return(function(a,l,d,f,p,v,_){let x;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new se(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){_w(_,v);const D=[];for(const C of _)D.push(vw(f,a,C));x={arrayValue:{values:D}}}else x=vw(f,a,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||_w(_,v),x=BP(d,l,_,v==="in"||v==="not-in");return De.create(p,v,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function wt(n,e,t){const r=e,s=Jh("where",n);return Zh._create(s,r,t)}class qg extends zg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qg(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:We.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let l=s;const d=a.getFlattenedFilters();for(const f of d)zx(l,f),l=Em(l,f)})(e._query,t),new gi(e.firestore,e.converter,Em(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hg extends $g{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Hg(e,t)}_apply(e){const t=(function(s,a,l){if(s.startAt!==null)throw new se(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new se(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lu(a,l)})(e._query,this._field,this._direction);return new gi(e.firestore,e.converter,(function(s,a){const l=s.explicitOrderBy.concat([a]);return new Za(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function nl(n,e="asc"){const t=e,r=Jh("orderBy",n);return Hg._create(r,t)}class Wg extends $g{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Wg(e,t,r)}_apply(e){return new gi(e.firestore,e.converter,ih(e._query,this._limit,this._limitType))}}function qP(n){return AA("limit",n),Wg._create("limit",n,"F")}function vw(n,e,t){if(typeof(t=Et(t))=="string"){if(t==="")throw new se(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_I(e)&&t.indexOf("/")!==-1)throw new se(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child($e.fromString(t));if(!le.isDocumentKey(r))throw new se(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vu(n,new le(r))}if(t instanceof ft)return Vu(n,t._key);throw new se(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ah(t)}.`)}function _w(n,e){if(!Array.isArray(n)||n.length===0)throw new se(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zx(n,e){const t=(function(s,a){for(const l of s)for(const d of l.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new se(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class HP{convertValue(e,t="none"){switch(os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return fs(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Oa].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((l=>it(l.doubleValue)));return new Dr(a)}convertGeoPoint(e){return new Nr(it(e.latitude),it(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Vh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nu(e));default:return null}}convertTimestamp(e){const t=di(e);return new He(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=$e.fromString(e);ve(GI(r),9688,{name:e});const s=new oo(r.get(1),r.get(3)),a=new le(r.popFirst(5));return s.isEqual(t)||tn(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class hu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class no extends Ux{constructor(e,t,r,s,a,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $d(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Jh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=no._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}no._jsonSchemaVersion="firestore/documentSnapshot/1.0",no._jsonSchema={type:_t("string",no._jsonSchemaVersion),bundleSource:_t("string","DocumentSnapshot"),bundleName:_t("string"),bundle:_t("string")};class $d extends no{data(e={}){return super.data(e)}}class ro{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new hu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new $d(this._firestore,this._userDataWriter,r.key,r,new hu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((d=>{const f=new $d(s._firestore,s._userDataWriter,d.doc.key,d.doc,new hu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new $d(s._firestore,s._userDataWriter,d.doc.key,d.doc,new hu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,v=-1;return d.type!==0&&(p=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),v=l.indexOf(d.doc.key)),{type:WP(d.type),doc:f,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ro._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function WP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(n){n=nn(n,ft);const e=nn(n.firestore,jr);return CP(Gh(e),n._key).then((t=>Wx(e,n,t)))}ro._jsonSchemaVersion="firestore/querySnapshot/1.0",ro._jsonSchema={type:_t("string",ro._jsonSchemaVersion),bundleSource:_t("string","QuerySnapshot"),bundleName:_t("string"),bundle:_t("string")};class Gg extends HP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,t)}}function yi(n){n=nn(n,gi);const e=nn(n.firestore,jr),t=Gh(e),r=new Gg(e);return Bx(n._query),PP(t,n._query).then((s=>new ro(e,r,n,s)))}function Kg(n,e,t){n=nn(n,ft);const r=nn(n.firestore,jr),s=$x(n.converter,e,t);return ef(r,[Lx(Yh(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Qt.none())])}function GP(n,e,t,...r){n=nn(n,ft);const s=nn(n.firestore,jr),a=Yh(s);let l;return l=typeof(e=Et(e))=="string"||e instanceof Kh?UP(a,"updateDoc",n._key,e,t,r):FP(a,"updateDoc",n._key,e),ef(s,[l.toMutation(n._key,Qt.exists(!0))])}function Qg(n){return ef(nn(n.firestore,jr),[new Fh(n._key,Qt.none())])}function qx(n,e){const t=nn(n.firestore,jr),r=cr(n),s=$x(n.converter,e);return ef(t,[Lx(Yh(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Qt.exists(!1))]).then((()=>r))}function Hx(n,...e){var t,r,s;n=Et(n);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||yw(e[l])||(a=e[l++]);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(yw(e[l])){const _=e[l];e[l]=(t=_.next)===null||t===void 0?void 0:t.bind(_),e[l+1]=(r=_.error)===null||r===void 0?void 0:r.bind(_),e[l+2]=(s=_.complete)===null||s===void 0?void 0:s.bind(_)}let f,p,v;if(n instanceof ft)p=nn(n.firestore,jr),v=Gu(n._key.path),f={next:_=>{e[l]&&e[l](Wx(p,n,_))},error:e[l+1],complete:e[l+2]};else{const _=nn(n,gi);p=nn(_.firestore,jr),v=_._query;const x=new Gg(p);f={next:S=>{e[l]&&e[l](new ro(p,x,_,S))},error:e[l+1],complete:e[l+2]},Bx(n._query)}return(function(x,S,D,C){const O=new Mg(C),K=new Vg(S,O,D);return x.asyncQueue.enqueueAndForget((async()=>Pg(await fh(x),K))),()=>{O.Ou(),x.asyncQueue.enqueueAndForget((async()=>Ng(await fh(x),K)))}})(Gh(p),v,d,f)}function ef(n,e){return(function(r,s){const a=new Pr;return r.asyncQueue.enqueueAndForget((async()=>vP(await RP(r),s,a))),a.promise})(Gh(n),e)}function Wx(n,e,t){const r=t.docs.get(e._key),s=new Gg(n);return new no(n,s,e._key,r,new hu(t.hasPendingWrites,t.fromCache),e.converter)}function Fu(){return new Fg("serverTimestamp")}(function(e,t=!0){(function(s){Ja=s})(Xa),Or(new ur("firestore",((r,{instanceIdentifier:s,options:a})=>{const l=r.getProvider("app").getImmediate(),d=new jr(new wA(r.getProvider("auth-internal")),new xA(l,r.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new se(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oo(p.options.projectId,v)})(l,s),l);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Fn(X_,J_,e),Fn(X_,J_,"esm2017")})();var KP="firebase",QP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fn(KP,QP,"app");function Yg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function Gx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YP=Gx,Kx=new yo("auth","Firebase",Gx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=new bh("@firebase/auth");function XP(n,...e){mh.logLevel<=Ne.WARN&&mh.warn(`Auth (${Xa}): ${n}`,...e)}function qd(n,...e){mh.logLevel<=Ne.ERROR&&mh.error(`Auth (${Xa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(n,...e){throw Jg(n,...e)}function lr(n,...e){return Jg(n,...e)}function Xg(n,e,t){const r=Object.assign(Object.assign({},YP()),{[e]:t});return new yo("auth","Firebase",r).create(e,{appName:n.name})}function io(n){return Xg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function JP(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Fr(n,"argument-error"),Xg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Kx.create(n,...e)}function ke(n,e,...t){if(!n)throw Jg(e,...t)}function oi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw qd(e),new Error(e)}function fi(n,e){n||oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function ZP(){return ww()==="http:"||ww()==="https:"}function ww(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZP()||Ym()||"connection"in navigator)?navigator.onLine:!0}function tN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,t){this.shortDelay=e,this.longDelay=t,fi(t>e,"Short delay should be less than long delay!"),this.isMobile=Y1()||J1()}get(){return eN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(n,e){fi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iN=new ec(3e4,6e4);function ey(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function rl(n,e,t,r,s={}){return Yx(n,s,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const d=$u(Object.assign({key:n.config.apiKey},l)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:f},a);return X1()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Ya(n.emulatorConfig.host)&&(p.credentials="include"),Qx.fetch()(await Xx(n,n.config.apiHost,t,d),p)})}async function Yx(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},nN),e);try{const s=new oN(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Ad(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const d=a.ok?l.errorMessage:l.error.message,[f,p]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ad(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw Ad(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw Ad(n,"user-disabled",l);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Xg(n,v,p);Fr(n,v)}}catch(s){if(s instanceof hr)throw s;Fr(n,"network-request-failed",{message:String(s)})}}async function sN(n,e,t,r,s={}){const a=await rl(n,e,t,r,s);return"mfaPendingCredential"in a&&Fr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function Xx(n,e,t,r){const s=`${e}${t}?${r}`,a=n,l=a.config.emulator?Zg(n.config,s):`${n.config.apiScheme}://${s}`;return rN.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}class oN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(lr(this.auth,"network-request-failed")),iN.get())})}}function Ad(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=lr(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aN(n,e){return rl(n,"POST","/v1/accounts:delete",e)}async function gh(n,e){return rl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lN(n,e=!1){const t=Et(n),r=await t.getIdToken(e),s=ty(r);ke(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Iu(Xp(s.auth_time)),issuedAtTime:Iu(Xp(s.iat)),expirationTime:Iu(Xp(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Xp(n){return Number(n)*1e3}function ty(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return qd("JWT malformed, contained fewer than 3 sections"),null;try{const s=fE(t);return s?JSON.parse(s):(qd("Failed to decode base64 JWT payload"),null)}catch(s){return qd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Ew(n){const e=ty(n);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof hr&&uN(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function uN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iu(this.lastLoginAt),this.creationTime=Iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yh(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Uu(n,gh(t,{idToken:r}));ke(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Jx(a.providerUserInfo):[],d=hN(n.providerData,l),f=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),v=f?p:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Om(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,_)}async function dN(n){const e=Et(n);await yh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hN(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Jx(n){return n.map(e=>{var{providerId:t}=e,r=Yg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fN(n,e){const t=await Yx(n,{},async()=>{const r=$u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,l=await Xx(n,s,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:r};return n.emulatorConfig&&Ya(n.emulatorConfig.host)&&(f.credentials="include"),Qx.fetch()(l,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function pN(n,e){return rl(n,"POST","/v2/accounts:revokeToken",ey(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ew(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=Ew(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await fN(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,l=new ba;return r&&(ke(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(ke(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(ke(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ba,this.toJSON())}_performRefresh(){return oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(n,e){ke(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ar{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=Yg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Om(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Uu(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return lN(this,e)}reload(){return dN(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ar(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await yh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(or(this.auth.app))return Promise.reject(io(this.auth));const e=await this.getIdToken();return await Uu(this,aN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,l,d,f,p,v;const _=(r=t.displayName)!==null&&r!==void 0?r:void 0,x=(s=t.email)!==null&&s!==void 0?s:void 0,S=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,D=(l=t.photoURL)!==null&&l!==void 0?l:void 0,C=(d=t.tenantId)!==null&&d!==void 0?d:void 0,O=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,K=(p=t.createdAt)!==null&&p!==void 0?p:void 0,Q=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:F,emailVerified:re,isAnonymous:ue,providerData:ce,stsTokenManager:P}=t;ke(F&&P,e,"internal-error");const k=ba.fromJSON(this.name,P);ke(typeof F=="string",e,"internal-error"),Wi(_,e.name),Wi(x,e.name),ke(typeof re=="boolean",e,"internal-error"),ke(typeof ue=="boolean",e,"internal-error"),Wi(S,e.name),Wi(D,e.name),Wi(C,e.name),Wi(O,e.name),Wi(K,e.name),Wi(Q,e.name);const A=new ar({uid:F,auth:e,email:x,emailVerified:re,displayName:_,isAnonymous:ue,photoURL:D,phoneNumber:S,tenantId:C,stsTokenManager:k,createdAt:K,lastLoginAt:Q});return ce&&Array.isArray(ce)&&(A.providerData=ce.map(N=>Object.assign({},N))),O&&(A._redirectEventId=O),A}static async _fromIdTokenResponse(e,t,r=!1){const s=new ba;s.updateFromServerResponse(t);const a=new ar({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await yh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];ke(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?Jx(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),d=new ba;d.updateFromIdToken(r);const f=new ar({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Om(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=new Map;function ai(n){fi(n instanceof Function,"Expected a class definition");let e=Iw.get(n);return e?(fi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Iw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Zx.type="NONE";const xw=Zx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(n,e,t){return`firebase:${n}:${e}:${t}`}class Aa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Hd(this.userKey,s.apiKey,a),this.fullPersistenceKey=Hd("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await gh(this.auth,{idToken:e}).catch(()=>{});return t?ar._fromGetAccountInfoResponse(this.auth,t,e):null}return ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Aa(ai(xw),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=s[0]||ai(xw);const l=Hd(r,e.config.apiKey,e.name);let d=null;for(const p of t)try{const v=await p._get(l);if(v){let _;if(typeof v=="string"){const x=await gh(e,{idToken:v}).catch(()=>{});if(!x)break;_=await ar._fromGetAccountInfoResponse(e,x,v)}else _=ar._fromJSON(e,v);p!==a&&(d=_),a=p;break}}catch{}const f=s.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Aa(a,e,r):(a=f[0],d&&await a._set(l,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new Aa(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sT(e))return"Blackberry";if(oT(e))return"Webos";if(tT(e))return"Safari";if((e.includes("chrome/")||nT(e))&&!e.includes("edge/"))return"Chrome";if(iT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function eT(n=At()){return/firefox\//i.test(n)}function tT(n=At()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nT(n=At()){return/crios\//i.test(n)}function rT(n=At()){return/iemobile/i.test(n)}function iT(n=At()){return/android/i.test(n)}function sT(n=At()){return/blackberry/i.test(n)}function oT(n=At()){return/webos/i.test(n)}function ny(n=At()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mN(n=At()){var e;return ny(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gN(){return Z1()&&document.documentMode===10}function aT(n=At()){return ny(n)||iT(n)||oT(n)||sT(n)||/windows phone/i.test(n)||rT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(n,e=[]){let t;switch(n){case"Browser":t=Tw(At());break;case"Worker":t=`${Tw(At())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,d)=>{try{const f=e(a);l(f)}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(n,e={}){return rl(n,"GET","/v2/passwordPolicy",ey(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=6;class wN{constructor(e){var t,r,s,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:_N,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,l,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(l=f.containsNumericCharacter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sw(this),this.idTokenSubscription=new Sw(this),this.beforeStateQueue=new yN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Kx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ai(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await Aa.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await gh(this,{idToken:e}),r=await ar._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(or(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===d)&&(f!=null&&f.user)&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await yh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(or(this.app))return Promise.reject(io(this));const t=e?Et(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return or(this.app)?Promise.reject(io(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return or(this.app)?Promise.reject(io(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vN(this),t=new wN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await pN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ai(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await Aa.create(this,[ai(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(d,this,"internal-error"),d.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&XP(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function tf(n){return Et(n)}class Sw{constructor(e){this.auth=e,this.observer=null,this.addObserver=ib(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ry={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IN(n){ry=n}function xN(n){return ry.loadJS(n)}function TN(){return ry.gapiScript}function SN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(n,e){const t=vo(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(ss(a,e??{}))return s;Fr(s,"already-initialized")}return t.initialize({options:e})}function bN(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ai);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function AN(n,e,t){const r=tf(n);ke(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=uT(e),{host:l,port:d}=RN(e),f=d===null?"":`:${d}`,p={url:`${a}//${l}${f}/`},v=Object.freeze({host:l,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ke(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ke(ss(p,r.config.emulator)&&ss(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Ya(l)?(vE(`${a}//${l}${f}`),_E("Auth",!0)):CN()}function uT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function RN(n){const e=uT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:kw(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:kw(l)}}}function kw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function CN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return oi("not implemented")}_getIdTokenResponse(e){return oi("not implemented")}_linkToIdToken(e,t){return oi("not implemented")}_getReauthenticationResolver(e){return oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(n,e){return sN(n,"POST","/v1/accounts:signInWithIdp",ey(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="http://localhost";class fo extends cT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new fo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=Yg(t,["providerId","signInMethod"]);if(!r||!s)return null;const l=new fo(r,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ra(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ra(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ra(e,t)}buildRequest(){const e={requestUri:PN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$u(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends iy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends tc{constructor(){super("facebook.com")}static credential(e){return fo._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qi.credential(e.oauthAccessToken)}catch{return null}}}Qi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends tc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return fo._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ii.credential(t,r)}catch{return null}}}ii.GOOGLE_SIGN_IN_METHOD="google.com";ii.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends tc{constructor(){super("github.com")}static credential(e){return fo._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.GITHUB_SIGN_IN_METHOD="github.com";Yi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends tc{constructor(){super("twitter.com")}static credential(e,t){return fo._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Xi.credential(t,r)}catch{return null}}}Xi.TWITTER_SIGN_IN_METHOD="twitter.com";Xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await ar._fromIdTokenResponse(e,r,s),l=bw(r);return new Ha({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=bw(r);return new Ha({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function bw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh extends hr{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,vh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new vh(e,t,r,s)}}function dT(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?vh._fromErrorAndOperation(n,a,e,r):a})}async function NN(n,e,t=!1){const r=await Uu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ha._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(n,e,t=!1){const{auth:r}=n;if(or(r.app))return Promise.reject(io(r));const s="reauthenticate";try{const a=await Uu(n,dT(r,s,e,n),t);ke(a.idToken,r,"internal-error");const l=ty(a.idToken);ke(l,r,"internal-error");const{sub:d}=l;return ke(n.uid===d,r,"user-mismatch"),Ha._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Fr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(n,e,t=!1){if(or(n.app))return Promise.reject(io(n));const r="signIn",s=await dT(n,r,e),a=await Ha._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}function ON(n,e,t,r){return Et(n).onIdTokenChanged(e,t,r)}function LN(n,e,t){return Et(n).beforeAuthStateChanged(e,t)}function MN(n,e,t,r){return Et(n).onAuthStateChanged(e,t,r)}function jN(n){return Et(n).signOut()}const _h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_h,"1"),this.storage.removeItem(_h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=1e3,UN=10;class fT extends hT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,d,f)=>{this.notifyListeners(l,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);gN()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,UN):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},FN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fT.type="LOCAL";const BN=fT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT extends hT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}pT.type="SESSION";const mT=pT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new nf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const d=Array.from(l).map(async p=>p(t.origin,a)),f=await zN(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((d,f)=>{const p=sy("",20);s.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(_){const x=_;if(x.data.eventId===p)switch(x.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(x.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(){return window}function qN(n){Vr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(){return typeof Vr().WorkerGlobalScope<"u"&&typeof Vr().importScripts=="function"}async function HN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WN(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function GN(){return gT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="firebaseLocalStorageDb",KN=1,wh="firebaseLocalStorage",vT="fbase_key";class nc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function rf(n,e){return n.transaction([wh],e?"readwrite":"readonly").objectStore(wh)}function QN(){const n=indexedDB.deleteDatabase(yT);return new nc(n).toPromise()}function Lm(){const n=indexedDB.open(yT,KN);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(wh,{keyPath:vT})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(wh)?e(r):(r.close(),await QN(),e(await Lm()))})})}async function Aw(n,e,t){const r=rf(n,!0).put({[vT]:e,value:t});return new nc(r).toPromise()}async function YN(n,e){const t=rf(n,!1).get(e),r=await new nc(t).toPromise();return r===void 0?null:r.value}function Rw(n,e){const t=rf(n,!0).delete(e);return new nc(t).toPromise()}const XN=800,JN=3;class _T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>JN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nf._getInstance(GN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await HN(),!this.activeServiceWorker)return;this.sender=new $N(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lm();return await Aw(e,_h,"1"),await Rw(e,_h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Aw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>YN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Rw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=rf(s,!1).getAll();return new nc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_T.type="LOCAL";const ZN=_T;new ec(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(n,e){return e?ai(e):(ke(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy extends cT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ra(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ra(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ra(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eD(n){return VN(n.auth,new oy(n),n.bypassAuthState)}function tD(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),DN(t,new oy(n),n.bypassAuthState)}async function nD(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),NN(t,new oy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:l,type:d}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eD;case"linkViaPopup":case"linkViaRedirect":return nD;case"reauthViaPopup":case"reauthViaRedirect":return tD;default:Fr(this.auth,"internal-error")}}resolve(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=new ec(2e3,1e4);async function iD(n,e,t){if(or(n.app))return Promise.reject(lr(n,"operation-not-supported-in-this-environment"));const r=tf(n);JP(n,e,iy);const s=wT(r,t);return new Xs(r,"signInViaPopup",e,s).executeNotNull()}class Xs extends ET{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Xs.currentPopupAction&&Xs.currentPopupAction.cancel(),Xs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){fi(this.filter.length===1,"Popup operations only handle one event");const e=sy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rD.get())};e()}}Xs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="pendingRedirect",Wd=new Map;class oD extends ET{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Wd.get(this.auth._key());if(!e){try{const r=await aD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Wd.set(this.auth._key(),e)}return this.bypassAuthState||Wd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aD(n,e){const t=cD(e),r=uD(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function lD(n,e){Wd.set(n._key(),e)}function uD(n){return ai(n._redirectPersistence)}function cD(n){return Hd(sD,n.config.apiKey,n.name)}async function dD(n,e,t=!1){if(or(n.app))return Promise.reject(io(n));const r=tf(n),s=wT(r,e),l=await new oD(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=600*1e3;class fD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!IT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(lr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cw(e))}saveEventToCache(e){this.cachedEventUids.add(Cw(e)),this.lastProcessedEventTime=Date.now()}}function Cw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function IT({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mD(n,e={}){return rl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yD=/^https?/;async function vD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await mD(n);for(const t of e)try{if(_D(t))return}catch{}Fr(n,"unauthorized-domain")}function _D(n){const e=Vm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!yD.test(t))return!1;if(gD.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=new ec(3e4,6e4);function Pw(){const n=Vr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function ED(n){return new Promise((e,t)=>{var r,s,a;function l(){Pw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Pw(),t(lr(n,"network-request-failed"))},timeout:wD.get()})}if(!((s=(r=Vr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Vr().gapi)===null||a===void 0)&&a.load)l();else{const d=SN("iframefcb");return Vr()[d]=()=>{gapi.load?l():t(lr(n,"network-request-failed"))},xN(`${TN()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw Gd=null,e})}let Gd=null;function ID(n){return Gd=Gd||ED(n),Gd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=new ec(5e3,15e3),TD="__/auth/iframe",SD="emulator/auth/iframe",kD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AD(n){const e=n.config;ke(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Zg(e,SD):`https://${n.config.authDomain}/${TD}`,r={apiKey:e.apiKey,appName:n.name,v:Xa},s=bD.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${$u(r).slice(1)}`}async function RD(n){const e=await ID(n),t=Vr().gapi;return ke(t,n,"internal-error"),e.open({where:document.body,url:AD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kD,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const l=lr(n,"network-request-failed"),d=Vr().setTimeout(()=>{a(l)},xD.get());function f(){Vr().clearTimeout(d),s(r)}r.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PD=500,ND=600,DD="_blank",VD="http://localhost";class Nw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OD(n,e,t,r=PD,s=ND){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},CD),{width:r.toString(),height:s.toString(),top:a,left:l}),p=At().toLowerCase();t&&(d=nT(p)?DD:t),eT(p)&&(e=e||VD,f.scrollbars="yes");const v=Object.entries(f).reduce((x,[S,D])=>`${x}${S}=${D},`,"");if(mN(p)&&d!=="_self")return LD(e||"",d),new Nw(null);const _=window.open(e||"",d,v);ke(_,n,"popup-blocked");try{_.focus()}catch{}return new Nw(_)}function LD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD="__/auth/handler",jD="emulator/auth/handler",FD=encodeURIComponent("fac");async function Dw(n,e,t,r,s,a){ke(n.config.authDomain,n,"auth-domain-config-required"),ke(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Xa,eventId:s};if(e instanceof iy){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",rb(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))l[v]=_}if(e instanceof tc){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(l.scopes=v.join(","))}n.tenantId&&(l.tid=n.tenantId);const d=l;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const f=await n._getAppCheckToken(),p=f?`#${FD}=${encodeURIComponent(f)}`:"";return`${UD(n)}?${$u(d).slice(1)}${p}`}function UD({config:n}){return n.emulator?Zg(n,jD):`https://${n.authDomain}/${MD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="webStorageSupport";class BD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mT,this._completeRedirectFn=dD,this._overrideRedirectResult=lD}async _openPopup(e,t,r,s){var a;fi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await Dw(e,t,r,Vm(),s);return OD(e,l,sy())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await Dw(e,t,r,Vm(),s);return qN(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(fi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await RD(e),r=new fD(e);return t.register("authEvent",s=>(ke(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Jp,{type:Jp},s=>{var a;const l=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Jp];l!==void 0&&t(!!l),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return aT()||tT()||ny()}}const zD=BD;var Vw="@firebase/auth",Ow="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HD(n){Or(new ur("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=r.options;ke(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lT(n)},p=new EN(r,s,a,f);return bN(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Or(new ur("auth-internal",e=>{const t=tf(e.getProvider("auth").getImmediate());return(r=>new $D(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fn(Vw,Ow,qD(n)),Fn(Vw,Ow,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=300,GD=yE("authIdTokenMaxAge")||WD;let Lw=null;const KD=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>GD)return;const s=t==null?void 0:t.token;Lw!==s&&(Lw=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function QD(n=Zm()){const e=vo(n,"auth");if(e.isInitialized())return e.getImmediate();const t=kN(n,{popupRedirectResolver:zD,persistence:[ZN,BN,mT]}),r=yE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=KD(a.toString());LN(t,l,()=>l(t.currentUser)),ON(t,d=>l(d))}}const s=mE("auth");return s&&AN(t,`http://${s}`),t}function YD(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}IN({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=lr("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",YD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HD("Browser");const xT="@firebase/installations",ay="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=1e4,ST=`w:${ay}`,kT="FIS_v2",XD="https://firebaseinstallations.googleapis.com/v1",JD=3600*1e3,ZD="installations",e2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},po=new yo(ZD,e2,t2);function bT(n){return n instanceof hr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT({projectId:n}){return`${XD}/projects/${n}/installations`}function RT(n){return{token:n.token,requestStatus:2,expiresIn:r2(n.expiresIn),creationTime:Date.now()}}async function CT(n,e){const r=(await e.json()).error;return po.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function PT({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function n2(n,{refreshToken:e}){const t=PT(n);return t.append("Authorization",i2(e)),t}async function NT(n){const e=await n();return e.status>=500&&e.status<600?n():e}function r2(n){return Number(n.replace("s","000"))}function i2(n){return`${kT} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s2({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=AT(n),s=PT(n),a=e.getImmediate({optional:!0});if(a){const p=await a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={fid:t,authVersion:kT,appId:n.appId,sdkVersion:ST},d={method:"POST",headers:s,body:JSON.stringify(l)},f=await NT(()=>fetch(r,d));if(f.ok){const p=await f.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:RT(p.authToken)}}else throw await CT("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=/^[cdef][\w-]{21}$/,Mm="";function l2(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=u2(n);return a2.test(t)?t:Mm}catch{return Mm}}function u2(n){return o2(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=new Map;function OT(n,e){const t=sf(n);LT(t,e),c2(t,e)}function LT(n,e){const t=VT.get(n);if(t)for(const r of t)r(e)}function c2(n,e){const t=d2();t&&t.postMessage({key:n,fid:e}),h2()}let Js=null;function d2(){return!Js&&"BroadcastChannel"in self&&(Js=new BroadcastChannel("[Firebase] FID Change"),Js.onmessage=n=>{LT(n.data.key,n.data.fid)}),Js}function h2(){VT.size===0&&Js&&(Js.close(),Js=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="firebase-installations-database",p2=1,mo="firebase-installations-store";let Zp=null;function ly(){return Zp||(Zp=kE(f2,p2,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(mo)}}})),Zp}async function Eh(n,e){const t=sf(n),s=(await ly()).transaction(mo,"readwrite"),a=s.objectStore(mo),l=await a.get(t);return await a.put(e,t),await s.done,(!l||l.fid!==e.fid)&&OT(n,e.fid),e}async function MT(n){const e=sf(n),r=(await ly()).transaction(mo,"readwrite");await r.objectStore(mo).delete(e),await r.done}async function of(n,e){const t=sf(n),s=(await ly()).transaction(mo,"readwrite"),a=s.objectStore(mo),l=await a.get(t),d=e(l);return d===void 0?await a.delete(t):await a.put(d,t),await s.done,d&&(!l||l.fid!==d.fid)&&OT(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uy(n){let e;const t=await of(n.appConfig,r=>{const s=m2(r),a=g2(n,s);return e=a.registrationPromise,a.installationEntry});return t.fid===Mm?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function m2(n){const e=n||{fid:l2(),registrationStatus:0};return jT(e)}function g2(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(po.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=y2(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:v2(n)}:{installationEntry:e}}async function y2(n,e){try{const t=await s2(n,e);return Eh(n.appConfig,t)}catch(t){throw bT(t)&&t.customData.serverCode===409?await MT(n.appConfig):await Eh(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function v2(n){let e=await Mw(n.appConfig);for(;e.registrationStatus===1;)await DT(100),e=await Mw(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await uy(n);return r||t}return e}function Mw(n){return of(n,e=>{if(!e)throw po.create("installation-not-found");return jT(e)})}function jT(n){return _2(n)?{fid:n.fid,registrationStatus:0}:n}function _2(n){return n.registrationStatus===1&&n.registrationTime+TT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w2({appConfig:n,heartbeatServiceProvider:e},t){const r=E2(n,t),s=n2(n,t),a=e.getImmediate({optional:!0});if(a){const p=await a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={installation:{sdkVersion:ST,appId:n.appId}},d={method:"POST",headers:s,body:JSON.stringify(l)},f=await NT(()=>fetch(r,d));if(f.ok){const p=await f.json();return RT(p)}else throw await CT("Generate Auth Token",f)}function E2(n,{fid:e}){return`${AT(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cy(n,e=!1){let t;const r=await of(n.appConfig,a=>{if(!FT(a))throw po.create("not-registered");const l=a.authToken;if(!e&&T2(l))return a;if(l.requestStatus===1)return t=I2(n,e),a;{if(!navigator.onLine)throw po.create("app-offline");const d=k2(a);return t=x2(n,d),d}});return t?await t:r.authToken}async function I2(n,e){let t=await jw(n.appConfig);for(;t.authToken.requestStatus===1;)await DT(100),t=await jw(n.appConfig);const r=t.authToken;return r.requestStatus===0?cy(n,e):r}function jw(n){return of(n,e=>{if(!FT(e))throw po.create("not-registered");const t=e.authToken;return b2(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function x2(n,e){try{const t=await w2(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Eh(n.appConfig,r),t}catch(t){if(bT(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await MT(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Eh(n.appConfig,r)}throw t}}function FT(n){return n!==void 0&&n.registrationStatus===2}function T2(n){return n.requestStatus===2&&!S2(n)}function S2(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+JD}function k2(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function b2(n){return n.requestStatus===1&&n.requestTime+TT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2(n){const e=n,{installationEntry:t,registrationPromise:r}=await uy(e);return r?r.catch(console.error):cy(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R2(n,e=!1){const t=n;return await C2(t),(await cy(t,e)).token}async function C2(n){const{registrationPromise:e}=await uy(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(n){if(!n||!n.options)throw em("App Configuration");if(!n.name)throw em("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw em(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function em(n){return po.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="installations",N2="installations-internal",D2=n=>{const e=n.getProvider("app").getImmediate(),t=P2(e),r=vo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},V2=n=>{const e=n.getProvider("app").getImmediate(),t=vo(e,UT).getImmediate();return{getId:()=>A2(t),getToken:s=>R2(t,s)}};function O2(){Or(new ur(UT,D2,"PUBLIC")),Or(new ur(N2,V2,"PRIVATE"))}O2();Fn(xT,ay);Fn(xT,ay,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih="analytics",L2="firebase_id",M2="origin",j2=60*1e3,F2="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",dy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn=new bh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Tn=new yo("analytics","Analytics",U2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(n){if(!n.startsWith(dy)){const e=Tn.create("invalid-gtag-resource",{gtagURL:n});return pn.warn(e.message),""}return n}function BT(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function z2(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function $2(n,e){const t=z2("firebase-js-sdk-policy",{createScriptURL:B2}),r=document.createElement("script"),s=`${dy}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function q2(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function H2(n,e,t,r,s,a){const l=r[s];try{if(l)await e[l];else{const f=(await BT(t)).find(p=>p.measurementId===s);f&&await e[f.appId]}}catch(d){pn.error(d)}n("config",s,a)}async function W2(n,e,t,r,s){try{let a=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const d=await BT(t);for(const f of l){const p=d.find(_=>_.measurementId===f),v=p&&e[p.appId];if(v)a.push(v);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,s||{})}catch(a){pn.error(a)}}function G2(n,e,t,r){async function s(a,...l){try{if(a==="event"){const[d,f]=l;await W2(n,e,t,d,f)}else if(a==="config"){const[d,f]=l;await H2(n,e,t,r,d,f)}else if(a==="consent"){const[d,f]=l;n("consent",d,f)}else if(a==="get"){const[d,f,p]=l;n("get",d,f,p)}else if(a==="set"){const[d]=l;n("set",d)}else n(a,...l)}catch(d){pn.error(d)}}return s}function K2(n,e,t,r,s){let a=function(...l){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=G2(a,n,e,t),{gtagCore:a,wrappedGtag:window[s]}}function Q2(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(dy)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=30,X2=1e3;class J2{constructor(e={},t=X2){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const zT=new J2;function Z2(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function eV(n){var e;const{appId:t,apiKey:r}=n,s={method:"GET",headers:Z2(r)},a=F2.replace("{app-id}",t),l=await fetch(a,s);if(l.status!==200&&l.status!==304){let d="";try{const f=await l.json();!((e=f.error)===null||e===void 0)&&e.message&&(d=f.error.message)}catch{}throw Tn.create("config-fetch-failed",{httpStatus:l.status,responseMessage:d})}return l.json()}async function tV(n,e=zT,t){const{appId:r,apiKey:s,measurementId:a}=n.options;if(!r)throw Tn.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:r};throw Tn.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new iV;return setTimeout(async()=>{d.abort()},j2),$T({appId:r,apiKey:s,measurementId:a},l,d,e)}async function $T(n,{throttleEndTimeMillis:e,backoffCount:t},r,s=zT){var a;const{appId:l,measurementId:d}=n;try{await nV(r,e)}catch(f){if(d)return pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:l,measurementId:d};throw f}try{const f=await eV(n);return s.deleteThrottleMetadata(l),f}catch(f){const p=f;if(!rV(p)){if(s.deleteThrottleMetadata(l),d)return pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:l,measurementId:d};throw f}const v=Number((a=p==null?void 0:p.customData)===null||a===void 0?void 0:a.httpStatus)===503?B_(t,s.intervalMillis,Y2):B_(t,s.intervalMillis),_={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return s.setThrottleMetadata(l,_),pn.debug(`Calling attemptFetch again in ${v} millis`),$T(n,_,r,s)}}function nV(n,e){return new Promise((t,r)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(a),r(Tn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function rV(n){if(!(n instanceof hr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class iV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function sV(n,e,t,r,s){if(s&&s.global){n("event",t,r);return}else{const a=await e,l=Object.assign(Object.assign({},r),{send_to:a});n("event",t,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oV(){if(kh())try{await Xm()}catch(n){return pn.warn(Tn.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return pn.warn(Tn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function aV(n,e,t,r,s,a,l){var d;const f=tV(n);f.then(S=>{t[S.measurementId]=S.appId,n.options.measurementId&&S.measurementId!==n.options.measurementId&&pn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>pn.error(S)),e.push(f);const p=oV().then(S=>{if(S)return r.getId()}),[v,_]=await Promise.all([f,p]);Q2(a)||$2(a,v.measurementId),s("js",new Date);const x=(d=l==null?void 0:l.config)!==null&&d!==void 0?d:{};return x[M2]="firebase",x.update=!0,_!=null&&(x[L2]=_),s("config",v.measurementId,x),v.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e){this.app=e}_delete(){return delete xu[this.app.options.appId],Promise.resolve()}}let xu={},Fw=[];const Uw={};let tm="dataLayer",uV="gtag",Bw,qT,zw=!1;function cV(){const n=[];if(Ym()&&n.push("This is a browser extension environment."),xE()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),t=Tn.create("invalid-analytics-context",{errorInfo:e});pn.warn(t.message)}}function dV(n,e,t){cV();const r=n.options.appId;if(!r)throw Tn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Tn.create("no-api-key");if(xu[r]!=null)throw Tn.create("already-exists",{id:r});if(!zw){q2(tm);const{wrappedGtag:a,gtagCore:l}=K2(xu,Fw,Uw,tm,uV);qT=a,Bw=l,zw=!0}return xu[r]=aV(n,Fw,Uw,e,Bw,tm,t),new lV(n)}function hV(n=Zm()){n=Et(n);const e=vo(n,Ih);return e.isInitialized()?e.getImmediate():fV(n)}function fV(n,e={}){const t=vo(n,Ih);if(t.isInitialized()){const s=t.getImmediate();if(ss(e,t.getOptions()))return s;throw Tn.create("already-initialized")}return t.initialize({options:e})}async function pV(){if(Ym()||!xE()||!kh())return!1;try{return await Xm()}catch{return!1}}function mV(n,e,t,r){n=Et(n),sV(qT,xu[n.app.options.appId],e,t,r).catch(s=>pn.error(s))}const $w="@firebase/analytics",qw="0.10.17";function gV(){Or(new ur(Ih,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return dV(r,s,t)},"PUBLIC")),Or(new ur("analytics-internal",n,"PRIVATE")),Fn($w,qw),Fn($w,qw,"esm2017");function n(e){try{const t=e.getProvider(Ih).getImmediate();return{logEvent:(r,s,a)=>mV(t,r,s,a)}}catch(t){throw Tn.create("interop-component-reg-failed",{reason:t})}}}gV();const yV={apiKey:"AIzaSyD2bnfNTNjJ4XyVFlM_1PzvGMmnc69VqX8",authDomain:"habit-tracker-pwa-e5a97.firebaseapp.com",projectId:"habit-tracker-pwa-e5a97",storageBucket:"habit-tracker-pwa-e5a97.firebasestorage.app",messagingSenderId:"600484609036",appId:"1:600484609036:web:0650ca5337d57f1b02c229",measurementId:"G-M990KPRLXC"},hy=bE(yV);pV().then(n=>{n&&hV(hy)});const fy=QD(hy),ot=DP(hy);VP(ot).catch(n=>{n.code=="failed-precondition"?console.warn("Persistence failed: Multiple tabs open"):n.code=="unimplemented"&&console.warn("Persistence failed: Browser not supported")});const il="habits";async function vV(n,e){try{const t=kn(ot,il);return{id:(await qx(t,{...e,userId:n,currentStreak:0,createdAt:Fu(),updatedAt:Fu()})).id,...e,userId:n,currentStreak:0}}catch(t){throw console.error("Error creating habit:",t),t}}async function _V(n){try{const e=kn(ot,il),t=fr(e,wt("userId","==",n),nl("createdAt","desc"));return(await yi(t)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){throw console.error("Error getting habits:",e),e}}async function Rd(n,e){try{const t=cr(ot,il,n);return await GP(t,{...e,updatedAt:Fu()}),{id:n,...e}}catch(t){throw console.error("Error updating habit:",t),t}}async function wV(n){try{const e=cr(ot,il,n);return await Qg(e),n}catch(e){throw console.error("Error deleting habit:",e),e}}function EV(n,e){const t=kn(ot,il),r=fr(t,wt("userId","==",n),nl("createdAt","desc"));return Hx(r,s=>{const a=s.docs.map(l=>({id:l.id,...l.data()}));e(a)},s=>{console.error("Error in habits subscription:",s)})}async function IV(n){try{const e=kn(ot,il),t=fr(e,wt("userId","==",n),wt("isPublic","==",!0),nl("createdAt","desc"));return(await yi(t)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){throw console.error("Error getting user public habits:",e),e}}function kr(n){const e=new Date(n),t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${s}`}function Hw(n=new Date){const e=new Date(n);e.setDate(e.getDate()-e.getDay()),e.setHours(0,0,0,0);const t=new Date(e);return t.setDate(t.getDate()+6),t.setHours(23,59,59,999),{start:e,end:t}}const sl="completions";async function jm(n,e,t,r=!0){try{const s=kn(ot,sl);return{id:(await qx(s,{habitId:n,userId:e,date:t,value:r,type:"completion",timestamp:Fu()})).id,habitId:n,userId:e,date:t,value:r}}catch(s){throw console.error("Error adding completion:",s),s}}async function HT(n,e,t){try{const r=kn(ot,sl),s=fr(r,wt("habitId","==",n),wt("userId","==",e),wt("date","==",t)),l=(await yi(s)).docs.map(d=>Qg(d.ref));return await Promise.all(l),{habitId:n,userId:e,date:t}}catch(r){throw console.error("Error removing completion:",r),r}}async function xV(n,e,t,r=!0){try{const s=kn(ot,sl),a=fr(s,wt("habitId","==",n),wt("userId","==",e),wt("date","==",t));return(await yi(a)).empty?await jm(n,e,t,r):(await HT(n,e,t),null)}catch(s){throw console.error("Error toggling completion:",s),s}}async function TV(n,e,t,r){try{if(r<=0)return await HT(n,e,t),null;const s=kn(ot,sl),a=fr(s,wt("habitId","==",n),wt("userId","==",e),wt("date","==",t)),l=await yi(a);if(l.empty)return await jm(n,e,t,r);{const d=l.docs[0].ref;return await Qg(d),await jm(n,e,t,r)}}catch(s){throw console.error("Error updating completion value:",s),s}}async function Ww(n,e){try{const t=kn(ot,sl),r=fr(t,wt("userId","==",n),wt("date","==",e));return(await yi(r)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Error getting completions:",t),t}}async function SV(n,e,t){try{const r=kn(ot,sl),s=fr(r,wt("userId","==",n),wt("date",">=",e),wt("date","<=",t));return(await yi(s)).docs.map(l=>({id:l.id,...l.data()}))}catch(r){throw console.error("Error getting completions range:",r),r}}const py="weeklyStats",WT="users";function rc(n=new Date){const e=new Date(n);e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);const t=new Date(e.getFullYear(),0,4),r=Math.ceil(((e.getTime()-t.getTime())/864e5+t.getDay()+1)/7);return`${e.getFullYear()}-W${String(r).padStart(2,"0")}`}async function kV(n,e,t){try{const r=rc(),s=e>0?Math.round(t/e*100):0,a=cr(ot,py,`${r}_${n}`);return await Kg(a,{weekId:r,userId:n,totalScheduled:e,totalCompleted:t,percentage:s,lastUpdated:new Date().toISOString()},{merge:!0}),{weekId:r,userId:n,percentage:s}}catch(r){throw console.error("Error updating weekly stats:",r),r}}async function bV(n=null){try{const e=n||rc(),t=kn(ot,py),r=fr(t,wt("weekId","==",e),nl("percentage","desc")),a=(await yi(r)).docs.map(d=>({id:d.id,...d.data()}));return await Promise.all(a.map(async(d,f)=>{try{const p=cr(ot,WT,d.userId),v=await qa(p),_=v.exists()?v.data():{};return{...d,rank:f+1,displayName:_.displayName||"Anonymous",photoURL:_.photoURL||null,email:_.email||null}}catch{return{...d,rank:f+1,displayName:"Anonymous",photoURL:null}}}))}catch(e){throw console.error("Error getting leaderboard:",e),e}}async function AV(n,e=null){try{const t=await bV(e);return t.find(s=>s.userId===n)||{rank:t.length+1,percentage:0}}catch(t){return console.error("Error getting user rank:",t),{rank:0,percentage:0}}}function RV(){const n=new Date;return n.setDate(n.getDate()-7),rc(n)}function CV(n,e){const t=n||rc(),r=kn(ot,py),s=fr(r,wt("weekId","==",t),nl("percentage","desc"));return Hx(s,async a=>{const l=a.docs.map(f=>({id:f.id,...f.data()})),d=await Promise.all(l.map(async(f,p)=>{try{const v=cr(ot,WT,f.userId),_=await qa(v),x=_.exists()?_.data():{};return{...f,rank:p+1,displayName:x.displayName||"Anonymous",photoURL:x.photoURL||null}}catch{return{...f,rank:p+1,displayName:"Anonymous",photoURL:null}}}));e(d)},a=>{console.error("Error in leaderboard subscription:",a)})}const cs=Qm((n,e)=>({habits:[],completions:{},isLoading:!1,error:null,setHabits:t=>n({habits:t}),setLoading:t=>n({isLoading:t}),setError:t=>n({error:t}),addHabit:async(t,r)=>{const s="temp_"+Date.now(),a={id:s,...r,userId:t,currentStreak:0,createdAt:new Date,updatedAt:new Date,isTemp:!0};return n(l=>({habits:[a,...l.habits],isLoading:!1})),vV(t,r).then(l=>{n(d=>({habits:d.habits.map(f=>f.id===s?l:f)}))}).catch(l=>{console.error("Background create failed:",l),n(d=>({error:"Failed to sync new habit. It may disappear on reload.",habits:d.habits.map(f=>f.id===s?{...f,syncError:!0}:f)}))}),a},updateHabit:async(t,r)=>{n(s=>({habits:s.habits.map(a=>a.id===t?{...a,...r}:a)}));try{await Rd(t,r)}catch(s){console.error("Error in updateHabit:",s),n({error:s.message})}},deleteHabit:async t=>{n(r=>({habits:r.habits.filter(s=>s.id!==t)}));try{await wV(t)}catch(r){console.error("Error in deleteHabit:",r)}},loadHabits:async t=>{n({isLoading:!0,error:null});try{const r=await _V(t);return n({habits:r,isLoading:!1}),r}catch(r){throw console.error("Error in loadHabits:",r),n({error:r.message,isLoading:!1,habits:[]}),r}},checkStreaks:async t=>{const{habits:r}=e();if(r.length===0)return;const s=new Date,a=new Date(s);a.setDate(a.getDate()-1);const l=kr(a);let d={};try{(await Ww(t,l)).forEach(p=>{d[p.habitId]=p})}catch(f){console.warn("Failed to fetch yesterday's completions for streak check",f);return}r.forEach(f=>{if(f.currentStreak>0){let p=!1;if(f.frequency==="daily"){const v=d[f.id];let _=!1;v&&(f.completionType==="numerical"?_=(v.value||0)>=(f.targetValue||1):_=!0),_||(p=!0)}f.frequency==="one-time"&&(p=!0),p&&(console.log(`Resetting streak for habit ${f.title} (Missed yesterday)`),n(v=>({habits:v.habits.map(_=>_.id===f.id?{..._,currentStreak:0}:_)})),Rd(f.id,{currentStreak:0}).catch(console.error))}})},subscribeToHabits:t=>(e().habits.length===0&&n({isLoading:!0}),EV(t,r=>{n({habits:r,isLoading:!1})})),setCompletions:(t,r)=>n(s=>({completions:{...s.completions,[t]:r}})),loadCompletionsForWeek:async t=>{try{const{start:r,end:s}=Hw(new Date),a=kr(s),l=kr(r),d=await SV(t,l,a),f={};return d.forEach(p=>{f[p.date]||(f[p.date]=[]),f[p.date].push(p)}),n(p=>({completions:{...p.completions,...f}})),f}catch(r){return console.error("Error loading completions:",r),{}}},loadCompletionsForDate:async(t,r)=>{try{const s=await Ww(t,r);return n(a=>({completions:{...a.completions,[r]:s}})),s}catch(s){return console.error("Error loading completions:",s),[]}},toggleCompletion:async(t,r,s)=>{const{completions:a,habits:l}=e(),d=a[s]||[],f=l.find(S=>S.id===t),p=kr(new Date);if(s>p){console.warn("Cannot mark future habits as done");return}if(s<p){console.warn("Cannot modify past habits");return}const _=!d.find(S=>S.habitId===t);let x;if(_?x=[...d,{habitId:t,userId:r,date:s,value:!0,isOptimistic:!0}]:x=d.filter(S=>S.habitId!==t),n(S=>({completions:{...S.completions,[s]:x}})),f){let S=f.currentStreak;_?S=(f.currentStreak||0)+1:S=Math.max(0,(f.currentStreak||0)-1),n(D=>({habits:D.habits.map(C=>C.id===t?{...C,currentStreak:S,lastCompletedDate:_?s:C.lastCompletedDate}:C)})),Rd(t,{currentStreak:S,lastCompletedDate:_?s:f.lastCompletedDate||null}).catch(D=>console.error("Background streak update failed:",D))}try{const{start:S,end:D}=Hw(new Date);let C=0,O=0;const K=new Date(S),Q=e().completions;for(;K<=D;){const F=kr(K),re=e().getTodaysHabits(K);C+=re.length;const ue=Q[F]||[];O+=ue.length,K.setDate(K.getDate()+1)}kV(r,C,O).catch(F=>console.error("Background leaderboard update failed:",F))}catch(S){console.error("Error updating weekly stats:",S)}try{await xV(t,r,s,_)}catch(S){throw console.error("Error toggling completion in Firestore:",S),S}},updateHabitProgress:async(t,r,s,a)=>{const{completions:l,habits:d}=e(),f=l[s]||[],p=d.find(C=>C.id===t),v=kr(new Date);if(s>v)return;if(s<v){console.warn("Cannot modify past habits");return}const _=f.find(C=>C.habitId===t),x=_&&(_.value||0)>=(p.targetValue||1),S=a>=(p.targetValue||1);let D;if(a>0?_?D=f.map(C=>C.habitId===t?{...C,value:a}:C):D=[...f,{habitId:t,userId:r,date:s,value:a,isOptimistic:!0}]:D=f.filter(C=>C.habitId!==t),n(C=>({completions:{...C.completions,[s]:D}})),p&&x!==S){let C=p.currentStreak||0;S?C=C+1:C=Math.max(0,C-1),n(O=>({habits:O.habits.map(K=>K.id===t?{...K,currentStreak:C,lastCompletedDate:S?s:K.lastCompletedDate}:K)})),Rd(t,{currentStreak:C,lastCompletedDate:S?s:p.lastCompletedDate||null}).catch(O=>console.error("Background streak update failed:",O))}try{await TV(t,r,s,a)}catch(C){console.error("Error updating progress:",C)}},isHabitCompleted:(t,r)=>{const{completions:s,habits:a}=e(),d=(s[r]||[]).find(p=>p.habitId===t),f=a.find(p=>p.id===t);return d?(f==null?void 0:f.completionType)==="numerical"&&f.targetValue?(d.value||0)>=f.targetValue:!0:!1},getHabitValue:(t,r)=>{const{completions:s}=e(),l=(s[r]||[]).find(d=>d.habitId===t);return(l==null?void 0:l.value)||0},getTodaysHabits:(t=null)=>{const{habits:r}=e(),s=t?new Date(t):new Date,a=s.getDay();return r.filter(l=>{var d,f;if(l.frequency==="daily")return!0;if(l.frequency==="custom"&&l.customDays)return l.customDays.includes(a);if(l.frequency==="one-time"){const p=kr(s);return l.targetDate===p}return l.frequency==="weekly"?(((f=(d=l.createdAt)==null?void 0:d.toDate)==null?void 0:f.call(d))||new Date(l.createdAt)).getDay()===a:!1})},getStatsForDate:t=>{const{completions:r,habits:s}=e(),a=e().getTodaysHabits(t),l=typeof t=="string"?t:kr(t),d=r[l]||[],f=a.reduce((_,x)=>{const S=d.find(D=>D.habitId===x.id);if(!S)return _;if(x.completionType==="numerical"&&x.targetValue){if((S.value||0)>=x.targetValue)return _+1}else return _+1;return _},0),p=a.length,v=p>0?Math.round(f/p*100):0;return{completed:f,total:p,percentage:v}},clearAll:()=>n({habits:[],completions:{},isLoading:!1,error:null})}));async function PV(){return"Notification"in window?Notification.permission==="granted"?!0:Notification.permission!=="denied"?await Notification.requestPermission()==="granted":!1:(console.warn("This browser does not support desktop notification"),!1)}async function GT(n,e,t="/pwa-192x192.png"){if(Notification.permission==="granted")try{await(await navigator.serviceWorker.ready).showNotification(n,{body:e,icon:t,badge:"/pwa-192x192.png",vibrate:[100,50,100],tag:n,data:{url:"/"}})}catch(r){console.warn("SW notification failed, falling back to constructor",r);const s=new Notification(n,{body:e,icon:t,badge:"/pwa-192x192.png",vibrate:[100,50,100],tag:n});s.onclick=function(a){a.preventDefault(),window.focus(),s.close()}}}function Gw(){NV(),DV()}function NV(){const n=JSON.parse(localStorage.getItem("habitParams"))||{},{notificationsEnabled:e,reminderTime:t}=n;if(!e||!t)return;const r=new Date,s=localStorage.getItem("lastReminderDate"),a=r.toDateString();if(s===a)return;const[l,d]=t.split(":").map(Number),f=new Date;f.setHours(l,d,0,0),r>=f&&(GT("Time to check your habits!","Don't forget to log your progress for today."),localStorage.setItem("lastReminderDate",a))}function DV(){const n=new Date,e=cs.getState(),t=e.getTodaysHabits?e.getTodaysHabits(n):[],r=n.toISOString().split("T")[0],s=JSON.parse(localStorage.getItem("notifiedHabits"))||{};let l=[...s[r]||[]],d=!1;t.forEach(f=>{if(!f.hasReminder||!f.reminderTime||f.isCompleted||l.includes(f.id))return;const[p,v]=f.reminderTime.split(":").map(Number),_=new Date;_.setHours(p,v,0,0);const x=new Date(_.getTime()-10*6e4);n>=x&&n<_&&(GT(`Upcoming Habit: ${f.title}`,`Your habit is scheduled for ${f.reminderTime}. Get ready!`),l.push(f.id),d=!0)}),d&&localStorage.setItem("notifiedHabits",JSON.stringify({...s,[r]:l}))}const KT="users";async function VV(n,e){try{const t=cr(ot,KT,n);return await Kg(t,e,{merge:!0}),!0}catch(t){throw console.error("Error updating user settings:",t),t}}async function QT(n){try{const e=cr(ot,KT,n),t=await qa(e);return t.exists()?{id:t.id,...t.data()}:null}catch(e){throw console.error("Error getting user profile:",e),e}}const OV=new ii;async function LV(){try{const e=(await iD(fy,OV)).user,t=cr(ot,"users",e.uid);return(await qa(t)).exists()||await Kg(t,{displayName:e.displayName,email:e.email,photoURL:e.photoURL,createdAt:Fu()}),e}catch(n){throw console.error("Error signing in with Google:",n),n}}async function MV(){try{await jN(fy)}catch(n){throw console.error("Error signing out:",n),n}}function Eo({size:n="md",className:e=""}){const t={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-10 w-10"};return w.jsxs("svg",{className:`animate-spin text-primary ${t[n]} ${e}`,fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),w.jsx("path",{className:"opacity-75",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",fill:"currentColor"})]})}const jV={primary:"bg-primary text-text-light-primary shadow-[0_4px_14px_rgba(19,236,91,0.3)] hover:shadow-[0_4px_20px_rgba(19,236,91,0.4)]",secondary:"bg-transparent text-text-light-primary dark:text-text-dark-primary border border-border-light dark:border-border-dark hover:bg-gray-100 dark:hover:bg-gray-800",danger:"bg-transparent text-danger hover:bg-danger/10",google:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 shadow-sm"},FV={sm:"h-10 px-4 text-sm",md:"h-12 px-6 text-base",lg:"h-14 px-8 text-base"};function is({children:n,variant:e="primary",size:t="md",fullWidth:r=!1,isLoading:s=!1,disabled:a=!1,icon:l,className:d="",...f}){return w.jsx("button",{className:`
        flex items-center justify-center gap-2.5 rounded-xl font-bold
        transition-all duration-200 ease-out
        disabled:opacity-50 disabled:cursor-not-allowed
        ${jV[e]}
        ${FV[t]}
        ${r?"w-full":""}
        ${d}
      `,disabled:a||s,...f,children:s?w.jsx(Eo,{size:"sm"}):w.jsxs(w.Fragment,{children:[l&&w.jsx("span",{className:"material-symbols-outlined text-xl",children:l}),n]})})}function UV(){const[n,e]=B.useState(!1),[t,r]=B.useState(null),s=$n(),{isAuthenticated:a}=go();B.useEffect(()=>{a&&s("/dashboard",{replace:!0})},[a,s]);const l=async()=>{e(!0),r(null);try{await LV(),s("/dashboard")}catch(f){console.error("Sign in error:",f),r("Failed to sign in. Please try again.")}finally{e(!1)}},d=[{icon:"local_fire_department",title:"Track Streaks",description:"Never miss a day and watch your streaks grow."},{icon:"leaderboard",title:"Join Leaderboards",description:"Compete weekly and celebrate wins."},{icon:"share",title:"Share Progress",description:"Share your journey or keep it private."}];return a?null:w.jsx("div",{className:"relative flex h-auto min-h-screen w-full flex-col bg-background-light dark:bg-background-dark font-display overflow-x-hidden",children:w.jsxs("div",{className:"flex flex-col grow justify-between",children:[w.jsxs("div",{className:"flex flex-col",children:[w.jsx("div",{className:"p-4",children:w.jsx("div",{className:"w-full bg-center bg-no-repeat bg-cover flex flex-col justify-end overflow-hidden rounded-xl min-h-80",style:{backgroundImage:`linear-gradient(135deg, 
                  rgba(19, 236, 91, 0.3) 0%, 
                  rgba(16, 34, 22, 0.5) 50%, 
                  rgba(19, 236, 91, 0.2) 100%),
                  url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 300'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%2313ec5b;stop-opacity:0.3'/%3E%3Cstop offset='100%25' style='stop-color:%23102216;stop-opacity:0.8'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill='url(%23grad)' width='400' height='300'/%3E%3Ccircle cx='100' cy='150' r='60' fill='%2313ec5b' opacity='0.2'/%3E%3Ccircle cx='300' cy='100' r='80' fill='%2313ec5b' opacity='0.15'/%3E%3Ccircle cx='250' cy='220' r='50' fill='%2313ec5b' opacity='0.25'/%3E%3C/svg%3E")`},children:w.jsx("div",{className:"p-6 flex items-center justify-center",children:w.jsx("span",{className:"material-symbols-outlined text-primary text-6xl",children:"eco"})})})}),w.jsx("h1",{className:"text-text-light-primary dark:text-gray-100 tracking-tight text-[32px] font-bold leading-tight px-4 text-center pb-3 pt-6",children:"Build Better Habits, Together."}),w.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-base font-normal leading-normal pb-3 pt-1 px-4 text-center",children:"Track your progress, compete with friends, and stay motivated every day."}),w.jsx("div",{className:"flex overflow-x-auto no-scrollbar",children:w.jsx("div",{className:"flex items-stretch p-4 gap-4 w-full",children:d.map(f=>w.jsxs("div",{className:"flex h-full flex-1 flex-col items-center gap-2 text-center rounded-lg min-w-32 pt-4",children:[w.jsx("div",{className:"flex items-center justify-center bg-primary/20 dark:bg-primary/30 h-14 w-14 rounded-full",children:w.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:f.icon})}),w.jsxs("div",{children:[w.jsx("p",{className:"text-text-light-primary dark:text-gray-100 text-base font-medium leading-normal",children:f.title}),w.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-normal leading-normal",children:f.description})]})]},f.title))})}),w.jsxs("div",{className:"flex w-full flex-row items-center justify-center gap-3 py-5",children:[w.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"}),w.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-300 dark:bg-gray-600"}),w.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-300 dark:bg-gray-600"})]})]}),w.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[t&&w.jsx("p",{className:"text-danger text-sm text-center",children:t}),w.jsx("button",{onClick:l,disabled:n,className:"flex h-12 w-full items-center justify-center gap-2.5 rounded-lg bg-primary px-6 text-base font-bold text-gray-900 dark:text-black disabled:opacity-50 transition-all hover:shadow-lg",children:n?w.jsx("span",{className:"animate-spin",children:""}):w.jsxs(w.Fragment,{children:[w.jsxs("svg",{"aria-hidden":"true",className:"h-6 w-6",fill:"none",height:"24",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("path",{d:"M22.56 12.25C22.56 11.45 22.49 10.68 22.36 9.92H12V14.3H18.05C17.78 15.68 17.06 16.85 15.96 17.65V20.12H19.64C21.55 18.35 22.56 15.54 22.56 12.25Z",fill:"#4285F4"}),w.jsx("path",{d:"M12 23C14.97 23 17.52 22.02 19.64 20.12L15.96 17.65C14.99 18.31 13.62 18.72 12 18.72C9.09 18.72 6.6 16.83 5.75 14.15H1.97V16.7C3.86 20.48 7.64 23 12 23Z",fill:"#34A853"}),w.jsx("path",{d:"M5.75 14.15C5.55 13.59 5.45 12.98 5.45 12.35C5.45 11.72 5.55 11.11 5.75 10.55V7.98H1.97C1.22 9.38 0.77 10.83 0.77 12.35C0.77 13.87 1.22 15.32 1.97 16.7L5.75 14.15Z",fill:"#FBBC05"}),w.jsx("path",{d:"M12 5.98C13.72 5.98 15.14 6.58 16.22 7.59L19.71 4.1C17.52 2.19 14.97 1 12 1C7.64 1 3.86 3.52 1.97 7.98L5.75 10.55C6.6 7.87 9.09 5.98 12 5.98Z",fill:"#EA4335"})]}),"Continue with Google"]})})]})]})})}const BV=[{path:"/dashboard",icon:"home",label:"Dashboard"},{path:"/leaderboard",icon:"leaderboard",label:"Leaderboard"},{path:"/feed",icon:"feed",label:"Feed"},{path:"/settings",icon:"settings",label:"Settings"}];function ol(){return w.jsx("nav",{className:"fixed bottom-0 left-0 right-0 h-20 bg-content-light/80 dark:bg-content-dark/80 backdrop-blur-lg border-t border-border-light dark:border-border-dark z-20",children:w.jsx("div",{className:"flex justify-around items-center h-full max-w-md mx-auto",children:BV.map(n=>w.jsx(uE,{to:n.path,className:({isActive:e})=>`flex flex-col items-center justify-center gap-1 transition-colors ${e?"text-primary":"text-text-light-secondary dark:text-text-dark-secondary"}`,children:({isActive:e})=>w.jsxs(w.Fragment,{children:[w.jsx("span",{className:`material-symbols-outlined ${e?"filled":""}`,style:e?{fontVariationSettings:"'FILL' 1, 'wght' 400"}:{},children:n.icon}),w.jsx("span",{className:`text-xs ${e?"font-bold":""}`,children:n.label})]})},n.path))})})}const zV=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function $V({selectedDate:n,onDateSelect:e,completionsByDate:t={}}){const r=new Date;r.setHours(0,0,0,0);const s=B.useMemo(()=>{const v=[],_=new Date(r),x=r.getDay();_.setDate(r.getDate()-x);for(let S=0;S<7;S++){const D=new Date(_);D.setDate(_.getDate()+S),v.push(D)}return v},[]),a=v=>v.toDateString()===r.toDateString(),l=v=>n?v.toDateString()===new Date(n).toDateString():a(v),d=v=>v.toISOString().split("T")[0],f=v=>{const _=d(v);return t[_]&&t[_].length>0},p=v=>v<r&&!a(v);return w.jsx("div",{className:"flex overflow-x-auto no-scrollbar pt-2 pb-4 px-4",children:w.jsx("div",{className:"flex space-x-3",children:s.map(v=>{const _=l(v),x=f(v),S=p(v);return w.jsxs("button",{onClick:()=>e==null?void 0:e(v),className:`
                flex flex-col items-center justify-center w-14 h-24 rounded-xl flex-shrink-0 transition-all
                ${_?"bg-primary":"bg-content-light dark:bg-content-dark border border-border-light dark:border-border-dark"}
              `,children:[w.jsx("p",{className:`text-sm font-medium ${_?"text-text-light-primary":"text-text-light-secondary dark:text-text-dark-secondary"}`,children:zV[v.getDay()]}),w.jsx("p",{className:`text-lg font-bold mt-1 ${_?"text-text-light-primary":"text-text-light-primary dark:text-text-dark-primary"}`,children:v.getDate()}),w.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${_?"bg-text-light-primary":x?"bg-primary":S?"bg-text-light-secondary/30 dark:bg-text-dark-secondary/30":"bg-text-light-secondary dark:bg-text-dark-secondary/50"}`})]},v.toISOString())})})})}function qV({streak:n,size:e="md"}){if(!n||n===0)return null;const t={sm:"text-xs",md:"text-sm",lg:"text-base"};return w.jsxs("span",{className:`text-text-light-secondary dark:text-text-dark-secondary ${t[e]}`,children:[" ",n," ",n===1?"day":"days"]})}function YT({habit:n,isCompleted:e,onToggle:t,currentValue:r,onUpdateProgress:s,showCheckbox:a=!0,disabled:l=!1}){const d=$n(),f=()=>{d(`/habit/${n.id}`)},p=v=>{v.stopPropagation(),!l&&t(n.id)};return w.jsxs("div",{className:`flex items-center gap-x-4 p-4 rounded-lg bg-content-light dark:bg-content-dark cursor-pointer transition-colors ${l?"opacity-70 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-gray-800/50"}`,onClick:l?void 0:f,children:[w.jsx("div",{className:"flex-grow",children:w.jsxs("p",{className:"text-text-light-primary dark:text-text-dark-primary text-base font-normal leading-normal",children:[n.title," ",n.currentStreak>0&&w.jsx(qV,{streak:n.currentStreak})]})}),w.jsx("span",{className:"material-symbols-outlined text-text-light-secondary dark:text-text-dark-secondary text-base",children:n.isPublic?"public":"lock"}),a&&(n.completionType==="numerical"?w.jsxs("div",{className:"flex items-center gap-2",onClick:v=>v.stopPropagation(),children:[w.jsx("button",{onClick:()=>!l&&s(n.id,Math.max(0,(r||0)-1)),disabled:l||(r||0)<=0,className:`size-8 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors ${l?"opacity-50 cursor-not-allowed":""}`,children:w.jsx("span",{className:"material-symbols-outlined text-lg",children:"remove"})}),w.jsxs("div",{className:"flex flex-col items-center min-w-[60px]",children:[w.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:r||0}),w.jsxs("span",{className:"text-[10px] text-gray-500 uppercase",children:["/ ",n.targetValue," ",n.unit]})]}),w.jsx("button",{onClick:()=>!l&&s(n.id,(r||0)+1),disabled:l,className:`size-8 rounded-full bg-primary/10 flex items-center justify-center text-primary hover:bg-primary/20 transition-colors ${l?"opacity-50 cursor-not-allowed":""}`,children:w.jsx("span",{className:"material-symbols-outlined text-lg",children:"add"})})]}):w.jsx("input",{type:"checkbox",checked:e,onChange:p,onClick:v=>v.stopPropagation(),disabled:l,className:`h-6 w-6 rounded-md border-border-light dark:border-border-dark border-2 bg-transparent text-primary checked:bg-primary checked:border-primary focus:ring-0 focus:ring-offset-0 focus:border-border-light dark:focus:border-border-dark focus:outline-none ${l?"cursor-not-allowed opacity-50":"cursor-pointer"}`}))]})}function HV(){var Ze;const n=$n(),{user:e}=go(),{habits:t,completions:r,isLoading:s,getTodaysHabits:a,getStatsForDate:l,isHabitCompleted:d,toggleCompletion:f,updateHabitProgress:p,getHabitValue:v,loadCompletionsForDate:_,subscribeToHabits:x,checkStreaks:S}=cs(),[D,C]=B.useState(new Date),K=kr(new Date),Q=kr(D),F=Q===K,re=Q>K,ue=Q<K,ce=a(D),{completed:P,total:k,percentage:A}=l(Q);B.useEffect(()=>{e!=null&&e.uid&&_(e.uid,Q)},[Q,e==null?void 0:e.uid,_]),B.useEffect(()=>{if(e!=null&&e.uid){const ee=x(e.uid);return()=>ee()}},[e==null?void 0:e.uid,x]),B.useEffect(()=>{e!=null&&e.uid&&t.length>0&&S(e.uid)},[e==null?void 0:e.uid,t.length>0]);const N=()=>{const ee=new Date().getHours();return ee<12?"Good Morning":ee<18?"Good Afternoon":"Good Evening"},L=((Ze=e==null?void 0:e.displayName)==null?void 0:Ze.split(" ")[0])||"there",j=async ee=>{if(e!=null&&e.uid)try{await f(ee,e.uid,Q)}catch(Fe){console.error("Error toggling completion:",Fe)}},R=async(ee,Fe)=>{if(e!=null&&e.uid)try{await p(ee,e.uid,Q,Fe)}catch(ae){console.error("Error updating progress:",ae)}},Ke=ee=>{C(ee)};return w.jsxs("div",{className:"relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden",children:[w.jsxs("div",{className:"flex-grow pb-40",children:[w.jsxs("div",{className:"md:min-h-[50vh] md:flex md:flex-col md:justify-center md:bg-gray-50/50 md:dark:bg-gray-900/50",children:[w.jsxs("div",{className:"flex items-center bg-background-light dark:bg-background-dark md:bg-transparent p-4 pb-2 justify-between sticky top-0 z-10 md:static",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"flex size-12 shrink-0 items-center justify-center",children:e!=null&&e.photoURL?w.jsx("img",{src:e.photoURL,alt:"Profile",className:"rounded-full size-10 object-cover",referrerPolicy:"no-referrer"}):w.jsx("div",{className:"rounded-full size-10 bg-primary/20 flex items-center justify-center",children:w.jsx("span",{className:"material-symbols-outlined text-primary",children:"person"})})}),w.jsxs("h2",{className:"text-text-light-primary dark:text-text-dark-primary text-lg font-bold leading-tight tracking-[-0.015em] flex-1",children:[N(),", ",L,"!"]})]}),w.jsx("div",{className:"flex w-12 items-center justify-end",children:w.jsx("button",{className:"flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 bg-transparent text-text-light-primary dark:text-text-dark-primary gap-2 text-base font-bold leading-normal tracking-[0.015em] min-w-0 p-0",children:w.jsx("span",{className:"material-symbols-outlined",children:"calendar_today"})})})]}),w.jsxs("div",{className:"flex flex-col gap-3 p-4",children:[w.jsxs("div",{className:"flex gap-6 justify-between items-center",children:[w.jsxs("p",{className:"text-text-light-primary dark:text-text-dark-primary text-base font-medium leading-normal",children:[F?"You've completed":"Completed"," ",P," of ",k," habits",F?" today":"","!"]}),w.jsxs("p",{className:"text-text-light-secondary dark:text-text-dark-secondary text-sm font-normal leading-normal",children:[A,"%"]})]}),w.jsx("div",{className:"rounded-full bg-border-light dark:bg-border-dark/50",children:w.jsx("div",{className:"h-2 rounded-full bg-primary transition-all duration-500 ease-out",style:{width:`${A}%`}})}),w.jsx("p",{className:"text-text-light-secondary dark:text-text-dark-secondary text-sm font-normal leading-normal",children:A>=100?" All done!":A>0?"Keep it up!":k===0?"No habits scheduled":"Start completing your habits!"})]}),w.jsx($V,{selectedDate:D,onDateSelect:Ke,completionsByDate:r})]}),w.jsx("h3",{className:"text-text-light-primary dark:text-text-dark-primary text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-2",children:F?"Today's Habits":`Habits for ${D.toLocaleDateString("en-US",{weekday:"long"})}`}),w.jsx("div",{className:"px-4 flex flex-col gap-2",children:s?w.jsx("div",{className:"flex justify-center py-12",children:w.jsx(Eo,{})}):ce.length===0?w.jsxs("div",{className:"text-center py-12",children:[w.jsx("span",{className:"material-symbols-outlined text-4xl text-gray-400 mb-2 block",children:"checklist"}),w.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:t.length===0?"No habits yet":"No habits scheduled for this day"}),t.length===0&&w.jsx("button",{onClick:()=>n("/new-habit"),className:"text-primary font-medium hover:underline",children:"Create your first habit"})]}):ce.map(ee=>w.jsx(YT,{habit:ee,isCompleted:d(ee.id,Q),currentValue:v(ee.id,Q),onToggle:j,onUpdateProgress:R,disabled:re||ue},ee.id))})]}),w.jsx("div",{className:"fixed bottom-24 right-4 z-20",children:w.jsx("button",{onClick:()=>n("/new-habit"),className:"flex items-center justify-center size-14 cursor-pointer overflow-hidden rounded-full bg-primary text-text-light-primary shadow-lg hover:shadow-xl transition-shadow animate-pulse-glow",children:w.jsx("span",{className:"material-symbols-outlined text-3xl",children:"add"})})}),w.jsx(ol,{})]})}function Ar({label:n,id:e,error:t,className:r="",...s}){return w.jsxs("div",{className:"flex flex-col",children:[n&&w.jsx("label",{htmlFor:e,className:"text-base font-medium leading-normal pb-2 text-gray-800 dark:text-gray-400 uppercase tracking-wide",children:n}),w.jsx("input",{id:e,className:`
          form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden 
          rounded-lg border border-gray-200 dark:border-gray-700 
          bg-white dark:bg-gray-800 
          h-14 p-4 
          text-base font-normal leading-normal 
          text-text-light-primary dark:text-white 
          placeholder:text-gray-400 dark:placeholder:text-gray-500 
          focus:border-primary focus:ring-primary/50 focus:ring-2 focus:outline-none
          transition-colors
          ${t?"border-danger focus:border-danger focus:ring-danger/50":""}
          ${r}
        `,...s}),t&&w.jsx("p",{className:"mt-1 text-sm text-danger",children:t})]})}function Wa({checked:n,onChange:e,label:t,description:r}){return w.jsxs("div",{className:"flex flex-col",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[t&&w.jsx("h3",{className:"text-base font-medium leading-tight tracking-[-0.015em] text-gray-800 dark:text-gray-400 uppercase",children:t}),w.jsxs("label",{className:"relative inline-flex cursor-pointer items-center",children:[w.jsx("input",{type:"checkbox",checked:n,onChange:s=>e(s.target.checked),className:"peer sr-only"}),w.jsx("div",{className:"peer h-6 w-11 rounded-full bg-gray-200 dark:bg-gray-700 after:absolute after:top-[2px] after:left-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 dark:after:border-gray-600 after:bg-white after:transition-all peer-checked:bg-primary peer-checked:after:translate-x-full peer-checked:after:border-white"})]})]}),r&&w.jsx("p",{className:"pt-2 text-sm text-gray-500 dark:text-gray-400",children:r})]})}const WV=[{key:0,label:"S",name:"Sunday"},{key:1,label:"M",name:"Monday"},{key:2,label:"T",name:"Tuesday"},{key:3,label:"W",name:"Wednesday"},{key:4,label:"T",name:"Thursday"},{key:5,label:"F",name:"Friday"},{key:6,label:"S",name:"Saturday"}];function XT({isOpen:n,onClose:e,selectedDays:t=[],onSave:r}){const[s,a]=B.useState(t),l=f=>{a(p=>p.includes(f)?p.filter(v=>v!==f):[...p,f])},d=()=>{r(s),e()};return n?w.jsx("div",{className:"fixed inset-0 z-50 flex items-end bg-black/50 backdrop-blur-sm animate-fade-in",children:w.jsxs("div",{className:"flex h-auto w-full flex-col rounded-t-xl bg-background-light dark:bg-gray-800 animate-slide-up",children:[w.jsxs("div",{className:"relative flex items-center justify-center border-b border-gray-200 p-4 dark:border-gray-700",children:[w.jsx("h2",{className:"text-lg font-bold text-text-light-primary dark:text-text-dark-primary",children:"Select Days"}),w.jsx("button",{onClick:e,className:"absolute right-4 top-1/2 -translate-y-1/2",children:w.jsx("span",{className:"material-symbols-outlined !text-2xl text-gray-500 dark:text-gray-400",children:"close"})})]}),w.jsxs("div",{className:"p-4",children:[w.jsx("p",{className:"mb-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"Choose the specific days of the week you want to track this habit."}),w.jsx("div",{className:"flex justify-center gap-2",children:WV.map(f=>{const p=s.includes(f.key);return w.jsx("button",{onClick:()=>l(f.key),className:`
                    relative flex h-12 w-12 cursor-pointer flex-col items-center justify-center rounded-full border transition-all
                    ${p?"border-primary bg-primary text-black":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 text-text-light-primary dark:text-text-dark-primary hover:border-primary/50"}
                  `,title:f.name,children:w.jsx("span",{className:"font-bold",children:f.label})},f.key)})})]}),w.jsx("div",{className:"p-4 pt-2 pb-6",children:w.jsx(is,{fullWidth:!0,onClick:d,disabled:s.length===0,children:"Save"})})]})}):null}const GV=[{value:"checkbox",icon:"check_box",label:"Checkbox"},{value:"numerical",icon:"pin",label:"Numerical"}];function KV(){const n=$n(),{user:e}=go(),{addHabit:t}=cs(),[r,s]=B.useState(""),[a,l]=B.useState("daily"),[d,f]=B.useState([]),[p,v]=B.useState("checkbox"),[_,x]=B.useState(""),[S,D]=B.useState(""),[C,O]=B.useState(new Date().toISOString().split("T")[0]),[K,Q]=B.useState(""),[F,re]=B.useState(!1),[ue,ce]=B.useState(!1),[P,k]=B.useState(!1),[A,N]=B.useState(!1),[L,j]=B.useState(null),R=r.trim().length>0&&(p==="checkbox"||_>0&&S.trim().length>0)&&(a!=="one-time"||C),Ke=ee=>{l(ee),ee==="custom"&&k(!0)},Ze=async()=>{if(!(!R||A||!(e!=null&&e.uid))){N(!0),j(null);try{const ee={title:r.trim(),description:"",frequency:a,customDays:a==="custom"?d:[],targetDate:a==="one-time"?C:null,reminderTime:K||null,hasReminder:F&&!!K,completionType:p,targetValue:p==="numerical"?Number(_):null,unit:p==="numerical"?S.trim():null,isPublic:!ue};await t(e.uid,ee),n("/dashboard")}catch(ee){console.error("Failed to create habit:",ee),j("Failed to create habit. Please try again.")}finally{N(!1)}}};return w.jsxs("div",{className:"relative flex h-auto min-h-screen w-full flex-col bg-background-light dark:bg-background-dark overflow-x-hidden",children:[w.jsxs("header",{className:"flex items-center p-4",children:[w.jsx("button",{onClick:()=>n(-1),className:"flex size-12 shrink-0 items-center justify-start text-text-light-primary dark:text-gray-200",children:w.jsx("span",{className:"material-symbols-outlined !text-2xl",children:"arrow_back_ios_new"})}),w.jsx("h1",{className:"flex-1 text-center text-lg font-bold leading-tight tracking-[-0.015em] text-text-light-primary dark:text-gray-200",children:"New Habit"}),w.jsx("div",{className:"flex w-12 items-center justify-end",children:w.jsx("button",{onClick:Ze,disabled:!R||A,className:`text-base font-bold leading-normal tracking-[0.015em] shrink-0 ${R&&!A?"text-primary":"text-primary/50 dark:text-primary/70"}`,children:"Save"})})]}),w.jsxs("main",{className:"flex flex-col gap-6 px-4 pt-4 pb-6",children:[L&&w.jsx("div",{className:"p-3 rounded-lg bg-danger/10 text-danger text-sm",children:L}),w.jsx(Ar,{label:"Name",id:"habitName",placeholder:"e.g., Read for 15 minutes",value:r,onChange:ee=>s(ee.target.value)}),w.jsxs("div",{className:"flex flex-col",children:[w.jsx("h3",{className:"text-base font-medium leading-tight tracking-[-0.015em] pb-2 text-gray-800 dark:text-gray-400 uppercase",children:"Frequency"}),w.jsx("div",{className:"flex h-12 flex-1 items-center justify-center rounded-lg bg-gray-200/60 dark:bg-gray-800 p-1",children:[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"one-time",label:"One Time"},{value:"custom",label:"More"}].map(ee=>w.jsxs("label",{className:`
                  flex h-full flex-1 cursor-pointer items-center justify-center overflow-hidden rounded-md px-1 
                  text-xs font-medium leading-normal transition-all
                  ${a===ee.value?"bg-white dark:bg-gray-900 text-text-light-primary dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400"}
                `,children:[w.jsxs("span",{className:"flex items-center gap-1",children:[ee.label,ee.value==="custom"&&w.jsx("span",{className:"material-symbols-outlined !text-base",children:"expand_more"})]}),w.jsx("input",{type:"radio",name:"frequency",value:ee.value,checked:a===ee.value,onChange:()=>Ke(ee.value),className:"invisible w-0"})]},ee.value))}),a==="one-time"&&w.jsx("div",{className:"mt-3 animation-slide-down",children:w.jsx(Ar,{label:"Valid only on",type:"date",value:C,onChange:ee=>O(ee.target.value),min:new Date().toISOString().split("T")[0]})}),a==="custom"&&d.length>0&&w.jsxs("button",{onClick:()=>k(!0),className:"mt-2 text-sm text-primary hover:underline text-left",children:[d.length," days selected - tap to edit"]}),a==="custom"&&d.length===0&&w.jsx("button",{onClick:()=>k(!0),className:"mt-2 text-sm text-gray-500 hover:text-primary text-left",children:"Click to select days"})]}),w.jsxs("div",{className:"flex flex-col gap-2",children:[w.jsx("h3",{className:"text-base font-medium leading-tight tracking-[-0.015em] text-gray-800 dark:text-gray-400 uppercase",children:"Schedule"}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsx(Ar,{label:"Time (Optional)",type:"time",value:K,onChange:ee=>{Q(ee.target.value),ee.target.value&&!F&&re(!0)}}),w.jsx("div",{className:"flex items-end pb-2",children:w.jsx(Wa,{label:"Remind 10m before",checked:F,onChange:re,disabled:!K})})]}),F&&!K&&w.jsx("p",{className:"text-xs text-danger",children:"Please set a time to enable reminders."})]}),w.jsxs("div",{className:"flex flex-col",children:[w.jsx("h3",{className:"text-base font-medium leading-tight tracking-[-0.015em] pb-2 text-gray-800 dark:text-gray-400 uppercase",children:"How will you track it?"}),w.jsx("div",{className:"grid grid-cols-2 gap-3 mb-4",children:GV.map(ee=>w.jsxs("label",{className:`
                  flex cursor-pointer flex-col items-center justify-center gap-2 rounded-lg border-2 p-4 py-6 text-center transition-all
                  ${p===ee.value?"border-primary bg-primary/10 dark:bg-primary/20 text-primary":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300"}
                `,children:[w.jsx("span",{className:"material-symbols-outlined !text-3xl",children:ee.icon}),w.jsx("span",{className:"font-medium",children:ee.label}),w.jsx("input",{type:"radio",name:"tracking_type",value:ee.value,checked:p===ee.value,onChange:()=>v(ee.value),className:"invisible w-0"})]},ee.value))}),p==="numerical"&&w.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 animation-slide-down",children:[w.jsx(Ar,{label:"Target Goal",type:"number",placeholder:"e.g. 5",value:_,onChange:ee=>x(ee.target.value),min:"1"}),w.jsx(Ar,{label:"Unit",type:"text",placeholder:"e.g. cups",value:S,onChange:ee=>D(ee.target.value)})]})]}),w.jsx(Wa,{label:"Make it private?",description:"Private habits will not appear on the community feed or your profile.",checked:ue,onChange:ce})]}),w.jsx("footer",{className:"mt-auto px-4 pb-6 pt-4",children:w.jsx(is,{fullWidth:!0,onClick:Ze,isLoading:A,disabled:!R,children:"Add Habit"})}),w.jsx(XT,{isOpen:P,onClose:()=>k(!1),selectedDays:d,onSave:f})]})}const QV=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"one-time",label:"One Time"},{value:"custom",label:"More"}],YV=[{value:"checkbox",icon:"check_box",label:"Checkbox"},{value:"numerical",icon:"pin",label:"Numerical"}];function XV(){const{habitId:n}=qm(),e=$n(),{habits:t,updateHabit:r}=cs(),s=t.find(ee=>ee.id===n),[a,l]=B.useState(""),[d,f]=B.useState("daily"),[p,v]=B.useState([]),[_,x]=B.useState("checkbox"),[S,D]=B.useState(""),[C,O]=B.useState(""),[K,Q]=B.useState(new Date().toISOString().split("T")[0]),[F,re]=B.useState(""),[ue,ce]=B.useState(!1),[P,k]=B.useState(!1),[A,N]=B.useState(!1),[L,j]=B.useState(!1);if(B.useEffect(()=>{s&&(l(s.title||""),f(s.frequency||"daily"),v(s.customDays||[]),x(s.completionType||"checkbox"),D(s.targetValue||""),O(s.unit||""),Q(s.targetDate||new Date().toISOString().split("T")[0]),re(s.reminderTime||""),ce(s.hasReminder||!1),k(!s.isPublic))},[s]),!s)return w.jsx("div",{className:"min-h-screen bg-background-light dark:bg-background-dark flex items-center justify-center",children:w.jsxs("div",{className:"text-center",children:[w.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Habit not found"}),w.jsx(is,{onClick:()=>e("/dashboard"),children:"Back to Dashboard"})]})});const R=a.trim().length>0&&(_==="checkbox"||S>0&&C.trim().length>0)&&(d!=="one-time"||K),Ke=ee=>{f(ee),ee==="custom"&&N(!0)},Ze=async()=>{if(!(!R||L)){j(!0);try{await r(n,{title:a.trim(),frequency:d,customDays:d==="custom"?p:[],targetDate:d==="one-time"?K:null,reminderTime:F||null,hasReminder:ue&&!!F,completionType:_,targetValue:_==="numerical"?Number(S):null,unit:_==="numerical"?C.trim():null,isPublic:!P}),e(`/habit/${n}`)}catch(ee){console.error("Failed to update habit:",ee)}finally{j(!1)}}};return w.jsxs("div",{className:"relative flex h-auto min-h-screen w-full flex-col bg-background-light dark:bg-background-dark overflow-x-hidden",children:[w.jsxs("header",{className:"flex items-center p-4",children:[w.jsx("button",{onClick:()=>e("/dashboard"),className:"flex size-12 shrink-0 items-center justify-start text-text-light-primary dark:text-gray-200",children:w.jsx("span",{className:"material-symbols-outlined !text-2xl",children:"arrow_back_ios_new"})}),w.jsx("h1",{className:"flex-1 text-center text-lg font-bold leading-tight tracking-[-0.015em] text-text-light-primary dark:text-gray-200",children:"Edit Habit"}),w.jsx("div",{className:"flex w-12 items-center justify-end",children:w.jsx("button",{onClick:Ze,disabled:!R||L,className:`text-base font-bold leading-normal tracking-[0.015em] shrink-0 ${R&&!L?"text-primary":"text-primary/50 dark:text-primary/70"}`,children:"Save"})})]}),w.jsxs("main",{className:"flex flex-col gap-6 px-4 pt-4 pb-6",children:[w.jsx(Ar,{label:"Name",id:"habitName",placeholder:"e.g., Read for 15 minutes",value:a,onChange:ee=>l(ee.target.value)}),w.jsxs("div",{className:"flex flex-col",children:[w.jsx("h3",{className:"text-base font-medium leading-tight tracking-[-0.015em] pb-2 text-gray-800 dark:text-gray-400 uppercase",children:"Frequency"}),w.jsx("div",{className:"flex h-12 flex-1 items-center justify-center rounded-lg bg-gray-200/60 dark:bg-gray-800 p-1",children:QV.map(ee=>w.jsxs("label",{className:`
                  flex h-full flex-1 cursor-pointer items-center justify-center overflow-hidden rounded-md px-1 
                  text-xs font-medium leading-normal transition-all
                  ${d===ee.value?"bg-white dark:bg-gray-900 text-text-light-primary dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400"}
                `,children:[w.jsxs("span",{className:"flex items-center gap-1",children:[ee.label,ee.value==="custom"&&w.jsx("span",{className:"material-symbols-outlined !text-base",children:"expand_more"})]}),w.jsx("input",{type:"radio",name:"frequency",value:ee.value,checked:d===ee.value,onChange:()=>Ke(ee.value),className:"invisible w-0"})]},ee.value))}),d==="one-time"&&w.jsx("div",{className:"mt-3 animation-slide-down",children:w.jsx(Ar,{label:"Valid only on",type:"date",value:K,onChange:ee=>Q(ee.target.value),min:new Date().toISOString().split("T")[0]})}),d==="custom"&&p.length>0&&w.jsxs("button",{onClick:()=>N(!0),className:"mt-2 text-sm text-primary hover:underline text-left",children:[p.length," days selected - tap to edit"]}),d==="custom"&&p.length===0&&w.jsx("button",{onClick:()=>N(!0),className:"mt-2 text-sm text-gray-500 hover:text-primary text-left",children:"Click to select days"})]}),w.jsxs("div",{className:"flex flex-col gap-2",children:[w.jsx("h3",{className:"text-base font-medium leading-tight tracking-[-0.015em] text-gray-800 dark:text-gray-400 uppercase",children:"Schedule"}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsx(Ar,{label:"Time (Optional)",type:"time",value:F,onChange:ee=>{re(ee.target.value),ee.target.value&&!ue&&ce(!0)}}),w.jsx("div",{className:"flex items-end pb-2",children:w.jsx(Wa,{label:"Remind 10m before",checked:ue,onChange:ce,disabled:!F})})]}),ue&&!F&&w.jsx("p",{className:"text-xs text-danger",children:"Please set a time to enable reminders."})]}),w.jsxs("div",{className:"flex flex-col",children:[w.jsx("h3",{className:"text-base font-medium leading-tight tracking-[-0.015em] pb-2 text-gray-800 dark:text-gray-400 uppercase",children:"How will you track it?"}),w.jsx("div",{className:"grid grid-cols-2 gap-3 mb-4",children:YV.map(ee=>w.jsxs("label",{className:`
                  flex cursor-pointer flex-col items-center justify-center gap-2 rounded-lg border-2 p-4 py-6 text-center transition-all
                  ${_===ee.value?"border-primary bg-primary/10 dark:bg-primary/20 text-primary":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300"}
                `,children:[w.jsx("span",{className:"material-symbols-outlined !text-3xl",children:ee.icon}),w.jsx("span",{className:"font-medium",children:ee.label}),w.jsx("input",{type:"radio",name:"tracking_type",value:ee.value,checked:_===ee.value,onChange:()=>x(ee.value),className:"invisible w-0"})]},ee.value))}),_==="numerical"&&w.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 animation-slide-down",children:[w.jsx(Ar,{label:"Target Goal",type:"number",placeholder:"e.g. 5",value:S,onChange:ee=>D(ee.target.value),min:"1"}),w.jsx(Ar,{label:"Unit",type:"text",placeholder:"e.g. cups",value:C,onChange:ee=>O(ee.target.value)})]})]}),w.jsx(Wa,{label:"Make it private?",description:"Private habits will not appear on the community feed or your profile.",checked:P,onChange:k})]}),w.jsx("footer",{className:"mt-auto px-4 pb-6 pt-4",children:w.jsx(is,{fullWidth:!0,onClick:Ze,isLoading:L,disabled:!R,children:"Save Changes"})}),w.jsx(XT,{isOpen:A,onClose:()=>N(!1),selectedDays:p,onSave:v})]})}const JV={daily:"Daily",weekly:"Weekly",custom:"Custom Days"},ZV={checkbox:"Check-off",numerical:"Numerical"},eO=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function tO(){const{habitId:n}=qm(),e=$n(),{habits:t,deleteHabit:r,isLoading:s}=cs(),a=t.find(p=>p.id===n),l=async()=>{if(window.confirm("Are you sure you want to delete this habit? This action cannot be undone."))try{await r(n),e("/dashboard")}catch(p){console.error("Error deleting habit:",p),alert("Failed to delete habit. Please try again.")}};if(s)return w.jsx("div",{className:"min-h-screen bg-background-light dark:bg-background-dark flex items-center justify-center",children:w.jsx(Eo,{size:"lg"})});if(!a)return w.jsx("div",{className:"min-h-screen bg-background-light dark:bg-background-dark flex items-center justify-center",children:w.jsxs("div",{className:"text-center",children:[w.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Habit not found"}),w.jsx(is,{onClick:()=>e("/dashboard"),children:"Back to Dashboard"})]})});const d=()=>{var p;return a.frequency!=="custom"||!((p=a.customDays)!=null&&p.length)?null:a.customDays.map(v=>eO[v]).join(", ")},f=[{icon:"event_repeat",label:"Frequency",value:a.frequency==="custom"?d():JV[a.frequency]||a.frequency},{icon:"task_alt",label:"Completion Type",value:ZV[a.completionType]||a.completionType||"Check-off"},{icon:a.isPublic?"public":"lock",label:"Visibility",value:a.isPublic?"Public":"Private"}];return w.jsxs("div",{className:"relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden font-display bg-background-light dark:bg-background-dark",children:[w.jsxs("div",{className:"flex-grow pb-28",children:[w.jsxs("header",{className:"flex items-center bg-background-light dark:bg-background-dark p-4 justify-between sticky top-0 z-10 border-b border-border-light dark:border-border-dark",children:[w.jsx("div",{className:"flex w-12 items-center justify-start",children:w.jsx("button",{onClick:()=>e(-1),className:"flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 bg-transparent text-text-light-primary dark:text-text-dark-primary gap-2 text-base font-bold leading-normal tracking-[0.015em] min-w-0 p-0",children:w.jsx("span",{className:"material-symbols-outlined",children:"arrow_back_ios_new"})})}),w.jsx("h1",{className:"text-text-light-primary dark:text-text-dark-primary text-lg font-bold leading-tight tracking-[-0.015em] text-center",children:"Habit Details"}),w.jsx("div",{className:"flex w-12 items-center justify-end",children:w.jsx("button",{className:"flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 bg-transparent text-text-light-primary dark:text-text-dark-primary gap-2 text-base font-bold leading-normal tracking-[0.015em] min-w-0 p-0",children:w.jsx("span",{className:"material-symbols-outlined",children:"more_vert"})})})]}),w.jsxs("main",{className:"p-4",children:[w.jsxs("div",{className:"bg-content-light dark:bg-content-dark rounded-xl p-6 flex flex-col items-center",children:[w.jsx("h2",{className:"text-2xl font-bold text-text-light-primary dark:text-text-dark-primary text-center",children:a.title}),(a.currentStreak||0)>0&&w.jsxs("div",{className:"mt-4 py-2 px-4 rounded-full bg-primary/20 text-primary flex items-center gap-2",children:[w.jsx("span",{className:"material-symbols-outlined text-base",style:{fontVariationSettings:"'FILL' 1, 'wght' 700"},children:"local_fire_department"}),w.jsxs("p",{className:"font-bold text-sm",children:["Current Streak: ",a.currentStreak," ",a.currentStreak===1?"day":"days"]})]})]}),w.jsx("div",{className:"mt-4 grid grid-cols-1 gap-4",children:f.map(p=>w.jsxs("div",{className:"bg-content-light dark:bg-content-dark rounded-xl p-4 flex items-center gap-4",children:[w.jsx("div",{className:"flex items-center justify-center size-10 rounded-lg bg-primary/20 text-primary",children:w.jsx("span",{className:"material-symbols-outlined",children:p.icon})}),w.jsxs("div",{children:[w.jsx("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary",children:p.label}),w.jsx("p",{className:"text-base font-medium text-text-light-primary dark:text-text-dark-primary",children:p.value})]})]},p.label))}),w.jsxs("div",{className:"mt-8 flex flex-col gap-3",children:[w.jsx(is,{fullWidth:!0,icon:"edit",onClick:()=>e(`/edit-habit/${a.id}`),children:"Edit Habit"}),w.jsx(is,{fullWidth:!0,variant:"danger",icon:"delete",onClick:l,children:"Delete Habit"})]})]})]}),w.jsx(ol,{})]})}function nO(){const n=$n(),{user:e}=go(),[t,r]=B.useState("thisWeek"),[s,a]=B.useState([]),[l,d]=B.useState({rank:0,percentage:0}),[f,p]=B.useState(!0);B.useEffect(()=>{let D=()=>{};p(!0);try{const C=t==="thisWeek"?rc():RV();D=CV(C,O=>{if(a(O),e!=null&&e.uid){const K=O.find(Q=>Q.userId===e.uid);d(K?{rank:K.rank,percentage:K.percentage}:{rank:O.length+1,percentage:0})}p(!1)})}catch(C){console.error("Error in leaderboard subscription:",C),p(!1)}return()=>{D&&D()}},[t,e==null?void 0:e.uid]);const v=s.slice(0,3),_=s,x=D=>{switch(D){case 1:return"border-yellow-400";case 2:return"border-slate-300";case 3:return"border-amber-600";default:return"border-gray-300"}},S=D=>{switch(D){case 1:return"bg-yellow-400 text-yellow-900";case 2:return"bg-slate-300 text-slate-700";case 3:return"bg-amber-600 text-amber-100";default:return"bg-gray-300 text-gray-700"}};return w.jsxs("div",{className:"relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden bg-background-light dark:bg-background-dark font-display text-slate-800 dark:text-slate-200",children:[w.jsxs("div",{className:"flex items-center p-4 pb-2 bg-background-light dark:bg-background-dark sticky top-0 z-10",children:[w.jsx("button",{onClick:()=>n(-1),className:"flex size-12 shrink-0 items-center justify-start",children:w.jsx("span",{className:"material-symbols-outlined",children:"arrow_back_ios_new"})}),w.jsx("h2",{className:"flex-1 text-center text-lg font-bold leading-tight tracking-[-0.015em]",children:"Weekly Leaderboard"}),w.jsx("div",{className:"flex w-12 items-center justify-end",children:w.jsx("button",{className:"flex h-12 cursor-pointer items-center justify-center gap-2 overflow-hidden rounded-lg bg-transparent min-w-0 p-0 text-base font-bold leading-normal tracking-[0.015em]",children:w.jsx("span",{className:"material-symbols-outlined",children:"ios_share"})})})]}),w.jsx("div",{className:"flex px-4 py-3",children:w.jsxs("div",{className:"flex h-10 flex-1 items-center justify-center rounded-lg bg-black/5 dark:bg-white/5 p-1",children:[w.jsxs("label",{className:`flex h-full grow cursor-pointer items-center justify-center overflow-hidden rounded-lg px-2 text-sm font-medium leading-normal transition-all ${t==="thisWeek"?"bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:[w.jsx("span",{className:"truncate",children:"This Week"}),w.jsx("input",{type:"radio",name:"time-period",value:"thisWeek",checked:t==="thisWeek",onChange:()=>r("thisWeek"),className:"invisible w-0"})]}),w.jsxs("label",{className:`flex h-full grow cursor-pointer items-center justify-center overflow-hidden rounded-lg px-2 text-sm font-medium leading-normal transition-all ${t==="lastWeek"?"bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:[w.jsx("span",{className:"truncate",children:"Last Week"}),w.jsx("input",{type:"radio",name:"time-period",value:"lastWeek",checked:t==="lastWeek",onChange:()=>r("lastWeek"),className:"invisible w-0"})]})]})}),f?w.jsx("div",{className:"flex-1 flex items-center justify-center py-12",children:w.jsx(Eo,{size:"lg"})}):s.length===0?w.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-12 px-4",children:[w.jsx("span",{className:"material-symbols-outlined text-5xl text-gray-400 mb-4",children:"leaderboard"}),w.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"No leaderboard data yet."}),w.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm text-center mt-2",children:"Complete habits to appear on the leaderboard!"})]}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"flex items-end justify-center gap-4 px-4 py-6",children:[v[1]&&w.jsxs("div",{className:"flex flex-col items-center gap-2 cursor-pointer transition-transform active:scale-95",onClick:()=>n(`/profile/${v[1].userId}`),children:[w.jsxs("div",{className:"relative",children:[v[1].photoURL?w.jsx("img",{src:v[1].photoURL,alt:v[1].displayName,className:`aspect-square w-16 rounded-full bg-cover bg-center border-2 ${x(2)} object-cover`,referrerPolicy:"no-referrer"}):w.jsx("div",{className:`aspect-square w-16 rounded-full border-2 ${x(2)} bg-primary/20 flex items-center justify-center`,children:w.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"person"})}),w.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 flex h-6 w-6 items-center justify-center rounded-full ${S(2)} text-sm font-bold`,children:"2"})]}),w.jsx("p",{className:"text-sm font-bold",children:v[1].displayName}),w.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[v[1].percentage,"%"]})]}),v[0]&&w.jsxs("div",{className:"flex flex-col items-center gap-2 cursor-pointer transition-transform active:scale-95",onClick:()=>n(`/profile/${v[0].userId}`),children:[w.jsxs("div",{className:"relative",children:[v[0].photoURL?w.jsx("img",{src:v[0].photoURL,alt:v[0].displayName,className:`aspect-square w-24 rounded-full bg-cover bg-center border-4 ${x(1)} object-cover`,referrerPolicy:"no-referrer"}):w.jsx("div",{className:`aspect-square w-24 rounded-full border-4 ${x(1)} bg-primary/20 flex items-center justify-center`,children:w.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"person"})}),w.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 flex h-8 w-8 items-center justify-center rounded-full ${S(1)} text-base font-bold`,children:"1"})]}),w.jsx("p",{className:"text-base font-bold",children:v[0].displayName}),w.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[v[0].percentage,"%"]})]}),v[2]&&w.jsxs("div",{className:"flex flex-col items-center gap-2 cursor-pointer transition-transform active:scale-95",onClick:()=>n(`/profile/${v[2].userId}`),children:[w.jsxs("div",{className:"relative",children:[v[2].photoURL?w.jsx("img",{src:v[2].photoURL,alt:v[2].displayName,className:`aspect-square w-16 rounded-full bg-cover bg-center border-2 ${x(3)} object-cover`,referrerPolicy:"no-referrer"}):w.jsx("div",{className:`aspect-square w-16 rounded-full border-2 ${x(3)} bg-primary/20 flex items-center justify-center`,children:w.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"person"})}),w.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 flex h-6 w-6 items-center justify-center rounded-full ${S(3)} text-sm font-bold`,children:"3"})]}),w.jsx("p",{className:"text-sm font-bold",children:v[2].displayName}),w.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[v[2].percentage,"%"]})]})]}),e&&w.jsx("div",{className:"p-4",children:w.jsxs("div",{className:"flex items-center justify-between gap-4 rounded-xl bg-primary/20 dark:bg-primary/30 p-4 border border-primary",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("p",{className:"text-lg font-bold w-6 text-center",children:l.rank||"-"}),e.photoURL?w.jsx("img",{src:e.photoURL,alt:"Your avatar",className:"w-12 h-12 rounded-full object-cover flex-shrink-0",referrerPolicy:"no-referrer"}):w.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/30 flex items-center justify-center flex-shrink-0",children:w.jsx("span",{className:"material-symbols-outlined text-primary",children:"person"})}),w.jsxs("div",{className:"flex flex-col",children:[w.jsx("p",{className:"text-base font-bold leading-tight",children:"You"}),w.jsxs("p",{className:"text-sm font-normal leading-normal text-slate-600 dark:text-slate-300",children:[l.percentage||0,"% complete"]})]})]}),w.jsx("span",{className:"material-symbols-outlined text-primary",children:"workspace_premium"})]})}),w.jsx("div",{className:"flex flex-col gap-2 px-4 pb-24",children:_.map(D=>w.jsxs("div",{onClick:()=>n(`/profile/${D.userId}`),className:`flex items-center gap-4 rounded-xl p-3 shadow-sm cursor-pointer transition-colors hover:bg-black/5 dark:hover:bg-white/5 ${D.userId===(e==null?void 0:e.uid)?"bg-primary/10 dark:bg-primary/20 border border-primary/50":"bg-white dark:bg-background-dark"}`,children:[w.jsx("p",{className:"w-6 text-center font-semibold text-slate-500 dark:text-slate-400",children:D.rank}),D.photoURL?w.jsx("img",{src:D.photoURL,alt:D.displayName,className:"h-10 w-10 flex-shrink-0 rounded-full object-cover",referrerPolicy:"no-referrer"}):w.jsx("div",{className:"h-10 w-10 flex-shrink-0 rounded-full bg-primary/20 flex items-center justify-center",children:w.jsx("span",{className:"material-symbols-outlined text-primary text-xl",children:"person"})}),w.jsxs("div",{className:"flex-grow",children:[w.jsx("p",{className:"font-bold",children:D.displayName}),w.jsx("div",{className:"mt-1 h-1.5 w-full rounded-full bg-slate-200 dark:bg-slate-700",children:w.jsx("div",{className:"h-1.5 rounded-full bg-primary transition-all",style:{width:`${D.percentage}%`}})})]}),w.jsxs("p",{className:"font-bold text-sm",children:[D.percentage,"%"]})]},D.id))})]}),w.jsx(ol,{})]})}function rO(){const{userId:n}=qm(),e=$n(),[t,r]=B.useState(null),[s,a]=B.useState([]),[l,d]=B.useState(null),[f,p]=B.useState(!0);return B.useEffect(()=>{(async()=>{if(n){p(!0);try{const[_,x,S]=await Promise.all([QT(n),IV(n),AV(n)]);r(_),a(x),d(S)}catch(_){console.error("Failed to load user profile",_)}finally{p(!1)}}})()},[n]),f?w.jsx("div",{className:"flex h-screen items-center justify-center bg-background-light dark:bg-background-dark",children:w.jsx(Eo,{})}):t?w.jsxs("div",{className:"relative flex h-auto min-h-screen w-full flex-col bg-background-light dark:bg-background-dark pb-24 font-display",children:[w.jsxs("header",{className:"flex items-center p-4 sticky top-0 bg-background-light dark:bg-background-dark z-10 transition-shadow",children:[w.jsx("button",{onClick:()=>e(-1),className:"flex size-12 shrink-0 items-center justify-start text-text-light-primary dark:text-gray-200",children:w.jsx("span",{className:"material-symbols-outlined !text-2xl",children:"arrow_back_ios_new"})}),w.jsx("h1",{className:"flex-1 text-center text-lg font-bold leading-tight tracking-[-0.015em] text-text-light-primary dark:text-gray-200",children:"Profile"}),w.jsx("div",{className:"w-12"})]}),w.jsxs("div",{className:"flex flex-col items-center p-6 gap-4",children:[w.jsx("div",{className:"size-24 rounded-full overflow-hidden border-4 border-primary/20",children:t.photoURL?w.jsx("img",{src:t.photoURL,alt:t.displayName,className:"size-full object-cover",referrerPolicy:"no-referrer"}):w.jsx("div",{className:"size-full bg-primary/20 flex items-center justify-center",children:w.jsx("span",{className:"material-symbols-outlined text-4xl text-primary",children:"person"})})}),w.jsxs("div",{className:"text-center",children:[w.jsx("h2",{className:"text-xl font-bold text-text-light-primary dark:text-white",children:t.displayName||"Anonymous User"}),l&&w.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Current Rank: #",l.rank,"  ",l.percentage,"% Completion"]})]})]}),w.jsxs("div",{className:"px-4 flex flex-col gap-4 mt-2",children:[w.jsx("h3",{className:"text-lg font-bold text-text-light-primary dark:text-white",children:"Public Habits"}),s.length===0?w.jsx("div",{className:"text-center py-8 text-gray-500",children:"No public habits shared."}):w.jsx("div",{className:"flex flex-col gap-3",children:s.map(v=>w.jsx(YT,{habit:v,isCompleted:!1,disabled:!0,showCheckbox:!1},v.id))})]}),w.jsx(ol,{})]}):w.jsxs("div",{className:"flex h-screen flex-col items-center justify-center bg-background-light dark:bg-background-dark text-text-light-primary dark:text-white gap-4",children:[w.jsx("p",{children:"User not found"}),w.jsx("button",{onClick:()=>e(-1),className:"text-primary hover:underline",children:"Go Back"})]})}function iO(n,e){let t;try{t=n()}catch{return}return{getItem:s=>{var a;const l=f=>f===null?null:JSON.parse(f,void 0),d=(a=t.getItem(s))!=null?a:null;return d instanceof Promise?d.then(l):l(d)},setItem:(s,a)=>t.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>t.removeItem(s)}}const Fm=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return Fm(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return Fm(r)(t)}}}},sO=(n,e)=>(t,r,s)=>{let a={storage:iO(()=>localStorage),partialize:C=>C,version:0,merge:(C,O)=>({...O,...C}),...e},l=!1;const d=new Set,f=new Set;let p=a.storage;if(!p)return n((...C)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),t(...C)},r,s);const v=()=>{const C=a.partialize({...r()});return p.setItem(a.name,{state:C,version:a.version})},_=s.setState;s.setState=(C,O)=>(_(C,O),v());const x=n((...C)=>(t(...C),v()),r,s);s.getInitialState=()=>x;let S;const D=()=>{var C,O;if(!p)return;l=!1,d.forEach(Q=>{var F;return Q((F=r())!=null?F:x)});const K=((O=a.onRehydrateStorage)==null?void 0:O.call(a,(C=r())!=null?C:x))||void 0;return Fm(p.getItem.bind(p))(a.name).then(Q=>{if(Q)if(typeof Q.version=="number"&&Q.version!==a.version){if(a.migrate){const F=a.migrate(Q.state,Q.version);return F instanceof Promise?F.then(re=>[!0,re]):[!0,F]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,Q.state];return[!1,void 0]}).then(Q=>{var F;const[re,ue]=Q;if(S=a.merge(ue,(F=r())!=null?F:x),t(S,!0),re)return v()}).then(()=>{K==null||K(S,void 0),S=r(),l=!0,f.forEach(Q=>Q(S))}).catch(Q=>{K==null||K(void 0,Q)})};return s.persist={setOptions:C=>{a={...a,...C},C.storage&&(p=C.storage)},clearStorage:()=>{p==null||p.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>D(),hasHydrated:()=>l,onHydrate:C=>(d.add(C),()=>{d.delete(C)}),onFinishHydration:C=>(f.add(C),()=>{f.delete(C)})},a.skipHydration||D(),S||x},oO=sO,aO="completions",lO="habits",uO="users";async function cO(n=50){try{const e=kn(ot,aO),t=fr(e,nl("timestamp","desc"),qP(n*2)),s=(await yi(t)).docs.map(d=>({id:d.id,...d.data()})),a=[],l=new Set;for(const d of s){if(a.length>=n)break;if(!l.has(`${d.habitId}_${d.date}`))try{const f=cr(ot,lO,d.habitId),p=await qa(f);if(!p.exists())continue;const v=p.data();if(!v.isPublic)continue;const _=cr(ot,uO,d.userId),x=await qa(_),S=x.exists()?x.data():{},D=d.type||"completion",C=D==="streak_lost"?d.streakLength||0:v.currentStreak||0;a.push({id:d.id,habitId:d.habitId,habitTitle:v.title,userId:d.userId,username:S.displayName||"Anonymous",photoURL:S.photoURL||null,streak:C,timestamp:d.timestamp,date:d.date,type:D}),l.add(`${d.habitId}_${d.date}_${D}`)}catch(f){console.error("Error processing completion:",f);continue}}return a}catch(e){throw console.error("Error getting public feed:",e),e}}function dO(n){if(!n)return"";const e=n.toDate?n.toDate():new Date(n),r=new Date().getTime()-e.getTime(),s=Math.floor(r/6e4),a=Math.floor(r/36e5),l=Math.floor(r/864e5);return s<1?"just now":s<60?`${s}m ago`:a<24?`${a}h ago`:l<7?`${l}d ago`:e.toLocaleDateString()}const hO=Qm(oO((n,e)=>({posts:[],lastUpdated:null,isLoading:!1,error:null,lastDoc:null,fetchFeed:async(t=!1)=>{const{lastUpdated:r,isLoading:s}=e(),a=Date.now();if(!s){n({isLoading:!0,error:null});try{const d=(await cO(20)).map(f=>{var p,v,_;return{...f,timestamp:((_=(v=(p=f.timestamp)==null?void 0:p.toDate)==null?void 0:v.call(p))==null?void 0:_.toISOString())||f.timestamp}});n({posts:d,lastUpdated:a,isLoading:!1})}catch(l){console.error("Error fetching feed:",l),n({error:l.message,isLoading:!1})}}}}),{name:"feed-storage",partialize:n=>({posts:n.posts,lastUpdated:n.lastUpdated})}));function fO(){const n=$n(),{posts:e,isLoading:t,fetchFeed:r}=hO();return B.useEffect(()=>{r()},[]),w.jsxs("div",{className:"relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden bg-background-light dark:bg-background-dark font-display",children:[w.jsxs("header",{className:"sticky top-0 z-10 flex items-center justify-between border-b border-gray-200/80 bg-background-light/80 p-4 pb-3 backdrop-blur-sm dark:border-gray-800/80 dark:bg-background-dark/80",children:[w.jsx("button",{onClick:()=>n(-1),className:"flex size-12 shrink-0 items-center justify-start",children:w.jsx("span",{className:"material-symbols-outlined text-text-light-primary dark:text-text-dark-primary",children:"arrow_back_ios_new"})}),w.jsx("h1",{className:"flex-1 text-center text-lg font-bold leading-tight tracking-[-0.015em] text-text-light-primary dark:text-text-dark-primary",children:"Progress Feed"}),w.jsx("div",{className:"flex w-12 items-center justify-end",children:w.jsx("button",{className:"flex h-12 cursor-pointer items-center justify-center gap-2 overflow-hidden rounded-lg bg-transparent text-base font-bold leading-normal tracking-[0.015em] text-text-light-primary dark:text-text-dark-primary",children:w.jsx("span",{className:"material-symbols-outlined",children:"search"})})})]}),w.jsx("main",{className:"flex-grow pb-24",children:t&&e.length===0?w.jsx("div",{className:"flex justify-center py-12",children:w.jsx(Eo,{size:"lg"})}):e.length===0?w.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[w.jsx("span",{className:"material-symbols-outlined text-5xl text-gray-400 mb-4",children:"feed"}),w.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"No public activity yet."}),w.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm text-center mt-2",children:"Complete public habits to appear in the feed!"})]}):e.map(s=>w.jsx("div",{className:"border-b border-gray-200/80 p-4 dark:border-gray-800/80",children:w.jsxs("div",{className:"flex items-start gap-3",children:[s.photoURL?w.jsx("img",{className:"h-10 w-10 rounded-full object-cover flex-shrink-0",alt:`${s.username}'s avatar`,src:s.photoURL,referrerPolicy:"no-referrer"}):w.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0",children:w.jsx("span",{className:"material-symbols-outlined text-primary text-xl",children:"person"})}),w.jsxs("div",{className:"flex flex-1 flex-col gap-2",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("p",{className:"font-bold text-text-light-primary dark:text-text-dark-primary",children:s.username}),w.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[" ",dO(s.timestamp)]})]}),s.type==="streak_lost"?w.jsxs("div",{className:"flex flex-col gap-1",children:[w.jsxs("p",{className:"text-base text-gray-700 dark:text-gray-300",children:["Lost a ",w.jsxs("span",{className:"font-bold text-red-500",children:[s.streak," day streak"]})," on ",s.habitTitle]}),w.jsxs("div",{className:"flex items-center gap-1 text-red-500 text-sm",children:[w.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"heart_broken"}),w.jsx("span",{className:"font-medium",children:"Ouch! Don't give up!"})]})]}):w.jsxs(w.Fragment,{children:[w.jsxs("p",{className:"text-base text-text-light-primary dark:text-text-dark-primary",children:["Completed: ",s.habitTitle]}),s.streak>0&&w.jsx("div",{className:"mt-2 flex items-center",children:w.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-primary/20 px-3 py-1 text-sm font-medium",children:[w.jsx("span",{className:"material-symbols-outlined !text-[18px] !font-bold text-primary",children:"local_fire_department"}),w.jsx("span",{className:"font-bold text-text-light-primary dark:text-text-dark-primary",children:s.streak})]})})]})]})]})},s.id))}),w.jsx(ol,{})]})}function pO(){const n=$n(),{user:e,clearUser:t}=go(),{habits:r,clearAll:s}=cs(),[a,l]=B.useState(document.documentElement.classList.contains("dark")),[d,f]=B.useState(!1),[p,v]=B.useState(()=>(JSON.parse(localStorage.getItem("habitParams"))||{}).notificationsEnabled||!1),[_,x]=B.useState(()=>(JSON.parse(localStorage.getItem("habitParams"))||{}).reminderTime||"09:00"),S=async F=>{const ue={...JSON.parse(localStorage.getItem("habitParams"))||{},...F};if(localStorage.setItem("habitParams",JSON.stringify(ue)),e!=null&&e.uid)try{await VV(e.uid,{settings:ue})}catch(ce){console.error("Failed to sync settings to cloud:",ce)}},D=F=>{l(F),F?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},C=async F=>{F?await PV()?(v(!0),S({notificationsEnabled:!0})):(v(!1),alert("Notification permission denied. Please enable it in your browser settings.")):(v(!1),S({notificationsEnabled:!1}))},O=F=>{const re=F.target.value;x(re),S({reminderTime:re})},K=async()=>{f(!0);try{await MV(),t(),s(),n("/")}catch(F){console.error("Logout error:",F),alert("Failed to sign out. Please try again.")}finally{f(!1)}},Q={totalHabits:r.length,publicHabits:r.filter(F=>F.isPublic).length,privateHabits:r.filter(F=>!F.isPublic).length,totalStreak:r.reduce((F,re)=>F+(re.currentStreak||0),0)};return w.jsxs("div",{className:"relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden bg-background-light dark:bg-background-dark font-display",children:[w.jsxs("div",{className:"flex-grow pb-28",children:[w.jsxs("header",{className:"flex items-center bg-background-light dark:bg-background-dark p-4 pb-2 sticky top-0 z-10",children:[w.jsx("button",{onClick:()=>n(-1),className:"flex size-12 shrink-0 items-center justify-start text-text-light-primary dark:text-text-dark-primary",children:w.jsx("span",{className:"material-symbols-outlined",children:"arrow_back_ios_new"})}),w.jsx("h1",{className:"flex-1 text-center text-lg font-bold leading-tight tracking-[-0.015em] text-text-light-primary dark:text-text-dark-primary",children:"Settings"}),w.jsx("div",{className:"w-12"})]}),w.jsxs("main",{className:"p-4 flex flex-col gap-6",children:[w.jsx("section",{className:"bg-content-light dark:bg-content-dark rounded-xl p-4",children:w.jsxs("div",{className:"flex items-center gap-4",children:[e!=null&&e.photoURL?w.jsx("img",{src:e.photoURL,alt:"Profile",className:"w-16 h-16 rounded-full object-cover",referrerPolicy:"no-referrer"}):w.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/20 flex items-center justify-center",children:w.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"person"})}),w.jsxs("div",{children:[w.jsx("h2",{className:"text-lg font-bold text-text-light-primary dark:text-text-dark-primary",children:(e==null?void 0:e.displayName)||"User"}),w.jsx("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary",children:e==null?void 0:e.email})]})]})}),w.jsxs("section",{className:"bg-content-light dark:bg-content-dark rounded-xl p-4",children:[w.jsx("h3",{className:"text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary uppercase mb-4",children:"Your Stats"}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{className:"text-center p-3 bg-primary/10 dark:bg-primary/20 rounded-lg",children:[w.jsx("p",{className:"text-2xl font-bold text-primary",children:Q.totalHabits}),w.jsx("p",{className:"text-xs text-text-light-secondary dark:text-text-dark-secondary",children:"Total Habits"})]}),w.jsxs("div",{className:"text-center p-3 bg-primary/10 dark:bg-primary/20 rounded-lg",children:[w.jsxs("p",{className:"text-2xl font-bold text-primary",children:[" ",Q.totalStreak]}),w.jsx("p",{className:"text-xs text-text-light-secondary dark:text-text-dark-secondary",children:"Total Streak Days"})]}),w.jsxs("div",{className:"text-center",children:[w.jsx("p",{className:"text-xl font-bold text-primary",children:Q.publicHabits}),w.jsx("p",{className:"text-xs text-text-light-secondary dark:text-text-dark-secondary",children:"Public"})]}),w.jsxs("div",{className:"text-center",children:[w.jsx("p",{className:"text-xl font-bold text-primary",children:Q.privateHabits}),w.jsx("p",{className:"text-xs text-text-light-secondary dark:text-text-dark-secondary",children:"Private"})]})]})]}),w.jsxs("section",{className:"bg-content-light dark:bg-content-dark rounded-xl p-4",children:[w.jsx("h3",{className:"text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary uppercase mb-4",children:"Preferences"}),w.jsx(Wa,{label:"Dark Mode",checked:a,onChange:D}),w.jsx("div",{className:"my-4 h-px bg-border-light dark:bg-border-dark/50"}),w.jsxs("div",{className:"flex flex-col gap-4",children:[w.jsx(Wa,{label:"Daily Reminders",checked:p,onChange:C}),p&&w.jsxs("div",{className:"flex items-center justify-between animation-slide-down",children:[w.jsx("span",{className:"text-text-light-primary dark:text-text-dark-primary",children:"Reminder Time"}),w.jsx("input",{type:"time",value:_,onChange:O,className:"bg-gray-100 dark:bg-gray-800 border-none rounded-lg p-2 text-text-light-primary dark:text-white focus:ring-2 focus:ring-primary"})]})]})]}),w.jsxs("section",{className:"bg-content-light dark:bg-content-dark rounded-xl p-4",children:[w.jsx("h3",{className:"text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary uppercase mb-4",children:"About"}),w.jsxs("div",{className:"space-y-3",children:[w.jsxs("div",{className:"flex justify-between",children:[w.jsx("span",{className:"text-text-light-primary dark:text-text-dark-primary",children:"Version"}),w.jsx("span",{className:"text-text-light-secondary dark:text-text-dark-secondary",children:"1.6.1"})]}),w.jsxs("div",{className:"flex justify-between",children:[w.jsx("span",{className:"text-text-light-primary dark:text-text-dark-primary",children:"Build"}),w.jsx("span",{className:"text-text-light-secondary dark:text-text-dark-secondary",children:"PWA"})]})]})]}),w.jsx(is,{fullWidth:!0,variant:"danger",onClick:K,isLoading:d,icon:"logout",children:"Sign Out"})]})]}),w.jsx(ol,{})]})}function Gi({children:n}){const{isAuthenticated:e,isLoading:t}=go();return B.useEffect(()=>{try{Gw()}catch(s){console.error("Notification check failed",s)}const r=setInterval(()=>{try{Gw()}catch(s){console.error("Notification interval failed",s)}},6e4);return()=>clearInterval(r)},[]),t?w.jsx("div",{className:"min-h-screen bg-background-light dark:bg-background-dark flex items-center justify-center",children:w.jsx(Eo,{size:"lg"})}):e?n:w.jsx(t1,{to:"/",replace:!0})}function mO(){const{user:n,setUser:e,setLoading:t}=go(),{loadHabits:r,loadCompletionsForDate:s,subscribeToHabits:a,clearAll:l}=cs();return B.useEffect(()=>{let d=null;const f=MN(fy,async p=>{if(p){e({uid:p.uid,displayName:p.displayName,email:p.email,photoURL:p.photoURL});try{const v=await QT(p.uid);v!=null&&v.settings&&localStorage.setItem("habitParams",JSON.stringify(v.settings));const{loadCompletionsForWeek:_,subscribeToHabits:x}=cs.getState();await _(p.uid),d=x(p.uid)}catch(v){console.error("Error loading user data:",v)}}else e(null),l(),d&&(d(),d=null);t(!1)});return()=>{f(),d&&d()}},[e,t,r,s,a,l]),B.useEffect(()=>{localStorage.getItem("theme")==="dark"&&document.documentElement.classList.add("dark")},[]),w.jsx(k1,{basename:"/habit-tracker-pwa/",children:w.jsx("div",{className:"min-h-screen bg-background-light dark:bg-background-dark font-display",children:w.jsxs(r1,{children:[w.jsx(Sr,{path:"/",element:w.jsx(UV,{})}),w.jsx(Sr,{path:"/dashboard",element:w.jsx(Gi,{children:w.jsx(HV,{})})}),w.jsx(Sr,{path:"/new-habit",element:w.jsx(Gi,{children:w.jsx(KV,{})})}),w.jsx(Sr,{path:"/edit-habit/:habitId",element:w.jsx(Gi,{children:w.jsx(XV,{})})}),w.jsx(Sr,{path:"/habit/:habitId",element:w.jsx(Gi,{children:w.jsx(tO,{})})}),w.jsx(Sr,{path:"/leaderboard",element:w.jsx(Gi,{children:w.jsx(nO,{})})}),w.jsx(Sr,{path:"/profile/:userId",element:w.jsx(Gi,{children:w.jsx(rO,{})})}),w.jsx(Sr,{path:"/feed",element:w.jsx(Gi,{children:w.jsx(fO,{})})}),w.jsx(Sr,{path:"/settings",element:w.jsx(Gi,{children:w.jsx(pO,{})})})]})})})}class gO extends Sa.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t),this.setState({errorInfo:t})}render(){return this.state.hasError?w.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-50 text-gray-900",children:[w.jsx("h1",{className:"text-2xl font-bold mb-4 text-red-600",children:"Something went wrong"}),w.jsx("p",{className:"mb-4 text-gray-700",children:"The application encountered an error."}),w.jsxs("div",{className:"bg-gray-100 p-4 rounded overflow-auto max-w-full text-left font-mono text-sm border border-gray-300",children:[w.jsx("p",{className:"font-bold text-red-500 mb-2",children:this.state.error&&this.state.error.toString()}),w.jsx("pre",{className:"text-xs text-gray-500 whitespace-pre-wrap",children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}),w.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Application"})]}):this.props.children}}const yO=["habits-storage","auth-storage"];yO.forEach(n=>{localStorage.getItem(n)&&(localStorage.removeItem(n),console.log(`[Init] Cleared old localStorage: ${n}`))});ck.createRoot(document.getElementById("root")).render(w.jsx(Sa.StrictMode,{children:w.jsx(gO,{children:w.jsx(mO,{})})}));
